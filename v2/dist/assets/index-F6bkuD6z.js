var cM=i=>{throw TypeError(i)};var nx=(i,e,t)=>e.has(i)||cM("Cannot "+t);var Oe=(i,e,t)=>(nx(i,e,"read from private field"),t?t.call(i):e.get(i)),vn=(i,e,t)=>e.has(i)?cM("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),Kt=(i,e,t,n)=>(nx(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),ar=(i,e,t)=>(nx(i,e,"access private method"),t);var _g=(i,e,t,n)=>({set _(r){Kt(i,e,r,t)},get _(){return Oe(i,e,n)}});function FI(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const s=Object.getOwnPropertyDescriptor(n,r);s&&Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function hS(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ix={exports:{}},cp={},rx={exports:{}},hn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uM;function zI(){if(uM)return hn;uM=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function v(X){return X===null||typeof X!="object"?null:(X=g&&X[g]||X["@@iterator"],typeof X=="function"?X:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,E={};function w(X,fe,Pe){this.props=X,this.context=fe,this.refs=E,this.updater=Pe||y}w.prototype.isReactComponent={},w.prototype.setState=function(X,fe){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,fe,"setState")},w.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function S(){}S.prototype=w.prototype;function A(X,fe,Pe){this.props=X,this.context=fe,this.refs=E,this.updater=Pe||y}var C=A.prototype=new S;C.constructor=A,M(C,w.prototype),C.isPureReactComponent=!0;var R=Array.isArray,O=Object.prototype.hasOwnProperty,U={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function z(X,fe,Pe){var le,Ee={},Ue=null,he=null;if(fe!=null)for(le in fe.ref!==void 0&&(he=fe.ref),fe.key!==void 0&&(Ue=""+fe.key),fe)O.call(fe,le)&&!F.hasOwnProperty(le)&&(Ee[le]=fe[le]);var Fe=arguments.length-2;if(Fe===1)Ee.children=Pe;else if(1<Fe){for(var Xe=Array(Fe),Ge=0;Ge<Fe;Ge++)Xe[Ge]=arguments[Ge+2];Ee.children=Xe}if(X&&X.defaultProps)for(le in Fe=X.defaultProps,Fe)Ee[le]===void 0&&(Ee[le]=Fe[le]);return{$$typeof:i,type:X,key:Ue,ref:he,props:Ee,_owner:U.current}}function k(X,fe){return{$$typeof:i,type:X.type,key:fe,ref:X.ref,props:X.props,_owner:X._owner}}function L(X){return typeof X=="object"&&X!==null&&X.$$typeof===i}function G(X){var fe={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(Pe){return fe[Pe]})}var J=/\/+/g;function Q(X,fe){return typeof X=="object"&&X!==null&&X.key!=null?G(""+X.key):fe.toString(36)}function ce(X,fe,Pe,le,Ee){var Ue=typeof X;(Ue==="undefined"||Ue==="boolean")&&(X=null);var he=!1;if(X===null)he=!0;else switch(Ue){case"string":case"number":he=!0;break;case"object":switch(X.$$typeof){case i:case e:he=!0}}if(he)return he=X,Ee=Ee(he),X=le===""?"."+Q(he,0):le,R(Ee)?(Pe="",X!=null&&(Pe=X.replace(J,"$&/")+"/"),ce(Ee,fe,Pe,"",function(Ge){return Ge})):Ee!=null&&(L(Ee)&&(Ee=k(Ee,Pe+(!Ee.key||he&&he.key===Ee.key?"":(""+Ee.key).replace(J,"$&/")+"/")+X)),fe.push(Ee)),1;if(he=0,le=le===""?".":le+":",R(X))for(var Fe=0;Fe<X.length;Fe++){Ue=X[Fe];var Xe=le+Q(Ue,Fe);he+=ce(Ue,fe,Pe,Xe,Ee)}else if(Xe=v(X),typeof Xe=="function")for(X=Xe.call(X),Fe=0;!(Ue=X.next()).done;)Ue=Ue.value,Xe=le+Q(Ue,Fe++),he+=ce(Ue,fe,Pe,Xe,Ee);else if(Ue==="object")throw fe=String(X),Error("Objects are not valid as a React child (found: "+(fe==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":fe)+"). If you meant to render a collection of children, use an array instead.");return he}function ge(X,fe,Pe){if(X==null)return X;var le=[],Ee=0;return ce(X,le,"","",function(Ue){return fe.call(Pe,Ue,Ee++)}),le}function ne(X){if(X._status===-1){var fe=X._result;fe=fe(),fe.then(function(Pe){(X._status===0||X._status===-1)&&(X._status=1,X._result=Pe)},function(Pe){(X._status===0||X._status===-1)&&(X._status=2,X._result=Pe)}),X._status===-1&&(X._status=0,X._result=fe)}if(X._status===1)return X._result.default;throw X._result}var de={current:null},B={transition:null},ie={ReactCurrentDispatcher:de,ReactCurrentBatchConfig:B,ReactCurrentOwner:U};function te(){throw Error("act(...) is not supported in production builds of React.")}return hn.Children={map:ge,forEach:function(X,fe,Pe){ge(X,function(){fe.apply(this,arguments)},Pe)},count:function(X){var fe=0;return ge(X,function(){fe++}),fe},toArray:function(X){return ge(X,function(fe){return fe})||[]},only:function(X){if(!L(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},hn.Component=w,hn.Fragment=t,hn.Profiler=r,hn.PureComponent=A,hn.StrictMode=n,hn.Suspense=d,hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,hn.act=te,hn.cloneElement=function(X,fe,Pe){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var le=M({},X.props),Ee=X.key,Ue=X.ref,he=X._owner;if(fe!=null){if(fe.ref!==void 0&&(Ue=fe.ref,he=U.current),fe.key!==void 0&&(Ee=""+fe.key),X.type&&X.type.defaultProps)var Fe=X.type.defaultProps;for(Xe in fe)O.call(fe,Xe)&&!F.hasOwnProperty(Xe)&&(le[Xe]=fe[Xe]===void 0&&Fe!==void 0?Fe[Xe]:fe[Xe])}var Xe=arguments.length-2;if(Xe===1)le.children=Pe;else if(1<Xe){Fe=Array(Xe);for(var Ge=0;Ge<Xe;Ge++)Fe[Ge]=arguments[Ge+2];le.children=Fe}return{$$typeof:i,type:X.type,key:Ee,ref:Ue,props:le,_owner:he}},hn.createContext=function(X){return X={$$typeof:a,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:s,_context:X},X.Consumer=X},hn.createElement=z,hn.createFactory=function(X){var fe=z.bind(null,X);return fe.type=X,fe},hn.createRef=function(){return{current:null}},hn.forwardRef=function(X){return{$$typeof:c,render:X}},hn.isValidElement=L,hn.lazy=function(X){return{$$typeof:m,_payload:{_status:-1,_result:X},_init:ne}},hn.memo=function(X,fe){return{$$typeof:h,type:X,compare:fe===void 0?null:fe}},hn.startTransition=function(X){var fe=B.transition;B.transition={};try{X()}finally{B.transition=fe}},hn.unstable_act=te,hn.useCallback=function(X,fe){return de.current.useCallback(X,fe)},hn.useContext=function(X){return de.current.useContext(X)},hn.useDebugValue=function(){},hn.useDeferredValue=function(X){return de.current.useDeferredValue(X)},hn.useEffect=function(X,fe){return de.current.useEffect(X,fe)},hn.useId=function(){return de.current.useId()},hn.useImperativeHandle=function(X,fe,Pe){return de.current.useImperativeHandle(X,fe,Pe)},hn.useInsertionEffect=function(X,fe){return de.current.useInsertionEffect(X,fe)},hn.useLayoutEffect=function(X,fe){return de.current.useLayoutEffect(X,fe)},hn.useMemo=function(X,fe){return de.current.useMemo(X,fe)},hn.useReducer=function(X,fe,Pe){return de.current.useReducer(X,fe,Pe)},hn.useRef=function(X){return de.current.useRef(X)},hn.useState=function(X){return de.current.useState(X)},hn.useSyncExternalStore=function(X,fe,Pe){return de.current.useSyncExternalStore(X,fe,Pe)},hn.useTransition=function(){return de.current.useTransition()},hn.version="18.3.1",hn}var fM;function Cy(){return fM||(fM=1,rx.exports=zI()),rx.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dM;function BI(){if(dM)return cp;dM=1;var i=Cy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(c,d,h){var m,g={},v=null,y=null;h!==void 0&&(v=""+h),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(y=d.ref);for(m in d)n.call(d,m)&&!s.hasOwnProperty(m)&&(g[m]=d[m]);if(c&&c.defaultProps)for(m in d=c.defaultProps,d)g[m]===void 0&&(g[m]=d[m]);return{$$typeof:e,type:c,key:v,ref:y,props:g,_owner:r.current}}return cp.Fragment=t,cp.jsx=a,cp.jsxs=a,cp}var hM;function VI(){return hM||(hM=1,ix.exports=BI()),ix.exports}var H=VI(),N=Cy();const Ls=hS(N),Ay=FI({__proto__:null,default:Ls},[N]);var Sg={},sx={exports:{}},Xr={},ox={exports:{}},ax={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pM;function HI(){return pM||(pM=1,(function(i){function e(B,ie){var te=B.length;B.push(ie);e:for(;0<te;){var X=te-1>>>1,fe=B[X];if(0<r(fe,ie))B[X]=ie,B[te]=fe,te=X;else break e}}function t(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var ie=B[0],te=B.pop();if(te!==ie){B[0]=te;e:for(var X=0,fe=B.length,Pe=fe>>>1;X<Pe;){var le=2*(X+1)-1,Ee=B[le],Ue=le+1,he=B[Ue];if(0>r(Ee,te))Ue<fe&&0>r(he,Ee)?(B[X]=he,B[Ue]=te,X=Ue):(B[X]=Ee,B[le]=te,X=le);else if(Ue<fe&&0>r(he,te))B[X]=he,B[Ue]=te,X=Ue;else break e}}return ie}function r(B,ie){var te=B.sortIndex-ie.sortIndex;return te!==0?te:B.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();i.unstable_now=function(){return a.now()-c}}var d=[],h=[],m=1,g=null,v=3,y=!1,M=!1,E=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(B){for(var ie=t(h);ie!==null;){if(ie.callback===null)n(h);else if(ie.startTime<=B)n(h),ie.sortIndex=ie.expirationTime,e(d,ie);else break;ie=t(h)}}function R(B){if(E=!1,C(B),!M)if(t(d)!==null)M=!0,ne(O);else{var ie=t(h);ie!==null&&de(R,ie.startTime-B)}}function O(B,ie){M=!1,E&&(E=!1,S(z),z=-1),y=!0;var te=v;try{for(C(ie),g=t(d);g!==null&&(!(g.expirationTime>ie)||B&&!G());){var X=g.callback;if(typeof X=="function"){g.callback=null,v=g.priorityLevel;var fe=X(g.expirationTime<=ie);ie=i.unstable_now(),typeof fe=="function"?g.callback=fe:g===t(d)&&n(d),C(ie)}else n(d);g=t(d)}if(g!==null)var Pe=!0;else{var le=t(h);le!==null&&de(R,le.startTime-ie),Pe=!1}return Pe}finally{g=null,v=te,y=!1}}var U=!1,F=null,z=-1,k=5,L=-1;function G(){return!(i.unstable_now()-L<k)}function J(){if(F!==null){var B=i.unstable_now();L=B;var ie=!0;try{ie=F(!0,B)}finally{ie?Q():(U=!1,F=null)}}else U=!1}var Q;if(typeof A=="function")Q=function(){A(J)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,ge=ce.port2;ce.port1.onmessage=J,Q=function(){ge.postMessage(null)}}else Q=function(){w(J,0)};function ne(B){F=B,U||(U=!0,Q())}function de(B,ie){z=w(function(){B(i.unstable_now())},ie)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(B){B.callback=null},i.unstable_continueExecution=function(){M||y||(M=!0,ne(O))},i.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<B?Math.floor(1e3/B):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_getFirstCallbackNode=function(){return t(d)},i.unstable_next=function(B){switch(v){case 1:case 2:case 3:var ie=3;break;default:ie=v}var te=v;v=ie;try{return B()}finally{v=te}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(B,ie){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var te=v;v=B;try{return ie()}finally{v=te}},i.unstable_scheduleCallback=function(B,ie,te){var X=i.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?X+te:X):te=X,B){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=te+fe,B={id:m++,callback:ie,priorityLevel:B,startTime:te,expirationTime:fe,sortIndex:-1},te>X?(B.sortIndex=te,e(h,B),t(d)===null&&B===t(h)&&(E?(S(z),z=-1):E=!0,de(R,te-X))):(B.sortIndex=fe,e(d,B),M||y||(M=!0,ne(O))),B},i.unstable_shouldYield=G,i.unstable_wrapCallback=function(B){var ie=v;return function(){var te=v;v=ie;try{return B.apply(this,arguments)}finally{v=te}}}})(ax)),ax}var mM;function GI(){return mM||(mM=1,ox.exports=HI()),ox.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gM;function WI(){if(gM)return Xr;gM=1;var i=Cy(),e=GI();function t(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,p=1;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function s(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(r[o]=l,o=0;o<l.length;o++)n.add(l[o])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function v(o){return d.call(g,o)?!0:d.call(m,o)?!1:h.test(o)?g[o]=!0:(m[o]=!0,!1)}function y(o,l,p,_){if(p!==null&&p.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return _?!1:p!==null?!p.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function M(o,l,p,_){if(l===null||typeof l>"u"||y(o,l,p,_))return!0;if(_)return!1;if(p!==null)switch(p.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function E(o,l,p,_,b,I,V){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=_,this.attributeNamespace=b,this.mustUseProperty=p,this.propertyName=o,this.type=l,this.sanitizeURL=I,this.removeEmptyString=V}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){w[o]=new E(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];w[l]=new E(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){w[o]=new E(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){w[o]=new E(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){w[o]=new E(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){w[o]=new E(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){w[o]=new E(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){w[o]=new E(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){w[o]=new E(o,5,!1,o.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function A(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(S,A);w[l]=new E(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(S,A);w[l]=new E(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(S,A);w[l]=new E(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){w[o]=new E(o,1,!1,o.toLowerCase(),null,!1,!1)}),w.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){w[o]=new E(o,1,!1,o.toLowerCase(),null,!0,!0)});function C(o,l,p,_){var b=w.hasOwnProperty(l)?w[l]:null;(b!==null?b.type!==0:_||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(M(l,p,b,_)&&(p=null),_||b===null?v(l)&&(p===null?o.removeAttribute(l):o.setAttribute(l,""+p)):b.mustUseProperty?o[b.propertyName]=p===null?b.type===3?!1:"":p:(l=b.attributeName,_=b.attributeNamespace,p===null?o.removeAttribute(l):(b=b.type,p=b===3||b===4&&p===!0?"":""+p,_?o.setAttributeNS(_,l,p):o.setAttribute(l,p))))}var R=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),U=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),G=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),ge=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),de=Symbol.for("react.offscreen"),B=Symbol.iterator;function ie(o){return o===null||typeof o!="object"?null:(o=B&&o[B]||o["@@iterator"],typeof o=="function"?o:null)}var te=Object.assign,X;function fe(o){if(X===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);X=l&&l[1]||""}return`
`+X+o}var Pe=!1;function le(o,l){if(!o||Pe)return"";Pe=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Me){var _=Me}Reflect.construct(o,[],l)}else{try{l.call()}catch(Me){_=Me}o.call(l.prototype)}else{try{throw Error()}catch(Me){_=Me}o()}}catch(Me){if(Me&&_&&typeof Me.stack=="string"){for(var b=Me.stack.split(`
`),I=_.stack.split(`
`),V=b.length-1,$=I.length-1;1<=V&&0<=$&&b[V]!==I[$];)$--;for(;1<=V&&0<=$;V--,$--)if(b[V]!==I[$]){if(V!==1||$!==1)do if(V--,$--,0>$||b[V]!==I[$]){var se=`
`+b[V].replace(" at new "," at ");return o.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",o.displayName)),se}while(1<=V&&0<=$);break}}}finally{Pe=!1,Error.prepareStackTrace=p}return(o=o?o.displayName||o.name:"")?fe(o):""}function Ee(o){switch(o.tag){case 5:return fe(o.type);case 16:return fe("Lazy");case 13:return fe("Suspense");case 19:return fe("SuspenseList");case 0:case 2:case 15:return o=le(o.type,!1),o;case 11:return o=le(o.type.render,!1),o;case 1:return o=le(o.type,!0),o;default:return""}}function Ue(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case F:return"Fragment";case U:return"Portal";case k:return"Profiler";case z:return"StrictMode";case Q:return"Suspense";case ce:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case G:return(o.displayName||"Context")+".Consumer";case L:return(o._context.displayName||"Context")+".Provider";case J:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case ge:return l=o.displayName||null,l!==null?l:Ue(o.type)||"Memo";case ne:l=o._payload,o=o._init;try{return Ue(o(l))}catch{}}return null}function he(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ue(l);case 8:return l===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Fe(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Xe(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ge(o){var l=Xe(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),_=""+o[l];if(!o.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var b=p.get,I=p.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return b.call(this)},set:function(V){_=""+V,I.call(this,V)}}),Object.defineProperty(o,l,{enumerable:p.enumerable}),{getValue:function(){return _},setValue:function(V){_=""+V},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Qe(o){o._valueTracker||(o._valueTracker=Ge(o))}function Se(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var p=l.getValue(),_="";return o&&(_=Xe(o)?o.checked?"true":"false":o.value),o=_,o!==p?(l.setValue(o),!0):!1}function Le(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function K(o,l){var p=l.checked;return te({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??o._wrapperState.initialChecked})}function ht(o,l){var p=l.defaultValue==null?"":l.defaultValue,_=l.checked!=null?l.checked:l.defaultChecked;p=Fe(l.value!=null?l.value:p),o._wrapperState={initialChecked:_,initialValue:p,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Be(o,l){l=l.checked,l!=null&&C(o,"checked",l,!1)}function nt(o,l){Be(o,l);var p=Fe(l.value),_=l.type;if(p!=null)_==="number"?(p===0&&o.value===""||o.value!=p)&&(o.value=""+p):o.value!==""+p&&(o.value=""+p);else if(_==="submit"||_==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?bt(o,l.type,p):l.hasOwnProperty("defaultValue")&&bt(o,l.type,Fe(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function Ke(o,l,p){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var _=l.type;if(!(_!=="submit"&&_!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,p||l===o.value||(o.value=l),o.defaultValue=l}p=o.name,p!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,p!==""&&(o.name=p)}function bt(o,l,p){(l!=="number"||Le(o.ownerDocument)!==o)&&(p==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+p&&(o.defaultValue=""+p))}var tt=Array.isArray;function Y(o,l,p,_){if(o=o.options,l){l={};for(var b=0;b<p.length;b++)l["$"+p[b]]=!0;for(p=0;p<o.length;p++)b=l.hasOwnProperty("$"+o[p].value),o[p].selected!==b&&(o[p].selected=b),b&&_&&(o[p].defaultSelected=!0)}else{for(p=""+Fe(p),l=null,b=0;b<o.length;b++){if(o[b].value===p){o[b].selected=!0,_&&(o[b].defaultSelected=!0);return}l!==null||o[b].disabled||(l=o[b])}l!==null&&(l.selected=!0)}}function W(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return te({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function ye(o,l){var p=l.value;if(p==null){if(p=l.children,l=l.defaultValue,p!=null){if(l!=null)throw Error(t(92));if(tt(p)){if(1<p.length)throw Error(t(93));p=p[0]}l=p}l==null&&(l=""),p=l}o._wrapperState={initialValue:Fe(p)}}function Re(o,l){var p=Fe(l.value),_=Fe(l.defaultValue);p!=null&&(p=""+p,p!==o.value&&(o.value=p),l.defaultValue==null&&o.defaultValue!==p&&(o.defaultValue=p)),_!=null&&(o.defaultValue=""+_)}function ze(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function De(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yt(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?De(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Je,ct=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,p,_,b){MSApp.execUnsafeLocalFunction(function(){return o(l,p,_,b)})}:o})(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(Je=Je||document.createElement("div"),Je.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Je.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function Xt(o,l){if(l){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=l;return}}o.textContent=l}var We={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gt=["Webkit","ms","Moz","O"];Object.keys(We).forEach(function(o){gt.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),We[l]=We[o]})});function Dt(o,l,p){return l==null||typeof l=="boolean"||l===""?"":p||typeof l!="number"||l===0||We.hasOwnProperty(o)&&We[o]?(""+l).trim():l+"px"}function kt(o,l){o=o.style;for(var p in l)if(l.hasOwnProperty(p)){var _=p.indexOf("--")===0,b=Dt(p,l[p],_);p==="float"&&(p="cssFloat"),_?o.setProperty(p,b):o[p]=b}}var dt=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function re(o,l){if(l){if(dt[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Ie(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rt=null;function ee(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ye=null,Te=null,Ne=null;function lt(o){if(o=Gs(o)){if(typeof Ye!="function")throw Error(t(280));var l=o.stateNode;l&&(l=zf(l),Ye(o.stateNode,o.type,l))}}function st(o){Te?Ne?Ne.push(o):Ne=[o]:Te=o}function Lt(){if(Te){var o=Te,l=Ne;if(Ne=Te=null,lt(o),l)for(o=0;o<l.length;o++)lt(l[o])}}function pn(o,l){return o(l)}function Nn(){}var en=!1;function Kn(o,l,p){if(en)return o(l,p);en=!0;try{return pn(o,l,p)}finally{en=!1,(Te!==null||Ne!==null)&&(Nn(),Lt())}}function ei(o,l){var p=o.stateNode;if(p===null)return null;var _=zf(p);if(_===null)return null;p=_[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(o=o.type,_=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!_;break e;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(t(231,l,typeof p));return p}var el=!1;if(c)try{var wo={};Object.defineProperty(wo,"passive",{get:function(){el=!0}}),window.addEventListener("test",wo,wo),window.removeEventListener("test",wo,wo)}catch{el=!1}function vs(o,l,p,_,b,I,V,$,se){var Me=Array.prototype.slice.call(arguments,3);try{l.apply(p,Me)}catch(He){this.onError(He)}}var Jr=!1,Jo=null,es=!1,Mo=null,Ju={onError:function(o){Jr=!0,Jo=o}};function tl(o,l,p,_,b,I,V,$,se){Jr=!1,Jo=null,vs.apply(Ju,arguments)}function ef(o,l,p,_,b,I,V,$,se){if(tl.apply(this,arguments),Jr){if(Jr){var Me=Jo;Jr=!1,Jo=null}else throw Error(t(198));es||(es=!0,Mo=Me)}}function ys(o){var l=o,p=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(p=l.return),o=l.return;while(o)}return l.tag===3?p:null}function tf(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function nf(o){if(ys(o)!==o)throw Error(t(188))}function rf(o){var l=o.alternate;if(!l){if(l=ys(o),l===null)throw Error(t(188));return l!==o?null:o}for(var p=o,_=l;;){var b=p.return;if(b===null)break;var I=b.alternate;if(I===null){if(_=b.return,_!==null){p=_;continue}break}if(b.child===I.child){for(I=b.child;I;){if(I===p)return nf(b),o;if(I===_)return nf(b),l;I=I.sibling}throw Error(t(188))}if(p.return!==_.return)p=b,_=I;else{for(var V=!1,$=b.child;$;){if($===p){V=!0,p=b,_=I;break}if($===_){V=!0,_=b,p=I;break}$=$.sibling}if(!V){for($=I.child;$;){if($===p){V=!0,p=I,_=b;break}if($===_){V=!0,_=I,p=b;break}$=$.sibling}if(!V)throw Error(t(189))}}if(p.alternate!==_)throw Error(t(190))}if(p.tag!==3)throw Error(t(188));return p.stateNode.current===p?o:l}function sf(o){return o=rf(o),o!==null?of(o):null}function of(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=of(o);if(l!==null)return l;o=o.sibling}return null}var j=e.unstable_scheduleCallback,pe=e.unstable_cancelCallback,we=e.unstable_shouldYield,be=e.unstable_requestPaint,oe=e.unstable_now,je=e.unstable_getCurrentPriorityLevel,it=e.unstable_ImmediatePriority,ft=e.unstable_UserBlockingPriority,xt=e.unstable_NormalPriority,Vt=e.unstable_LowPriority,Ot=e.unstable_IdlePriority,St=null,pt=null;function Nt(o){if(pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(St,o,void 0,(o.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:At,on=Math.log,Gt=Math.LN2;function At(o){return o>>>=0,o===0?32:31-(on(o)/Gt|0)|0}var Rn=64,Ht=4194304;function ti(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Dr(o,l){var p=o.pendingLanes;if(p===0)return 0;var _=0,b=o.suspendedLanes,I=o.pingedLanes,V=p&268435455;if(V!==0){var $=V&~b;$!==0?_=ti($):(I&=V,I!==0&&(_=ti(I)))}else V=p&~b,V!==0?_=ti(V):I!==0&&(_=ti(I));if(_===0)return 0;if(l!==0&&l!==_&&(l&b)===0&&(b=_&-_,I=l&-l,b>=I||b===16&&(I&4194240)!==0))return l;if((_&4)!==0&&(_|=p&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=_;0<l;)p=31-sn(l),b=1<<p,_|=o[p],l&=~b;return _}function Di(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xs(o,l){for(var p=o.suspendedLanes,_=o.pingedLanes,b=o.expirationTimes,I=o.pendingLanes;0<I;){var V=31-sn(I),$=1<<V,se=b[V];se===-1?(($&p)===0||($&_)!==0)&&(b[V]=Di($,l)):se<=l&&(o.expiredLanes|=$),I&=~$}}function Tn(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Fn(){var o=Rn;return Rn<<=1,(Rn&4194240)===0&&(Rn=64),o}function Oi(o){for(var l=[],p=0;31>p;p++)l.push(o);return l}function Zn(o,l,p){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-sn(l),o[l]=p}function Ui(o,l){var p=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var _=o.eventTimes;for(o=o.expirationTimes;0<p;){var b=31-sn(p),I=1<<b;l[b]=0,_[b]=-1,o[b]=-1,p&=~I}}function _s(o,l){var p=o.entangledLanes|=l;for(o=o.entanglements;p;){var _=31-sn(p),b=1<<_;b&l|o[_]&l&&(o[_]|=l),p&=~b}}var tn=0;function nl(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var pc,mh,Am,af,lf,ea=!1,cf=[],Ss=null,an=null,Os=null,ta=new Map,il=new Map,Eo=[],C0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function li(o,l){switch(o){case"focusin":case"focusout":Ss=null;break;case"dragenter":case"dragleave":an=null;break;case"mouseover":case"mouseout":Os=null;break;case"pointerover":case"pointerout":ta.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":il.delete(l.pointerId)}}function na(o,l,p,_,b,I){return o===null||o.nativeEvent!==I?(o={blockedOn:l,domEventName:p,eventSystemFlags:_,nativeEvent:I,targetContainers:[b]},l!==null&&(l=Gs(l),l!==null&&mh(l)),o):(o.eventSystemFlags|=_,l=o.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),o)}function A0(o,l,p,_,b){switch(l){case"focusin":return Ss=na(Ss,o,l,p,_,b),!0;case"dragenter":return an=na(an,o,l,p,_,b),!0;case"mouseover":return Os=na(Os,o,l,p,_,b),!0;case"pointerover":var I=b.pointerId;return ta.set(I,na(ta.get(I)||null,o,l,p,_,b)),!0;case"gotpointercapture":return I=b.pointerId,il.set(I,na(il.get(I)||null,o,l,p,_,b)),!0}return!1}function uf(o){var l=Io(o.target);if(l!==null){var p=ys(l);if(p!==null){if(l=p.tag,l===13){if(l=tf(p),l!==null){o.blockedOn=l,lf(o.priority,function(){Am(p)});return}}else if(l===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function ff(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var p=Ur(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(p===null){p=o.nativeEvent;var _=new p.constructor(p.type,p);rt=_,p.target.dispatchEvent(_),rt=null}else return l=Gs(p),l!==null&&mh(l),o.blockedOn=p,!1;l.shift()}return!0}function mc(o,l,p){ff(o)&&p.delete(l)}function ws(){ea=!1,Ss!==null&&ff(Ss)&&(Ss=null),an!==null&&ff(an)&&(an=null),Os!==null&&ff(Os)&&(Os=null),ta.forEach(mc),il.forEach(mc)}function gc(o,l){o.blockedOn===l&&(o.blockedOn=null,ea||(ea=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ws)))}function vc(o){function l(b){return gc(b,o)}if(0<cf.length){gc(cf[0],o);for(var p=1;p<cf.length;p++){var _=cf[p];_.blockedOn===o&&(_.blockedOn=null)}}for(Ss!==null&&gc(Ss,o),an!==null&&gc(an,o),Os!==null&&gc(Os,o),ta.forEach(l),il.forEach(l),p=0;p<Eo.length;p++)_=Eo[p],_.blockedOn===o&&(_.blockedOn=null);for(;0<Eo.length&&(p=Eo[0],p.blockedOn===null);)uf(p),p.blockedOn===null&&Eo.shift()}var Wi=R.ReactCurrentBatchConfig,Or=!0;function df(o,l,p,_){var b=tn,I=Wi.transition;Wi.transition=null;try{tn=1,hf(o,l,p,_)}finally{tn=b,Wi.transition=I}}function gh(o,l,p,_){var b=tn,I=Wi.transition;Wi.transition=null;try{tn=4,hf(o,l,p,_)}finally{tn=b,Wi.transition=I}}function hf(o,l,p,_){if(Or){var b=Ur(o,l,p,_);if(b===null)Lf(o,l,_,pf,p),li(o,_);else if(A0(b,o,l,p,_))_.stopPropagation();else if(li(o,_),l&4&&-1<C0.indexOf(o)){for(;b!==null;){var I=Gs(b);if(I!==null&&pc(I),I=Ur(o,l,p,_),I===null&&Lf(o,l,_,pf,p),I===b)break;b=I}b!==null&&_.stopPropagation()}else Lf(o,l,_,null,p)}}var pf=null;function Ur(o,l,p,_){if(pf=null,o=ee(_),o=Io(o),o!==null)if(l=ys(o),l===null)o=null;else if(p=l.tag,p===13){if(o=tf(l),o!==null)return o;o=null}else if(p===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return pf=o,null}function Rm(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(je()){case it:return 1;case ft:return 4;case xt:case Vt:return 16;case Ot:return 536870912;default:return 16}default:return 16}}var ts=null,vh=null,er=null;function yc(){if(er)return er;var o,l=vh,p=l.length,_,b="value"in ts?ts.value:ts.textContent,I=b.length;for(o=0;o<p&&l[o]===b[o];o++);var V=p-o;for(_=1;_<=V&&l[p-_]===b[I-_];_++);return er=b.slice(o,1<_?1-_:void 0)}function ia(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Us(){return!0}function mf(){return!1}function ji(o){function l(p,_,b,I,V){this._reactName=p,this._targetInst=b,this.type=_,this.nativeEvent=I,this.target=V,this.currentTarget=null;for(var $ in o)o.hasOwnProperty($)&&(p=o[$],this[$]=p?p(I):I[$]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?Us:mf,this.isPropagationStopped=mf,this}return te(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Us)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Us)},persist:function(){},isPersistent:Us}),l}var ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xc=ji(ra),sa=te({},ra,{view:0,detail:0}),rl=ji(sa),tr,kr,Fr,sl=te({},sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bo,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Fr&&(Fr&&o.type==="mousemove"?(tr=o.screenX-Fr.screenX,kr=o.screenY-Fr.screenY):kr=tr=0,Fr=o),tr)},movementY:function(o){return"movementY"in o?o.movementY:kr}}),yh=ji(sl),ks=te({},sl,{dataTransfer:0}),To=ji(ks),gf=te({},sa,{relatedTarget:0}),vf=ji(gf),yf=te({},ra,{animationName:0,elapsedTime:0,pseudoElement:0}),Pm=ji(yf),Im=te({},ra,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),xh=ji(Im),xf=te({},ra,{data:0}),_h=ji(xf),Nm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ol(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=Sh[o])?!!l[o]:!1}function bo(){return ol}var _f=te({},sa,{key:function(o){if(o.key){var l=Nm[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=ia(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Lm[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bo,charCode:function(o){return o.type==="keypress"?ia(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?ia(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Sf=ji(_f),zr=te({},sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gr=ji(zr),oa=te({},sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bo}),Fs=ji(oa),zs=te({},ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),aa=ji(zs),Dm=te({},sl,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),wh=ji(Dm),Mh=[9,13,27,32],Xi=c&&"CompositionEvent"in window,Si=null;c&&"documentMode"in document&&(Si=document.documentMode);var Vn=c&&"TextEvent"in window&&!Si,al=c&&(!Xi||Si&&8<Si&&11>=Si),Br=" ",Eh=!1;function Th(o,l){switch(o){case"keyup":return Mh.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wf(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Co=!1;function Om(o,l){switch(o){case"compositionend":return wf(l);case"keypress":return l.which!==32?null:(Eh=!0,Br);case"textInput":return o=l.data,o===Br&&Eh?null:o;default:return null}}function _c(o,l){if(Co)return o==="compositionend"||!Xi&&Th(o,l)?(o=yc(),er=vh=ts=null,Co=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return al&&l.locale!=="ko"?null:l.data;default:return null}}var ll={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mf(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!ll[o.type]:l==="textarea"}function cl(o,l,p,_){st(_),l=Df(l,"onChange"),0<l.length&&(p=new xc("onChange","change",null,p,_),o.push({event:p,listeners:l}))}var Ao=null,ul=null;function Um(o){pl(o,0)}function Bs(o){var l=$n(o);if(Se(l))return o}function km(o,l){if(o==="change")return l}var fl=!1;if(c){var nr;if(c){var la="oninput"in document;if(!la){var ca=document.createElement("div");ca.setAttribute("oninput","return;"),la=typeof ca.oninput=="function"}nr=la}else nr=!1;fl=nr&&(!document.documentMode||9<document.documentMode)}function ns(){Ao&&(Ao.detachEvent("onpropertychange",Ef),ul=Ao=null)}function Ef(o){if(o.propertyName==="value"&&Bs(ul)){var l=[];cl(l,ul,o,ee(o)),Kn(Um,l)}}function dl(o,l,p){o==="focusin"?(ns(),Ao=l,ul=p,Ao.attachEvent("onpropertychange",Ef)):o==="focusout"&&ns()}function Fm(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Bs(ul)}function bh(o,l){if(o==="click")return Bs(l)}function Gn(o,l){if(o==="input"||o==="change")return Bs(l)}function Tf(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var vr=typeof Object.is=="function"?Object.is:Tf;function ua(o,l){if(vr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var p=Object.keys(o),_=Object.keys(l);if(p.length!==_.length)return!1;for(_=0;_<p.length;_++){var b=p[_];if(!d.call(l,b)||!vr(o[b],l[b]))return!1}return!0}function Sc(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function yr(o,l){var p=Sc(o);o=0;for(var _;p;){if(p.nodeType===3){if(_=o+p.textContent.length,o<=l&&_>=l)return{node:p,offset:l-o};o=_}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Sc(p)}}function fa(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?fa(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function Wn(){for(var o=window,l=Le();l instanceof o.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch{p=!1}if(p)o=l.contentWindow;else break;l=Le(o.document)}return l}function hi(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function pi(o){var l=Wn(),p=o.focusedElem,_=o.selectionRange;if(l!==p&&p&&p.ownerDocument&&fa(p.ownerDocument.documentElement,p)){if(_!==null&&hi(p)){if(l=_.start,o=_.end,o===void 0&&(o=l),"selectionStart"in p)p.selectionStart=l,p.selectionEnd=Math.min(o,p.value.length);else if(o=(l=p.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var b=p.textContent.length,I=Math.min(_.start,b);_=_.end===void 0?I:Math.min(_.end,b),!o.extend&&I>_&&(b=_,_=I,I=b),b=yr(p,I);var V=yr(p,_);b&&V&&(o.rangeCount!==1||o.anchorNode!==b.node||o.anchorOffset!==b.offset||o.focusNode!==V.node||o.focusOffset!==V.offset)&&(l=l.createRange(),l.setStart(b.node,b.offset),o.removeAllRanges(),I>_?(o.addRange(l),o.extend(V.node,V.offset)):(l.setEnd(V.node,V.offset),o.addRange(l)))}}for(l=[],o=p;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<l.length;p++)o=l[p],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var bf=c&&"documentMode"in document&&11>=document.documentMode,Ms=null,da=null,wc=null,mi=!1;function Cf(o,l,p){var _=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;mi||Ms==null||Ms!==Le(_)||(_=Ms,"selectionStart"in _&&hi(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),wc&&ua(wc,_)||(wc=_,_=Df(da,"onSelect"),0<_.length&&(l=new xc("onSelect","select",null,l,p),o.push({event:l,listeners:_}),l.target=Ms)))}function hl(o,l){var p={};return p[o.toLowerCase()]=l.toLowerCase(),p["Webkit"+o]="webkit"+l,p["Moz"+o]="moz"+l,p}var Ro={animationend:hl("Animation","AnimationEnd"),animationiteration:hl("Animation","AnimationIteration"),animationstart:hl("Animation","AnimationStart"),transitionend:hl("Transition","TransitionEnd")},is={},rs={};c&&(rs=document.createElement("div").style,"AnimationEvent"in window||(delete Ro.animationend.animation,delete Ro.animationiteration.animation,delete Ro.animationstart.animation),"TransitionEvent"in window||delete Ro.transitionend.transition);function Es(o){if(is[o])return is[o];if(!Ro[o])return o;var l=Ro[o],p;for(p in l)if(l.hasOwnProperty(p)&&p in rs)return is[o]=l[p];return o}var Mc=Es("animationend"),Ec=Es("animationiteration"),Ch=Es("animationstart"),Ah=Es("transitionend"),Rh=new Map,Ph="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vs(o,l){Rh.set(o,l),s(l,[o])}for(var Af=0;Af<Ph.length;Af++){var Tc=Ph[Af],bc=Tc.toLowerCase(),zm=Tc[0].toUpperCase()+Tc.slice(1);Vs(bc,"on"+zm)}Vs(Mc,"onAnimationEnd"),Vs(Ec,"onAnimationIteration"),Vs(Ch,"onAnimationStart"),Vs("dblclick","onDoubleClick"),Vs("focusin","onFocus"),Vs("focusout","onBlur"),Vs(Ah,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Po));function Pf(o,l,p){var _=o.type||"unknown-event";o.currentTarget=p,ef(_,l,void 0,o),o.currentTarget=null}function pl(o,l){l=(l&4)!==0;for(var p=0;p<o.length;p++){var _=o[p],b=_.event;_=_.listeners;e:{var I=void 0;if(l)for(var V=_.length-1;0<=V;V--){var $=_[V],se=$.instance,Me=$.currentTarget;if($=$.listener,se!==I&&b.isPropagationStopped())break e;Pf(b,$,Me),I=se}else for(V=0;V<_.length;V++){if($=_[V],se=$.instance,Me=$.currentTarget,$=$.listener,se!==I&&b.isPropagationStopped())break e;Pf(b,$,Me),I=se}}}if(es)throw o=Mo,es=!1,Mo=null,o}function Ln(o,l){var p=l[ma];p===void 0&&(p=l[ma]=new Set);var _=o+"__bubble";p.has(_)||(Nf(l,o,2,!1),p.add(_))}function If(o,l,p){var _=0;l&&(_|=4),Nf(p,o,_,l)}var Cc="_reactListening"+Math.random().toString(36).slice(2);function ml(o){if(!o[Cc]){o[Cc]=!0,n.forEach(function(p){p!=="selectionchange"&&(Rf.has(p)||If(p,!1,o),If(p,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Cc]||(l[Cc]=!0,If("selectionchange",!1,l))}}function Nf(o,l,p,_){switch(Rm(l)){case 1:var b=df;break;case 4:b=gh;break;default:b=hf}p=b.bind(null,l,p,o),b=void 0,!el||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),_?b!==void 0?o.addEventListener(l,p,{capture:!0,passive:b}):o.addEventListener(l,p,!0):b!==void 0?o.addEventListener(l,p,{passive:b}):o.addEventListener(l,p,!1)}function Lf(o,l,p,_,b){var I=_;if((l&1)===0&&(l&2)===0&&_!==null)e:for(;;){if(_===null)return;var V=_.tag;if(V===3||V===4){var $=_.stateNode.containerInfo;if($===b||$.nodeType===8&&$.parentNode===b)break;if(V===4)for(V=_.return;V!==null;){var se=V.tag;if((se===3||se===4)&&(se=V.stateNode.containerInfo,se===b||se.nodeType===8&&se.parentNode===b))return;V=V.return}for(;$!==null;){if(V=Io($),V===null)return;if(se=V.tag,se===5||se===6){_=I=V;continue e}$=$.parentNode}}_=_.return}Kn(function(){var Me=I,He=ee(p),qe=[];e:{var Ve=Rh.get(o);if(Ve!==void 0){var mt=xc,Mt=o;switch(o){case"keypress":if(ia(p)===0)break e;case"keydown":case"keyup":mt=Sf;break;case"focusin":Mt="focus",mt=vf;break;case"focusout":Mt="blur",mt=vf;break;case"beforeblur":case"afterblur":mt=vf;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=yh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=To;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=Fs;break;case Mc:case Ec:case Ch:mt=Pm;break;case Ah:mt=aa;break;case"scroll":mt=rl;break;case"wheel":mt=wh;break;case"copy":case"cut":case"paste":mt=xh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=gr}var Ct=(l&4)!==0,ui=!Ct&&o==="scroll",ve=Ct?Ve!==null?Ve+"Capture":null:Ve;Ct=[];for(var ae=Me,xe;ae!==null;){xe=ae;var $e=xe.stateNode;if(xe.tag===5&&$e!==null&&(xe=$e,ve!==null&&($e=ei(ae,ve),$e!=null&&Ct.push(gl(ae,$e,xe)))),ui)break;ae=ae.return}0<Ct.length&&(Ve=new mt(Ve,Mt,null,p,He),qe.push({event:Ve,listeners:Ct}))}}if((l&7)===0){e:{if(Ve=o==="mouseover"||o==="pointerover",mt=o==="mouseout"||o==="pointerout",Ve&&p!==rt&&(Mt=p.relatedTarget||p.fromElement)&&(Io(Mt)||Mt[xr]))break e;if((mt||Ve)&&(Ve=He.window===He?He:(Ve=He.ownerDocument)?Ve.defaultView||Ve.parentWindow:window,mt?(Mt=p.relatedTarget||p.toElement,mt=Me,Mt=Mt?Io(Mt):null,Mt!==null&&(ui=ys(Mt),Mt!==ui||Mt.tag!==5&&Mt.tag!==6)&&(Mt=null)):(mt=null,Mt=Me),mt!==Mt)){if(Ct=yh,$e="onMouseLeave",ve="onMouseEnter",ae="mouse",(o==="pointerout"||o==="pointerover")&&(Ct=gr,$e="onPointerLeave",ve="onPointerEnter",ae="pointer"),ui=mt==null?Ve:$n(mt),xe=Mt==null?Ve:$n(Mt),Ve=new Ct($e,ae+"leave",mt,p,He),Ve.target=ui,Ve.relatedTarget=xe,$e=null,Io(He)===Me&&(Ct=new Ct(ve,ae+"enter",Mt,p,He),Ct.target=xe,Ct.relatedTarget=ui,$e=Ct),ui=$e,mt&&Mt)t:{for(Ct=mt,ve=Mt,ae=0,xe=Ct;xe;xe=ha(xe))ae++;for(xe=0,$e=ve;$e;$e=ha($e))xe++;for(;0<ae-xe;)Ct=ha(Ct),ae--;for(;0<xe-ae;)ve=ha(ve),xe--;for(;ae--;){if(Ct===ve||ve!==null&&Ct===ve.alternate)break t;Ct=ha(Ct),ve=ha(ve)}Ct=null}else Ct=null;mt!==null&&Bm(qe,Ve,mt,Ct,!1),Mt!==null&&ui!==null&&Bm(qe,ui,Mt,Ct,!0)}}e:{if(Ve=Me?$n(Me):window,mt=Ve.nodeName&&Ve.nodeName.toLowerCase(),mt==="select"||mt==="input"&&Ve.type==="file")var It=km;else if(Mf(Ve))if(fl)It=Gn;else{It=Fm;var Ft=dl}else(mt=Ve.nodeName)&&mt.toLowerCase()==="input"&&(Ve.type==="checkbox"||Ve.type==="radio")&&(It=bh);if(It&&(It=It(o,Me))){cl(qe,It,p,He);break e}Ft&&Ft(o,Ve,Me),o==="focusout"&&(Ft=Ve._wrapperState)&&Ft.controlled&&Ve.type==="number"&&bt(Ve,"number",Ve.value)}switch(Ft=Me?$n(Me):window,o){case"focusin":(Mf(Ft)||Ft.contentEditable==="true")&&(Ms=Ft,da=Me,wc=null);break;case"focusout":wc=da=Ms=null;break;case"mousedown":mi=!0;break;case"contextmenu":case"mouseup":case"dragend":mi=!1,Cf(qe,p,He);break;case"selectionchange":if(bf)break;case"keydown":case"keyup":Cf(qe,p,He)}var zt;if(Xi)e:{switch(o){case"compositionstart":var jt="onCompositionStart";break e;case"compositionend":jt="onCompositionEnd";break e;case"compositionupdate":jt="onCompositionUpdate";break e}jt=void 0}else Co?Th(o,p)&&(jt="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(jt="onCompositionStart");jt&&(al&&p.locale!=="ko"&&(Co||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&Co&&(zt=yc()):(ts=He,vh="value"in ts?ts.value:ts.textContent,Co=!0)),Ft=Df(Me,jt),0<Ft.length&&(jt=new _h(jt,o,null,p,He),qe.push({event:jt,listeners:Ft}),zt?jt.data=zt:(zt=wf(p),zt!==null&&(jt.data=zt)))),(zt=Vn?Om(o,p):_c(o,p))&&(Me=Df(Me,"onBeforeInput"),0<Me.length&&(He=new _h("onBeforeInput","beforeinput",null,p,He),qe.push({event:He,listeners:Me}),He.data=zt))}pl(qe,l)})}function gl(o,l,p){return{instance:o,listener:l,currentTarget:p}}function Df(o,l){for(var p=l+"Capture",_=[];o!==null;){var b=o,I=b.stateNode;b.tag===5&&I!==null&&(b=I,I=ei(o,p),I!=null&&_.unshift(gl(o,I,b)),I=ei(o,l),I!=null&&_.push(gl(o,I,b))),o=o.return}return _}function ha(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Bm(o,l,p,_,b){for(var I=l._reactName,V=[];p!==null&&p!==_;){var $=p,se=$.alternate,Me=$.stateNode;if(se!==null&&se===_)break;$.tag===5&&Me!==null&&($=Me,b?(se=ei(p,I),se!=null&&V.unshift(gl(p,se,$))):b||(se=ei(p,I),se!=null&&V.push(gl(p,se,$)))),p=p.return}V.length!==0&&o.push({event:l,listeners:V})}var R0=/\r\n?/g,Vm=/\u0000|\uFFFD/g;function Ih(o){return(typeof o=="string"?o:""+o).replace(R0,`
`).replace(Vm,"")}function Ac(o,l,p){if(l=Ih(l),Ih(o)!==l&&p)throw Error(t(425))}function Rc(){}var vl=null,Nh=null;function Lh(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Dh=typeof setTimeout=="function"?setTimeout:void 0,Oh=typeof clearTimeout=="function"?clearTimeout:void 0,Of=typeof Promise=="function"?Promise:void 0,P0=typeof queueMicrotask=="function"?queueMicrotask:typeof Of<"u"?function(o){return Of.resolve(null).then(o).catch(Hm)}:Dh;function Hm(o){setTimeout(function(){throw o})}function Uf(o,l){var p=l,_=0;do{var b=p.nextSibling;if(o.removeChild(p),b&&b.nodeType===8)if(p=b.data,p==="/$"){if(_===0){o.removeChild(b),vc(l);return}_--}else p!=="$"&&p!=="$?"&&p!=="$!"||_++;p=b}while(p);vc(l)}function Hs(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function Uh(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(l===0)return o;l--}else p==="/$"&&l++}o=o.previousSibling}return null}var pa=Math.random().toString(36).slice(2),ci="__reactFiber$"+pa,yl="__reactProps$"+pa,xr="__reactContainer$"+pa,ma="__reactEvents$"+pa,kf="__reactListeners$"+pa,Ff="__reactHandles$"+pa;function Io(o){var l=o[ci];if(l)return l;for(var p=o.parentNode;p;){if(l=p[xr]||p[ci]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(o=Uh(o);o!==null;){if(p=o[ci])return p;o=Uh(o)}return l}o=p,p=o.parentNode}return null}function Gs(o){return o=o[ci]||o[xr],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function $n(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function zf(o){return o[yl]||null}var kh=[],gi=-1;function Xn(o){return{current:o}}function Dn(o){0>gi||(o.current=kh[gi],kh[gi]=null,gi--)}function Pn(o,l){gi++,kh[gi]=o.current,o.current=l}var Ws={},wi=Xn(Ws),Yi=Xn(!1),js=Ws;function ga(o,l){var p=o.type.contextTypes;if(!p)return Ws;var _=o.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===l)return _.__reactInternalMemoizedMaskedChildContext;var b={},I;for(I in p)b[I]=l[I];return _&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=b),b}function ki(o){return o=o.childContextTypes,o!=null}function Pc(){Dn(Yi),Dn(wi)}function Fh(o,l,p){if(wi.current!==Ws)throw Error(t(168));Pn(wi,l),Pn(Yi,p)}function Ic(o,l,p){var _=o.stateNode;if(l=l.childContextTypes,typeof _.getChildContext!="function")return p;_=_.getChildContext();for(var b in _)if(!(b in l))throw Error(t(108,he(o)||"Unknown",b));return te({},p,_)}function va(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Ws,js=wi.current,Pn(wi,o),Pn(Yi,Yi.current),!0}function zh(o,l,p){var _=o.stateNode;if(!_)throw Error(t(169));p?(o=Ic(o,l,js),_.__reactInternalMemoizedMergedChildContext=o,Dn(Yi),Dn(wi),Pn(wi,o)):Dn(Yi),Pn(Yi,p)}var ss=null,Nc=!1,Bf=!1;function Lc(o){ss===null?ss=[o]:ss.push(o)}function Gm(o){Nc=!0,Lc(o)}function Ts(){if(!Bf&&ss!==null){Bf=!0;var o=0,l=tn;try{var p=ss;for(tn=1;o<p.length;o++){var _=p[o];do _=_(!0);while(_!==null)}ss=null,Nc=!1}catch(b){throw ss!==null&&(ss=ss.slice(o+1)),j(it,Ts),b}finally{tn=l,Bf=!1}}return null}var ya=[],ir=0,Vf=null,Hf=0,qi=[],vi=0,xa=null,et=1,Vr="";function Xs(o,l){ya[ir++]=Hf,ya[ir++]=Vf,Vf=o,Hf=l}function Bh(o,l,p){qi[vi++]=et,qi[vi++]=Vr,qi[vi++]=xa,xa=o;var _=et;o=Vr;var b=32-sn(_)-1;_&=~(1<<b),p+=1;var I=32-sn(l)+b;if(30<I){var V=b-b%5;I=(_&(1<<V)-1).toString(32),_>>=V,b-=V,et=1<<32-sn(l)+b|p<<b|_,Vr=I+o}else et=1<<I|p<<b|_,Vr=o}function Vh(o){o.return!==null&&(Xs(o,1),Bh(o,1,0))}function Ys(o){for(;o===Vf;)Vf=ya[--ir],ya[ir]=null,Hf=ya[--ir],ya[ir]=null;for(;o===xa;)xa=qi[--vi],qi[vi]=null,Vr=qi[--vi],qi[vi]=null,et=qi[--vi],qi[vi]=null}var Mi=null,Ki=null,zn=!1,Hr=null;function Hh(o,l){var p=Ps(5,null,null,0);p.elementType="DELETED",p.stateNode=l,p.return=o,l=o.deletions,l===null?(o.deletions=[p],o.flags|=16):l.push(p)}function Gh(o,l){switch(o.tag){case 5:var p=o.type;return l=l.nodeType!==1||p.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,Mi=o,Ki=Hs(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,Mi=o,Ki=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(p=xa!==null?{id:et,overflow:Vr}:null,o.memoizedState={dehydrated:l,treeContext:p,retryLane:1073741824},p=Ps(18,null,null,0),p.stateNode=l,p.return=o,o.child=p,Mi=o,Ki=null,!0):!1;default:return!1}}function Gf(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Wf(o){if(zn){var l=Ki;if(l){var p=l;if(!Gh(o,l)){if(Gf(o))throw Error(t(418));l=Hs(p.nextSibling);var _=Mi;l&&Gh(o,l)?Hh(_,p):(o.flags=o.flags&-4097|2,zn=!1,Mi=o)}}else{if(Gf(o))throw Error(t(418));o.flags=o.flags&-4097|2,zn=!1,Mi=o}}}function jf(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Mi=o}function xl(o){if(o!==Mi)return!1;if(!zn)return jf(o),zn=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!Lh(o.type,o.memoizedProps)),l&&(l=Ki)){if(Gf(o))throw Wh(),Error(t(418));for(;l;)Hh(o,l),l=Hs(l.nextSibling)}if(jf(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var p=o.data;if(p==="/$"){if(l===0){Ki=Hs(o.nextSibling);break e}l--}else p!=="$"&&p!=="$!"&&p!=="$?"||l++}o=o.nextSibling}Ki=null}}else Ki=Mi?Hs(o.stateNode.nextSibling):null;return!0}function Wh(){for(var o=Ki;o;)o=Hs(o.nextSibling)}function No(){Ki=Mi=null,zn=!1}function _l(o){Hr===null?Hr=[o]:Hr.push(o)}var I0=R.ReactCurrentBatchConfig;function Dc(o,l,p){if(o=p.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(t(309));var _=p.stateNode}if(!_)throw Error(t(147,o));var b=_,I=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===I?l.ref:(l=function(V){var $=b.refs;V===null?delete $[I]:$[I]=V},l._stringRef=I,l)}if(typeof o!="string")throw Error(t(284));if(!p._owner)throw Error(t(290,o))}return o}function Oc(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function jh(o){var l=o._init;return l(o._payload)}function Xh(o){function l(ve,ae){if(o){var xe=ve.deletions;xe===null?(ve.deletions=[ae],ve.flags|=16):xe.push(ae)}}function p(ve,ae){if(!o)return null;for(;ae!==null;)l(ve,ae),ae=ae.sibling;return null}function _(ve,ae){for(ve=new Map;ae!==null;)ae.key!==null?ve.set(ae.key,ae):ve.set(ae.index,ae),ae=ae.sibling;return ve}function b(ve,ae){return ve=Il(ve,ae),ve.index=0,ve.sibling=null,ve}function I(ve,ae,xe){return ve.index=xe,o?(xe=ve.alternate,xe!==null?(xe=xe.index,xe<ae?(ve.flags|=2,ae):xe):(ve.flags|=2,ae)):(ve.flags|=1048576,ae)}function V(ve){return o&&ve.alternate===null&&(ve.flags|=2),ve}function $(ve,ae,xe,$e){return ae===null||ae.tag!==6?(ae=Z0(xe,ve.mode,$e),ae.return=ve,ae):(ae=b(ae,xe),ae.return=ve,ae)}function se(ve,ae,xe,$e){var It=xe.type;return It===F?He(ve,ae,xe.props.children,$e,xe.key):ae!==null&&(ae.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===ne&&jh(It)===ae.type)?($e=b(ae,xe.props),$e.ref=Dc(ve,ae,xe),$e.return=ve,$e):($e=dg(xe.type,xe.key,xe.props,null,ve.mode,$e),$e.ref=Dc(ve,ae,xe),$e.return=ve,$e)}function Me(ve,ae,xe,$e){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==xe.containerInfo||ae.stateNode.implementation!==xe.implementation?(ae=$0(xe,ve.mode,$e),ae.return=ve,ae):(ae=b(ae,xe.children||[]),ae.return=ve,ae)}function He(ve,ae,xe,$e,It){return ae===null||ae.tag!==7?(ae=Qc(xe,ve.mode,$e,It),ae.return=ve,ae):(ae=b(ae,xe),ae.return=ve,ae)}function qe(ve,ae,xe){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return ae=Z0(""+ae,ve.mode,xe),ae.return=ve,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case O:return xe=dg(ae.type,ae.key,ae.props,null,ve.mode,xe),xe.ref=Dc(ve,null,ae),xe.return=ve,xe;case U:return ae=$0(ae,ve.mode,xe),ae.return=ve,ae;case ne:var $e=ae._init;return qe(ve,$e(ae._payload),xe)}if(tt(ae)||ie(ae))return ae=Qc(ae,ve.mode,xe,null),ae.return=ve,ae;Oc(ve,ae)}return null}function Ve(ve,ae,xe,$e){var It=ae!==null?ae.key:null;if(typeof xe=="string"&&xe!==""||typeof xe=="number")return It!==null?null:$(ve,ae,""+xe,$e);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case O:return xe.key===It?se(ve,ae,xe,$e):null;case U:return xe.key===It?Me(ve,ae,xe,$e):null;case ne:return It=xe._init,Ve(ve,ae,It(xe._payload),$e)}if(tt(xe)||ie(xe))return It!==null?null:He(ve,ae,xe,$e,null);Oc(ve,xe)}return null}function mt(ve,ae,xe,$e,It){if(typeof $e=="string"&&$e!==""||typeof $e=="number")return ve=ve.get(xe)||null,$(ae,ve,""+$e,It);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case O:return ve=ve.get($e.key===null?xe:$e.key)||null,se(ae,ve,$e,It);case U:return ve=ve.get($e.key===null?xe:$e.key)||null,Me(ae,ve,$e,It);case ne:var Ft=$e._init;return mt(ve,ae,xe,Ft($e._payload),It)}if(tt($e)||ie($e))return ve=ve.get(xe)||null,He(ae,ve,$e,It,null);Oc(ae,$e)}return null}function Mt(ve,ae,xe,$e){for(var It=null,Ft=null,zt=ae,jt=ae=0,Vi=null;zt!==null&&jt<xe.length;jt++){zt.index>jt?(Vi=zt,zt=null):Vi=zt.sibling;var En=Ve(ve,zt,xe[jt],$e);if(En===null){zt===null&&(zt=Vi);break}o&&zt&&En.alternate===null&&l(ve,zt),ae=I(En,ae,jt),Ft===null?It=En:Ft.sibling=En,Ft=En,zt=Vi}if(jt===xe.length)return p(ve,zt),zn&&Xs(ve,jt),It;if(zt===null){for(;jt<xe.length;jt++)zt=qe(ve,xe[jt],$e),zt!==null&&(ae=I(zt,ae,jt),Ft===null?It=zt:Ft.sibling=zt,Ft=zt);return zn&&Xs(ve,jt),It}for(zt=_(ve,zt);jt<xe.length;jt++)Vi=mt(zt,ve,jt,xe[jt],$e),Vi!==null&&(o&&Vi.alternate!==null&&zt.delete(Vi.key===null?jt:Vi.key),ae=I(Vi,ae,jt),Ft===null?It=Vi:Ft.sibling=Vi,Ft=Vi);return o&&zt.forEach(function(Nl){return l(ve,Nl)}),zn&&Xs(ve,jt),It}function Ct(ve,ae,xe,$e){var It=ie(xe);if(typeof It!="function")throw Error(t(150));if(xe=It.call(xe),xe==null)throw Error(t(151));for(var Ft=It=null,zt=ae,jt=ae=0,Vi=null,En=xe.next();zt!==null&&!En.done;jt++,En=xe.next()){zt.index>jt?(Vi=zt,zt=null):Vi=zt.sibling;var Nl=Ve(ve,zt,En.value,$e);if(Nl===null){zt===null&&(zt=Vi);break}o&&zt&&Nl.alternate===null&&l(ve,zt),ae=I(Nl,ae,jt),Ft===null?It=Nl:Ft.sibling=Nl,Ft=Nl,zt=Vi}if(En.done)return p(ve,zt),zn&&Xs(ve,jt),It;if(zt===null){for(;!En.done;jt++,En=xe.next())En=qe(ve,En.value,$e),En!==null&&(ae=I(En,ae,jt),Ft===null?It=En:Ft.sibling=En,Ft=En);return zn&&Xs(ve,jt),It}for(zt=_(ve,zt);!En.done;jt++,En=xe.next())En=mt(zt,ve,jt,En.value,$e),En!==null&&(o&&En.alternate!==null&&zt.delete(En.key===null?jt:En.key),ae=I(En,ae,jt),Ft===null?It=En:Ft.sibling=En,Ft=En);return o&&zt.forEach(function(kI){return l(ve,kI)}),zn&&Xs(ve,jt),It}function ui(ve,ae,xe,$e){if(typeof xe=="object"&&xe!==null&&xe.type===F&&xe.key===null&&(xe=xe.props.children),typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case O:e:{for(var It=xe.key,Ft=ae;Ft!==null;){if(Ft.key===It){if(It=xe.type,It===F){if(Ft.tag===7){p(ve,Ft.sibling),ae=b(Ft,xe.props.children),ae.return=ve,ve=ae;break e}}else if(Ft.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===ne&&jh(It)===Ft.type){p(ve,Ft.sibling),ae=b(Ft,xe.props),ae.ref=Dc(ve,Ft,xe),ae.return=ve,ve=ae;break e}p(ve,Ft);break}else l(ve,Ft);Ft=Ft.sibling}xe.type===F?(ae=Qc(xe.props.children,ve.mode,$e,xe.key),ae.return=ve,ve=ae):($e=dg(xe.type,xe.key,xe.props,null,ve.mode,$e),$e.ref=Dc(ve,ae,xe),$e.return=ve,ve=$e)}return V(ve);case U:e:{for(Ft=xe.key;ae!==null;){if(ae.key===Ft)if(ae.tag===4&&ae.stateNode.containerInfo===xe.containerInfo&&ae.stateNode.implementation===xe.implementation){p(ve,ae.sibling),ae=b(ae,xe.children||[]),ae.return=ve,ve=ae;break e}else{p(ve,ae);break}else l(ve,ae);ae=ae.sibling}ae=$0(xe,ve.mode,$e),ae.return=ve,ve=ae}return V(ve);case ne:return Ft=xe._init,ui(ve,ae,Ft(xe._payload),$e)}if(tt(xe))return Mt(ve,ae,xe,$e);if(ie(xe))return Ct(ve,ae,xe,$e);Oc(ve,xe)}return typeof xe=="string"&&xe!==""||typeof xe=="number"?(xe=""+xe,ae!==null&&ae.tag===6?(p(ve,ae.sibling),ae=b(ae,xe),ae.return=ve,ve=ae):(p(ve,ae),ae=Z0(xe,ve.mode,$e),ae.return=ve,ve=ae),V(ve)):p(ve,ae)}return ui}var _a=Xh(!0),Uc=Xh(!1),Sa=Xn(null),wa=null,qs=null,Sl=null;function Ma(){Sl=qs=wa=null}function kc(o){var l=Sa.current;Dn(Sa),o._currentValue=l}function Fc(o,l,p){for(;o!==null;){var _=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,_!==null&&(_.childLanes|=l)):_!==null&&(_.childLanes&l)!==l&&(_.childLanes|=l),o===p)break;o=o.return}}function Lo(o,l){wa=o,Sl=qs=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(nn=!0),o.firstContext=null)}function _r(o){var l=o._currentValue;if(Sl!==o)if(o={context:o,memoizedValue:l,next:null},qs===null){if(wa===null)throw Error(t(308));qs=o,wa.dependencies={lanes:0,firstContext:o}}else qs=qs.next=o;return l}var Ks=null;function Yh(o){Ks===null?Ks=[o]:Ks.push(o)}function zc(o,l,p,_){var b=l.interleaved;return b===null?(p.next=p,Yh(l)):(p.next=b.next,b.next=p),l.interleaved=p,os(o,_)}function os(o,l){o.lanes|=l;var p=o.alternate;for(p!==null&&(p.lanes|=l),p=o,o=o.return;o!==null;)o.childLanes|=l,p=o.alternate,p!==null&&(p.childLanes|=l),p=o,o=o.return;return p.tag===3?p.stateNode:null}var bn=!1;function Qt(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qn(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Cn(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function Hn(o,l,p){var _=o.updateQueue;if(_===null)return null;if(_=_.shared,(_n&2)!==0){var b=_.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),_.pending=l,os(o,p)}return b=_.interleaved,b===null?(l.next=l,Yh(_)):(l.next=b.next,b.next=l),_.interleaved=l,os(o,p)}function Fi(o,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194240)!==0)){var _=l.lanes;_&=o.pendingLanes,p|=_,l.lanes=p,_s(o,p)}}function Ea(o,l){var p=o.updateQueue,_=o.alternate;if(_!==null&&(_=_.updateQueue,p===_)){var b=null,I=null;if(p=p.firstBaseUpdate,p!==null){do{var V={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};I===null?b=I=V:I=I.next=V,p=p.next}while(p!==null);I===null?b=I=l:I=I.next=l}else b=I=l;p={baseState:_.baseState,firstBaseUpdate:b,lastBaseUpdate:I,shared:_.shared,effects:_.effects},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=l:o.next=l,p.lastBaseUpdate=l}function Yn(o,l,p,_){var b=o.updateQueue;bn=!1;var I=b.firstBaseUpdate,V=b.lastBaseUpdate,$=b.shared.pending;if($!==null){b.shared.pending=null;var se=$,Me=se.next;se.next=null,V===null?I=Me:V.next=Me,V=se;var He=o.alternate;He!==null&&(He=He.updateQueue,$=He.lastBaseUpdate,$!==V&&($===null?He.firstBaseUpdate=Me:$.next=Me,He.lastBaseUpdate=se))}if(I!==null){var qe=b.baseState;V=0,He=Me=se=null,$=I;do{var Ve=$.lane,mt=$.eventTime;if((_&Ve)===Ve){He!==null&&(He=He.next={eventTime:mt,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var Mt=o,Ct=$;switch(Ve=l,mt=p,Ct.tag){case 1:if(Mt=Ct.payload,typeof Mt=="function"){qe=Mt.call(mt,qe,Ve);break e}qe=Mt;break e;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=Ct.payload,Ve=typeof Mt=="function"?Mt.call(mt,qe,Ve):Mt,Ve==null)break e;qe=te({},qe,Ve);break e;case 2:bn=!0}}$.callback!==null&&$.lane!==0&&(o.flags|=64,Ve=b.effects,Ve===null?b.effects=[$]:Ve.push($))}else mt={eventTime:mt,lane:Ve,tag:$.tag,payload:$.payload,callback:$.callback,next:null},He===null?(Me=He=mt,se=qe):He=He.next=mt,V|=Ve;if($=$.next,$===null){if($=b.shared.pending,$===null)break;Ve=$,$=Ve.next,Ve.next=null,b.lastBaseUpdate=Ve,b.shared.pending=null}}while(!0);if(He===null&&(se=qe),b.baseState=se,b.firstBaseUpdate=Me,b.lastBaseUpdate=He,l=b.shared.interleaved,l!==null){b=l;do V|=b.lane,b=b.next;while(b!==l)}else I===null&&(b.shared.lanes=0);qc|=V,o.lanes=V,o.memoizedState=qe}}function wl(o,l,p){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var _=o[l],b=_.callback;if(b!==null){if(_.callback=null,_=p,typeof b!="function")throw Error(t(191,b));b.call(_)}}}var bs={},Sr=Xn(bs),Ta=Xn(bs),Zs=Xn(bs);function ni(o){if(o===bs)throw Error(t(174));return o}function Bc(o,l){switch(Pn(Zs,l),Pn(Ta,o),Pn(Sr,bs),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:yt(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=yt(l,o)}Dn(Sr),Pn(Sr,l)}function Do(){Dn(Sr),Dn(Ta),Dn(Zs)}function ba(o){ni(Zs.current);var l=ni(Sr.current),p=yt(l,o.type);l!==p&&(Pn(Ta,o),Pn(Sr,p))}function Ml(o){Ta.current===o&&(Dn(Sr),Dn(Ta))}var Bn=Xn(0);function as(o){for(var l=o;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var El=[];function Cs(){for(var o=0;o<El.length;o++)El[o]._workInProgressVersionPrimary=null;El.length=0}var Ca=R.ReactCurrentDispatcher,Aa=R.ReactCurrentBatchConfig,$s=0,On=null,qn=null,yn=null,ls=!1,zi=!1,Oo=0,rr=0;function Ei(){throw Error(t(321))}function Vc(o,l){if(l===null)return!1;for(var p=0;p<l.length&&p<o.length;p++)if(!vr(o[p],l[p]))return!1;return!0}function Hc(o,l,p,_,b,I){if($s=I,On=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Ca.current=o===null||o.memoizedState===null?Zm:$m,o=p(_,b),zi){I=0;do{if(zi=!1,Oo=0,25<=I)throw Error(t(301));I+=1,yn=qn=null,l.updateQueue=null,Ca.current=Qm,o=p(_,b)}while(zi)}if(Ca.current=Qf,l=qn!==null&&qn.next!==null,$s=0,yn=qn=On=null,ls=!1,l)throw Error(t(300));return o}function qh(){var o=Oo!==0;return Oo=0,o}function Ti(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?On.memoizedState=yn=o:yn=yn.next=o,yn}function wr(){if(qn===null){var o=On.alternate;o=o!==null?o.memoizedState:null}else o=qn.next;var l=yn===null?On.memoizedState:yn.next;if(l!==null)yn=l,qn=o;else{if(o===null)throw Error(t(310));qn=o,o={memoizedState:qn.memoizedState,baseState:qn.baseState,baseQueue:qn.baseQueue,queue:qn.queue,next:null},yn===null?On.memoizedState=yn=o:yn=yn.next=o}return yn}function Tl(o,l){return typeof l=="function"?l(o):l}function Gc(o){var l=wr(),p=l.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=o;var _=qn,b=_.baseQueue,I=p.pending;if(I!==null){if(b!==null){var V=b.next;b.next=I.next,I.next=V}_.baseQueue=b=I,p.pending=null}if(b!==null){I=b.next,_=_.baseState;var $=V=null,se=null,Me=I;do{var He=Me.lane;if(($s&He)===He)se!==null&&(se=se.next={lane:0,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null}),_=Me.hasEagerState?Me.eagerState:o(_,Me.action);else{var qe={lane:He,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null};se===null?($=se=qe,V=_):se=se.next=qe,On.lanes|=He,qc|=He}Me=Me.next}while(Me!==null&&Me!==I);se===null?V=_:se.next=$,vr(_,l.memoizedState)||(nn=!0),l.memoizedState=_,l.baseState=V,l.baseQueue=se,p.lastRenderedState=_}if(o=p.interleaved,o!==null){b=o;do I=b.lane,On.lanes|=I,qc|=I,b=b.next;while(b!==o)}else b===null&&(p.lanes=0);return[l.memoizedState,p.dispatch]}function Qs(o){var l=wr(),p=l.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=o;var _=p.dispatch,b=p.pending,I=l.memoizedState;if(b!==null){p.pending=null;var V=b=b.next;do I=o(I,V.action),V=V.next;while(V!==b);vr(I,l.memoizedState)||(nn=!0),l.memoizedState=I,l.baseQueue===null&&(l.baseState=I),p.lastRenderedState=I}return[I,_]}function Kh(){}function Zh(o,l){var p=On,_=wr(),b=l(),I=!vr(_.memoizedState,b);if(I&&(_.memoizedState=b,nn=!0),_=_.queue,Jh(Wm.bind(null,p,_,o),[o]),_.getSnapshot!==l||I||yn!==null&&yn.memoizedState.tag&1){if(p.flags|=2048,cs(9,Wc.bind(null,p,_,b,l),void 0,null),Bi===null)throw Error(t(349));($s&30)!==0||Xf(p,l,b)}return b}function Xf(o,l,p){o.flags|=16384,o={getSnapshot:l,value:p},l=On.updateQueue,l===null?(l={lastEffect:null,stores:null},On.updateQueue=l,l.stores=[o]):(p=l.stores,p===null?l.stores=[o]:p.push(o))}function Wc(o,l,p,_){l.value=p,l.getSnapshot=_,jm(l)&&$h(o)}function Wm(o,l,p){return p(function(){jm(l)&&$h(o)})}function jm(o){var l=o.getSnapshot;o=o.value;try{var p=l();return!vr(o,p)}catch{return!0}}function $h(o){var l=os(o,1);l!==null&&io(l,o,1,-1)}function Qh(o){var l=Ti();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tl,lastRenderedState:o},l.queue=o,o=o.dispatch=Ra.bind(null,On,o),[l.memoizedState,o]}function cs(o,l,p,_){return o={tag:o,create:l,destroy:p,deps:_,next:null},l=On.updateQueue,l===null?(l={lastEffect:null,stores:null},On.updateQueue=l,l.lastEffect=o.next=o):(p=l.lastEffect,p===null?l.lastEffect=o.next=o:(_=p.next,p.next=o,o.next=_,l.lastEffect=o)),o}function Xm(){return wr().memoizedState}function As(o,l,p,_){var b=Ti();On.flags|=o,b.memoizedState=cs(1|l,p,void 0,_===void 0?null:_)}function jc(o,l,p,_){var b=wr();_=_===void 0?null:_;var I=void 0;if(qn!==null){var V=qn.memoizedState;if(I=V.destroy,_!==null&&Vc(_,V.deps)){b.memoizedState=cs(l,p,I,_);return}}On.flags|=o,b.memoizedState=cs(1|l,p,I,_)}function Zi(o,l){return As(8390656,8,o,l)}function Jh(o,l){return jc(2048,8,o,l)}function ep(o,l){return jc(4,2,o,l)}function Ym(o,l){return jc(4,4,o,l)}function qm(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function tp(o,l,p){return p=p!=null?p.concat([o]):null,jc(4,4,qm.bind(null,l,o),p)}function Yf(){}function Km(o,l){var p=wr();l=l===void 0?null:l;var _=p.memoizedState;return _!==null&&l!==null&&Vc(l,_[1])?_[0]:(p.memoizedState=[o,l],o)}function Mr(o,l){var p=wr();l=l===void 0?null:l;var _=p.memoizedState;return _!==null&&l!==null&&Vc(l,_[1])?_[0]:(o=o(),p.memoizedState=[o,l],o)}function qf(o,l,p){return($s&21)===0?(o.baseState&&(o.baseState=!1,nn=!0),o.memoizedState=p):(vr(p,l)||(p=Fn(),On.lanes|=p,qc|=p,o.baseState=!0),l)}function N0(o,l){var p=tn;tn=p!==0&&4>p?p:4,o(!0);var _=Aa.transition;Aa.transition={};try{o(!1),l()}finally{tn=p,Aa.transition=_}}function Js(){return wr().memoizedState}function Kf(o,l,p){var _=Rl(o);if(p={lane:_,action:p,hasEagerState:!1,eagerState:null,next:null},Xc(o))Zf(l,p);else if(p=zc(o,l,p,_),p!==null){var b=Tr();io(p,o,_,b),$f(p,l,_)}}function Ra(o,l,p){var _=Rl(o),b={lane:_,action:p,hasEagerState:!1,eagerState:null,next:null};if(Xc(o))Zf(l,b);else{var I=o.alternate;if(o.lanes===0&&(I===null||I.lanes===0)&&(I=l.lastRenderedReducer,I!==null))try{var V=l.lastRenderedState,$=I(V,p);if(b.hasEagerState=!0,b.eagerState=$,vr($,V)){var se=l.interleaved;se===null?(b.next=b,Yh(l)):(b.next=se.next,se.next=b),l.interleaved=b;return}}catch{}finally{}p=zc(o,l,b,_),p!==null&&(b=Tr(),io(p,o,_,b),$f(p,l,_))}}function Xc(o){var l=o.alternate;return o===On||l!==null&&l===On}function Zf(o,l){zi=ls=!0;var p=o.pending;p===null?l.next=l:(l.next=p.next,p.next=l),o.pending=l}function $f(o,l,p){if((p&4194240)!==0){var _=l.lanes;_&=o.pendingLanes,p|=_,l.lanes=p,_s(o,p)}}var Qf={readContext:_r,useCallback:Ei,useContext:Ei,useEffect:Ei,useImperativeHandle:Ei,useInsertionEffect:Ei,useLayoutEffect:Ei,useMemo:Ei,useReducer:Ei,useRef:Ei,useState:Ei,useDebugValue:Ei,useDeferredValue:Ei,useTransition:Ei,useMutableSource:Ei,useSyncExternalStore:Ei,useId:Ei,unstable_isNewReconciler:!1},Zm={readContext:_r,useCallback:function(o,l){return Ti().memoizedState=[o,l===void 0?null:l],o},useContext:_r,useEffect:Zi,useImperativeHandle:function(o,l,p){return p=p!=null?p.concat([o]):null,As(4194308,4,qm.bind(null,l,o),p)},useLayoutEffect:function(o,l){return As(4194308,4,o,l)},useInsertionEffect:function(o,l){return As(4,2,o,l)},useMemo:function(o,l){var p=Ti();return l=l===void 0?null:l,o=o(),p.memoizedState=[o,l],o},useReducer:function(o,l,p){var _=Ti();return l=p!==void 0?p(l):l,_.memoizedState=_.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},_.queue=o,o=o.dispatch=Kf.bind(null,On,o),[_.memoizedState,o]},useRef:function(o){var l=Ti();return o={current:o},l.memoizedState=o},useState:Qh,useDebugValue:Yf,useDeferredValue:function(o){return Ti().memoizedState=o},useTransition:function(){var o=Qh(!1),l=o[0];return o=N0.bind(null,o[1]),Ti().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,p){var _=On,b=Ti();if(zn){if(p===void 0)throw Error(t(407));p=p()}else{if(p=l(),Bi===null)throw Error(t(349));($s&30)!==0||Xf(_,l,p)}b.memoizedState=p;var I={value:p,getSnapshot:l};return b.queue=I,Zi(Wm.bind(null,_,I,o),[o]),_.flags|=2048,cs(9,Wc.bind(null,_,I,p,l),void 0,null),p},useId:function(){var o=Ti(),l=Bi.identifierPrefix;if(zn){var p=Vr,_=et;p=(_&~(1<<32-sn(_)-1)).toString(32)+p,l=":"+l+"R"+p,p=Oo++,0<p&&(l+="H"+p.toString(32)),l+=":"}else p=rr++,l=":"+l+"r"+p.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},$m={readContext:_r,useCallback:Km,useContext:_r,useEffect:Jh,useImperativeHandle:tp,useInsertionEffect:ep,useLayoutEffect:Ym,useMemo:Mr,useReducer:Gc,useRef:Xm,useState:function(){return Gc(Tl)},useDebugValue:Yf,useDeferredValue:function(o){var l=wr();return qf(l,qn.memoizedState,o)},useTransition:function(){var o=Gc(Tl)[0],l=wr().memoizedState;return[o,l]},useMutableSource:Kh,useSyncExternalStore:Zh,useId:Js,unstable_isNewReconciler:!1},Qm={readContext:_r,useCallback:Km,useContext:_r,useEffect:Jh,useImperativeHandle:tp,useInsertionEffect:ep,useLayoutEffect:Ym,useMemo:Mr,useReducer:Qs,useRef:Xm,useState:function(){return Qs(Tl)},useDebugValue:Yf,useDeferredValue:function(o){var l=wr();return qn===null?l.memoizedState=o:qf(l,qn.memoizedState,o)},useTransition:function(){var o=Qs(Tl)[0],l=wr().memoizedState;return[o,l]},useMutableSource:Kh,useSyncExternalStore:Zh,useId:Js,unstable_isNewReconciler:!1};function Gr(o,l){if(o&&o.defaultProps){l=te({},l),o=o.defaultProps;for(var p in o)l[p]===void 0&&(l[p]=o[p]);return l}return l}function Yc(o,l,p,_){l=o.memoizedState,p=p(_,l),p=p==null?l:te({},l,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var Jf={isMounted:function(o){return(o=o._reactInternals)?ys(o)===o:!1},enqueueSetState:function(o,l,p){o=o._reactInternals;var _=Tr(),b=Rl(o),I=Cn(_,b);I.payload=l,p!=null&&(I.callback=p),l=Hn(o,I,b),l!==null&&(io(l,o,b,_),Fi(l,o,b))},enqueueReplaceState:function(o,l,p){o=o._reactInternals;var _=Tr(),b=Rl(o),I=Cn(_,b);I.tag=1,I.payload=l,p!=null&&(I.callback=p),l=Hn(o,I,b),l!==null&&(io(l,o,b,_),Fi(l,o,b))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var p=Tr(),_=Rl(o),b=Cn(p,_);b.tag=2,l!=null&&(b.callback=l),l=Hn(o,b,_),l!==null&&(io(l,o,_,p),Fi(l,o,_))}};function Jm(o,l,p,_,b,I,V){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(_,I,V):l.prototype&&l.prototype.isPureReactComponent?!ua(p,_)||!ua(b,I):!0}function u(o,l,p){var _=!1,b=Ws,I=l.contextType;return typeof I=="object"&&I!==null?I=_r(I):(b=ki(l)?js:wi.current,_=l.contextTypes,I=(_=_!=null)?ga(o,b):Ws),l=new l(p,I),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Jf,o.stateNode=l,l._reactInternals=o,_&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=b,o.__reactInternalMemoizedMaskedChildContext=I),l}function f(o,l,p,_){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,_),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,_),l.state!==o&&Jf.enqueueReplaceState(l,l.state,null)}function x(o,l,p,_){var b=o.stateNode;b.props=p,b.state=o.memoizedState,b.refs={},Qt(o);var I=l.contextType;typeof I=="object"&&I!==null?b.context=_r(I):(I=ki(l)?js:wi.current,b.context=ga(o,I)),b.state=o.memoizedState,I=l.getDerivedStateFromProps,typeof I=="function"&&(Yc(o,l,I,p),b.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(l=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),l!==b.state&&Jf.enqueueReplaceState(b,b.state,null),Yn(o,p,b,_),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308)}function T(o,l){try{var p="",_=l;do p+=Ee(_),_=_.return;while(_);var b=p}catch(I){b=`
Error generating stack: `+I.message+`
`+I.stack}return{value:o,source:l,stack:b,digest:null}}function P(o,l,p){return{value:o,source:null,stack:p??null,digest:l??null}}function D(o,l){try{console.error(l.value)}catch(p){setTimeout(function(){throw p})}}var Z=typeof WeakMap=="function"?WeakMap:Map;function ue(o,l,p){p=Cn(-1,p),p.tag=3,p.payload={element:null};var _=l.value;return p.callback=function(){og||(og=!0,H0=_),D(o,l)},p}function Ae(o,l,p){p=Cn(-1,p),p.tag=3;var _=o.type.getDerivedStateFromError;if(typeof _=="function"){var b=l.value;p.payload=function(){return _(b)},p.callback=function(){D(o,l)}}var I=o.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(p.callback=function(){D(o,l),typeof _!="function"&&(Cl===null?Cl=new Set([this]):Cl.add(this));var V=l.stack;this.componentDidCatch(l.value,{componentStack:V!==null?V:""})}),p}function Ze(o,l,p){var _=o.pingCache;if(_===null){_=o.pingCache=new Z;var b=new Set;_.set(l,b)}else b=_.get(l),b===void 0&&(b=new Set,_.set(l,b));b.has(p)||(b.add(p),o=bI.bind(null,o,l,p),l.then(o,o))}function _t(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function Yt(o,l,p,_,b){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(l=Cn(-1,1),l.tag=2,Hn(p,l,1))),p.lanes|=1),o):(o.flags|=65536,o.lanes=b,o)}var Ut=R.ReactCurrentOwner,nn=!1;function ut(o,l,p,_){l.child=o===null?Uc(l,null,p,_):_a(l,o.child,p,_)}function bi(o,l,p,_,b){p=p.render;var I=l.ref;return Lo(l,b),_=Hc(o,l,p,_,I,b),p=qh(),o!==null&&!nn?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~b,Pa(o,l,b)):(zn&&p&&Vh(l),l.flags|=1,ut(o,l,_,b),l.child)}function Er(o,l,p,_,b){if(o===null){var I=p.type;return typeof I=="function"&&!K0(I)&&I.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(l.tag=15,l.type=I,_e(o,l,I,_,b)):(o=dg(p.type,null,_,l,l.mode,b),o.ref=l.ref,o.return=l,l.child=o)}if(I=o.child,(o.lanes&b)===0){var V=I.memoizedProps;if(p=p.compare,p=p!==null?p:ua,p(V,_)&&o.ref===l.ref)return Pa(o,l,b)}return l.flags|=1,o=Il(I,_),o.ref=l.ref,o.return=l,l.child=o}function _e(o,l,p,_,b){if(o!==null){var I=o.memoizedProps;if(ua(I,_)&&o.ref===l.ref)if(nn=!1,l.pendingProps=_=I,(o.lanes&b)!==0)(o.flags&131072)!==0&&(nn=!0);else return l.lanes=o.lanes,Pa(o,l,b)}return ot(o,l,p,_,b)}function me(o,l,p){var _=l.pendingProps,b=_.children,I=o!==null?o.memoizedState:null;if(_.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pn(td,us),us|=p;else{if((p&1073741824)===0)return o=I!==null?I.baseLanes|p:p,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,Pn(td,us),us|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=I!==null?I.baseLanes:p,Pn(td,us),us|=_}else I!==null?(_=I.baseLanes|p,l.memoizedState=null):_=p,Pn(td,us),us|=_;return ut(o,l,b,p),l.child}function Ce(o,l){var p=l.ref;(o===null&&p!==null||o!==null&&o.ref!==p)&&(l.flags|=512,l.flags|=2097152)}function ot(o,l,p,_,b){var I=ki(p)?js:wi.current;return I=ga(l,I),Lo(l,b),p=Hc(o,l,p,_,I,b),_=qh(),o!==null&&!nn?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~b,Pa(o,l,b)):(zn&&_&&Vh(l),l.flags|=1,ut(o,l,p,b),l.child)}function Rt(o,l,p,_,b){if(ki(p)){var I=!0;va(l)}else I=!1;if(Lo(l,b),l.stateNode===null)tg(o,l),u(l,p,_),x(l,p,_,b),_=!0;else if(o===null){var V=l.stateNode,$=l.memoizedProps;V.props=$;var se=V.context,Me=p.contextType;typeof Me=="object"&&Me!==null?Me=_r(Me):(Me=ki(p)?js:wi.current,Me=ga(l,Me));var He=p.getDerivedStateFromProps,qe=typeof He=="function"||typeof V.getSnapshotBeforeUpdate=="function";qe||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||($!==_||se!==Me)&&f(l,V,_,Me),bn=!1;var Ve=l.memoizedState;V.state=Ve,Yn(l,_,V,b),se=l.memoizedState,$!==_||Ve!==se||Yi.current||bn?(typeof He=="function"&&(Yc(l,p,He,_),se=l.memoizedState),($=bn||Jm(l,p,$,_,Ve,se,Me))?(qe||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(l.flags|=4194308)):(typeof V.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=_,l.memoizedState=se),V.props=_,V.state=se,V.context=Me,_=$):(typeof V.componentDidMount=="function"&&(l.flags|=4194308),_=!1)}else{V=l.stateNode,Qn(o,l),$=l.memoizedProps,Me=l.type===l.elementType?$:Gr(l.type,$),V.props=Me,qe=l.pendingProps,Ve=V.context,se=p.contextType,typeof se=="object"&&se!==null?se=_r(se):(se=ki(p)?js:wi.current,se=ga(l,se));var mt=p.getDerivedStateFromProps;(He=typeof mt=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||($!==qe||Ve!==se)&&f(l,V,_,se),bn=!1,Ve=l.memoizedState,V.state=Ve,Yn(l,_,V,b);var Mt=l.memoizedState;$!==qe||Ve!==Mt||Yi.current||bn?(typeof mt=="function"&&(Yc(l,p,mt,_),Mt=l.memoizedState),(Me=bn||Jm(l,p,Me,_,Ve,Mt,se)||!1)?(He||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(_,Mt,se),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(_,Mt,se)),typeof V.componentDidUpdate=="function"&&(l.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof V.componentDidUpdate!="function"||$===o.memoizedProps&&Ve===o.memoizedState||(l.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||$===o.memoizedProps&&Ve===o.memoizedState||(l.flags|=1024),l.memoizedProps=_,l.memoizedState=Mt),V.props=_,V.state=Mt,V.context=se,_=Me):(typeof V.componentDidUpdate!="function"||$===o.memoizedProps&&Ve===o.memoizedState||(l.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||$===o.memoizedProps&&Ve===o.memoizedState||(l.flags|=1024),_=!1)}return Zt(o,l,p,_,I,b)}function Zt(o,l,p,_,b,I){Ce(o,l);var V=(l.flags&128)!==0;if(!_&&!V)return b&&zh(l,p,!1),Pa(o,l,I);_=l.stateNode,Ut.current=l;var $=V&&typeof p.getDerivedStateFromError!="function"?null:_.render();return l.flags|=1,o!==null&&V?(l.child=_a(l,o.child,null,I),l.child=_a(l,null,$,I)):ut(o,l,$,I),l.memoizedState=_.state,b&&zh(l,p,!0),l.child}function qt(o){var l=o.stateNode;l.pendingContext?Fh(o,l.pendingContext,l.pendingContext!==l.context):l.context&&Fh(o,l.context,!1),Bc(o,l.containerInfo)}function gn(o,l,p,_,b){return No(),_l(b),l.flags|=256,ut(o,l,p,_),l.child}var ii={dehydrated:null,treeContext:null,retryLane:0};function mn(o){return{baseLanes:o,cachePool:null,transitions:null}}function eo(o,l,p){var _=l.pendingProps,b=Bn.current,I=!1,V=(l.flags&128)!==0,$;if(($=V)||($=o!==null&&o.memoizedState===null?!1:(b&2)!==0),$?(I=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(b|=1),Pn(Bn,b&1),o===null)return Wf(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(V=_.children,o=_.fallback,I?(_=l.mode,I=l.child,V={mode:"hidden",children:V},(_&1)===0&&I!==null?(I.childLanes=0,I.pendingProps=V):I=hg(V,_,0,null),o=Qc(o,_,p,null),I.return=l,o.return=l,I.sibling=o,l.child=I,l.child.memoizedState=mn(p),l.memoizedState=ii,o):np(l,V));if(b=o.memoizedState,b!==null&&($=b.dehydrated,$!==null))return pI(o,l,V,_,$,b,p);if(I){I=_.fallback,V=l.mode,b=o.child,$=b.sibling;var se={mode:"hidden",children:_.children};return(V&1)===0&&l.child!==b?(_=l.child,_.childLanes=0,_.pendingProps=se,l.deletions=null):(_=Il(b,se),_.subtreeFlags=b.subtreeFlags&14680064),$!==null?I=Il($,I):(I=Qc(I,V,p,null),I.flags|=2),I.return=l,_.return=l,_.sibling=I,l.child=_,_=I,I=l.child,V=o.child.memoizedState,V=V===null?mn(p):{baseLanes:V.baseLanes|p,cachePool:null,transitions:V.transitions},I.memoizedState=V,I.childLanes=o.childLanes&~p,l.memoizedState=ii,_}return I=o.child,o=I.sibling,_=Il(I,{mode:"visible",children:_.children}),(l.mode&1)===0&&(_.lanes=p),_.return=l,_.sibling=null,o!==null&&(p=l.deletions,p===null?(l.deletions=[o],l.flags|=16):p.push(o)),l.child=_,l.memoizedState=null,_}function np(o,l){return l=hg({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function eg(o,l,p,_){return _!==null&&_l(_),_a(l,o.child,null,p),o=np(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function pI(o,l,p,_,b,I,V){if(p)return l.flags&256?(l.flags&=-257,_=P(Error(t(422))),eg(o,l,V,_)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(I=_.fallback,b=l.mode,_=hg({mode:"visible",children:_.children},b,0,null),I=Qc(I,b,V,null),I.flags|=2,_.return=l,I.return=l,_.sibling=I,l.child=_,(l.mode&1)!==0&&_a(l,o.child,null,V),l.child.memoizedState=mn(V),l.memoizedState=ii,I);if((l.mode&1)===0)return eg(o,l,V,null);if(b.data==="$!"){if(_=b.nextSibling&&b.nextSibling.dataset,_)var $=_.dgst;return _=$,I=Error(t(419)),_=P(I,_,void 0),eg(o,l,V,_)}if($=(V&o.childLanes)!==0,nn||$){if(_=Bi,_!==null){switch(V&-V){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(_.suspendedLanes|V))!==0?0:b,b!==0&&b!==I.retryLane&&(I.retryLane=b,os(o,b),io(_,o,b,-1))}return q0(),_=P(Error(t(421))),eg(o,l,V,_)}return b.data==="$?"?(l.flags|=128,l.child=o.child,l=CI.bind(null,o),b._reactRetry=l,null):(o=I.treeContext,Ki=Hs(b.nextSibling),Mi=l,zn=!0,Hr=null,o!==null&&(qi[vi++]=et,qi[vi++]=Vr,qi[vi++]=xa,et=o.id,Vr=o.overflow,xa=l),l=np(l,_.children),l.flags|=4096,l)}function Nw(o,l,p){o.lanes|=l;var _=o.alternate;_!==null&&(_.lanes|=l),Fc(o.return,l,p)}function L0(o,l,p,_,b){var I=o.memoizedState;I===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:_,tail:p,tailMode:b}:(I.isBackwards=l,I.rendering=null,I.renderingStartTime=0,I.last=_,I.tail=p,I.tailMode=b)}function Lw(o,l,p){var _=l.pendingProps,b=_.revealOrder,I=_.tail;if(ut(o,l,_.children,p),_=Bn.current,(_&2)!==0)_=_&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Nw(o,p,l);else if(o.tag===19)Nw(o,p,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}_&=1}if(Pn(Bn,_),(l.mode&1)===0)l.memoizedState=null;else switch(b){case"forwards":for(p=l.child,b=null;p!==null;)o=p.alternate,o!==null&&as(o)===null&&(b=p),p=p.sibling;p=b,p===null?(b=l.child,l.child=null):(b=p.sibling,p.sibling=null),L0(l,!1,b,p,I);break;case"backwards":for(p=null,b=l.child,l.child=null;b!==null;){if(o=b.alternate,o!==null&&as(o)===null){l.child=b;break}o=b.sibling,b.sibling=p,p=b,b=o}L0(l,!0,p,null,I);break;case"together":L0(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function tg(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function Pa(o,l,p){if(o!==null&&(l.dependencies=o.dependencies),qc|=l.lanes,(p&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(t(153));if(l.child!==null){for(o=l.child,p=Il(o,o.pendingProps),l.child=p,p.return=l;o.sibling!==null;)o=o.sibling,p=p.sibling=Il(o,o.pendingProps),p.return=l;p.sibling=null}return l.child}function mI(o,l,p){switch(l.tag){case 3:qt(l),No();break;case 5:ba(l);break;case 1:ki(l.type)&&va(l);break;case 4:Bc(l,l.stateNode.containerInfo);break;case 10:var _=l.type._context,b=l.memoizedProps.value;Pn(Sa,_._currentValue),_._currentValue=b;break;case 13:if(_=l.memoizedState,_!==null)return _.dehydrated!==null?(Pn(Bn,Bn.current&1),l.flags|=128,null):(p&l.child.childLanes)!==0?eo(o,l,p):(Pn(Bn,Bn.current&1),o=Pa(o,l,p),o!==null?o.sibling:null);Pn(Bn,Bn.current&1);break;case 19:if(_=(p&l.childLanes)!==0,(o.flags&128)!==0){if(_)return Lw(o,l,p);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Pn(Bn,Bn.current),_)break;return null;case 22:case 23:return l.lanes=0,me(o,l,p)}return Pa(o,l,p)}var Dw,D0,Ow,Uw;Dw=function(o,l){for(var p=l.child;p!==null;){if(p.tag===5||p.tag===6)o.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},D0=function(){},Ow=function(o,l,p,_){var b=o.memoizedProps;if(b!==_){o=l.stateNode,ni(Sr.current);var I=null;switch(p){case"input":b=K(o,b),_=K(o,_),I=[];break;case"select":b=te({},b,{value:void 0}),_=te({},_,{value:void 0}),I=[];break;case"textarea":b=W(o,b),_=W(o,_),I=[];break;default:typeof b.onClick!="function"&&typeof _.onClick=="function"&&(o.onclick=Rc)}re(p,_);var V;p=null;for(Me in b)if(!_.hasOwnProperty(Me)&&b.hasOwnProperty(Me)&&b[Me]!=null)if(Me==="style"){var $=b[Me];for(V in $)$.hasOwnProperty(V)&&(p||(p={}),p[V]="")}else Me!=="dangerouslySetInnerHTML"&&Me!=="children"&&Me!=="suppressContentEditableWarning"&&Me!=="suppressHydrationWarning"&&Me!=="autoFocus"&&(r.hasOwnProperty(Me)?I||(I=[]):(I=I||[]).push(Me,null));for(Me in _){var se=_[Me];if($=b!=null?b[Me]:void 0,_.hasOwnProperty(Me)&&se!==$&&(se!=null||$!=null))if(Me==="style")if($){for(V in $)!$.hasOwnProperty(V)||se&&se.hasOwnProperty(V)||(p||(p={}),p[V]="");for(V in se)se.hasOwnProperty(V)&&$[V]!==se[V]&&(p||(p={}),p[V]=se[V])}else p||(I||(I=[]),I.push(Me,p)),p=se;else Me==="dangerouslySetInnerHTML"?(se=se?se.__html:void 0,$=$?$.__html:void 0,se!=null&&$!==se&&(I=I||[]).push(Me,se)):Me==="children"?typeof se!="string"&&typeof se!="number"||(I=I||[]).push(Me,""+se):Me!=="suppressContentEditableWarning"&&Me!=="suppressHydrationWarning"&&(r.hasOwnProperty(Me)?(se!=null&&Me==="onScroll"&&Ln("scroll",o),I||$===se||(I=[])):(I=I||[]).push(Me,se))}p&&(I=I||[]).push("style",p);var Me=I;(l.updateQueue=Me)&&(l.flags|=4)}},Uw=function(o,l,p,_){p!==_&&(l.flags|=4)};function ip(o,l){if(!zn)switch(o.tailMode){case"hidden":l=o.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var _=null;p!==null;)p.alternate!==null&&(_=p),p=p.sibling;_===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:_.sibling=null}}function sr(o){var l=o.alternate!==null&&o.alternate.child===o.child,p=0,_=0;if(l)for(var b=o.child;b!==null;)p|=b.lanes|b.childLanes,_|=b.subtreeFlags&14680064,_|=b.flags&14680064,b.return=o,b=b.sibling;else for(b=o.child;b!==null;)p|=b.lanes|b.childLanes,_|=b.subtreeFlags,_|=b.flags,b.return=o,b=b.sibling;return o.subtreeFlags|=_,o.childLanes=p,l}function gI(o,l,p){var _=l.pendingProps;switch(Ys(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sr(l),null;case 1:return ki(l.type)&&Pc(),sr(l),null;case 3:return _=l.stateNode,Do(),Dn(Yi),Dn(wi),Cs(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(o===null||o.child===null)&&(xl(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Hr!==null&&(j0(Hr),Hr=null))),D0(o,l),sr(l),null;case 5:Ml(l);var b=ni(Zs.current);if(p=l.type,o!==null&&l.stateNode!=null)Ow(o,l,p,_,b),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!_){if(l.stateNode===null)throw Error(t(166));return sr(l),null}if(o=ni(Sr.current),xl(l)){_=l.stateNode,p=l.type;var I=l.memoizedProps;switch(_[ci]=l,_[yl]=I,o=(l.mode&1)!==0,p){case"dialog":Ln("cancel",_),Ln("close",_);break;case"iframe":case"object":case"embed":Ln("load",_);break;case"video":case"audio":for(b=0;b<Po.length;b++)Ln(Po[b],_);break;case"source":Ln("error",_);break;case"img":case"image":case"link":Ln("error",_),Ln("load",_);break;case"details":Ln("toggle",_);break;case"input":ht(_,I),Ln("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!I.multiple},Ln("invalid",_);break;case"textarea":ye(_,I),Ln("invalid",_)}re(p,I),b=null;for(var V in I)if(I.hasOwnProperty(V)){var $=I[V];V==="children"?typeof $=="string"?_.textContent!==$&&(I.suppressHydrationWarning!==!0&&Ac(_.textContent,$,o),b=["children",$]):typeof $=="number"&&_.textContent!==""+$&&(I.suppressHydrationWarning!==!0&&Ac(_.textContent,$,o),b=["children",""+$]):r.hasOwnProperty(V)&&$!=null&&V==="onScroll"&&Ln("scroll",_)}switch(p){case"input":Qe(_),Ke(_,I,!0);break;case"textarea":Qe(_),ze(_);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(_.onclick=Rc)}_=b,l.updateQueue=_,_!==null&&(l.flags|=4)}else{V=b.nodeType===9?b:b.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=De(p)),o==="http://www.w3.org/1999/xhtml"?p==="script"?(o=V.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof _.is=="string"?o=V.createElement(p,{is:_.is}):(o=V.createElement(p),p==="select"&&(V=o,_.multiple?V.multiple=!0:_.size&&(V.size=_.size))):o=V.createElementNS(o,p),o[ci]=l,o[yl]=_,Dw(o,l,!1,!1),l.stateNode=o;e:{switch(V=Ie(p,_),p){case"dialog":Ln("cancel",o),Ln("close",o),b=_;break;case"iframe":case"object":case"embed":Ln("load",o),b=_;break;case"video":case"audio":for(b=0;b<Po.length;b++)Ln(Po[b],o);b=_;break;case"source":Ln("error",o),b=_;break;case"img":case"image":case"link":Ln("error",o),Ln("load",o),b=_;break;case"details":Ln("toggle",o),b=_;break;case"input":ht(o,_),b=K(o,_),Ln("invalid",o);break;case"option":b=_;break;case"select":o._wrapperState={wasMultiple:!!_.multiple},b=te({},_,{value:void 0}),Ln("invalid",o);break;case"textarea":ye(o,_),b=W(o,_),Ln("invalid",o);break;default:b=_}re(p,b),$=b;for(I in $)if($.hasOwnProperty(I)){var se=$[I];I==="style"?kt(o,se):I==="dangerouslySetInnerHTML"?(se=se?se.__html:void 0,se!=null&&ct(o,se)):I==="children"?typeof se=="string"?(p!=="textarea"||se!=="")&&Xt(o,se):typeof se=="number"&&Xt(o,""+se):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(r.hasOwnProperty(I)?se!=null&&I==="onScroll"&&Ln("scroll",o):se!=null&&C(o,I,se,V))}switch(p){case"input":Qe(o),Ke(o,_,!1);break;case"textarea":Qe(o),ze(o);break;case"option":_.value!=null&&o.setAttribute("value",""+Fe(_.value));break;case"select":o.multiple=!!_.multiple,I=_.value,I!=null?Y(o,!!_.multiple,I,!1):_.defaultValue!=null&&Y(o,!!_.multiple,_.defaultValue,!0);break;default:typeof b.onClick=="function"&&(o.onclick=Rc)}switch(p){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return sr(l),null;case 6:if(o&&l.stateNode!=null)Uw(o,l,o.memoizedProps,_);else{if(typeof _!="string"&&l.stateNode===null)throw Error(t(166));if(p=ni(Zs.current),ni(Sr.current),xl(l)){if(_=l.stateNode,p=l.memoizedProps,_[ci]=l,(I=_.nodeValue!==p)&&(o=Mi,o!==null))switch(o.tag){case 3:Ac(_.nodeValue,p,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Ac(_.nodeValue,p,(o.mode&1)!==0)}I&&(l.flags|=4)}else _=(p.nodeType===9?p:p.ownerDocument).createTextNode(_),_[ci]=l,l.stateNode=_}return sr(l),null;case 13:if(Dn(Bn),_=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(zn&&Ki!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Wh(),No(),l.flags|=98560,I=!1;else if(I=xl(l),_!==null&&_.dehydrated!==null){if(o===null){if(!I)throw Error(t(318));if(I=l.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(t(317));I[ci]=l}else No(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;sr(l),I=!1}else Hr!==null&&(j0(Hr),Hr=null),I=!0;if(!I)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=p,l):(_=_!==null,_!==(o!==null&&o.memoizedState!==null)&&_&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(Bn.current&1)!==0?Ci===0&&(Ci=3):q0())),l.updateQueue!==null&&(l.flags|=4),sr(l),null);case 4:return Do(),D0(o,l),o===null&&ml(l.stateNode.containerInfo),sr(l),null;case 10:return kc(l.type._context),sr(l),null;case 17:return ki(l.type)&&Pc(),sr(l),null;case 19:if(Dn(Bn),I=l.memoizedState,I===null)return sr(l),null;if(_=(l.flags&128)!==0,V=I.rendering,V===null)if(_)ip(I,!1);else{if(Ci!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(V=as(o),V!==null){for(l.flags|=128,ip(I,!1),_=V.updateQueue,_!==null&&(l.updateQueue=_,l.flags|=4),l.subtreeFlags=0,_=p,p=l.child;p!==null;)I=p,o=_,I.flags&=14680066,V=I.alternate,V===null?(I.childLanes=0,I.lanes=o,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=V.childLanes,I.lanes=V.lanes,I.child=V.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=V.memoizedProps,I.memoizedState=V.memoizedState,I.updateQueue=V.updateQueue,I.type=V.type,o=V.dependencies,I.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),p=p.sibling;return Pn(Bn,Bn.current&1|2),l.child}o=o.sibling}I.tail!==null&&oe()>nd&&(l.flags|=128,_=!0,ip(I,!1),l.lanes=4194304)}else{if(!_)if(o=as(V),o!==null){if(l.flags|=128,_=!0,p=o.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),ip(I,!0),I.tail===null&&I.tailMode==="hidden"&&!V.alternate&&!zn)return sr(l),null}else 2*oe()-I.renderingStartTime>nd&&p!==1073741824&&(l.flags|=128,_=!0,ip(I,!1),l.lanes=4194304);I.isBackwards?(V.sibling=l.child,l.child=V):(p=I.last,p!==null?p.sibling=V:l.child=V,I.last=V)}return I.tail!==null?(l=I.tail,I.rendering=l,I.tail=l.sibling,I.renderingStartTime=oe(),l.sibling=null,p=Bn.current,Pn(Bn,_?p&1|2:p&1),l):(sr(l),null);case 22:case 23:return Y0(),_=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==_&&(l.flags|=8192),_&&(l.mode&1)!==0?(us&1073741824)!==0&&(sr(l),l.subtreeFlags&6&&(l.flags|=8192)):sr(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function vI(o,l){switch(Ys(l),l.tag){case 1:return ki(l.type)&&Pc(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Do(),Dn(Yi),Dn(wi),Cs(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return Ml(l),null;case 13:if(Dn(Bn),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(t(340));No()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return Dn(Bn),null;case 4:return Do(),null;case 10:return kc(l.type._context),null;case 22:case 23:return Y0(),null;case 24:return null;default:return null}}var ng=!1,or=!1,yI=typeof WeakSet=="function"?WeakSet:Set,wt=null;function ed(o,l){var p=o.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(_){ri(o,l,_)}else p.current=null}function O0(o,l,p){try{p()}catch(_){ri(o,l,_)}}var kw=!1;function xI(o,l){if(vl=Or,o=Wn(),hi(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else e:{p=(p=o.ownerDocument)&&p.defaultView||window;var _=p.getSelection&&p.getSelection();if(_&&_.rangeCount!==0){p=_.anchorNode;var b=_.anchorOffset,I=_.focusNode;_=_.focusOffset;try{p.nodeType,I.nodeType}catch{p=null;break e}var V=0,$=-1,se=-1,Me=0,He=0,qe=o,Ve=null;t:for(;;){for(var mt;qe!==p||b!==0&&qe.nodeType!==3||($=V+b),qe!==I||_!==0&&qe.nodeType!==3||(se=V+_),qe.nodeType===3&&(V+=qe.nodeValue.length),(mt=qe.firstChild)!==null;)Ve=qe,qe=mt;for(;;){if(qe===o)break t;if(Ve===p&&++Me===b&&($=V),Ve===I&&++He===_&&(se=V),(mt=qe.nextSibling)!==null)break;qe=Ve,Ve=qe.parentNode}qe=mt}p=$===-1||se===-1?null:{start:$,end:se}}else p=null}p=p||{start:0,end:0}}else p=null;for(Nh={focusedElem:o,selectionRange:p},Or=!1,wt=l;wt!==null;)if(l=wt,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,wt=o;else for(;wt!==null;){l=wt;try{var Mt=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Mt!==null){var Ct=Mt.memoizedProps,ui=Mt.memoizedState,ve=l.stateNode,ae=ve.getSnapshotBeforeUpdate(l.elementType===l.type?Ct:Gr(l.type,Ct),ui);ve.__reactInternalSnapshotBeforeUpdate=ae}break;case 3:var xe=l.stateNode.containerInfo;xe.nodeType===1?xe.textContent="":xe.nodeType===9&&xe.documentElement&&xe.removeChild(xe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch($e){ri(l,l.return,$e)}if(o=l.sibling,o!==null){o.return=l.return,wt=o;break}wt=l.return}return Mt=kw,kw=!1,Mt}function rp(o,l,p){var _=l.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var b=_=_.next;do{if((b.tag&o)===o){var I=b.destroy;b.destroy=void 0,I!==void 0&&O0(l,p,I)}b=b.next}while(b!==_)}}function ig(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var p=l=l.next;do{if((p.tag&o)===o){var _=p.create;p.destroy=_()}p=p.next}while(p!==l)}}function U0(o){var l=o.ref;if(l!==null){var p=o.stateNode;switch(o.tag){case 5:o=p;break;default:o=p}typeof l=="function"?l(o):l.current=o}}function Fw(o){var l=o.alternate;l!==null&&(o.alternate=null,Fw(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[ci],delete l[yl],delete l[ma],delete l[kf],delete l[Ff])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function zw(o){return o.tag===5||o.tag===3||o.tag===4}function Bw(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||zw(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function k0(o,l,p){var _=o.tag;if(_===5||_===6)o=o.stateNode,l?p.nodeType===8?p.parentNode.insertBefore(o,l):p.insertBefore(o,l):(p.nodeType===8?(l=p.parentNode,l.insertBefore(o,p)):(l=p,l.appendChild(o)),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=Rc));else if(_!==4&&(o=o.child,o!==null))for(k0(o,l,p),o=o.sibling;o!==null;)k0(o,l,p),o=o.sibling}function F0(o,l,p){var _=o.tag;if(_===5||_===6)o=o.stateNode,l?p.insertBefore(o,l):p.appendChild(o);else if(_!==4&&(o=o.child,o!==null))for(F0(o,l,p),o=o.sibling;o!==null;)F0(o,l,p),o=o.sibling}var $i=null,to=!1;function bl(o,l,p){for(p=p.child;p!==null;)Vw(o,l,p),p=p.sibling}function Vw(o,l,p){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(St,p)}catch{}switch(p.tag){case 5:or||ed(p,l);case 6:var _=$i,b=to;$i=null,bl(o,l,p),$i=_,to=b,$i!==null&&(to?(o=$i,p=p.stateNode,o.nodeType===8?o.parentNode.removeChild(p):o.removeChild(p)):$i.removeChild(p.stateNode));break;case 18:$i!==null&&(to?(o=$i,p=p.stateNode,o.nodeType===8?Uf(o.parentNode,p):o.nodeType===1&&Uf(o,p),vc(o)):Uf($i,p.stateNode));break;case 4:_=$i,b=to,$i=p.stateNode.containerInfo,to=!0,bl(o,l,p),$i=_,to=b;break;case 0:case 11:case 14:case 15:if(!or&&(_=p.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){b=_=_.next;do{var I=b,V=I.destroy;I=I.tag,V!==void 0&&((I&2)!==0||(I&4)!==0)&&O0(p,l,V),b=b.next}while(b!==_)}bl(o,l,p);break;case 1:if(!or&&(ed(p,l),_=p.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=p.memoizedProps,_.state=p.memoizedState,_.componentWillUnmount()}catch($){ri(p,l,$)}bl(o,l,p);break;case 21:bl(o,l,p);break;case 22:p.mode&1?(or=(_=or)||p.memoizedState!==null,bl(o,l,p),or=_):bl(o,l,p);break;default:bl(o,l,p)}}function Hw(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var p=o.stateNode;p===null&&(p=o.stateNode=new yI),l.forEach(function(_){var b=AI.bind(null,o,_);p.has(_)||(p.add(_),_.then(b,b))})}}function no(o,l){var p=l.deletions;if(p!==null)for(var _=0;_<p.length;_++){var b=p[_];try{var I=o,V=l,$=V;e:for(;$!==null;){switch($.tag){case 5:$i=$.stateNode,to=!1;break e;case 3:$i=$.stateNode.containerInfo,to=!0;break e;case 4:$i=$.stateNode.containerInfo,to=!0;break e}$=$.return}if($i===null)throw Error(t(160));Vw(I,V,b),$i=null,to=!1;var se=b.alternate;se!==null&&(se.return=null),b.return=null}catch(Me){ri(b,l,Me)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)Gw(l,o),l=l.sibling}function Gw(o,l){var p=o.alternate,_=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(no(l,o),Uo(o),_&4){try{rp(3,o,o.return),ig(3,o)}catch(Ct){ri(o,o.return,Ct)}try{rp(5,o,o.return)}catch(Ct){ri(o,o.return,Ct)}}break;case 1:no(l,o),Uo(o),_&512&&p!==null&&ed(p,p.return);break;case 5:if(no(l,o),Uo(o),_&512&&p!==null&&ed(p,p.return),o.flags&32){var b=o.stateNode;try{Xt(b,"")}catch(Ct){ri(o,o.return,Ct)}}if(_&4&&(b=o.stateNode,b!=null)){var I=o.memoizedProps,V=p!==null?p.memoizedProps:I,$=o.type,se=o.updateQueue;if(o.updateQueue=null,se!==null)try{$==="input"&&I.type==="radio"&&I.name!=null&&Be(b,I),Ie($,V);var Me=Ie($,I);for(V=0;V<se.length;V+=2){var He=se[V],qe=se[V+1];He==="style"?kt(b,qe):He==="dangerouslySetInnerHTML"?ct(b,qe):He==="children"?Xt(b,qe):C(b,He,qe,Me)}switch($){case"input":nt(b,I);break;case"textarea":Re(b,I);break;case"select":var Ve=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!I.multiple;var mt=I.value;mt!=null?Y(b,!!I.multiple,mt,!1):Ve!==!!I.multiple&&(I.defaultValue!=null?Y(b,!!I.multiple,I.defaultValue,!0):Y(b,!!I.multiple,I.multiple?[]:"",!1))}b[yl]=I}catch(Ct){ri(o,o.return,Ct)}}break;case 6:if(no(l,o),Uo(o),_&4){if(o.stateNode===null)throw Error(t(162));b=o.stateNode,I=o.memoizedProps;try{b.nodeValue=I}catch(Ct){ri(o,o.return,Ct)}}break;case 3:if(no(l,o),Uo(o),_&4&&p!==null&&p.memoizedState.isDehydrated)try{vc(l.containerInfo)}catch(Ct){ri(o,o.return,Ct)}break;case 4:no(l,o),Uo(o);break;case 13:no(l,o),Uo(o),b=o.child,b.flags&8192&&(I=b.memoizedState!==null,b.stateNode.isHidden=I,!I||b.alternate!==null&&b.alternate.memoizedState!==null||(V0=oe())),_&4&&Hw(o);break;case 22:if(He=p!==null&&p.memoizedState!==null,o.mode&1?(or=(Me=or)||He,no(l,o),or=Me):no(l,o),Uo(o),_&8192){if(Me=o.memoizedState!==null,(o.stateNode.isHidden=Me)&&!He&&(o.mode&1)!==0)for(wt=o,He=o.child;He!==null;){for(qe=wt=He;wt!==null;){switch(Ve=wt,mt=Ve.child,Ve.tag){case 0:case 11:case 14:case 15:rp(4,Ve,Ve.return);break;case 1:ed(Ve,Ve.return);var Mt=Ve.stateNode;if(typeof Mt.componentWillUnmount=="function"){_=Ve,p=Ve.return;try{l=_,Mt.props=l.memoizedProps,Mt.state=l.memoizedState,Mt.componentWillUnmount()}catch(Ct){ri(_,p,Ct)}}break;case 5:ed(Ve,Ve.return);break;case 22:if(Ve.memoizedState!==null){Xw(qe);continue}}mt!==null?(mt.return=Ve,wt=mt):Xw(qe)}He=He.sibling}e:for(He=null,qe=o;;){if(qe.tag===5){if(He===null){He=qe;try{b=qe.stateNode,Me?(I=b.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):($=qe.stateNode,se=qe.memoizedProps.style,V=se!=null&&se.hasOwnProperty("display")?se.display:null,$.style.display=Dt("display",V))}catch(Ct){ri(o,o.return,Ct)}}}else if(qe.tag===6){if(He===null)try{qe.stateNode.nodeValue=Me?"":qe.memoizedProps}catch(Ct){ri(o,o.return,Ct)}}else if((qe.tag!==22&&qe.tag!==23||qe.memoizedState===null||qe===o)&&qe.child!==null){qe.child.return=qe,qe=qe.child;continue}if(qe===o)break e;for(;qe.sibling===null;){if(qe.return===null||qe.return===o)break e;He===qe&&(He=null),qe=qe.return}He===qe&&(He=null),qe.sibling.return=qe.return,qe=qe.sibling}}break;case 19:no(l,o),Uo(o),_&4&&Hw(o);break;case 21:break;default:no(l,o),Uo(o)}}function Uo(o){var l=o.flags;if(l&2){try{e:{for(var p=o.return;p!==null;){if(zw(p)){var _=p;break e}p=p.return}throw Error(t(160))}switch(_.tag){case 5:var b=_.stateNode;_.flags&32&&(Xt(b,""),_.flags&=-33);var I=Bw(o);F0(o,I,b);break;case 3:case 4:var V=_.stateNode.containerInfo,$=Bw(o);k0(o,$,V);break;default:throw Error(t(161))}}catch(se){ri(o,o.return,se)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function _I(o,l,p){wt=o,Ww(o)}function Ww(o,l,p){for(var _=(o.mode&1)!==0;wt!==null;){var b=wt,I=b.child;if(b.tag===22&&_){var V=b.memoizedState!==null||ng;if(!V){var $=b.alternate,se=$!==null&&$.memoizedState!==null||or;$=ng;var Me=or;if(ng=V,(or=se)&&!Me)for(wt=b;wt!==null;)V=wt,se=V.child,V.tag===22&&V.memoizedState!==null?Yw(b):se!==null?(se.return=V,wt=se):Yw(b);for(;I!==null;)wt=I,Ww(I),I=I.sibling;wt=b,ng=$,or=Me}jw(o)}else(b.subtreeFlags&8772)!==0&&I!==null?(I.return=b,wt=I):jw(o)}}function jw(o){for(;wt!==null;){var l=wt;if((l.flags&8772)!==0){var p=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:or||ig(5,l);break;case 1:var _=l.stateNode;if(l.flags&4&&!or)if(p===null)_.componentDidMount();else{var b=l.elementType===l.type?p.memoizedProps:Gr(l.type,p.memoizedProps);_.componentDidUpdate(b,p.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var I=l.updateQueue;I!==null&&wl(l,I,_);break;case 3:var V=l.updateQueue;if(V!==null){if(p=null,l.child!==null)switch(l.child.tag){case 5:p=l.child.stateNode;break;case 1:p=l.child.stateNode}wl(l,V,p)}break;case 5:var $=l.stateNode;if(p===null&&l.flags&4){p=$;var se=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":se.autoFocus&&p.focus();break;case"img":se.src&&(p.src=se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Me=l.alternate;if(Me!==null){var He=Me.memoizedState;if(He!==null){var qe=He.dehydrated;qe!==null&&vc(qe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}or||l.flags&512&&U0(l)}catch(Ve){ri(l,l.return,Ve)}}if(l===o){wt=null;break}if(p=l.sibling,p!==null){p.return=l.return,wt=p;break}wt=l.return}}function Xw(o){for(;wt!==null;){var l=wt;if(l===o){wt=null;break}var p=l.sibling;if(p!==null){p.return=l.return,wt=p;break}wt=l.return}}function Yw(o){for(;wt!==null;){var l=wt;try{switch(l.tag){case 0:case 11:case 15:var p=l.return;try{ig(4,l)}catch(se){ri(l,p,se)}break;case 1:var _=l.stateNode;if(typeof _.componentDidMount=="function"){var b=l.return;try{_.componentDidMount()}catch(se){ri(l,b,se)}}var I=l.return;try{U0(l)}catch(se){ri(l,I,se)}break;case 5:var V=l.return;try{U0(l)}catch(se){ri(l,V,se)}}}catch(se){ri(l,l.return,se)}if(l===o){wt=null;break}var $=l.sibling;if($!==null){$.return=l.return,wt=$;break}wt=l.return}}var SI=Math.ceil,rg=R.ReactCurrentDispatcher,z0=R.ReactCurrentOwner,Rs=R.ReactCurrentBatchConfig,_n=0,Bi=null,yi=null,Qi=0,us=0,td=Xn(0),Ci=0,sp=null,qc=0,sg=0,B0=0,op=null,Wr=null,V0=0,nd=1/0,Ia=null,og=!1,H0=null,Cl=null,ag=!1,Al=null,lg=0,ap=0,G0=null,cg=-1,ug=0;function Tr(){return(_n&6)!==0?oe():cg!==-1?cg:cg=oe()}function Rl(o){return(o.mode&1)===0?1:(_n&2)!==0&&Qi!==0?Qi&-Qi:I0.transition!==null?(ug===0&&(ug=Fn()),ug):(o=tn,o!==0||(o=window.event,o=o===void 0?16:Rm(o.type)),o)}function io(o,l,p,_){if(50<ap)throw ap=0,G0=null,Error(t(185));Zn(o,p,_),((_n&2)===0||o!==Bi)&&(o===Bi&&((_n&2)===0&&(sg|=p),Ci===4&&Pl(o,Qi)),jr(o,_),p===1&&_n===0&&(l.mode&1)===0&&(nd=oe()+500,Nc&&Ts()))}function jr(o,l){var p=o.callbackNode;xs(o,l);var _=Dr(o,o===Bi?Qi:0);if(_===0)p!==null&&pe(p),o.callbackNode=null,o.callbackPriority=0;else if(l=_&-_,o.callbackPriority!==l){if(p!=null&&pe(p),l===1)o.tag===0?Gm(Kw.bind(null,o)):Lc(Kw.bind(null,o)),P0(function(){(_n&6)===0&&Ts()}),p=null;else{switch(nl(_)){case 1:p=it;break;case 4:p=ft;break;case 16:p=xt;break;case 536870912:p=Ot;break;default:p=xt}p=iM(p,qw.bind(null,o))}o.callbackPriority=l,o.callbackNode=p}}function qw(o,l){if(cg=-1,ug=0,(_n&6)!==0)throw Error(t(327));var p=o.callbackNode;if(id()&&o.callbackNode!==p)return null;var _=Dr(o,o===Bi?Qi:0);if(_===0)return null;if((_&30)!==0||(_&o.expiredLanes)!==0||l)l=fg(o,_);else{l=_;var b=_n;_n|=2;var I=$w();(Bi!==o||Qi!==l)&&(Ia=null,nd=oe()+500,Zc(o,l));do try{EI();break}catch($){Zw(o,$)}while(!0);Ma(),rg.current=I,_n=b,yi!==null?l=0:(Bi=null,Qi=0,l=Ci)}if(l!==0){if(l===2&&(b=Tn(o),b!==0&&(_=b,l=W0(o,b))),l===1)throw p=sp,Zc(o,0),Pl(o,_),jr(o,oe()),p;if(l===6)Pl(o,_);else{if(b=o.current.alternate,(_&30)===0&&!wI(b)&&(l=fg(o,_),l===2&&(I=Tn(o),I!==0&&(_=I,l=W0(o,I))),l===1))throw p=sp,Zc(o,0),Pl(o,_),jr(o,oe()),p;switch(o.finishedWork=b,o.finishedLanes=_,l){case 0:case 1:throw Error(t(345));case 2:$c(o,Wr,Ia);break;case 3:if(Pl(o,_),(_&130023424)===_&&(l=V0+500-oe(),10<l)){if(Dr(o,0)!==0)break;if(b=o.suspendedLanes,(b&_)!==_){Tr(),o.pingedLanes|=o.suspendedLanes&b;break}o.timeoutHandle=Dh($c.bind(null,o,Wr,Ia),l);break}$c(o,Wr,Ia);break;case 4:if(Pl(o,_),(_&4194240)===_)break;for(l=o.eventTimes,b=-1;0<_;){var V=31-sn(_);I=1<<V,V=l[V],V>b&&(b=V),_&=~I}if(_=b,_=oe()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*SI(_/1960))-_,10<_){o.timeoutHandle=Dh($c.bind(null,o,Wr,Ia),_);break}$c(o,Wr,Ia);break;case 5:$c(o,Wr,Ia);break;default:throw Error(t(329))}}}return jr(o,oe()),o.callbackNode===p?qw.bind(null,o):null}function W0(o,l){var p=op;return o.current.memoizedState.isDehydrated&&(Zc(o,l).flags|=256),o=fg(o,l),o!==2&&(l=Wr,Wr=p,l!==null&&j0(l)),o}function j0(o){Wr===null?Wr=o:Wr.push.apply(Wr,o)}function wI(o){for(var l=o;;){if(l.flags&16384){var p=l.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var _=0;_<p.length;_++){var b=p[_],I=b.getSnapshot;b=b.value;try{if(!vr(I(),b))return!1}catch{return!1}}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Pl(o,l){for(l&=~B0,l&=~sg,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var p=31-sn(l),_=1<<p;o[p]=-1,l&=~_}}function Kw(o){if((_n&6)!==0)throw Error(t(327));id();var l=Dr(o,0);if((l&1)===0)return jr(o,oe()),null;var p=fg(o,l);if(o.tag!==0&&p===2){var _=Tn(o);_!==0&&(l=_,p=W0(o,_))}if(p===1)throw p=sp,Zc(o,0),Pl(o,l),jr(o,oe()),p;if(p===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,$c(o,Wr,Ia),jr(o,oe()),null}function X0(o,l){var p=_n;_n|=1;try{return o(l)}finally{_n=p,_n===0&&(nd=oe()+500,Nc&&Ts())}}function Kc(o){Al!==null&&Al.tag===0&&(_n&6)===0&&id();var l=_n;_n|=1;var p=Rs.transition,_=tn;try{if(Rs.transition=null,tn=1,o)return o()}finally{tn=_,Rs.transition=p,_n=l,(_n&6)===0&&Ts()}}function Y0(){us=td.current,Dn(td)}function Zc(o,l){o.finishedWork=null,o.finishedLanes=0;var p=o.timeoutHandle;if(p!==-1&&(o.timeoutHandle=-1,Oh(p)),yi!==null)for(p=yi.return;p!==null;){var _=p;switch(Ys(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&Pc();break;case 3:Do(),Dn(Yi),Dn(wi),Cs();break;case 5:Ml(_);break;case 4:Do();break;case 13:Dn(Bn);break;case 19:Dn(Bn);break;case 10:kc(_.type._context);break;case 22:case 23:Y0()}p=p.return}if(Bi=o,yi=o=Il(o.current,null),Qi=us=l,Ci=0,sp=null,B0=sg=qc=0,Wr=op=null,Ks!==null){for(l=0;l<Ks.length;l++)if(p=Ks[l],_=p.interleaved,_!==null){p.interleaved=null;var b=_.next,I=p.pending;if(I!==null){var V=I.next;I.next=b,_.next=V}p.pending=_}Ks=null}return o}function Zw(o,l){do{var p=yi;try{if(Ma(),Ca.current=Qf,ls){for(var _=On.memoizedState;_!==null;){var b=_.queue;b!==null&&(b.pending=null),_=_.next}ls=!1}if($s=0,yn=qn=On=null,zi=!1,Oo=0,z0.current=null,p===null||p.return===null){Ci=1,sp=l,yi=null;break}e:{var I=o,V=p.return,$=p,se=l;if(l=Qi,$.flags|=32768,se!==null&&typeof se=="object"&&typeof se.then=="function"){var Me=se,He=$,qe=He.tag;if((He.mode&1)===0&&(qe===0||qe===11||qe===15)){var Ve=He.alternate;Ve?(He.updateQueue=Ve.updateQueue,He.memoizedState=Ve.memoizedState,He.lanes=Ve.lanes):(He.updateQueue=null,He.memoizedState=null)}var mt=_t(V);if(mt!==null){mt.flags&=-257,Yt(mt,V,$,I,l),mt.mode&1&&Ze(I,Me,l),l=mt,se=Me;var Mt=l.updateQueue;if(Mt===null){var Ct=new Set;Ct.add(se),l.updateQueue=Ct}else Mt.add(se);break e}else{if((l&1)===0){Ze(I,Me,l),q0();break e}se=Error(t(426))}}else if(zn&&$.mode&1){var ui=_t(V);if(ui!==null){(ui.flags&65536)===0&&(ui.flags|=256),Yt(ui,V,$,I,l),_l(T(se,$));break e}}I=se=T(se,$),Ci!==4&&(Ci=2),op===null?op=[I]:op.push(I),I=V;do{switch(I.tag){case 3:I.flags|=65536,l&=-l,I.lanes|=l;var ve=ue(I,se,l);Ea(I,ve);break e;case 1:$=se;var ae=I.type,xe=I.stateNode;if((I.flags&128)===0&&(typeof ae.getDerivedStateFromError=="function"||xe!==null&&typeof xe.componentDidCatch=="function"&&(Cl===null||!Cl.has(xe)))){I.flags|=65536,l&=-l,I.lanes|=l;var $e=Ae(I,$,l);Ea(I,$e);break e}}I=I.return}while(I!==null)}Jw(p)}catch(It){l=It,yi===p&&p!==null&&(yi=p=p.return);continue}break}while(!0)}function $w(){var o=rg.current;return rg.current=Qf,o===null?Qf:o}function q0(){(Ci===0||Ci===3||Ci===2)&&(Ci=4),Bi===null||(qc&268435455)===0&&(sg&268435455)===0||Pl(Bi,Qi)}function fg(o,l){var p=_n;_n|=2;var _=$w();(Bi!==o||Qi!==l)&&(Ia=null,Zc(o,l));do try{MI();break}catch(b){Zw(o,b)}while(!0);if(Ma(),_n=p,rg.current=_,yi!==null)throw Error(t(261));return Bi=null,Qi=0,Ci}function MI(){for(;yi!==null;)Qw(yi)}function EI(){for(;yi!==null&&!we();)Qw(yi)}function Qw(o){var l=nM(o.alternate,o,us);o.memoizedProps=o.pendingProps,l===null?Jw(o):yi=l,z0.current=null}function Jw(o){var l=o;do{var p=l.alternate;if(o=l.return,(l.flags&32768)===0){if(p=gI(p,l,us),p!==null){yi=p;return}}else{if(p=vI(p,l),p!==null){p.flags&=32767,yi=p;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Ci=6,yi=null;return}}if(l=l.sibling,l!==null){yi=l;return}yi=l=o}while(l!==null);Ci===0&&(Ci=5)}function $c(o,l,p){var _=tn,b=Rs.transition;try{Rs.transition=null,tn=1,TI(o,l,p,_)}finally{Rs.transition=b,tn=_}return null}function TI(o,l,p,_){do id();while(Al!==null);if((_n&6)!==0)throw Error(t(327));p=o.finishedWork;var b=o.finishedLanes;if(p===null)return null;if(o.finishedWork=null,o.finishedLanes=0,p===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var I=p.lanes|p.childLanes;if(Ui(o,I),o===Bi&&(yi=Bi=null,Qi=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||ag||(ag=!0,iM(xt,function(){return id(),null})),I=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||I){I=Rs.transition,Rs.transition=null;var V=tn;tn=1;var $=_n;_n|=4,z0.current=null,xI(o,p),Gw(p,o),pi(Nh),Or=!!vl,Nh=vl=null,o.current=p,_I(p),be(),_n=$,tn=V,Rs.transition=I}else o.current=p;if(ag&&(ag=!1,Al=o,lg=b),I=o.pendingLanes,I===0&&(Cl=null),Nt(p.stateNode),jr(o,oe()),l!==null)for(_=o.onRecoverableError,p=0;p<l.length;p++)b=l[p],_(b.value,{componentStack:b.stack,digest:b.digest});if(og)throw og=!1,o=H0,H0=null,o;return(lg&1)!==0&&o.tag!==0&&id(),I=o.pendingLanes,(I&1)!==0?o===G0?ap++:(ap=0,G0=o):ap=0,Ts(),null}function id(){if(Al!==null){var o=nl(lg),l=Rs.transition,p=tn;try{if(Rs.transition=null,tn=16>o?16:o,Al===null)var _=!1;else{if(o=Al,Al=null,lg=0,(_n&6)!==0)throw Error(t(331));var b=_n;for(_n|=4,wt=o.current;wt!==null;){var I=wt,V=I.child;if((wt.flags&16)!==0){var $=I.deletions;if($!==null){for(var se=0;se<$.length;se++){var Me=$[se];for(wt=Me;wt!==null;){var He=wt;switch(He.tag){case 0:case 11:case 15:rp(8,He,I)}var qe=He.child;if(qe!==null)qe.return=He,wt=qe;else for(;wt!==null;){He=wt;var Ve=He.sibling,mt=He.return;if(Fw(He),He===Me){wt=null;break}if(Ve!==null){Ve.return=mt,wt=Ve;break}wt=mt}}}var Mt=I.alternate;if(Mt!==null){var Ct=Mt.child;if(Ct!==null){Mt.child=null;do{var ui=Ct.sibling;Ct.sibling=null,Ct=ui}while(Ct!==null)}}wt=I}}if((I.subtreeFlags&2064)!==0&&V!==null)V.return=I,wt=V;else e:for(;wt!==null;){if(I=wt,(I.flags&2048)!==0)switch(I.tag){case 0:case 11:case 15:rp(9,I,I.return)}var ve=I.sibling;if(ve!==null){ve.return=I.return,wt=ve;break e}wt=I.return}}var ae=o.current;for(wt=ae;wt!==null;){V=wt;var xe=V.child;if((V.subtreeFlags&2064)!==0&&xe!==null)xe.return=V,wt=xe;else e:for(V=ae;wt!==null;){if($=wt,($.flags&2048)!==0)try{switch($.tag){case 0:case 11:case 15:ig(9,$)}}catch(It){ri($,$.return,It)}if($===V){wt=null;break e}var $e=$.sibling;if($e!==null){$e.return=$.return,wt=$e;break e}wt=$.return}}if(_n=b,Ts(),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(St,o)}catch{}_=!0}return _}finally{tn=p,Rs.transition=l}}return!1}function eM(o,l,p){l=T(p,l),l=ue(o,l,1),o=Hn(o,l,1),l=Tr(),o!==null&&(Zn(o,1,l),jr(o,l))}function ri(o,l,p){if(o.tag===3)eM(o,o,p);else for(;l!==null;){if(l.tag===3){eM(l,o,p);break}else if(l.tag===1){var _=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Cl===null||!Cl.has(_))){o=T(p,o),o=Ae(l,o,1),l=Hn(l,o,1),o=Tr(),l!==null&&(Zn(l,1,o),jr(l,o));break}}l=l.return}}function bI(o,l,p){var _=o.pingCache;_!==null&&_.delete(l),l=Tr(),o.pingedLanes|=o.suspendedLanes&p,Bi===o&&(Qi&p)===p&&(Ci===4||Ci===3&&(Qi&130023424)===Qi&&500>oe()-V0?Zc(o,0):B0|=p),jr(o,l)}function tM(o,l){l===0&&((o.mode&1)===0?l=1:(l=Ht,Ht<<=1,(Ht&130023424)===0&&(Ht=4194304)));var p=Tr();o=os(o,l),o!==null&&(Zn(o,l,p),jr(o,p))}function CI(o){var l=o.memoizedState,p=0;l!==null&&(p=l.retryLane),tM(o,p)}function AI(o,l){var p=0;switch(o.tag){case 13:var _=o.stateNode,b=o.memoizedState;b!==null&&(p=b.retryLane);break;case 19:_=o.stateNode;break;default:throw Error(t(314))}_!==null&&_.delete(l),tM(o,p)}var nM;nM=function(o,l,p){if(o!==null)if(o.memoizedProps!==l.pendingProps||Yi.current)nn=!0;else{if((o.lanes&p)===0&&(l.flags&128)===0)return nn=!1,mI(o,l,p);nn=(o.flags&131072)!==0}else nn=!1,zn&&(l.flags&1048576)!==0&&Bh(l,Hf,l.index);switch(l.lanes=0,l.tag){case 2:var _=l.type;tg(o,l),o=l.pendingProps;var b=ga(l,wi.current);Lo(l,p),b=Hc(null,l,_,o,b,p);var I=qh();return l.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,ki(_)?(I=!0,va(l)):I=!1,l.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,Qt(l),b.updater=Jf,l.stateNode=b,b._reactInternals=l,x(l,_,o,p),l=Zt(null,l,_,!0,I,p)):(l.tag=0,zn&&I&&Vh(l),ut(null,l,b,p),l=l.child),l;case 16:_=l.elementType;e:{switch(tg(o,l),o=l.pendingProps,b=_._init,_=b(_._payload),l.type=_,b=l.tag=PI(_),o=Gr(_,o),b){case 0:l=ot(null,l,_,o,p);break e;case 1:l=Rt(null,l,_,o,p);break e;case 11:l=bi(null,l,_,o,p);break e;case 14:l=Er(null,l,_,Gr(_.type,o),p);break e}throw Error(t(306,_,""))}return l;case 0:return _=l.type,b=l.pendingProps,b=l.elementType===_?b:Gr(_,b),ot(o,l,_,b,p);case 1:return _=l.type,b=l.pendingProps,b=l.elementType===_?b:Gr(_,b),Rt(o,l,_,b,p);case 3:e:{if(qt(l),o===null)throw Error(t(387));_=l.pendingProps,I=l.memoizedState,b=I.element,Qn(o,l),Yn(l,_,null,p);var V=l.memoizedState;if(_=V.element,I.isDehydrated)if(I={element:_,isDehydrated:!1,cache:V.cache,pendingSuspenseBoundaries:V.pendingSuspenseBoundaries,transitions:V.transitions},l.updateQueue.baseState=I,l.memoizedState=I,l.flags&256){b=T(Error(t(423)),l),l=gn(o,l,_,p,b);break e}else if(_!==b){b=T(Error(t(424)),l),l=gn(o,l,_,p,b);break e}else for(Ki=Hs(l.stateNode.containerInfo.firstChild),Mi=l,zn=!0,Hr=null,p=Uc(l,null,_,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(No(),_===b){l=Pa(o,l,p);break e}ut(o,l,_,p)}l=l.child}return l;case 5:return ba(l),o===null&&Wf(l),_=l.type,b=l.pendingProps,I=o!==null?o.memoizedProps:null,V=b.children,Lh(_,b)?V=null:I!==null&&Lh(_,I)&&(l.flags|=32),Ce(o,l),ut(o,l,V,p),l.child;case 6:return o===null&&Wf(l),null;case 13:return eo(o,l,p);case 4:return Bc(l,l.stateNode.containerInfo),_=l.pendingProps,o===null?l.child=_a(l,null,_,p):ut(o,l,_,p),l.child;case 11:return _=l.type,b=l.pendingProps,b=l.elementType===_?b:Gr(_,b),bi(o,l,_,b,p);case 7:return ut(o,l,l.pendingProps,p),l.child;case 8:return ut(o,l,l.pendingProps.children,p),l.child;case 12:return ut(o,l,l.pendingProps.children,p),l.child;case 10:e:{if(_=l.type._context,b=l.pendingProps,I=l.memoizedProps,V=b.value,Pn(Sa,_._currentValue),_._currentValue=V,I!==null)if(vr(I.value,V)){if(I.children===b.children&&!Yi.current){l=Pa(o,l,p);break e}}else for(I=l.child,I!==null&&(I.return=l);I!==null;){var $=I.dependencies;if($!==null){V=I.child;for(var se=$.firstContext;se!==null;){if(se.context===_){if(I.tag===1){se=Cn(-1,p&-p),se.tag=2;var Me=I.updateQueue;if(Me!==null){Me=Me.shared;var He=Me.pending;He===null?se.next=se:(se.next=He.next,He.next=se),Me.pending=se}}I.lanes|=p,se=I.alternate,se!==null&&(se.lanes|=p),Fc(I.return,p,l),$.lanes|=p;break}se=se.next}}else if(I.tag===10)V=I.type===l.type?null:I.child;else if(I.tag===18){if(V=I.return,V===null)throw Error(t(341));V.lanes|=p,$=V.alternate,$!==null&&($.lanes|=p),Fc(V,p,l),V=I.sibling}else V=I.child;if(V!==null)V.return=I;else for(V=I;V!==null;){if(V===l){V=null;break}if(I=V.sibling,I!==null){I.return=V.return,V=I;break}V=V.return}I=V}ut(o,l,b.children,p),l=l.child}return l;case 9:return b=l.type,_=l.pendingProps.children,Lo(l,p),b=_r(b),_=_(b),l.flags|=1,ut(o,l,_,p),l.child;case 14:return _=l.type,b=Gr(_,l.pendingProps),b=Gr(_.type,b),Er(o,l,_,b,p);case 15:return _e(o,l,l.type,l.pendingProps,p);case 17:return _=l.type,b=l.pendingProps,b=l.elementType===_?b:Gr(_,b),tg(o,l),l.tag=1,ki(_)?(o=!0,va(l)):o=!1,Lo(l,p),u(l,_,b),x(l,_,b,p),Zt(null,l,_,!0,o,p);case 19:return Lw(o,l,p);case 22:return me(o,l,p)}throw Error(t(156,l.tag))};function iM(o,l){return j(o,l)}function RI(o,l,p,_){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ps(o,l,p,_){return new RI(o,l,p,_)}function K0(o){return o=o.prototype,!(!o||!o.isReactComponent)}function PI(o){if(typeof o=="function")return K0(o)?1:0;if(o!=null){if(o=o.$$typeof,o===J)return 11;if(o===ge)return 14}return 2}function Il(o,l){var p=o.alternate;return p===null?(p=Ps(o.tag,l,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=l,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&14680064,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,l=o.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p}function dg(o,l,p,_,b,I){var V=2;if(_=o,typeof o=="function")K0(o)&&(V=1);else if(typeof o=="string")V=5;else e:switch(o){case F:return Qc(p.children,b,I,l);case z:V=8,b|=8;break;case k:return o=Ps(12,p,l,b|2),o.elementType=k,o.lanes=I,o;case Q:return o=Ps(13,p,l,b),o.elementType=Q,o.lanes=I,o;case ce:return o=Ps(19,p,l,b),o.elementType=ce,o.lanes=I,o;case de:return hg(p,b,I,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case L:V=10;break e;case G:V=9;break e;case J:V=11;break e;case ge:V=14;break e;case ne:V=16,_=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return l=Ps(V,p,l,b),l.elementType=o,l.type=_,l.lanes=I,l}function Qc(o,l,p,_){return o=Ps(7,o,_,l),o.lanes=p,o}function hg(o,l,p,_){return o=Ps(22,o,_,l),o.elementType=de,o.lanes=p,o.stateNode={isHidden:!1},o}function Z0(o,l,p){return o=Ps(6,o,null,l),o.lanes=p,o}function $0(o,l,p){return l=Ps(4,o.children!==null?o.children:[],o.key,l),l.lanes=p,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function II(o,l,p,_,b){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oi(0),this.expirationTimes=Oi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oi(0),this.identifierPrefix=_,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function Q0(o,l,p,_,b,I,V,$,se){return o=new II(o,l,p,$,se),l===1?(l=1,I===!0&&(l|=8)):l=0,I=Ps(3,null,null,l),o.current=I,I.stateNode=o,I.memoizedState={element:_,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qt(I),o}function NI(o,l,p){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:_==null?null:""+_,children:o,containerInfo:l,implementation:p}}function rM(o){if(!o)return Ws;o=o._reactInternals;e:{if(ys(o)!==o||o.tag!==1)throw Error(t(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(ki(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(o.tag===1){var p=o.type;if(ki(p))return Ic(o,p,l)}return l}function sM(o,l,p,_,b,I,V,$,se){return o=Q0(p,_,!0,o,b,I,V,$,se),o.context=rM(null),p=o.current,_=Tr(),b=Rl(p),I=Cn(_,b),I.callback=l??null,Hn(p,I,b),o.current.lanes=b,Zn(o,b,_),jr(o,_),o}function pg(o,l,p,_){var b=l.current,I=Tr(),V=Rl(b);return p=rM(p),l.context===null?l.context=p:l.pendingContext=p,l=Cn(I,V),l.payload={element:o},_=_===void 0?null:_,_!==null&&(l.callback=_),o=Hn(b,l,V),o!==null&&(io(o,b,V,I),Fi(o,b,V)),V}function mg(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function oM(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<l?p:l}}function J0(o,l){oM(o,l),(o=o.alternate)&&oM(o,l)}function LI(){return null}var aM=typeof reportError=="function"?reportError:function(o){console.error(o)};function ex(o){this._internalRoot=o}gg.prototype.render=ex.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(t(409));pg(o,l,null,null)},gg.prototype.unmount=ex.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;Kc(function(){pg(null,o,null,null)}),l[xr]=null}};function gg(o){this._internalRoot=o}gg.prototype.unstable_scheduleHydration=function(o){if(o){var l=af();o={blockedOn:null,target:o,priority:l};for(var p=0;p<Eo.length&&l!==0&&l<Eo[p].priority;p++);Eo.splice(p,0,o),p===0&&uf(o)}};function tx(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function vg(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function lM(){}function DI(o,l,p,_,b){if(b){if(typeof _=="function"){var I=_;_=function(){var Me=mg(V);I.call(Me)}}var V=sM(l,_,o,0,null,!1,!1,"",lM);return o._reactRootContainer=V,o[xr]=V.current,ml(o.nodeType===8?o.parentNode:o),Kc(),V}for(;b=o.lastChild;)o.removeChild(b);if(typeof _=="function"){var $=_;_=function(){var Me=mg(se);$.call(Me)}}var se=Q0(o,0,!1,null,null,!1,!1,"",lM);return o._reactRootContainer=se,o[xr]=se.current,ml(o.nodeType===8?o.parentNode:o),Kc(function(){pg(l,se,p,_)}),se}function yg(o,l,p,_,b){var I=p._reactRootContainer;if(I){var V=I;if(typeof b=="function"){var $=b;b=function(){var se=mg(V);$.call(se)}}pg(l,V,o,b)}else V=DI(p,l,o,b,_);return mg(V)}pc=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var p=ti(l.pendingLanes);p!==0&&(_s(l,p|1),jr(l,oe()),(_n&6)===0&&(nd=oe()+500,Ts()))}break;case 13:Kc(function(){var _=os(o,1);if(_!==null){var b=Tr();io(_,o,1,b)}}),J0(o,1)}},mh=function(o){if(o.tag===13){var l=os(o,134217728);if(l!==null){var p=Tr();io(l,o,134217728,p)}J0(o,134217728)}},Am=function(o){if(o.tag===13){var l=Rl(o),p=os(o,l);if(p!==null){var _=Tr();io(p,o,l,_)}J0(o,l)}},af=function(){return tn},lf=function(o,l){var p=tn;try{return tn=o,l()}finally{tn=p}},Ye=function(o,l,p){switch(l){case"input":if(nt(o,p),l=p.name,p.type==="radio"&&l!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<p.length;l++){var _=p[l];if(_!==o&&_.form===o.form){var b=zf(_);if(!b)throw Error(t(90));Se(_),nt(_,b)}}}break;case"textarea":Re(o,p);break;case"select":l=p.value,l!=null&&Y(o,!!p.multiple,l,!1)}},pn=X0,Nn=Kc;var OI={usingClientEntryPoint:!1,Events:[Gs,$n,zf,st,Lt,X0]},lp={findFiberByHostInstance:Io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},UI={bundleType:lp.bundleType,version:lp.version,rendererPackageName:lp.rendererPackageName,rendererConfig:lp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=sf(o),o===null?null:o.stateNode},findFiberByHostInstance:lp.findFiberByHostInstance||LI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xg.isDisabled&&xg.supportsFiber)try{St=xg.inject(UI),pt=xg}catch{}}return Xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OI,Xr.createPortal=function(o,l){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tx(l))throw Error(t(200));return NI(o,l,null,p)},Xr.createRoot=function(o,l){if(!tx(o))throw Error(t(299));var p=!1,_="",b=aM;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(_=l.identifierPrefix),l.onRecoverableError!==void 0&&(b=l.onRecoverableError)),l=Q0(o,1,!1,null,null,p,!1,_,b),o[xr]=l.current,ml(o.nodeType===8?o.parentNode:o),new ex(l)},Xr.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=sf(l),o=o===null?null:o.stateNode,o},Xr.flushSync=function(o){return Kc(o)},Xr.hydrate=function(o,l,p){if(!vg(l))throw Error(t(200));return yg(null,o,l,!0,p)},Xr.hydrateRoot=function(o,l,p){if(!tx(o))throw Error(t(405));var _=p!=null&&p.hydratedSources||null,b=!1,I="",V=aM;if(p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(I=p.identifierPrefix),p.onRecoverableError!==void 0&&(V=p.onRecoverableError)),l=sM(l,null,o,1,p??null,b,!1,I,V),o[xr]=l.current,ml(o),_)for(o=0;o<_.length;o++)p=_[o],b=p._getVersion,b=b(p._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[p,b]:l.mutableSourceEagerHydrationData.push(p,b);return new gg(l)},Xr.render=function(o,l,p){if(!vg(l))throw Error(t(200));return yg(null,o,l,!1,p)},Xr.unmountComponentAtNode=function(o){if(!vg(o))throw Error(t(40));return o._reactRootContainer?(Kc(function(){yg(null,null,o,!1,function(){o._reactRootContainer=null,o[xr]=null})}),!0):!1},Xr.unstable_batchedUpdates=X0,Xr.unstable_renderSubtreeIntoContainer=function(o,l,p,_){if(!vg(p))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return yg(o,l,p,!1,_)},Xr.version="18.3.1-next-f1338f8080-20240426",Xr}var vM;function PT(){if(vM)return sx.exports;vM=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),sx.exports=WI(),sx.exports}var yM;function jI(){if(yM)return Sg;yM=1;var i=PT();return Sg.createRoot=i.createRoot,Sg.hydrateRoot=i.hydrateRoot,Sg}var XI=jI(),Ry=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(i){return this.listeners.add(i),this.onSubscribe(),()=>{this.listeners.delete(i),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},YI={setTimeout:(i,e)=>setTimeout(i,e),clearTimeout:i=>clearTimeout(i),setInterval:(i,e)=>setInterval(i,e),clearInterval:i=>clearInterval(i)},Xl,dS,ST,qI=(ST=class{constructor(){vn(this,Xl,YI);vn(this,dS,!1)}setTimeoutProvider(i){Kt(this,Xl,i)}setTimeout(i,e){return Oe(this,Xl).setTimeout(i,e)}clearTimeout(i){Oe(this,Xl).clearTimeout(i)}setInterval(i,e){return Oe(this,Xl).setInterval(i,e)}clearInterval(i){Oe(this,Xl).clearInterval(i)}},Xl=new WeakMap,dS=new WeakMap,ST),w_=new qI;function KI(i){setTimeout(i,0)}var Py=typeof window>"u"||"Deno"in globalThis;function lo(){}function ZI(i,e){return typeof i=="function"?i(e):i}function $I(i){return typeof i=="number"&&i>=0&&i!==1/0}function QI(i,e){return Math.max(i+(e||0)-Date.now(),0)}function M_(i,e){return typeof i=="function"?i(e):i}function JI(i,e){return typeof i=="function"?i(e):i}function xM(i,e){const{type:t="all",exact:n,fetchStatus:r,predicate:s,queryKey:a,stale:c}=i;if(a){if(n){if(e.queryHash!==pS(a,e.options))return!1}else if(!Vp(e.queryKey,a))return!1}if(t!=="all"){const d=e.isActive();if(t==="active"&&!d||t==="inactive"&&d)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||r&&r!==e.state.fetchStatus||s&&!s(e))}function _M(i,e){const{exact:t,status:n,predicate:r,mutationKey:s}=i;if(s){if(!e.options.mutationKey)return!1;if(t){if(Bp(e.options.mutationKey)!==Bp(s))return!1}else if(!Vp(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||r&&!r(e))}function pS(i,e){return((e==null?void 0:e.queryKeyHashFn)||Bp)(i)}function Bp(i){return JSON.stringify(i,(e,t)=>E_(t)?Object.keys(t).sort().reduce((n,r)=>(n[r]=t[r],n),{}):t)}function Vp(i,e){return i===e?!0:typeof i!=typeof e?!1:i&&e&&typeof i=="object"&&typeof e=="object"?Object.keys(e).every(t=>Vp(i[t],e[t])):!1}var e2=Object.prototype.hasOwnProperty;function IT(i,e){if(i===e)return i;const t=SM(i)&&SM(e);if(!t&&!(E_(i)&&E_(e)))return e;const r=(t?i:Object.keys(i)).length,s=t?e:Object.keys(e),a=s.length,c=t?new Array(a):{};let d=0;for(let h=0;h<a;h++){const m=t?h:s[h],g=i[m],v=e[m];if(g===v){c[m]=g,(t?h<r:e2.call(i,m))&&d++;continue}if(g===null||v===null||typeof g!="object"||typeof v!="object"){c[m]=v;continue}const y=IT(g,v);c[m]=y,y===g&&d++}return r===a&&d===r?i:c}function SM(i){return Array.isArray(i)&&i.length===Object.keys(i).length}function E_(i){if(!wM(i))return!1;const e=i.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!wM(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(i)!==Object.prototype)}function wM(i){return Object.prototype.toString.call(i)==="[object Object]"}function t2(i){return new Promise(e=>{w_.setTimeout(e,i)})}function n2(i,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(i,e):t.structuralSharing!==!1?IT(i,e):e}function i2(i,e,t=0){const n=[...i,e];return t&&n.length>t?n.slice(1):n}function r2(i,e,t=0){const n=[e,...i];return t&&n.length>t?n.slice(0,-1):n}var mS=Symbol();function NT(i,e){return!i.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!i.queryFn||i.queryFn===mS?()=>Promise.reject(new Error(`Missing queryFn: '${i.queryHash}'`)):i.queryFn}var Tu,Yl,Hd,wT,s2=(wT=class extends Ry{constructor(){super();vn(this,Tu);vn(this,Yl);vn(this,Hd);Kt(this,Hd,e=>{if(!Py&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){Oe(this,Yl)||this.setEventListener(Oe(this,Hd))}onUnsubscribe(){var e;this.hasListeners()||((e=Oe(this,Yl))==null||e.call(this),Kt(this,Yl,void 0))}setEventListener(e){var t;Kt(this,Hd,e),(t=Oe(this,Yl))==null||t.call(this),Kt(this,Yl,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){Oe(this,Tu)!==e&&(Kt(this,Tu,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof Oe(this,Tu)=="boolean"?Oe(this,Tu):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Tu=new WeakMap,Yl=new WeakMap,Hd=new WeakMap,wT),LT=new s2;function o2(){let i,e;const t=new Promise((r,s)=>{i=r,e=s});t.status="pending",t.catch(()=>{});function n(r){Object.assign(t,r),delete t.resolve,delete t.reject}return t.resolve=r=>{n({status:"fulfilled",value:r}),i(r)},t.reject=r=>{n({status:"rejected",reason:r}),e(r)},t}var a2=KI;function l2(){let i=[],e=0,t=c=>{c()},n=c=>{c()},r=a2;const s=c=>{e?i.push(c):r(()=>{t(c)})},a=()=>{const c=i;i=[],c.length&&r(()=>{n(()=>{c.forEach(d=>{t(d)})})})};return{batch:c=>{let d;e++;try{d=c()}finally{e--,e||a()}return d},batchCalls:c=>(...d)=>{s(()=>{c(...d)})},schedule:s,setNotifyFunction:c=>{t=c},setBatchNotifyFunction:c=>{n=c},setScheduler:c=>{r=c}}}var Rr=l2(),Gd,ql,Wd,MT,c2=(MT=class extends Ry{constructor(){super();vn(this,Gd,!0);vn(this,ql);vn(this,Wd);Kt(this,Wd,e=>{if(!Py&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){Oe(this,ql)||this.setEventListener(Oe(this,Wd))}onUnsubscribe(){var e;this.hasListeners()||((e=Oe(this,ql))==null||e.call(this),Kt(this,ql,void 0))}setEventListener(e){var t;Kt(this,Wd,e),(t=Oe(this,ql))==null||t.call(this),Kt(this,ql,e(this.setOnline.bind(this)))}setOnline(e){Oe(this,Gd)!==e&&(Kt(this,Gd,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return Oe(this,Gd)}},Gd=new WeakMap,ql=new WeakMap,Wd=new WeakMap,MT),Iv=new c2;function u2(i){return Math.min(1e3*2**i,3e4)}function DT(i){return(i??"online")==="online"?Iv.isOnline():!0}var T_=class extends Error{constructor(i){super("CancelledError"),this.revert=i==null?void 0:i.revert,this.silent=i==null?void 0:i.silent}};function OT(i){let e=!1,t=0,n;const r=o2(),s=()=>r.status!=="pending",a=E=>{var w;if(!s()){const S=new T_(E);v(S),(w=i.onCancel)==null||w.call(i,S)}},c=()=>{e=!0},d=()=>{e=!1},h=()=>LT.isFocused()&&(i.networkMode==="always"||Iv.isOnline())&&i.canRun(),m=()=>DT(i.networkMode)&&i.canRun(),g=E=>{s()||(n==null||n(),r.resolve(E))},v=E=>{s()||(n==null||n(),r.reject(E))},y=()=>new Promise(E=>{var w;n=S=>{(s()||h())&&E(S)},(w=i.onPause)==null||w.call(i)}).then(()=>{var E;n=void 0,s()||(E=i.onContinue)==null||E.call(i)}),M=()=>{if(s())return;let E;const w=t===0?i.initialPromise:void 0;try{E=w??i.fn()}catch(S){E=Promise.reject(S)}Promise.resolve(E).then(g).catch(S=>{var U;if(s())return;const A=i.retry??(Py?0:3),C=i.retryDelay??u2,R=typeof C=="function"?C(t,S):C,O=A===!0||typeof A=="number"&&t<A||typeof A=="function"&&A(t,S);if(e||!O){v(S);return}t++,(U=i.onFail)==null||U.call(i,t,S),t2(R).then(()=>h()?void 0:y()).then(()=>{e?v(S):M()})})};return{promise:r,status:()=>r.status,cancel:a,continue:()=>(n==null||n(),r),cancelRetry:c,continueRetry:d,canStart:m,start:()=>(m()?M():y().then(M),r)}}var bu,ET,UT=(ET=class{constructor(){vn(this,bu)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),$I(this.gcTime)&&Kt(this,bu,w_.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(i){this.gcTime=Math.max(this.gcTime||0,i??(Py?1/0:300*1e3))}clearGcTimeout(){Oe(this,bu)&&(w_.clearTimeout(Oe(this,bu)),Kt(this,bu,void 0))}},bu=new WeakMap,ET),Cu,jd,Ns,Au,Gi,um,Ru,uo,za,TT,f2=(TT=class extends UT{constructor(e){super();vn(this,uo);vn(this,Cu);vn(this,jd);vn(this,Ns);vn(this,Au);vn(this,Gi);vn(this,um);vn(this,Ru);Kt(this,Ru,!1),Kt(this,um,e.defaultOptions),this.setOptions(e.options),this.observers=[],Kt(this,Au,e.client),Kt(this,Ns,Oe(this,Au).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Kt(this,Cu,EM(this.options)),this.state=e.state??Oe(this,Cu),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Oe(this,Gi))==null?void 0:e.promise}setOptions(e){if(this.options={...Oe(this,um),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=EM(this.options);t.data!==void 0&&(this.setState(MM(t.data,t.dataUpdatedAt)),Kt(this,Cu,t))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Oe(this,Ns).remove(this)}setData(e,t){const n=n2(this.state.data,e,this.options);return ar(this,uo,za).call(this,{data:n,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),n}setState(e,t){ar(this,uo,za).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var n,r;const t=(n=Oe(this,Gi))==null?void 0:n.promise;return(r=Oe(this,Gi))==null||r.cancel(e),t?t.then(lo).catch(lo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Oe(this,Cu))}isActive(){return this.observers.some(e=>JI(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===mS||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>M_(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!QI(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=Oe(this,Gi))==null||t.continue()}onOnline(){var t;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=Oe(this,Gi))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Oe(this,Ns).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(Oe(this,Gi)&&(Oe(this,Ru)?Oe(this,Gi).cancel({revert:!0}):Oe(this,Gi).cancelRetry()),this.scheduleGc()),Oe(this,Ns).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ar(this,uo,za).call(this,{type:"invalidate"})}async fetch(e,t){var d,h,m,g,v,y,M,E,w,S,A,C;if(this.state.fetchStatus!=="idle"&&((d=Oe(this,Gi))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(Oe(this,Gi))return Oe(this,Gi).continueRetry(),Oe(this,Gi).promise}if(e&&this.setOptions(e),!this.options.queryFn){const R=this.observers.find(O=>O.options.queryFn);R&&this.setOptions(R.options)}const n=new AbortController,r=R=>{Object.defineProperty(R,"signal",{enumerable:!0,get:()=>(Kt(this,Ru,!0),n.signal)})},s=()=>{const R=NT(this.options,t),U=(()=>{const F={client:Oe(this,Au),queryKey:this.queryKey,meta:this.meta};return r(F),F})();return Kt(this,Ru,!1),this.options.persister?this.options.persister(R,U,this):R(U)},c=(()=>{const R={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:Oe(this,Au),state:this.state,fetchFn:s};return r(R),R})();(h=this.options.behavior)==null||h.onFetch(c,this),Kt(this,jd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=c.fetchOptions)==null?void 0:m.meta))&&ar(this,uo,za).call(this,{type:"fetch",meta:(g=c.fetchOptions)==null?void 0:g.meta}),Kt(this,Gi,OT({initialPromise:t==null?void 0:t.initialPromise,fn:c.fetchFn,onCancel:R=>{R instanceof T_&&R.revert&&this.setState({...Oe(this,jd),fetchStatus:"idle"}),n.abort()},onFail:(R,O)=>{ar(this,uo,za).call(this,{type:"failed",failureCount:R,error:O})},onPause:()=>{ar(this,uo,za).call(this,{type:"pause"})},onContinue:()=>{ar(this,uo,za).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const R=await Oe(this,Gi).start();if(R===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(R),(y=(v=Oe(this,Ns).config).onSuccess)==null||y.call(v,R,this),(E=(M=Oe(this,Ns).config).onSettled)==null||E.call(M,R,this.state.error,this),R}catch(R){if(R instanceof T_){if(R.silent)return Oe(this,Gi).promise;if(R.revert){if(this.state.data===void 0)throw R;return this.state.data}}throw ar(this,uo,za).call(this,{type:"error",error:R}),(S=(w=Oe(this,Ns).config).onError)==null||S.call(w,R,this),(C=(A=Oe(this,Ns).config).onSettled)==null||C.call(A,this.state.data,R,this),R}finally{this.scheduleGc()}}},Cu=new WeakMap,jd=new WeakMap,Ns=new WeakMap,Au=new WeakMap,Gi=new WeakMap,um=new WeakMap,Ru=new WeakMap,uo=new WeakSet,za=function(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...d2(n.data,this.options),fetchMeta:e.meta??null};case"success":const r={...n,...MM(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Kt(this,jd,e.manual?r:void 0),r;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),Rr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Oe(this,Ns).notify({query:this,type:"updated",action:e})})},TT);function d2(i,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:DT(e.networkMode)?"fetching":"paused",...i===void 0&&{error:null,status:"pending"}}}function MM(i,e){return{data:i,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function EM(i){const e=typeof i.initialData=="function"?i.initialData():i.initialData,t=e!==void 0,n=t?typeof i.initialDataUpdatedAt=="function"?i.initialDataUpdatedAt():i.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}function TM(i){return{onFetch:(e,t)=>{var m,g,v,y,M;const n=e.options,r=(v=(g=(m=e.fetchOptions)==null?void 0:m.meta)==null?void 0:g.fetchMore)==null?void 0:v.direction,s=((y=e.state.data)==null?void 0:y.pages)||[],a=((M=e.state.data)==null?void 0:M.pageParams)||[];let c={pages:[],pageParams:[]},d=0;const h=async()=>{let E=!1;const w=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?E=!0:e.signal.addEventListener("abort",()=>{E=!0}),e.signal)})},S=NT(e.options,e.fetchOptions),A=async(C,R,O)=>{if(E)return Promise.reject();if(R==null&&C.pages.length)return Promise.resolve(C);const F=(()=>{const G={client:e.client,queryKey:e.queryKey,pageParam:R,direction:O?"backward":"forward",meta:e.options.meta};return w(G),G})(),z=await S(F),{maxPages:k}=e.options,L=O?r2:i2;return{pages:L(C.pages,z,k),pageParams:L(C.pageParams,R,k)}};if(r&&s.length){const C=r==="backward",R=C?h2:bM,O={pages:s,pageParams:a},U=R(n,O);c=await A(O,U,C)}else{const C=i??s.length;do{const R=d===0?a[0]??n.initialPageParam:bM(n,c);if(d>0&&R==null)break;c=await A(c,R),d++}while(d<C)}return c};e.options.persister?e.fetchFn=()=>{var E,w;return(w=(E=e.options).persister)==null?void 0:w.call(E,h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=h}}}function bM(i,{pages:e,pageParams:t}){const n=e.length-1;return e.length>0?i.getNextPageParam(e[n],e,t[n],t):void 0}function h2(i,{pages:e,pageParams:t}){var n;return e.length>0?(n=i.getPreviousPageParam)==null?void 0:n.call(i,e[0],e,t[0],t):void 0}var fm,ko,Ar,Pu,Fo,Gl,bT,p2=(bT=class extends UT{constructor(e){super();vn(this,Fo);vn(this,fm);vn(this,ko);vn(this,Ar);vn(this,Pu);Kt(this,fm,e.client),this.mutationId=e.mutationId,Kt(this,Ar,e.mutationCache),Kt(this,ko,[]),this.state=e.state||m2(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Oe(this,ko).includes(e)||(Oe(this,ko).push(e),this.clearGcTimeout(),Oe(this,Ar).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Kt(this,ko,Oe(this,ko).filter(t=>t!==e)),this.scheduleGc(),Oe(this,Ar).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Oe(this,ko).length||(this.state.status==="pending"?this.scheduleGc():Oe(this,Ar).remove(this))}continue(){var e;return((e=Oe(this,Pu))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,c,d,h,m,g,v,y,M,E,w,S,A,C,R,O,U,F,z,k;const t=()=>{ar(this,Fo,Gl).call(this,{type:"continue"})},n={client:Oe(this,fm),meta:this.options.meta,mutationKey:this.options.mutationKey};Kt(this,Pu,OT({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(L,G)=>{ar(this,Fo,Gl).call(this,{type:"failed",failureCount:L,error:G})},onPause:()=>{ar(this,Fo,Gl).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Oe(this,Ar).canRun(this)}));const r=this.state.status==="pending",s=!Oe(this,Pu).canStart();try{if(r)t();else{ar(this,Fo,Gl).call(this,{type:"pending",variables:e,isPaused:s}),await((c=(a=Oe(this,Ar).config).onMutate)==null?void 0:c.call(a,e,this,n));const G=await((h=(d=this.options).onMutate)==null?void 0:h.call(d,e,n));G!==this.state.context&&ar(this,Fo,Gl).call(this,{type:"pending",context:G,variables:e,isPaused:s})}const L=await Oe(this,Pu).start();return await((g=(m=Oe(this,Ar).config).onSuccess)==null?void 0:g.call(m,L,e,this.state.context,this,n)),await((y=(v=this.options).onSuccess)==null?void 0:y.call(v,L,e,this.state.context,n)),await((E=(M=Oe(this,Ar).config).onSettled)==null?void 0:E.call(M,L,null,this.state.variables,this.state.context,this,n)),await((S=(w=this.options).onSettled)==null?void 0:S.call(w,L,null,e,this.state.context,n)),ar(this,Fo,Gl).call(this,{type:"success",data:L}),L}catch(L){try{throw await((C=(A=Oe(this,Ar).config).onError)==null?void 0:C.call(A,L,e,this.state.context,this,n)),await((O=(R=this.options).onError)==null?void 0:O.call(R,L,e,this.state.context,n)),await((F=(U=Oe(this,Ar).config).onSettled)==null?void 0:F.call(U,void 0,L,this.state.variables,this.state.context,this,n)),await((k=(z=this.options).onSettled)==null?void 0:k.call(z,void 0,L,e,this.state.context,n)),L}finally{ar(this,Fo,Gl).call(this,{type:"error",error:L})}}finally{Oe(this,Ar).runNext(this)}}},fm=new WeakMap,ko=new WeakMap,Ar=new WeakMap,Pu=new WeakMap,Fo=new WeakSet,Gl=function(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Rr.batch(()=>{Oe(this,ko).forEach(n=>{n.onMutationUpdate(e)}),Oe(this,Ar).notify({mutation:this,type:"updated",action:e})})},bT);function m2(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ha,fo,dm,CT,g2=(CT=class extends Ry{constructor(e={}){super();vn(this,Ha);vn(this,fo);vn(this,dm);this.config=e,Kt(this,Ha,new Set),Kt(this,fo,new Map),Kt(this,dm,0)}build(e,t,n){const r=new p2({client:e,mutationCache:this,mutationId:++_g(this,dm)._,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){Oe(this,Ha).add(e);const t=wg(e);if(typeof t=="string"){const n=Oe(this,fo).get(t);n?n.push(e):Oe(this,fo).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Oe(this,Ha).delete(e)){const t=wg(e);if(typeof t=="string"){const n=Oe(this,fo).get(t);if(n)if(n.length>1){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}else n[0]===e&&Oe(this,fo).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=wg(e);if(typeof t=="string"){const n=Oe(this,fo).get(t),r=n==null?void 0:n.find(s=>s.state.status==="pending");return!r||r===e}else return!0}runNext(e){var n;const t=wg(e);if(typeof t=="string"){const r=(n=Oe(this,fo).get(t))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Rr.batch(()=>{Oe(this,Ha).forEach(e=>{this.notify({type:"removed",mutation:e})}),Oe(this,Ha).clear(),Oe(this,fo).clear()})}getAll(){return Array.from(Oe(this,Ha))}find(e){const t={exact:!0,...e};return this.getAll().find(n=>_M(t,n))}findAll(e={}){return this.getAll().filter(t=>_M(e,t))}notify(e){Rr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Rr.batch(()=>Promise.all(e.map(t=>t.continue().catch(lo))))}},Ha=new WeakMap,fo=new WeakMap,dm=new WeakMap,CT);function wg(i){var e;return(e=i.options.scope)==null?void 0:e.id}var zo,AT,v2=(AT=class extends Ry{constructor(e={}){super();vn(this,zo);this.config=e,Kt(this,zo,new Map)}build(e,t,n){const r=t.queryKey,s=t.queryHash??pS(r,t);let a=this.get(s);return a||(a=new f2({client:e,queryKey:r,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(a)),a}add(e){Oe(this,zo).has(e.queryHash)||(Oe(this,zo).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=Oe(this,zo).get(e.queryHash);t&&(e.destroy(),t===e&&Oe(this,zo).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Rr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Oe(this,zo).get(e)}getAll(){return[...Oe(this,zo).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>xM(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>xM(e,n)):t}notify(e){Rr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Rr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Rr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},zo=new WeakMap,AT),oi,Kl,Zl,Xd,Yd,$l,qd,Kd,RT,y2=(RT=class{constructor(i={}){vn(this,oi);vn(this,Kl);vn(this,Zl);vn(this,Xd);vn(this,Yd);vn(this,$l);vn(this,qd);vn(this,Kd);Kt(this,oi,i.queryCache||new v2),Kt(this,Kl,i.mutationCache||new g2),Kt(this,Zl,i.defaultOptions||{}),Kt(this,Xd,new Map),Kt(this,Yd,new Map),Kt(this,$l,0)}mount(){_g(this,$l)._++,Oe(this,$l)===1&&(Kt(this,qd,LT.subscribe(async i=>{i&&(await this.resumePausedMutations(),Oe(this,oi).onFocus())})),Kt(this,Kd,Iv.subscribe(async i=>{i&&(await this.resumePausedMutations(),Oe(this,oi).onOnline())})))}unmount(){var i,e;_g(this,$l)._--,Oe(this,$l)===0&&((i=Oe(this,qd))==null||i.call(this),Kt(this,qd,void 0),(e=Oe(this,Kd))==null||e.call(this),Kt(this,Kd,void 0))}isFetching(i){return Oe(this,oi).findAll({...i,fetchStatus:"fetching"}).length}isMutating(i){return Oe(this,Kl).findAll({...i,status:"pending"}).length}getQueryData(i){var t;const e=this.defaultQueryOptions({queryKey:i});return(t=Oe(this,oi).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(i){const e=this.defaultQueryOptions(i),t=Oe(this,oi).build(this,e),n=t.state.data;return n===void 0?this.fetchQuery(i):(i.revalidateIfStale&&t.isStaleByTime(M_(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(i){return Oe(this,oi).findAll(i).map(({queryKey:e,state:t})=>{const n=t.data;return[e,n]})}setQueryData(i,e,t){const n=this.defaultQueryOptions({queryKey:i}),r=Oe(this,oi).get(n.queryHash),s=r==null?void 0:r.state.data,a=ZI(e,s);if(a!==void 0)return Oe(this,oi).build(this,n).setData(a,{...t,manual:!0})}setQueriesData(i,e,t){return Rr.batch(()=>Oe(this,oi).findAll(i).map(({queryKey:n})=>[n,this.setQueryData(n,e,t)]))}getQueryState(i){var t;const e=this.defaultQueryOptions({queryKey:i});return(t=Oe(this,oi).get(e.queryHash))==null?void 0:t.state}removeQueries(i){const e=Oe(this,oi);Rr.batch(()=>{e.findAll(i).forEach(t=>{e.remove(t)})})}resetQueries(i,e){const t=Oe(this,oi);return Rr.batch(()=>(t.findAll(i).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...i},e)))}cancelQueries(i,e={}){const t={revert:!0,...e},n=Rr.batch(()=>Oe(this,oi).findAll(i).map(r=>r.cancel(t)));return Promise.all(n).then(lo).catch(lo)}invalidateQueries(i,e={}){return Rr.batch(()=>(Oe(this,oi).findAll(i).forEach(t=>{t.invalidate()}),(i==null?void 0:i.refetchType)==="none"?Promise.resolve():this.refetchQueries({...i,type:(i==null?void 0:i.refetchType)??(i==null?void 0:i.type)??"active"},e)))}refetchQueries(i,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},n=Rr.batch(()=>Oe(this,oi).findAll(i).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let s=r.fetch(void 0,t);return t.throwOnError||(s=s.catch(lo)),r.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(lo)}fetchQuery(i){const e=this.defaultQueryOptions(i);e.retry===void 0&&(e.retry=!1);const t=Oe(this,oi).build(this,e);return t.isStaleByTime(M_(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(i){return this.fetchQuery(i).then(lo).catch(lo)}fetchInfiniteQuery(i){return i.behavior=TM(i.pages),this.fetchQuery(i)}prefetchInfiniteQuery(i){return this.fetchInfiniteQuery(i).then(lo).catch(lo)}ensureInfiniteQueryData(i){return i.behavior=TM(i.pages),this.ensureQueryData(i)}resumePausedMutations(){return Iv.isOnline()?Oe(this,Kl).resumePausedMutations():Promise.resolve()}getQueryCache(){return Oe(this,oi)}getMutationCache(){return Oe(this,Kl)}getDefaultOptions(){return Oe(this,Zl)}setDefaultOptions(i){Kt(this,Zl,i)}setQueryDefaults(i,e){Oe(this,Xd).set(Bp(i),{queryKey:i,defaultOptions:e})}getQueryDefaults(i){const e=[...Oe(this,Xd).values()],t={};return e.forEach(n=>{Vp(i,n.queryKey)&&Object.assign(t,n.defaultOptions)}),t}setMutationDefaults(i,e){Oe(this,Yd).set(Bp(i),{mutationKey:i,defaultOptions:e})}getMutationDefaults(i){const e=[...Oe(this,Yd).values()],t={};return e.forEach(n=>{Vp(i,n.mutationKey)&&Object.assign(t,n.defaultOptions)}),t}defaultQueryOptions(i){if(i._defaulted)return i;const e={...Oe(this,Zl).queries,...this.getQueryDefaults(i.queryKey),...i,_defaulted:!0};return e.queryHash||(e.queryHash=pS(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===mS&&(e.enabled=!1),e}defaultMutationOptions(i){return i!=null&&i._defaulted?i:{...Oe(this,Zl).mutations,...(i==null?void 0:i.mutationKey)&&this.getMutationDefaults(i.mutationKey),...i,_defaulted:!0}}clear(){Oe(this,oi).clear(),Oe(this,Kl).clear()}},oi=new WeakMap,Kl=new WeakMap,Zl=new WeakMap,Xd=new WeakMap,Yd=new WeakMap,$l=new WeakMap,qd=new WeakMap,Kd=new WeakMap,RT),x2=N.createContext(void 0),_2=({client:i,children:e})=>(N.useEffect(()=>(i.mount(),()=>{i.unmount()}),[i]),H.jsx(x2.Provider,{value:i,children:e})),hm=PT();const S2=hS(hm);/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hp(){return Hp=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Hp.apply(this,arguments)}var Ql;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Ql||(Ql={}));const CM="popstate";function w2(i){i===void 0&&(i={});function e(r,s){let{pathname:a="/",search:c="",hash:d=""}=qu(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),b_("",{pathname:a,search:c,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){let a=r.document.querySelector("base"),c="";if(a&&a.getAttribute("href")){let d=r.location.href,h=d.indexOf("#");c=h===-1?d:d.slice(0,h)}return c+"#"+(typeof s=="string"?s:kT(s))}function n(r,s){Iy(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return E2(e,t,n,i)}function Ii(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Iy(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function M2(){return Math.random().toString(36).substr(2,8)}function AM(i,e){return{usr:i.state,key:i.key,idx:e}}function b_(i,e,t,n){return t===void 0&&(t=null),Hp({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof e=="string"?qu(e):e,{state:t,key:e&&e.key||n||M2()})}function kT(i){let{pathname:e="/",search:t="",hash:n=""}=i;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function qu(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substr(t),i=i.substr(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substr(n),i=i.substr(0,n)),i&&(e.pathname=i)}return e}function E2(i,e,t,n){n===void 0&&(n={});let{window:r=document.defaultView,v5Compat:s=!1}=n,a=r.history,c=Ql.Pop,d=null,h=m();h==null&&(h=0,a.replaceState(Hp({},a.state,{idx:h}),""));function m(){return(a.state||{idx:null}).idx}function g(){c=Ql.Pop;let w=m(),S=w==null?null:w-h;h=w,d&&d({action:c,location:E.location,delta:S})}function v(w,S){c=Ql.Push;let A=b_(E.location,w,S);t&&t(A,w),h=m()+1;let C=AM(A,h),R=E.createHref(A);try{a.pushState(C,"",R)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;r.location.assign(R)}s&&d&&d({action:c,location:E.location,delta:1})}function y(w,S){c=Ql.Replace;let A=b_(E.location,w,S);t&&t(A,w),h=m();let C=AM(A,h),R=E.createHref(A);a.replaceState(C,"",R),s&&d&&d({action:c,location:E.location,delta:0})}function M(w){let S=r.location.origin!=="null"?r.location.origin:r.location.href,A=typeof w=="string"?w:kT(w);return A=A.replace(/ $/,"%20"),Ii(S,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,S)}let E={get action(){return c},get location(){return i(r,a)},listen(w){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(CM,g),d=w,()=>{r.removeEventListener(CM,g),d=null}},createHref(w){return e(r,w)},createURL:M,encodeLocation(w){let S=M(w);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:v,replace:y,go(w){return a.go(w)}};return E}var RM;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(RM||(RM={}));function T2(i,e,t){return t===void 0&&(t="/"),b2(i,e,t)}function b2(i,e,t,n){let r=typeof e=="string"?qu(e):e,s=BT(r.pathname||"/",t);if(s==null)return null;let a=FT(i);C2(a);let c=null;for(let d=0;c==null&&d<a.length;++d){let h=z2(s);c=U2(a[d],h)}return c}function FT(i,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let r=(s,a,c)=>{let d={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};d.relativePath.startsWith("/")&&(Ii(d.relativePath.startsWith(n),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(n.length));let h=Iu([n,d.relativePath]),m=t.concat(d);s.children&&s.children.length>0&&(Ii(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),FT(s.children,e,m,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:D2(h,s.index),routesMeta:m})};return i.forEach((s,a)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))r(s,a);else for(let d of zT(s.path))r(s,a,d)}),e}function zT(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return r?[s,""]:[s];let a=zT(n.join("/")),c=[];return c.push(...a.map(d=>d===""?s:[s,d].join("/"))),r&&c.push(...a),c.map(d=>i.startsWith("/")&&d===""?"/":d)}function C2(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:O2(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const A2=/^:[\w-]+$/,R2=3,P2=2,I2=1,N2=10,L2=-2,PM=i=>i==="*";function D2(i,e){let t=i.split("/"),n=t.length;return t.some(PM)&&(n+=L2),e&&(n+=P2),t.filter(r=>!PM(r)).reduce((r,s)=>r+(A2.test(s)?R2:s===""?I2:N2),n)}function O2(i,e){return i.length===e.length&&i.slice(0,-1).every((n,r)=>n===e[r])?i[i.length-1]-e[e.length-1]:0}function U2(i,e,t){let{routesMeta:n}=i,r={},s="/",a=[];for(let c=0;c<n.length;++c){let d=n[c],h=c===n.length-1,m=s==="/"?e:e.slice(s.length)||"/",g=k2({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},m),v=d.route;if(!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:Iu([s,g.pathname]),pathnameBase:X2(Iu([s,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(s=Iu([s,g.pathnameBase]))}return a}function k2(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=F2(i.path,i.caseSensitive,i.end),r=e.match(t);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:n.reduce((h,m,g)=>{let{paramName:v,isOptional:y}=m;if(v==="*"){let E=c[g]||"";a=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const M=c[g];return y&&!M?h[v]=void 0:h[v]=(M||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:a,pattern:i}}function F2(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Iy(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let n=[],r="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,d)=>(n.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),r+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":i!==""&&i!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function z2(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Iy(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),i}}function BT(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}const B2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,V2=i=>B2.test(i);function H2(i,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:r=""}=typeof i=="string"?qu(i):i,s;if(t)if(V2(t))s=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),Iy(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+t))}t.startsWith("/")?s=IM(t.substring(1),"/"):s=IM(t,e)}else s=e;return{pathname:s,search:Y2(n),hash:q2(r)}}function IM(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function lx(i,e,t,n){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function G2(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function W2(i,e){let t=G2(i);return e?t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function j2(i,e,t,n){n===void 0&&(n=!1);let r;typeof i=="string"?r=qu(i):(r=Hp({},i),Ii(!r.pathname||!r.pathname.includes("?"),lx("?","pathname","search",r)),Ii(!r.pathname||!r.pathname.includes("#"),lx("#","pathname","hash",r)),Ii(!r.search||!r.search.includes("#"),lx("#","search","hash",r)));let s=i===""||r.pathname==="",a=s?"/":r.pathname,c;if(a==null)c=t;else{let g=e.length-1;if(!n&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;r.pathname=v.join("/")}c=g>=0?e[g]:"/"}let d=H2(r,c),h=a&&a!=="/"&&a.endsWith("/"),m=(s||a===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||m)&&(d.pathname+="/"),d}const Iu=i=>i.join("/").replace(/\/\/+/g,"/"),X2=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),Y2=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,q2=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function K2(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const VT=["post","put","patch","delete"];new Set(VT);const Z2=["get",...VT];new Set(Z2);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gp(){return Gp=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Gp.apply(this,arguments)}const gS=N.createContext(null),$2=N.createContext(null),Ny=N.createContext(null),Ly=N.createContext(null),nh=N.createContext({outlet:null,matches:[],isDataRoute:!1}),HT=N.createContext(null);function Dy(){return N.useContext(Ly)!=null}function vS(){return Dy()||Ii(!1),N.useContext(Ly).location}function GT(i){N.useContext(Ny).static||N.useLayoutEffect(i)}function WT(){let{isDataRoute:i}=N.useContext(nh);return i?uN():Q2()}function Q2(){Dy()||Ii(!1);let i=N.useContext(gS),{basename:e,future:t,navigator:n}=N.useContext(Ny),{matches:r}=N.useContext(nh),{pathname:s}=vS(),a=JSON.stringify(W2(r,t.v7_relativeSplatPath)),c=N.useRef(!1);return GT(()=>{c.current=!0}),N.useCallback(function(h,m){if(m===void 0&&(m={}),!c.current)return;if(typeof h=="number"){n.go(h);return}let g=j2(h,JSON.parse(a),s,m.relative==="path");i==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Iu([e,g.pathname])),(m.replace?n.replace:n.push)(g,m.state,m)},[e,n,a,s,i])}function J2(i,e){return eN(i,e)}function eN(i,e,t,n){Dy()||Ii(!1);let{navigator:r}=N.useContext(Ny),{matches:s}=N.useContext(nh),a=s[s.length-1],c=a?a.params:{};a&&a.pathname;let d=a?a.pathnameBase:"/";a&&a.route;let h=vS(),m;if(e){var g;let w=typeof e=="string"?qu(e):e;d==="/"||(g=w.pathname)!=null&&g.startsWith(d)||Ii(!1),m=w}else m=h;let v=m.pathname||"/",y=v;if(d!=="/"){let w=d.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(w.length).join("/")}let M=T2(i,{pathname:y}),E=sN(M&&M.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:Iu([d,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:Iu([d,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,t,n);return e&&E?N.createElement(Ly.Provider,{value:{location:Gp({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Ql.Pop}},E):E}function tN(){let i=cN(),e=K2(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:r},t):null,null)}const nN=N.createElement(tN,null);class iN extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?N.createElement(nh.Provider,{value:this.props.routeContext},N.createElement(HT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rN(i){let{routeContext:e,match:t,children:n}=i,r=N.useContext(gS);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),N.createElement(nh.Provider,{value:e},n)}function sN(i,e,t,n){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),i==null){var s;if(!t)return null;if(t.errors)i=t.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let a=i,c=(r=t)==null?void 0:r.errors;if(c!=null){let m=a.findIndex(g=>g.route.id&&(c==null?void 0:c[g.route.id])!==void 0);m>=0||Ii(!1),a=a.slice(0,Math.min(a.length,m+1))}let d=!1,h=-1;if(t&&n&&n.v7_partialHydration)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=m),g.route.id){let{loaderData:v,errors:y}=t,M=g.route.loader&&v[g.route.id]===void 0&&(!y||y[g.route.id]===void 0);if(g.route.lazy||M){d=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((m,g,v)=>{let y,M=!1,E=null,w=null;t&&(y=c&&g.route.id?c[g.route.id]:void 0,E=g.route.errorElement||nN,d&&(h<0&&v===0?(fN("route-fallback"),M=!0,w=null):h===v&&(M=!0,w=g.route.hydrateFallbackElement||null)));let S=e.concat(a.slice(0,v+1)),A=()=>{let C;return y?C=E:M?C=w:g.route.Component?C=N.createElement(g.route.Component,null):g.route.element?C=g.route.element:C=m,N.createElement(rN,{match:g,routeContext:{outlet:m,matches:S,isDataRoute:t!=null},children:C})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?N.createElement(iN,{location:t.location,revalidation:t.revalidation,component:E,error:y,children:A(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):A()},null)}var jT=(function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i})(jT||{}),XT=(function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i})(XT||{});function oN(i){let e=N.useContext(gS);return e||Ii(!1),e}function aN(i){let e=N.useContext($2);return e||Ii(!1),e}function lN(i){let e=N.useContext(nh);return e||Ii(!1),e}function YT(i){let e=lN(),t=e.matches[e.matches.length-1];return t.route.id||Ii(!1),t.route.id}function cN(){var i;let e=N.useContext(HT),t=aN(),n=YT();return e!==void 0?e:(i=t.errors)==null?void 0:i[n]}function uN(){let{router:i}=oN(jT.UseNavigateStable),e=YT(XT.UseNavigateStable),t=N.useRef(!1);return GT(()=>{t.current=!0}),N.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?i.navigate(r):i.navigate(r,Gp({fromRouteId:e},s)))},[i,e])}const NM={};function fN(i,e,t){NM[i]||(NM[i]=!0)}function dN(i,e){i==null||i.v7_startTransition,i==null||i.v7_relativeSplatPath}function Ba(i){Ii(!1)}function hN(i){let{basename:e="/",children:t=null,location:n,navigationType:r=Ql.Pop,navigator:s,static:a=!1,future:c}=i;Dy()&&Ii(!1);let d=e.replace(/^\/*/,"/"),h=N.useMemo(()=>({basename:d,navigator:s,static:a,future:Gp({v7_relativeSplatPath:!1},c)}),[d,c,s,a]);typeof n=="string"&&(n=qu(n));let{pathname:m="/",search:g="",hash:v="",state:y=null,key:M="default"}=n,E=N.useMemo(()=>{let w=BT(m,d);return w==null?null:{location:{pathname:w,search:g,hash:v,state:y,key:M},navigationType:r}},[d,m,g,v,y,M,r]);return E==null?null:N.createElement(Ny.Provider,{value:h},N.createElement(Ly.Provider,{children:t,value:E}))}function pN(i){let{children:e,location:t}=i;return J2(C_(e),t)}new Promise(()=>{});function C_(i,e){e===void 0&&(e=[]);let t=[];return N.Children.forEach(i,(n,r)=>{if(!N.isValidElement(n))return;let s=[...e,r];if(n.type===N.Fragment){t.push.apply(t,C_(n.props.children,s));return}n.type!==Ba&&Ii(!1),!n.props.index||!n.props.children||Ii(!1);let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=C_(n.props.children,s)),t.push(a)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const mN="6";try{window.__reactRouterVersion=mN}catch{}const gN="startTransition",LM=Ay[gN];function vN(i){let{basename:e,children:t,future:n,window:r}=i,s=N.useRef();s.current==null&&(s.current=w2({window:r,v5Compat:!0}));let a=s.current,[c,d]=N.useState({action:a.action,location:a.location}),{v7_startTransition:h}=n||{},m=N.useCallback(g=>{h&&LM?LM(()=>d(g)):d(g)},[d,h]);return N.useLayoutEffect(()=>a.listen(m),[a,m]),N.useEffect(()=>dN(n),[n]),N.createElement(hN,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:a,future:n})}var DM;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(DM||(DM={}));var OM;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(OM||(OM={}));const UM=i=>{let e;const t=new Set,n=(h,m)=>{const g=typeof h=="function"?h(e):h;if(!Object.is(g,e)){const v=e;e=m??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(y=>y(e,v))}},r=()=>e,c={setState:n,getState:r,getInitialState:()=>d,subscribe:h=>(t.add(h),()=>t.delete(h))},d=e=i(n,r,c);return c},yN=(i=>i?UM(i):UM),xN=i=>i;function _N(i,e=xN){const t=Ls.useSyncExternalStore(i.subscribe,Ls.useCallback(()=>e(i.getState()),[i,e]),Ls.useCallback(()=>e(i.getInitialState()),[i,e]));return Ls.useDebugValue(t),t}const SN=i=>{const e=yN(i),t=n=>_N(e,n);return Object.assign(t,e),t},wN=(i=>SN);function MN(i,e){let t;try{t=i()}catch{return}return{getItem:r=>{var s;const a=d=>d===null?null:JSON.parse(d,void 0),c=(s=t.getItem(r))!=null?s:null;return c instanceof Promise?c.then(a):a(c)},setItem:(r,s)=>t.setItem(r,JSON.stringify(s,void 0)),removeItem:r=>t.removeItem(r)}}const A_=i=>e=>{try{const t=i(e);return t instanceof Promise?t:{then(n){return A_(n)(t)},catch(n){return this}}}catch(t){return{then(n){return this},catch(n){return A_(n)(t)}}}},EN=(i,e)=>(t,n,r)=>{let s={storage:MN(()=>localStorage),partialize:E=>E,version:0,merge:(E,w)=>({...w,...E}),...e},a=!1;const c=new Set,d=new Set;let h=s.storage;if(!h)return i((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...E)},n,r);const m=()=>{const E=s.partialize({...n()});return h.setItem(s.name,{state:E,version:s.version})},g=r.setState;r.setState=(E,w)=>(g(E,w),m());const v=i((...E)=>(t(...E),m()),n,r);r.getInitialState=()=>v;let y;const M=()=>{var E,w;if(!h)return;a=!1,c.forEach(A=>{var C;return A((C=n())!=null?C:v)});const S=((w=s.onRehydrateStorage)==null?void 0:w.call(s,(E=n())!=null?E:v))||void 0;return A_(h.getItem.bind(h))(s.name).then(A=>{if(A)if(typeof A.version=="number"&&A.version!==s.version){if(s.migrate){const C=s.migrate(A.state,A.version);return C instanceof Promise?C.then(R=>[!0,R]):[!0,C]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,A.state];return[!1,void 0]}).then(A=>{var C;const[R,O]=A;if(y=s.merge(O,(C=n())!=null?C:v),t(y,!0),R)return m()}).then(()=>{S==null||S(y,void 0),y=n(),a=!0,d.forEach(A=>A(y))}).catch(A=>{S==null||S(void 0,A)})};return r.persist={setOptions:E=>{s={...s,...E},E.storage&&(h=E.storage)},clearStorage:()=>{h==null||h.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>M(),hasHydrated:()=>a,onHydrate:E=>(c.add(E),()=>{c.delete(E)}),onFinishHydration:E=>(d.add(E),()=>{d.delete(E)})},s.skipHydration||M(),y||v},TN=EN,kM={enemyCount:15,mapSize:400,stormEnabled:!0,stormTime:180,cameraMode:"TPS",performanceMode:!1,renderScale:100,showFPS:!1,showMinimap:!0,musicEnabled:!0,musicVolume:50,sfxVolume:70,gameMode:"arcade",difficulty:"medium",mpServer:"wss://game-server01.voxelfirecraft.com/socket",mpNickname:"Player",mpColor:"#29b6f6",mpRoom:"",mpZombies:!0},yS=wN()(TN(i=>({...kM,updateSetting:(e,t)=>i(n=>({...n,[e]:t})),resetToDefaults:()=>i(kM)}),{name:"voxel-firecraft-settings"}));function FM(i,e){if(typeof i=="function")return i(e);i!=null&&(i.current=e)}function ih(...i){return e=>{let t=!1;const n=i.map(r=>{const s=FM(r,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let r=0;r<n.length;r++){const s=n[r];typeof s=="function"?s():FM(i[r],null)}}}}function An(...i){return N.useCallback(ih(...i),i)}var bN=Symbol.for("react.lazy"),Nv=Ay[" use ".trim().toString()];function CN(i){return typeof i=="object"&&i!==null&&"then"in i}function qT(i){return i!=null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===bN&&"_payload"in i&&CN(i._payload)}function KT(i){const e=RN(i),t=N.forwardRef((n,r)=>{let{children:s,...a}=n;qT(s)&&typeof Nv=="function"&&(s=Nv(s._payload));const c=N.Children.toArray(s),d=c.find(IN);if(d){const h=d.props.children,m=c.map(g=>g===d?N.Children.count(h)>1?N.Children.only(null):N.isValidElement(h)?h.props.children:null:g);return H.jsx(e,{...a,ref:r,children:N.isValidElement(h)?N.cloneElement(h,void 0,m):null})}return H.jsx(e,{...a,ref:r,children:s})});return t.displayName=`${i}.Slot`,t}var AN=KT("Slot");function RN(i){const e=N.forwardRef((t,n)=>{let{children:r,...s}=t;if(qT(r)&&typeof Nv=="function"&&(r=Nv(r._payload)),N.isValidElement(r)){const a=LN(r),c=NN(s,r.props);return r.type!==N.Fragment&&(c.ref=n?ih(n,a):a),N.cloneElement(r,c)}return N.Children.count(r)>1?N.Children.only(null):null});return e.displayName=`${i}.SlotClone`,e}var PN=Symbol("radix.slottable");function IN(i){return N.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===PN}function NN(i,e){const t={...e};for(const n in e){const r=i[n],s=e[n];/^on[A-Z]/.test(n)?r&&s?t[n]=(...c)=>{const d=s(...c);return r(...c),d}:r&&(t[n]=r):n==="style"?t[n]={...r,...s}:n==="className"&&(t[n]=[r,s].filter(Boolean).join(" "))}return{...i,...t}}function LN(i){var n,r;let e=(n=Object.getOwnPropertyDescriptor(i.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=(r=Object.getOwnPropertyDescriptor(i,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}function ZT(i){var e,t,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var r=i.length;for(e=0;e<r;e++)i[e]&&(t=ZT(i[e]))&&(n&&(n+=" "),n+=t)}else for(t in i)i[t]&&(n&&(n+=" "),n+=t);return n}function $T(){for(var i,e,t=0,n="",r=arguments.length;t<r;t++)(i=arguments[t])&&(e=ZT(i))&&(n&&(n+=" "),n+=e);return n}const zM=i=>typeof i=="boolean"?`${i}`:i===0?"0":i,BM=$T,QT=(i,e)=>t=>{var n;if((e==null?void 0:e.variants)==null)return BM(i,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:r,defaultVariants:s}=e,a=Object.keys(r).map(h=>{const m=t==null?void 0:t[h],g=s==null?void 0:s[h];if(m===null)return null;const v=zM(m)||zM(g);return r[h][v]}),c=t&&Object.entries(t).reduce((h,m)=>{let[g,v]=m;return v===void 0||(h[g]=v),h},{}),d=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((h,m)=>{let{class:g,className:v,...y}=m;return Object.entries(y).every(M=>{let[E,w]=M;return Array.isArray(w)?w.includes({...s,...c}[E]):{...s,...c}[E]===w})?[...h,g,v]:h},[]);return BM(i,a,d,t==null?void 0:t.class,t==null?void 0:t.className)},DN=(i,e)=>{const t=new Array(i.length+e.length);for(let n=0;n<i.length;n++)t[n]=i[n];for(let n=0;n<e.length;n++)t[i.length+n]=e[n];return t},ON=(i,e)=>({classGroupId:i,validator:e}),JT=(i=new Map,e=null,t)=>({nextPart:i,validators:e,classGroupId:t}),Lv="-",VM=[],UN="arbitrary..",kN=i=>{const e=zN(i),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=i;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]"))return FN(a);const c=a.split(Lv),d=c[0]===""&&c.length>1?1:0;return eb(c,d,e)},getConflictingClassGroupIds:(a,c)=>{if(c){const d=n[a],h=t[a];return d?h?DN(h,d):d:h||VM}return t[a]||VM}}},eb=(i,e,t)=>{if(i.length-e===0)return t.classGroupId;const r=i[e],s=t.nextPart.get(r);if(s){const h=eb(i,e+1,s);if(h)return h}const a=t.validators;if(a===null)return;const c=e===0?i.join(Lv):i.slice(e).join(Lv),d=a.length;for(let h=0;h<d;h++){const m=a[h];if(m.validator(c))return m.classGroupId}},FN=i=>i.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=i.slice(1,-1),t=e.indexOf(":"),n=e.slice(0,t);return n?UN+n:void 0})(),zN=i=>{const{theme:e,classGroups:t}=i;return BN(t,e)},BN=(i,e)=>{const t=JT();for(const n in i){const r=i[n];xS(r,t,n,e)}return t},xS=(i,e,t,n)=>{const r=i.length;for(let s=0;s<r;s++){const a=i[s];VN(a,e,t,n)}},VN=(i,e,t,n)=>{if(typeof i=="string"){HN(i,e,t);return}if(typeof i=="function"){GN(i,e,t,n);return}WN(i,e,t,n)},HN=(i,e,t)=>{const n=i===""?e:tb(e,i);n.classGroupId=t},GN=(i,e,t,n)=>{if(jN(i)){xS(i(n),e,t,n);return}e.validators===null&&(e.validators=[]),e.validators.push(ON(t,i))},WN=(i,e,t,n)=>{const r=Object.entries(i),s=r.length;for(let a=0;a<s;a++){const[c,d]=r[a];xS(d,tb(e,c),t,n)}},tb=(i,e)=>{let t=i;const n=e.split(Lv),r=n.length;for(let s=0;s<r;s++){const a=n[s];let c=t.nextPart.get(a);c||(c=JT(),t.nextPart.set(a,c)),t=c}return t},jN=i=>"isThemeGetter"in i&&i.isThemeGetter===!0,XN=i=>{if(i<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),n=Object.create(null);const r=(s,a)=>{t[s]=a,e++,e>i&&(e=0,n=t,t=Object.create(null))};return{get(s){let a=t[s];if(a!==void 0)return a;if((a=n[s])!==void 0)return r(s,a),a},set(s,a){s in t?t[s]=a:r(s,a)}}},R_="!",HM=":",YN=[],GM=(i,e,t,n,r)=>({modifiers:i,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:n,isExternal:r}),qN=i=>{const{prefix:e,experimentalParseClassName:t}=i;let n=r=>{const s=[];let a=0,c=0,d=0,h;const m=r.length;for(let E=0;E<m;E++){const w=r[E];if(a===0&&c===0){if(w===HM){s.push(r.slice(d,E)),d=E+1;continue}if(w==="/"){h=E;continue}}w==="["?a++:w==="]"?a--:w==="("?c++:w===")"&&c--}const g=s.length===0?r:r.slice(d);let v=g,y=!1;g.endsWith(R_)?(v=g.slice(0,-1),y=!0):g.startsWith(R_)&&(v=g.slice(1),y=!0);const M=h&&h>d?h-d:void 0;return GM(s,y,v,M)};if(e){const r=e+HM,s=n;n=a=>a.startsWith(r)?s(a.slice(r.length)):GM(YN,!1,a,void 0,!0)}if(t){const r=n;n=s=>t({className:s,parseClassName:r})}return n},KN=i=>{const e=new Map;return i.orderSensitiveModifiers.forEach((t,n)=>{e.set(t,1e6+n)}),t=>{const n=[];let r=[];for(let s=0;s<t.length;s++){const a=t[s],c=a[0]==="[",d=e.has(a);c||d?(r.length>0&&(r.sort(),n.push(...r),r=[]),n.push(a)):r.push(a)}return r.length>0&&(r.sort(),n.push(...r)),n}},ZN=i=>({cache:XN(i.cacheSize),parseClassName:qN(i),sortModifiers:KN(i),...kN(i)}),$N=/\s+/,QN=(i,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:r,sortModifiers:s}=e,a=[],c=i.trim().split($N);let d="";for(let h=c.length-1;h>=0;h-=1){const m=c[h],{isExternal:g,modifiers:v,hasImportantModifier:y,baseClassName:M,maybePostfixModifierPosition:E}=t(m);if(g){d=m+(d.length>0?" "+d:d);continue}let w=!!E,S=n(w?M.substring(0,E):M);if(!S){if(!w){d=m+(d.length>0?" "+d:d);continue}if(S=n(M),!S){d=m+(d.length>0?" "+d:d);continue}w=!1}const A=v.length===0?"":v.length===1?v[0]:s(v).join(":"),C=y?A+R_:A,R=C+S;if(a.indexOf(R)>-1)continue;a.push(R);const O=r(S,w);for(let U=0;U<O.length;++U){const F=O[U];a.push(C+F)}d=m+(d.length>0?" "+d:d)}return d},JN=(...i)=>{let e=0,t,n,r="";for(;e<i.length;)(t=i[e++])&&(n=nb(t))&&(r&&(r+=" "),r+=n);return r},nb=i=>{if(typeof i=="string")return i;let e,t="";for(let n=0;n<i.length;n++)i[n]&&(e=nb(i[n]))&&(t&&(t+=" "),t+=e);return t},eL=(i,...e)=>{let t,n,r,s;const a=d=>{const h=e.reduce((m,g)=>g(m),i());return t=ZN(h),n=t.cache.get,r=t.cache.set,s=c,c(d)},c=d=>{const h=n(d);if(h)return h;const m=QN(d,t);return r(d,m),m};return s=a,(...d)=>s(JN(...d))},tL=[],Ai=i=>{const e=t=>t[i]||tL;return e.isThemeGetter=!0,e},ib=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,rb=/^\((?:(\w[\w-]*):)?(.+)\)$/i,nL=/^\d+\/\d+$/,iL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,oL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,aL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,rd=i=>nL.test(i),fn=i=>!!i&&!Number.isNaN(Number(i)),Ll=i=>!!i&&Number.isInteger(Number(i)),cx=i=>i.endsWith("%")&&fn(i.slice(0,-1)),Na=i=>iL.test(i),lL=()=>!0,cL=i=>rL.test(i)&&!sL.test(i),sb=()=>!1,uL=i=>oL.test(i),fL=i=>aL.test(i),dL=i=>!Et(i)&&!Tt(i),hL=i=>rh(i,lb,sb),Et=i=>ib.test(i),Jc=i=>rh(i,cb,cL),ux=i=>rh(i,yL,fn),WM=i=>rh(i,ob,sb),pL=i=>rh(i,ab,fL),Mg=i=>rh(i,ub,uL),Tt=i=>rb.test(i),up=i=>sh(i,cb),mL=i=>sh(i,xL),jM=i=>sh(i,ob),gL=i=>sh(i,lb),vL=i=>sh(i,ab),Eg=i=>sh(i,ub,!0),rh=(i,e,t)=>{const n=ib.exec(i);return n?n[1]?e(n[1]):t(n[2]):!1},sh=(i,e,t=!1)=>{const n=rb.exec(i);return n?n[1]?e(n[1]):t:!1},ob=i=>i==="position"||i==="percentage",ab=i=>i==="image"||i==="url",lb=i=>i==="length"||i==="size"||i==="bg-size",cb=i=>i==="length",yL=i=>i==="number",xL=i=>i==="family-name",ub=i=>i==="shadow",_L=()=>{const i=Ai("color"),e=Ai("font"),t=Ai("text"),n=Ai("font-weight"),r=Ai("tracking"),s=Ai("leading"),a=Ai("breakpoint"),c=Ai("container"),d=Ai("spacing"),h=Ai("radius"),m=Ai("shadow"),g=Ai("inset-shadow"),v=Ai("text-shadow"),y=Ai("drop-shadow"),M=Ai("blur"),E=Ai("perspective"),w=Ai("aspect"),S=Ai("ease"),A=Ai("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],O=()=>[...R(),Tt,Et],U=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto","contain","none"],z=()=>[Tt,Et,d],k=()=>[rd,"full","auto",...z()],L=()=>[Ll,"none","subgrid",Tt,Et],G=()=>["auto",{span:["full",Ll,Tt,Et]},Ll,Tt,Et],J=()=>[Ll,"auto",Tt,Et],Q=()=>["auto","min","max","fr",Tt,Et],ce=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ge=()=>["start","end","center","stretch","center-safe","end-safe"],ne=()=>["auto",...z()],de=()=>[rd,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...z()],B=()=>[i,Tt,Et],ie=()=>[...R(),jM,WM,{position:[Tt,Et]}],te=()=>["no-repeat",{repeat:["","x","y","space","round"]}],X=()=>["auto","cover","contain",gL,hL,{size:[Tt,Et]}],fe=()=>[cx,up,Jc],Pe=()=>["","none","full",h,Tt,Et],le=()=>["",fn,up,Jc],Ee=()=>["solid","dashed","dotted","double"],Ue=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],he=()=>[fn,cx,jM,WM],Fe=()=>["","none",M,Tt,Et],Xe=()=>["none",fn,Tt,Et],Ge=()=>["none",fn,Tt,Et],Qe=()=>[fn,Tt,Et],Se=()=>[rd,"full",...z()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Na],breakpoint:[Na],color:[lL],container:[Na],"drop-shadow":[Na],ease:["in","out","in-out"],font:[dL],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Na],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Na],shadow:[Na],spacing:["px",fn],text:[Na],"text-shadow":[Na],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",rd,Et,Tt,w]}],container:["container"],columns:[{columns:[fn,Et,Tt,c]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:O()}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:F()}],"overscroll-x":[{"overscroll-x":F()}],"overscroll-y":[{"overscroll-y":F()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[Ll,"auto",Tt,Et]}],basis:[{basis:[rd,"full","auto",c,...z()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[fn,rd,"auto","initial","none",Et]}],grow:[{grow:["",fn,Tt,Et]}],shrink:[{shrink:["",fn,Tt,Et]}],order:[{order:[Ll,"first","last","none",Tt,Et]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:G()}],"col-start":[{"col-start":J()}],"col-end":[{"col-end":J()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:G()}],"row-start":[{"row-start":J()}],"row-end":[{"row-end":J()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Q()}],"auto-rows":[{"auto-rows":Q()}],gap:[{gap:z()}],"gap-x":[{"gap-x":z()}],"gap-y":[{"gap-y":z()}],"justify-content":[{justify:[...ce(),"normal"]}],"justify-items":[{"justify-items":[...ge(),"normal"]}],"justify-self":[{"justify-self":["auto",...ge()]}],"align-content":[{content:["normal",...ce()]}],"align-items":[{items:[...ge(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ge(),{baseline:["","last"]}]}],"place-content":[{"place-content":ce()}],"place-items":[{"place-items":[...ge(),"baseline"]}],"place-self":[{"place-self":["auto",...ge()]}],p:[{p:z()}],px:[{px:z()}],py:[{py:z()}],ps:[{ps:z()}],pe:[{pe:z()}],pt:[{pt:z()}],pr:[{pr:z()}],pb:[{pb:z()}],pl:[{pl:z()}],m:[{m:ne()}],mx:[{mx:ne()}],my:[{my:ne()}],ms:[{ms:ne()}],me:[{me:ne()}],mt:[{mt:ne()}],mr:[{mr:ne()}],mb:[{mb:ne()}],ml:[{ml:ne()}],"space-x":[{"space-x":z()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":z()}],"space-y-reverse":["space-y-reverse"],size:[{size:de()}],w:[{w:[c,"screen",...de()]}],"min-w":[{"min-w":[c,"screen","none",...de()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[a]},...de()]}],h:[{h:["screen","lh",...de()]}],"min-h":[{"min-h":["screen","lh","none",...de()]}],"max-h":[{"max-h":["screen","lh",...de()]}],"font-size":[{text:["base",t,up,Jc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Tt,ux]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",cx,Et]}],"font-family":[{font:[mL,Et,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,Tt,Et]}],"line-clamp":[{"line-clamp":[fn,"none",Tt,ux]}],leading:[{leading:[s,...z()]}],"list-image":[{"list-image":["none",Tt,Et]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Tt,Et]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:B()}],"text-color":[{text:B()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ee(),"wavy"]}],"text-decoration-thickness":[{decoration:[fn,"from-font","auto",Tt,Jc]}],"text-decoration-color":[{decoration:B()}],"underline-offset":[{"underline-offset":[fn,"auto",Tt,Et]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Tt,Et]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Tt,Et]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ie()}],"bg-repeat":[{bg:te()}],"bg-size":[{bg:X()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ll,Tt,Et],radial:["",Tt,Et],conic:[Ll,Tt,Et]},vL,pL]}],"bg-color":[{bg:B()}],"gradient-from-pos":[{from:fe()}],"gradient-via-pos":[{via:fe()}],"gradient-to-pos":[{to:fe()}],"gradient-from":[{from:B()}],"gradient-via":[{via:B()}],"gradient-to":[{to:B()}],rounded:[{rounded:Pe()}],"rounded-s":[{"rounded-s":Pe()}],"rounded-e":[{"rounded-e":Pe()}],"rounded-t":[{"rounded-t":Pe()}],"rounded-r":[{"rounded-r":Pe()}],"rounded-b":[{"rounded-b":Pe()}],"rounded-l":[{"rounded-l":Pe()}],"rounded-ss":[{"rounded-ss":Pe()}],"rounded-se":[{"rounded-se":Pe()}],"rounded-ee":[{"rounded-ee":Pe()}],"rounded-es":[{"rounded-es":Pe()}],"rounded-tl":[{"rounded-tl":Pe()}],"rounded-tr":[{"rounded-tr":Pe()}],"rounded-br":[{"rounded-br":Pe()}],"rounded-bl":[{"rounded-bl":Pe()}],"border-w":[{border:le()}],"border-w-x":[{"border-x":le()}],"border-w-y":[{"border-y":le()}],"border-w-s":[{"border-s":le()}],"border-w-e":[{"border-e":le()}],"border-w-t":[{"border-t":le()}],"border-w-r":[{"border-r":le()}],"border-w-b":[{"border-b":le()}],"border-w-l":[{"border-l":le()}],"divide-x":[{"divide-x":le()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":le()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ee(),"hidden","none"]}],"divide-style":[{divide:[...Ee(),"hidden","none"]}],"border-color":[{border:B()}],"border-color-x":[{"border-x":B()}],"border-color-y":[{"border-y":B()}],"border-color-s":[{"border-s":B()}],"border-color-e":[{"border-e":B()}],"border-color-t":[{"border-t":B()}],"border-color-r":[{"border-r":B()}],"border-color-b":[{"border-b":B()}],"border-color-l":[{"border-l":B()}],"divide-color":[{divide:B()}],"outline-style":[{outline:[...Ee(),"none","hidden"]}],"outline-offset":[{"outline-offset":[fn,Tt,Et]}],"outline-w":[{outline:["",fn,up,Jc]}],"outline-color":[{outline:B()}],shadow:[{shadow:["","none",m,Eg,Mg]}],"shadow-color":[{shadow:B()}],"inset-shadow":[{"inset-shadow":["none",g,Eg,Mg]}],"inset-shadow-color":[{"inset-shadow":B()}],"ring-w":[{ring:le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:B()}],"ring-offset-w":[{"ring-offset":[fn,Jc]}],"ring-offset-color":[{"ring-offset":B()}],"inset-ring-w":[{"inset-ring":le()}],"inset-ring-color":[{"inset-ring":B()}],"text-shadow":[{"text-shadow":["none",v,Eg,Mg]}],"text-shadow-color":[{"text-shadow":B()}],opacity:[{opacity:[fn,Tt,Et]}],"mix-blend":[{"mix-blend":[...Ue(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ue()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[fn]}],"mask-image-linear-from-pos":[{"mask-linear-from":he()}],"mask-image-linear-to-pos":[{"mask-linear-to":he()}],"mask-image-linear-from-color":[{"mask-linear-from":B()}],"mask-image-linear-to-color":[{"mask-linear-to":B()}],"mask-image-t-from-pos":[{"mask-t-from":he()}],"mask-image-t-to-pos":[{"mask-t-to":he()}],"mask-image-t-from-color":[{"mask-t-from":B()}],"mask-image-t-to-color":[{"mask-t-to":B()}],"mask-image-r-from-pos":[{"mask-r-from":he()}],"mask-image-r-to-pos":[{"mask-r-to":he()}],"mask-image-r-from-color":[{"mask-r-from":B()}],"mask-image-r-to-color":[{"mask-r-to":B()}],"mask-image-b-from-pos":[{"mask-b-from":he()}],"mask-image-b-to-pos":[{"mask-b-to":he()}],"mask-image-b-from-color":[{"mask-b-from":B()}],"mask-image-b-to-color":[{"mask-b-to":B()}],"mask-image-l-from-pos":[{"mask-l-from":he()}],"mask-image-l-to-pos":[{"mask-l-to":he()}],"mask-image-l-from-color":[{"mask-l-from":B()}],"mask-image-l-to-color":[{"mask-l-to":B()}],"mask-image-x-from-pos":[{"mask-x-from":he()}],"mask-image-x-to-pos":[{"mask-x-to":he()}],"mask-image-x-from-color":[{"mask-x-from":B()}],"mask-image-x-to-color":[{"mask-x-to":B()}],"mask-image-y-from-pos":[{"mask-y-from":he()}],"mask-image-y-to-pos":[{"mask-y-to":he()}],"mask-image-y-from-color":[{"mask-y-from":B()}],"mask-image-y-to-color":[{"mask-y-to":B()}],"mask-image-radial":[{"mask-radial":[Tt,Et]}],"mask-image-radial-from-pos":[{"mask-radial-from":he()}],"mask-image-radial-to-pos":[{"mask-radial-to":he()}],"mask-image-radial-from-color":[{"mask-radial-from":B()}],"mask-image-radial-to-color":[{"mask-radial-to":B()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":R()}],"mask-image-conic-pos":[{"mask-conic":[fn]}],"mask-image-conic-from-pos":[{"mask-conic-from":he()}],"mask-image-conic-to-pos":[{"mask-conic-to":he()}],"mask-image-conic-from-color":[{"mask-conic-from":B()}],"mask-image-conic-to-color":[{"mask-conic-to":B()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ie()}],"mask-repeat":[{mask:te()}],"mask-size":[{mask:X()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Tt,Et]}],filter:[{filter:["","none",Tt,Et]}],blur:[{blur:Fe()}],brightness:[{brightness:[fn,Tt,Et]}],contrast:[{contrast:[fn,Tt,Et]}],"drop-shadow":[{"drop-shadow":["","none",y,Eg,Mg]}],"drop-shadow-color":[{"drop-shadow":B()}],grayscale:[{grayscale:["",fn,Tt,Et]}],"hue-rotate":[{"hue-rotate":[fn,Tt,Et]}],invert:[{invert:["",fn,Tt,Et]}],saturate:[{saturate:[fn,Tt,Et]}],sepia:[{sepia:["",fn,Tt,Et]}],"backdrop-filter":[{"backdrop-filter":["","none",Tt,Et]}],"backdrop-blur":[{"backdrop-blur":Fe()}],"backdrop-brightness":[{"backdrop-brightness":[fn,Tt,Et]}],"backdrop-contrast":[{"backdrop-contrast":[fn,Tt,Et]}],"backdrop-grayscale":[{"backdrop-grayscale":["",fn,Tt,Et]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[fn,Tt,Et]}],"backdrop-invert":[{"backdrop-invert":["",fn,Tt,Et]}],"backdrop-opacity":[{"backdrop-opacity":[fn,Tt,Et]}],"backdrop-saturate":[{"backdrop-saturate":[fn,Tt,Et]}],"backdrop-sepia":[{"backdrop-sepia":["",fn,Tt,Et]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":z()}],"border-spacing-x":[{"border-spacing-x":z()}],"border-spacing-y":[{"border-spacing-y":z()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Tt,Et]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[fn,"initial",Tt,Et]}],ease:[{ease:["linear","initial",S,Tt,Et]}],delay:[{delay:[fn,Tt,Et]}],animate:[{animate:["none",A,Tt,Et]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[E,Tt,Et]}],"perspective-origin":[{"perspective-origin":O()}],rotate:[{rotate:Xe()}],"rotate-x":[{"rotate-x":Xe()}],"rotate-y":[{"rotate-y":Xe()}],"rotate-z":[{"rotate-z":Xe()}],scale:[{scale:Ge()}],"scale-x":[{"scale-x":Ge()}],"scale-y":[{"scale-y":Ge()}],"scale-z":[{"scale-z":Ge()}],"scale-3d":["scale-3d"],skew:[{skew:Qe()}],"skew-x":[{"skew-x":Qe()}],"skew-y":[{"skew-y":Qe()}],transform:[{transform:[Tt,Et,"","none","gpu","cpu"]}],"transform-origin":[{origin:O()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Se()}],"translate-x":[{"translate-x":Se()}],"translate-y":[{"translate-y":Se()}],"translate-z":[{"translate-z":Se()}],"translate-none":["translate-none"],accent:[{accent:B()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:B()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Tt,Et]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Tt,Et]}],fill:[{fill:["none",...B()]}],"stroke-w":[{stroke:[fn,up,Jc,ux]}],stroke:[{stroke:["none",...B()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},SL=eL(_L);function kn(...i){return SL($T(i))}const wL=QT("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Jl=N.forwardRef(({className:i,variant:e,size:t,asChild:n=!1,...r},s)=>{const a=n?AN:"button";return H.jsx(a,{className:kn(wL({variant:e,size:t,className:i})),ref:s,...r})});Jl.displayName="Button";const fb=N.forwardRef(({className:i,...e},t)=>H.jsx("div",{ref:t,className:kn("rounded-xl border bg-card text-card-foreground shadow",i),...e}));fb.displayName="Card";const db=N.forwardRef(({className:i,...e},t)=>H.jsx("div",{ref:t,className:kn("flex flex-col space-y-1.5 p-6",i),...e}));db.displayName="CardHeader";const hb=N.forwardRef(({className:i,...e},t)=>H.jsx("div",{ref:t,className:kn("font-semibold leading-none tracking-tight",i),...e}));hb.displayName="CardTitle";const pb=N.forwardRef(({className:i,...e},t)=>H.jsx("div",{ref:t,className:kn("text-sm text-muted-foreground",i),...e}));pb.displayName="CardDescription";const ML=N.forwardRef(({className:i,...e},t)=>H.jsx("div",{ref:t,className:kn("p-6 pt-0",i),...e}));ML.displayName="CardContent";const EL=N.forwardRef(({className:i,...e},t)=>H.jsx("div",{ref:t,className:kn("flex items-center p-6 pt-0",i),...e}));EL.displayName="CardFooter";function cn(i,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(i==null||i(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function TL(i,e){const t=N.createContext(e),n=s=>{const{children:a,...c}=s,d=N.useMemo(()=>c,Object.values(c));return H.jsx(t.Provider,{value:d,children:a})};n.displayName=i+"Provider";function r(s){const a=N.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${i}\``)}return[n,r]}function ac(i,e=[]){let t=[];function n(s,a){const c=N.createContext(a),d=t.length;t=[...t,a];const h=g=>{var S;const{scope:v,children:y,...M}=g,E=((S=v==null?void 0:v[i])==null?void 0:S[d])||c,w=N.useMemo(()=>M,Object.values(M));return H.jsx(E.Provider,{value:w,children:y})};h.displayName=s+"Provider";function m(g,v){var E;const y=((E=v==null?void 0:v[i])==null?void 0:E[d])||c,M=N.useContext(y);if(M)return M;if(a!==void 0)return a;throw new Error(`\`${g}\` must be used within \`${s}\``)}return[h,m]}const r=()=>{const s=t.map(a=>N.createContext(a));return function(c){const d=(c==null?void 0:c[i])||s;return N.useMemo(()=>({[`__scope${i}`]:{...c,[i]:d}}),[c,d])}};return r.scopeName=i,[n,bL(r,...e)]}function bL(...i){const e=i[0];if(i.length===1)return e;const t=()=>{const n=i.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const a=n.reduce((c,{useScope:d,scopeName:h})=>{const g=d(s)[`__scope${h}`];return{...c,...g}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}var pr=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},CL=Ay[" useId ".trim().toString()]||(()=>{}),AL=0;function ec(i){const[e,t]=N.useState(CL());return pr(()=>{t(n=>n??String(AL++))},[i]),e?`radix-${e}`:""}var RL=Ay[" useInsertionEffect ".trim().toString()]||pr;function ku({prop:i,defaultProp:e,onChange:t=()=>{},caller:n}){const[r,s,a]=PL({defaultProp:e,onChange:t}),c=i!==void 0,d=c?i:r;{const m=N.useRef(i!==void 0);N.useEffect(()=>{const g=m.current;g!==c&&console.warn(`${n} is changing from ${g?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=c},[c,n])}const h=N.useCallback(m=>{var g;if(c){const v=IL(m)?m(i):m;v!==i&&((g=a.current)==null||g.call(a,v))}else s(m)},[c,i,s,a]);return[d,h]}function PL({defaultProp:i,onChange:e}){const[t,n]=N.useState(i),r=N.useRef(t),s=N.useRef(e);return RL(()=>{s.current=e},[e]),N.useEffect(()=>{var a;r.current!==t&&((a=s.current)==null||a.call(s,t),r.current=t)},[t,r]),[t,n,s]}function IL(i){return typeof i=="function"}function NL(i){const e=LL(i),t=N.forwardRef((n,r)=>{const{children:s,...a}=n,c=N.Children.toArray(s),d=c.find(OL);if(d){const h=d.props.children,m=c.map(g=>g===d?N.Children.count(h)>1?N.Children.only(null):N.isValidElement(h)?h.props.children:null:g);return H.jsx(e,{...a,ref:r,children:N.isValidElement(h)?N.cloneElement(h,void 0,m):null})}return H.jsx(e,{...a,ref:r,children:s})});return t.displayName=`${i}.Slot`,t}function LL(i){const e=N.forwardRef((t,n)=>{const{children:r,...s}=t;if(N.isValidElement(r)){const a=kL(r),c=UL(s,r.props);return r.type!==N.Fragment&&(c.ref=n?ih(n,a):a),N.cloneElement(r,c)}return N.Children.count(r)>1?N.Children.only(null):null});return e.displayName=`${i}.SlotClone`,e}var DL=Symbol("radix.slottable");function OL(i){return N.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===DL}function UL(i,e){const t={...e};for(const n in e){const r=i[n],s=e[n];/^on[A-Z]/.test(n)?r&&s?t[n]=(...c)=>{const d=s(...c);return r(...c),d}:r&&(t[n]=r):n==="style"?t[n]={...r,...s}:n==="className"&&(t[n]=[r,s].filter(Boolean).join(" "))}return{...i,...t}}function kL(i){var n,r;let e=(n=Object.getOwnPropertyDescriptor(i.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=(r=Object.getOwnPropertyDescriptor(i,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}var FL=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],dn=FL.reduce((i,e)=>{const t=NL(`Primitive.${e}`),n=N.forwardRef((r,s)=>{const{asChild:a,...c}=r,d=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),H.jsx(d,{...c,ref:s})});return n.displayName=`Primitive.${e}`,{...i,[e]:n}},{});function zL(i,e){i&&hm.flushSync(()=>i.dispatchEvent(e))}function nc(i){const e=N.useRef(i);return N.useEffect(()=>{e.current=i}),N.useMemo(()=>(...t)=>{var n;return(n=e.current)==null?void 0:n.call(e,...t)},[])}function BL(i,e=globalThis==null?void 0:globalThis.document){const t=nc(i);N.useEffect(()=>{const n=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var VL="DismissableLayer",P_="dismissableLayer.update",HL="dismissableLayer.pointerDownOutside",GL="dismissableLayer.focusOutside",XM,mb=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),_S=N.forwardRef((i,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:a,onDismiss:c,...d}=i,h=N.useContext(mb),[m,g]=N.useState(null),v=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=N.useState({}),M=An(e,F=>g(F)),E=Array.from(h.layers),[w]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),S=E.indexOf(w),A=m?E.indexOf(m):-1,C=h.layersWithOutsidePointerEventsDisabled.size>0,R=A>=S,O=XL(F=>{const z=F.target,k=[...h.branches].some(L=>L.contains(z));!R||k||(r==null||r(F),a==null||a(F),F.defaultPrevented||c==null||c())},v),U=YL(F=>{const z=F.target;[...h.branches].some(L=>L.contains(z))||(s==null||s(F),a==null||a(F),F.defaultPrevented||c==null||c())},v);return BL(F=>{A===h.layers.size-1&&(n==null||n(F),!F.defaultPrevented&&c&&(F.preventDefault(),c()))},v),N.useEffect(()=>{if(m)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(XM=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(m)),h.layers.add(m),YM(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=XM)}},[m,v,t,h]),N.useEffect(()=>()=>{m&&(h.layers.delete(m),h.layersWithOutsidePointerEventsDisabled.delete(m),YM())},[m,h]),N.useEffect(()=>{const F=()=>y({});return document.addEventListener(P_,F),()=>document.removeEventListener(P_,F)},[]),H.jsx(dn.div,{...d,ref:M,style:{pointerEvents:C?R?"auto":"none":void 0,...i.style},onFocusCapture:cn(i.onFocusCapture,U.onFocusCapture),onBlurCapture:cn(i.onBlurCapture,U.onBlurCapture),onPointerDownCapture:cn(i.onPointerDownCapture,O.onPointerDownCapture)})});_S.displayName=VL;var WL="DismissableLayerBranch",jL=N.forwardRef((i,e)=>{const t=N.useContext(mb),n=N.useRef(null),r=An(e,n);return N.useEffect(()=>{const s=n.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),H.jsx(dn.div,{...i,ref:r})});jL.displayName=WL;function XL(i,e=globalThis==null?void 0:globalThis.document){const t=nc(i),n=N.useRef(!1),r=N.useRef(()=>{});return N.useEffect(()=>{const s=c=>{if(c.target&&!n.current){let d=function(){gb(HL,t,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=d,e.addEventListener("click",r.current,{once:!0})):d()}else e.removeEventListener("click",r.current);n.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function YL(i,e=globalThis==null?void 0:globalThis.document){const t=nc(i),n=N.useRef(!1);return N.useEffect(()=>{const r=s=>{s.target&&!n.current&&gb(GL,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function YM(){const i=new CustomEvent(P_);document.dispatchEvent(i)}function gb(i,e,t,{discrete:n}){const r=t.originalEvent.target,s=new CustomEvent(i,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(i,e,{once:!0}),n?zL(r,s):r.dispatchEvent(s)}var fx="focusScope.autoFocusOnMount",dx="focusScope.autoFocusOnUnmount",qM={bubbles:!1,cancelable:!0},qL="FocusScope",SS=N.forwardRef((i,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...a}=i,[c,d]=N.useState(null),h=nc(r),m=nc(s),g=N.useRef(null),v=An(e,E=>d(E)),y=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(n){let E=function(C){if(y.paused||!c)return;const R=C.target;c.contains(R)?g.current=R:Wl(g.current,{select:!0})},w=function(C){if(y.paused||!c)return;const R=C.relatedTarget;R!==null&&(c.contains(R)||Wl(g.current,{select:!0}))},S=function(C){if(document.activeElement===document.body)for(const O of C)O.removedNodes.length>0&&Wl(c)};document.addEventListener("focusin",E),document.addEventListener("focusout",w);const A=new MutationObserver(S);return c&&A.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",E),document.removeEventListener("focusout",w),A.disconnect()}}},[n,c,y.paused]),N.useEffect(()=>{if(c){ZM.add(y);const E=document.activeElement;if(!c.contains(E)){const S=new CustomEvent(fx,qM);c.addEventListener(fx,h),c.dispatchEvent(S),S.defaultPrevented||(KL(eD(vb(c)),{select:!0}),document.activeElement===E&&Wl(c))}return()=>{c.removeEventListener(fx,h),setTimeout(()=>{const S=new CustomEvent(dx,qM);c.addEventListener(dx,m),c.dispatchEvent(S),S.defaultPrevented||Wl(E??document.body,{select:!0}),c.removeEventListener(dx,m),ZM.remove(y)},0)}}},[c,h,m,y]);const M=N.useCallback(E=>{if(!t&&!n||y.paused)return;const w=E.key==="Tab"&&!E.altKey&&!E.ctrlKey&&!E.metaKey,S=document.activeElement;if(w&&S){const A=E.currentTarget,[C,R]=ZL(A);C&&R?!E.shiftKey&&S===R?(E.preventDefault(),t&&Wl(C,{select:!0})):E.shiftKey&&S===C&&(E.preventDefault(),t&&Wl(R,{select:!0})):S===A&&E.preventDefault()}},[t,n,y.paused]);return H.jsx(dn.div,{tabIndex:-1,...a,ref:v,onKeyDown:M})});SS.displayName=qL;function KL(i,{select:e=!1}={}){const t=document.activeElement;for(const n of i)if(Wl(n,{select:e}),document.activeElement!==t)return}function ZL(i){const e=vb(i),t=KM(e,i),n=KM(e.reverse(),i);return[t,n]}function vb(i){const e=[],t=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const r=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||r?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function KM(i,e){for(const t of i)if(!$L(t,{upTo:e}))return t}function $L(i,{upTo:e}){if(getComputedStyle(i).visibility==="hidden")return!0;for(;i;){if(e!==void 0&&i===e)return!1;if(getComputedStyle(i).display==="none")return!0;i=i.parentElement}return!1}function QL(i){return i instanceof HTMLInputElement&&"select"in i}function Wl(i,{select:e=!1}={}){if(i&&i.focus){const t=document.activeElement;i.focus({preventScroll:!0}),i!==t&&QL(i)&&e&&i.select()}}var ZM=JL();function JL(){let i=[];return{add(e){const t=i[0];e!==t&&(t==null||t.pause()),i=$M(i,e),i.unshift(e)},remove(e){var t;i=$M(i,e),(t=i[0])==null||t.resume()}}}function $M(i,e){const t=[...i],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function eD(i){return i.filter(e=>e.tagName!=="A")}var tD="Portal",wS=N.forwardRef((i,e)=>{var c;const{container:t,...n}=i,[r,s]=N.useState(!1);pr(()=>s(!0),[]);const a=t||r&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return a?S2.createPortal(H.jsx(dn.div,{...n,ref:e}),a):null});wS.displayName=tD;function nD(i,e){return N.useReducer((t,n)=>e[t][n]??t,i)}var pm=i=>{const{present:e,children:t}=i,n=iD(e),r=typeof t=="function"?t({present:n.isPresent}):N.Children.only(t),s=An(n.ref,rD(r));return typeof t=="function"||n.isPresent?N.cloneElement(r,{ref:s}):null};pm.displayName="Presence";function iD(i){const[e,t]=N.useState(),n=N.useRef(null),r=N.useRef(i),s=N.useRef("none"),a=i?"mounted":"unmounted",[c,d]=nD(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const h=Tg(n.current);s.current=c==="mounted"?h:"none"},[c]),pr(()=>{const h=n.current,m=r.current;if(m!==i){const v=s.current,y=Tg(h);i?d("MOUNT"):y==="none"||(h==null?void 0:h.display)==="none"?d("UNMOUNT"):d(m&&v!==y?"ANIMATION_OUT":"UNMOUNT"),r.current=i}},[i,d]),pr(()=>{if(e){let h;const m=e.ownerDocument.defaultView??window,g=y=>{const E=Tg(n.current).includes(CSS.escape(y.animationName));if(y.target===e&&E&&(d("ANIMATION_END"),!r.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",h=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},v=y=>{y.target===e&&(s.current=Tg(n.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{m.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:N.useCallback(h=>{n.current=h?getComputedStyle(h):null,t(h)},[])}}function Tg(i){return(i==null?void 0:i.animationName)||"none"}function rD(i){var n,r;let e=(n=Object.getOwnPropertyDescriptor(i.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=(r=Object.getOwnPropertyDescriptor(i,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}var hx=0;function yb(){N.useEffect(()=>{const i=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",i[0]??QM()),document.body.insertAdjacentElement("beforeend",i[1]??QM()),hx++,()=>{hx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),hx--}},[])}function QM(){const i=document.createElement("span");return i.setAttribute("data-radix-focus-guard",""),i.tabIndex=0,i.style.outline="none",i.style.opacity="0",i.style.position="fixed",i.style.pointerEvents="none",i}var Bo=function(){return Bo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Bo.apply(this,arguments)};function xb(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t}function sD(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))}var Tv="right-scroll-bar-position",bv="width-before-scroll-bar",oD="with-scroll-bars-hidden",aD="--removed-body-scroll-bar-size";function px(i,e){return typeof i=="function"?i(e):i&&(i.current=e),i}function lD(i,e){var t=N.useState(function(){return{value:i,callback:e,facade:{get current(){return t.value},set current(n){var r=t.value;r!==n&&(t.value=n,t.callback(n,r))}}}})[0];return t.callback=e,t.facade}var cD=typeof window<"u"?N.useLayoutEffect:N.useEffect,JM=new WeakMap;function uD(i,e){var t=lD(null,function(n){return i.forEach(function(r){return px(r,n)})});return cD(function(){var n=JM.get(t);if(n){var r=new Set(n),s=new Set(i),a=t.current;r.forEach(function(c){s.has(c)||px(c,null)}),s.forEach(function(c){r.has(c)||px(c,a)})}JM.set(t,i)},[i]),t}function fD(i){return i}function dD(i,e){e===void 0&&(e=fD);var t=[],n=!1,r={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:i},useMedium:function(s){var a=e(s,n);return t.push(a),function(){t=t.filter(function(c){return c!==a})}},assignSyncMedium:function(s){for(n=!0;t.length;){var a=t;t=[],a.forEach(s)}t={push:function(c){return s(c)},filter:function(){return t}}},assignMedium:function(s){n=!0;var a=[];if(t.length){var c=t;t=[],c.forEach(s),a=t}var d=function(){var m=a;a=[],m.forEach(s)},h=function(){return Promise.resolve().then(d)};h(),t={push:function(m){a.push(m),h()},filter:function(m){return a=a.filter(m),t}}}};return r}function hD(i){i===void 0&&(i={});var e=dD(null);return e.options=Bo({async:!0,ssr:!1},i),e}var _b=function(i){var e=i.sideCar,t=xb(i,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return N.createElement(n,Bo({},t))};_b.isSideCarExport=!0;function pD(i,e){return i.useMedium(e),_b}var Sb=hD(),mx=function(){},Oy=N.forwardRef(function(i,e){var t=N.useRef(null),n=N.useState({onScrollCapture:mx,onWheelCapture:mx,onTouchMoveCapture:mx}),r=n[0],s=n[1],a=i.forwardProps,c=i.children,d=i.className,h=i.removeScrollBar,m=i.enabled,g=i.shards,v=i.sideCar,y=i.noRelative,M=i.noIsolation,E=i.inert,w=i.allowPinchZoom,S=i.as,A=S===void 0?"div":S,C=i.gapMode,R=xb(i,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=v,U=uD([t,e]),F=Bo(Bo({},R),r);return N.createElement(N.Fragment,null,m&&N.createElement(O,{sideCar:Sb,removeScrollBar:h,shards:g,noRelative:y,noIsolation:M,inert:E,setCallbacks:s,allowPinchZoom:!!w,lockRef:t,gapMode:C}),a?N.cloneElement(N.Children.only(c),Bo(Bo({},F),{ref:U})):N.createElement(A,Bo({},F,{className:d,ref:U}),c))});Oy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Oy.classNames={fullWidth:bv,zeroRight:Tv};var mD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function gD(){if(!document)return null;var i=document.createElement("style");i.type="text/css";var e=mD();return e&&i.setAttribute("nonce",e),i}function vD(i,e){i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}function yD(i){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(i)}var xD=function(){var i=0,e=null;return{add:function(t){i==0&&(e=gD())&&(vD(e,t),yD(e)),i++},remove:function(){i--,!i&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},_D=function(){var i=xD();return function(e,t){N.useEffect(function(){return i.add(e),function(){i.remove()}},[e&&t])}},wb=function(){var i=_D(),e=function(t){var n=t.styles,r=t.dynamic;return i(n,r),null};return e},SD={left:0,top:0,right:0,gap:0},gx=function(i){return parseInt(i||"",10)||0},wD=function(i){var e=window.getComputedStyle(document.body),t=e[i==="padding"?"paddingLeft":"marginLeft"],n=e[i==="padding"?"paddingTop":"marginTop"],r=e[i==="padding"?"paddingRight":"marginRight"];return[gx(t),gx(n),gx(r)]},MD=function(i){if(i===void 0&&(i="margin"),typeof window>"u")return SD;var e=wD(i),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},ED=wb(),zd="data-scroll-locked",TD=function(i,e,t,n){var r=i.left,s=i.top,a=i.right,c=i.gap;return t===void 0&&(t="margin"),`
  .`.concat(oD,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(c,"px ").concat(n,`;
  }
  body[`).concat(zd,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(c,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Tv,` {
    right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(bv,` {
    margin-right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Tv," .").concat(Tv,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(bv," .").concat(bv,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(zd,`] {
    `).concat(aD,": ").concat(c,`px;
  }
`)},eE=function(){var i=parseInt(document.body.getAttribute(zd)||"0",10);return isFinite(i)?i:0},bD=function(){N.useEffect(function(){return document.body.setAttribute(zd,(eE()+1).toString()),function(){var i=eE()-1;i<=0?document.body.removeAttribute(zd):document.body.setAttribute(zd,i.toString())}},[])},CD=function(i){var e=i.noRelative,t=i.noImportant,n=i.gapMode,r=n===void 0?"margin":n;bD();var s=N.useMemo(function(){return MD(r)},[r]);return N.createElement(ED,{styles:TD(s,!e,r,t?"":"!important")})},I_=!1;if(typeof window<"u")try{var bg=Object.defineProperty({},"passive",{get:function(){return I_=!0,!0}});window.addEventListener("test",bg,bg),window.removeEventListener("test",bg,bg)}catch{I_=!1}var sd=I_?{passive:!1}:!1,AD=function(i){return i.tagName==="TEXTAREA"},Mb=function(i,e){if(!(i instanceof Element))return!1;var t=window.getComputedStyle(i);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!AD(i)&&t[e]==="visible")},RD=function(i){return Mb(i,"overflowY")},PD=function(i){return Mb(i,"overflowX")},tE=function(i,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=Eb(i,n);if(r){var s=Tb(i,n),a=s[1],c=s[2];if(a>c)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},ID=function(i){var e=i.scrollTop,t=i.scrollHeight,n=i.clientHeight;return[e,t,n]},ND=function(i){var e=i.scrollLeft,t=i.scrollWidth,n=i.clientWidth;return[e,t,n]},Eb=function(i,e){return i==="v"?RD(e):PD(e)},Tb=function(i,e){return i==="v"?ID(e):ND(e)},LD=function(i,e){return i==="h"&&e==="rtl"?-1:1},DD=function(i,e,t,n,r){var s=LD(i,window.getComputedStyle(e).direction),a=s*n,c=t.target,d=e.contains(c),h=!1,m=a>0,g=0,v=0;do{if(!c)break;var y=Tb(i,c),M=y[0],E=y[1],w=y[2],S=E-w-s*M;(M||S)&&Eb(i,c)&&(g+=S,v+=M);var A=c.parentNode;c=A&&A.nodeType===Node.DOCUMENT_FRAGMENT_NODE?A.host:A}while(!d&&c!==document.body||d&&(e.contains(c)||e===c));return(m&&Math.abs(g)<1||!m&&Math.abs(v)<1)&&(h=!0),h},Cg=function(i){return"changedTouches"in i?[i.changedTouches[0].clientX,i.changedTouches[0].clientY]:[0,0]},nE=function(i){return[i.deltaX,i.deltaY]},iE=function(i){return i&&"current"in i?i.current:i},OD=function(i,e){return i[0]===e[0]&&i[1]===e[1]},UD=function(i){return`
  .block-interactivity-`.concat(i,` {pointer-events: none;}
  .allow-interactivity-`).concat(i,` {pointer-events: all;}
`)},kD=0,od=[];function FD(i){var e=N.useRef([]),t=N.useRef([0,0]),n=N.useRef(),r=N.useState(kD++)[0],s=N.useState(wb)[0],a=N.useRef(i);N.useEffect(function(){a.current=i},[i]),N.useEffect(function(){if(i.inert){document.body.classList.add("block-interactivity-".concat(r));var E=sD([i.lockRef.current],(i.shards||[]).map(iE),!0).filter(Boolean);return E.forEach(function(w){return w.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),E.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(r))})}}},[i.inert,i.lockRef.current,i.shards]);var c=N.useCallback(function(E,w){if("touches"in E&&E.touches.length===2||E.type==="wheel"&&E.ctrlKey)return!a.current.allowPinchZoom;var S=Cg(E),A=t.current,C="deltaX"in E?E.deltaX:A[0]-S[0],R="deltaY"in E?E.deltaY:A[1]-S[1],O,U=E.target,F=Math.abs(C)>Math.abs(R)?"h":"v";if("touches"in E&&F==="h"&&U.type==="range")return!1;var z=window.getSelection(),k=z&&z.anchorNode,L=k?k===U||k.contains(U):!1;if(L)return!1;var G=tE(F,U);if(!G)return!0;if(G?O=F:(O=F==="v"?"h":"v",G=tE(F,U)),!G)return!1;if(!n.current&&"changedTouches"in E&&(C||R)&&(n.current=O),!O)return!0;var J=n.current||O;return DD(J,w,E,J==="h"?C:R)},[]),d=N.useCallback(function(E){var w=E;if(!(!od.length||od[od.length-1]!==s)){var S="deltaY"in w?nE(w):Cg(w),A=e.current.filter(function(O){return O.name===w.type&&(O.target===w.target||w.target===O.shadowParent)&&OD(O.delta,S)})[0];if(A&&A.should){w.cancelable&&w.preventDefault();return}if(!A){var C=(a.current.shards||[]).map(iE).filter(Boolean).filter(function(O){return O.contains(w.target)}),R=C.length>0?c(w,C[0]):!a.current.noIsolation;R&&w.cancelable&&w.preventDefault()}}},[]),h=N.useCallback(function(E,w,S,A){var C={name:E,delta:w,target:S,should:A,shadowParent:zD(S)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(R){return R!==C})},1)},[]),m=N.useCallback(function(E){t.current=Cg(E),n.current=void 0},[]),g=N.useCallback(function(E){h(E.type,nE(E),E.target,c(E,i.lockRef.current))},[]),v=N.useCallback(function(E){h(E.type,Cg(E),E.target,c(E,i.lockRef.current))},[]);N.useEffect(function(){return od.push(s),i.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:v}),document.addEventListener("wheel",d,sd),document.addEventListener("touchmove",d,sd),document.addEventListener("touchstart",m,sd),function(){od=od.filter(function(E){return E!==s}),document.removeEventListener("wheel",d,sd),document.removeEventListener("touchmove",d,sd),document.removeEventListener("touchstart",m,sd)}},[]);var y=i.removeScrollBar,M=i.inert;return N.createElement(N.Fragment,null,M?N.createElement(s,{styles:UD(r)}):null,y?N.createElement(CD,{noRelative:i.noRelative,gapMode:i.gapMode}):null)}function zD(i){for(var e=null;i!==null;)i instanceof ShadowRoot&&(e=i.host,i=i.host),i=i.parentNode;return e}const BD=pD(Sb,FD);var MS=N.forwardRef(function(i,e){return N.createElement(Oy,Bo({},i,{ref:e,sideCar:BD}))});MS.classNames=Oy.classNames;var VD=function(i){if(typeof document>"u")return null;var e=Array.isArray(i)?i[0]:i;return e.ownerDocument.body},ad=new WeakMap,Ag=new WeakMap,Rg={},vx=0,bb=function(i){return i&&(i.host||bb(i.parentNode))},HD=function(i,e){return e.map(function(t){if(i.contains(t))return t;var n=bb(t);return n&&i.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",i,". Doing nothing"),null)}).filter(function(t){return!!t})},GD=function(i,e,t,n){var r=HD(e,Array.isArray(i)?i:[i]);Rg[t]||(Rg[t]=new WeakMap);var s=Rg[t],a=[],c=new Set,d=new Set(r),h=function(g){!g||c.has(g)||(c.add(g),h(g.parentNode))};r.forEach(h);var m=function(g){!g||d.has(g)||Array.prototype.forEach.call(g.children,function(v){if(c.has(v))m(v);else try{var y=v.getAttribute(n),M=y!==null&&y!=="false",E=(ad.get(v)||0)+1,w=(s.get(v)||0)+1;ad.set(v,E),s.set(v,w),a.push(v),E===1&&M&&Ag.set(v,!0),w===1&&v.setAttribute(t,"true"),M||v.setAttribute(n,"true")}catch(S){console.error("aria-hidden: cannot operate on ",v,S)}})};return m(e),c.clear(),vx++,function(){a.forEach(function(g){var v=ad.get(g)-1,y=s.get(g)-1;ad.set(g,v),s.set(g,y),v||(Ag.has(g)||g.removeAttribute(n),Ag.delete(g)),y||g.removeAttribute(t)}),vx--,vx||(ad=new WeakMap,ad=new WeakMap,Ag=new WeakMap,Rg={})}},Cb=function(i,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(i)?i:[i]),r=VD(i);return r?(n.push.apply(n,Array.from(r.querySelectorAll("[aria-live], script"))),GD(n,r,t,"aria-hidden")):function(){return null}};function WD(i){const e=jD(i),t=N.forwardRef((n,r)=>{const{children:s,...a}=n,c=N.Children.toArray(s),d=c.find(YD);if(d){const h=d.props.children,m=c.map(g=>g===d?N.Children.count(h)>1?N.Children.only(null):N.isValidElement(h)?h.props.children:null:g);return H.jsx(e,{...a,ref:r,children:N.isValidElement(h)?N.cloneElement(h,void 0,m):null})}return H.jsx(e,{...a,ref:r,children:s})});return t.displayName=`${i}.Slot`,t}function jD(i){const e=N.forwardRef((t,n)=>{const{children:r,...s}=t;if(N.isValidElement(r)){const a=KD(r),c=qD(s,r.props);return r.type!==N.Fragment&&(c.ref=n?ih(n,a):a),N.cloneElement(r,c)}return N.Children.count(r)>1?N.Children.only(null):null});return e.displayName=`${i}.SlotClone`,e}var XD=Symbol("radix.slottable");function YD(i){return N.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===XD}function qD(i,e){const t={...e};for(const n in e){const r=i[n],s=e[n];/^on[A-Z]/.test(n)?r&&s?t[n]=(...c)=>{const d=s(...c);return r(...c),d}:r&&(t[n]=r):n==="style"?t[n]={...r,...s}:n==="className"&&(t[n]=[r,s].filter(Boolean).join(" "))}return{...i,...t}}function KD(i){var n,r;let e=(n=Object.getOwnPropertyDescriptor(i.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=(r=Object.getOwnPropertyDescriptor(i,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}var Uy="Dialog",[Ab]=ac(Uy),[ZD,xo]=Ab(Uy),Rb=i=>{const{__scopeDialog:e,children:t,open:n,defaultOpen:r,onOpenChange:s,modal:a=!0}=i,c=N.useRef(null),d=N.useRef(null),[h,m]=ku({prop:n,defaultProp:r??!1,onChange:s,caller:Uy});return H.jsx(ZD,{scope:e,triggerRef:c,contentRef:d,contentId:ec(),titleId:ec(),descriptionId:ec(),open:h,onOpenChange:m,onOpenToggle:N.useCallback(()=>m(g=>!g),[m]),modal:a,children:t})};Rb.displayName=Uy;var Pb="DialogTrigger",$D=N.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,r=xo(Pb,t),s=An(e,r.triggerRef);return H.jsx(dn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":bS(r.open),...n,ref:s,onClick:cn(i.onClick,r.onOpenToggle)})});$D.displayName=Pb;var ES="DialogPortal",[QD,Ib]=Ab(ES,{forceMount:void 0}),Nb=i=>{const{__scopeDialog:e,forceMount:t,children:n,container:r}=i,s=xo(ES,e);return H.jsx(QD,{scope:e,forceMount:t,children:N.Children.map(n,a=>H.jsx(pm,{present:t||s.open,children:H.jsx(wS,{asChild:!0,container:r,children:a})}))})};Nb.displayName=ES;var Dv="DialogOverlay",Lb=N.forwardRef((i,e)=>{const t=Ib(Dv,i.__scopeDialog),{forceMount:n=t.forceMount,...r}=i,s=xo(Dv,i.__scopeDialog);return s.modal?H.jsx(pm,{present:n||s.open,children:H.jsx(e3,{...r,ref:e})}):null});Lb.displayName=Dv;var JD=WD("DialogOverlay.RemoveScroll"),e3=N.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,r=xo(Dv,t);return H.jsx(MS,{as:JD,allowPinchZoom:!0,shards:[r.contentRef],children:H.jsx(dn.div,{"data-state":bS(r.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),Fu="DialogContent",Db=N.forwardRef((i,e)=>{const t=Ib(Fu,i.__scopeDialog),{forceMount:n=t.forceMount,...r}=i,s=xo(Fu,i.__scopeDialog);return H.jsx(pm,{present:n||s.open,children:s.modal?H.jsx(t3,{...r,ref:e}):H.jsx(n3,{...r,ref:e})})});Db.displayName=Fu;var t3=N.forwardRef((i,e)=>{const t=xo(Fu,i.__scopeDialog),n=N.useRef(null),r=An(e,t.contentRef,n);return N.useEffect(()=>{const s=n.current;if(s)return Cb(s)},[]),H.jsx(Ob,{...i,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:cn(i.onCloseAutoFocus,s=>{var a;s.preventDefault(),(a=t.triggerRef.current)==null||a.focus()}),onPointerDownOutside:cn(i.onPointerDownOutside,s=>{const a=s.detail.originalEvent,c=a.button===0&&a.ctrlKey===!0;(a.button===2||c)&&s.preventDefault()}),onFocusOutside:cn(i.onFocusOutside,s=>s.preventDefault())})}),n3=N.forwardRef((i,e)=>{const t=xo(Fu,i.__scopeDialog),n=N.useRef(!1),r=N.useRef(!1);return H.jsx(Ob,{...i,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var a,c;(a=i.onCloseAutoFocus)==null||a.call(i,s),s.defaultPrevented||(n.current||(c=t.triggerRef.current)==null||c.focus(),s.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:s=>{var d,h;(d=i.onInteractOutside)==null||d.call(i,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const a=s.target;((h=t.triggerRef.current)==null?void 0:h.contains(a))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),Ob=N.forwardRef((i,e)=>{const{__scopeDialog:t,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:s,...a}=i,c=xo(Fu,t),d=N.useRef(null),h=An(e,d);return yb(),H.jsxs(H.Fragment,{children:[H.jsx(SS,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:s,children:H.jsx(_S,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":bS(c.open),...a,ref:h,onDismiss:()=>c.onOpenChange(!1)})}),H.jsxs(H.Fragment,{children:[H.jsx(i3,{titleId:c.titleId}),H.jsx(s3,{contentRef:d,descriptionId:c.descriptionId})]})]})}),TS="DialogTitle",Ub=N.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,r=xo(TS,t);return H.jsx(dn.h2,{id:r.titleId,...n,ref:e})});Ub.displayName=TS;var kb="DialogDescription",Fb=N.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,r=xo(kb,t);return H.jsx(dn.p,{id:r.descriptionId,...n,ref:e})});Fb.displayName=kb;var zb="DialogClose",Bb=N.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,r=xo(zb,t);return H.jsx(dn.button,{type:"button",...n,ref:e,onClick:cn(i.onClick,()=>r.onOpenChange(!1))})});Bb.displayName=zb;function bS(i){return i?"open":"closed"}var Vb="DialogTitleWarning",[BW,Hb]=TL(Vb,{contentName:Fu,titleName:TS,docsSlug:"dialog"}),i3=({titleId:i})=>{const e=Hb(Vb),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return N.useEffect(()=>{i&&(document.getElementById(i)||console.error(t))},[t,i]),null},r3="DialogDescriptionWarning",s3=({contentRef:i,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Hb(r3).contentName}}.`;return N.useEffect(()=>{var s;const r=(s=i.current)==null?void 0:s.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(n))},[n,i,e]),null},o3=Rb,a3=Nb,Gb=Lb,Wb=Db,jb=Ub,Xb=Fb,l3=Bb;/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),u3=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),rE=i=>{const e=u3(i);return e.charAt(0).toUpperCase()+e.slice(1)},Yb=(...i)=>i.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),f3=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=N.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:r="",children:s,iconNode:a,...c},d)=>N.createElement("svg",{ref:d,...d3,width:e,height:e,stroke:i,strokeWidth:n?Number(t)*24/Number(e):t,className:Yb("lucide",r),...!s&&!f3(c)&&{"aria-hidden":"true"},...c},[...a.map(([h,m])=>N.createElement(h,m)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=(i,e)=>{const t=N.forwardRef(({className:n,...r},s)=>N.createElement(h3,{ref:s,iconNode:e,className:Yb(`lucide-${c3(rE(i))}`,`lucide-${i}`,n),...r}));return t.displayName=rE(i),t};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],m3=ky("check",p3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],qb=ky("chevron-down",g3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],y3=ky("chevron-up",v3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_3=ky("x",x3),S3=o3,w3=a3,Kb=N.forwardRef(({className:i,...e},t)=>H.jsx(Gb,{ref:t,className:kn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",i),...e}));Kb.displayName=Gb.displayName;const Zb=N.forwardRef(({className:i,children:e,...t},n)=>H.jsxs(w3,{children:[H.jsx(Kb,{}),H.jsxs(Wb,{ref:n,className:kn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",i),...t,children:[e,H.jsxs(l3,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[H.jsx(_3,{className:"h-4 w-4"}),H.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Zb.displayName=Wb.displayName;const $b=({className:i,...e})=>H.jsx("div",{className:kn("flex flex-col space-y-1.5 text-center sm:text-left",i),...e});$b.displayName="DialogHeader";const Qb=N.forwardRef(({className:i,...e},t)=>H.jsx(jb,{ref:t,className:kn("text-lg font-semibold leading-none tracking-tight",i),...e}));Qb.displayName=jb.displayName;const Jb=N.forwardRef(({className:i,...e},t)=>H.jsx(Xb,{ref:t,className:kn("text-sm text-muted-foreground",i),...e}));Jb.displayName=Xb.displayName;function sE(i){const e=M3(i),t=N.forwardRef((n,r)=>{const{children:s,...a}=n,c=N.Children.toArray(s),d=c.find(T3);if(d){const h=d.props.children,m=c.map(g=>g===d?N.Children.count(h)>1?N.Children.only(null):N.isValidElement(h)?h.props.children:null:g);return H.jsx(e,{...a,ref:r,children:N.isValidElement(h)?N.cloneElement(h,void 0,m):null})}return H.jsx(e,{...a,ref:r,children:s})});return t.displayName=`${i}.Slot`,t}function M3(i){const e=N.forwardRef((t,n)=>{const{children:r,...s}=t;if(N.isValidElement(r)){const a=C3(r),c=b3(s,r.props);return r.type!==N.Fragment&&(c.ref=n?ih(n,a):a),N.cloneElement(r,c)}return N.Children.count(r)>1?N.Children.only(null):null});return e.displayName=`${i}.SlotClone`,e}var E3=Symbol("radix.slottable");function T3(i){return N.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===E3}function b3(i,e){const t={...e};for(const n in e){const r=i[n],s=e[n];/^on[A-Z]/.test(n)?r&&s?t[n]=(...c)=>{const d=s(...c);return r(...c),d}:r&&(t[n]=r):n==="style"?t[n]={...r,...s}:n==="className"&&(t[n]=[r,s].filter(Boolean).join(" "))}return{...i,...t}}function C3(i){var n,r;let e=(n=Object.getOwnPropertyDescriptor(i.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=(r=Object.getOwnPropertyDescriptor(i,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}function CS(i){const e=i+"CollectionProvider",[t,n]=ac(e),[r,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=E=>{const{scope:w,children:S}=E,A=Ls.useRef(null),C=Ls.useRef(new Map).current;return H.jsx(r,{scope:w,itemMap:C,collectionRef:A,children:S})};a.displayName=e;const c=i+"CollectionSlot",d=sE(c),h=Ls.forwardRef((E,w)=>{const{scope:S,children:A}=E,C=s(c,S),R=An(w,C.collectionRef);return H.jsx(d,{ref:R,children:A})});h.displayName=c;const m=i+"CollectionItemSlot",g="data-radix-collection-item",v=sE(m),y=Ls.forwardRef((E,w)=>{const{scope:S,children:A,...C}=E,R=Ls.useRef(null),O=An(w,R),U=s(m,S);return Ls.useEffect(()=>(U.itemMap.set(R,{ref:R,...C}),()=>void U.itemMap.delete(R))),H.jsx(v,{[g]:"",ref:O,children:A})});y.displayName=m;function M(E){const w=s(i+"CollectionConsumer",E);return Ls.useCallback(()=>{const A=w.collectionRef.current;if(!A)return[];const C=Array.from(A.querySelectorAll(`[${g}]`));return Array.from(w.itemMap.values()).sort((U,F)=>C.indexOf(U.ref.current)-C.indexOf(F.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:a,Slot:h,ItemSlot:y},M,n]}var A3=N.createContext(void 0);function Fy(i){const e=N.useContext(A3);return i||e||"ltr"}var yx="rovingFocusGroup.onEntryFocus",R3={bubbles:!1,cancelable:!0},mm="RovingFocusGroup",[N_,eC,P3]=CS(mm),[I3,tC]=ac(mm,[P3]),[N3,L3]=I3(mm),nC=N.forwardRef((i,e)=>H.jsx(N_.Provider,{scope:i.__scopeRovingFocusGroup,children:H.jsx(N_.Slot,{scope:i.__scopeRovingFocusGroup,children:H.jsx(D3,{...i,ref:e})})}));nC.displayName=mm;var D3=N.forwardRef((i,e)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:r=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:m=!1,...g}=i,v=N.useRef(null),y=An(e,v),M=Fy(s),[E,w]=ku({prop:a,defaultProp:c??null,onChange:d,caller:mm}),[S,A]=N.useState(!1),C=nc(h),R=eC(t),O=N.useRef(!1),[U,F]=N.useState(0);return N.useEffect(()=>{const z=v.current;if(z)return z.addEventListener(yx,C),()=>z.removeEventListener(yx,C)},[C]),H.jsx(N3,{scope:t,orientation:n,dir:M,loop:r,currentTabStopId:E,onItemFocus:N.useCallback(z=>w(z),[w]),onItemShiftTab:N.useCallback(()=>A(!0),[]),onFocusableItemAdd:N.useCallback(()=>F(z=>z+1),[]),onFocusableItemRemove:N.useCallback(()=>F(z=>z-1),[]),children:H.jsx(dn.div,{tabIndex:S||U===0?-1:0,"data-orientation":n,...g,ref:y,style:{outline:"none",...i.style},onMouseDown:cn(i.onMouseDown,()=>{O.current=!0}),onFocus:cn(i.onFocus,z=>{const k=!O.current;if(z.target===z.currentTarget&&k&&!S){const L=new CustomEvent(yx,R3);if(z.currentTarget.dispatchEvent(L),!L.defaultPrevented){const G=R().filter(ne=>ne.focusable),J=G.find(ne=>ne.active),Q=G.find(ne=>ne.id===E),ge=[J,Q,...G].filter(Boolean).map(ne=>ne.ref.current);sC(ge,m)}}O.current=!1}),onBlur:cn(i.onBlur,()=>A(!1))})})}),iC="RovingFocusGroupItem",rC=N.forwardRef((i,e)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:r=!1,tabStopId:s,children:a,...c}=i,d=ec(),h=s||d,m=L3(iC,t),g=m.currentTabStopId===h,v=eC(t),{onFocusableItemAdd:y,onFocusableItemRemove:M,currentTabStopId:E}=m;return N.useEffect(()=>{if(n)return y(),()=>M()},[n,y,M]),H.jsx(N_.ItemSlot,{scope:t,id:h,focusable:n,active:r,children:H.jsx(dn.span,{tabIndex:g?0:-1,"data-orientation":m.orientation,...c,ref:e,onMouseDown:cn(i.onMouseDown,w=>{n?m.onItemFocus(h):w.preventDefault()}),onFocus:cn(i.onFocus,()=>m.onItemFocus(h)),onKeyDown:cn(i.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){m.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const S=k3(w,m.orientation,m.dir);if(S!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let C=v().filter(R=>R.focusable).map(R=>R.ref.current);if(S==="last")C.reverse();else if(S==="prev"||S==="next"){S==="prev"&&C.reverse();const R=C.indexOf(w.currentTarget);C=m.loop?F3(C,R+1):C.slice(R+1)}setTimeout(()=>sC(C))}}),children:typeof a=="function"?a({isCurrentTabStop:g,hasTabStop:E!=null}):a})})});rC.displayName=iC;var O3={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function U3(i,e){return e!=="rtl"?i:i==="ArrowLeft"?"ArrowRight":i==="ArrowRight"?"ArrowLeft":i}function k3(i,e,t){const n=U3(i.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return O3[n]}function sC(i,e=!1){const t=document.activeElement;for(const n of i)if(n===t||(n.focus({preventScroll:e}),document.activeElement!==t))return}function F3(i,e){return i.map((t,n)=>i[(e+n)%i.length])}var z3=nC,B3=rC,zy="Tabs",[V3]=ac(zy,[tC]),oC=tC(),[H3,AS]=V3(zy),aC=N.forwardRef((i,e)=>{const{__scopeTabs:t,value:n,onValueChange:r,defaultValue:s,orientation:a="horizontal",dir:c,activationMode:d="automatic",...h}=i,m=Fy(c),[g,v]=ku({prop:n,onChange:r,defaultProp:s??"",caller:zy});return H.jsx(H3,{scope:t,baseId:ec(),value:g,onValueChange:v,orientation:a,dir:m,activationMode:d,children:H.jsx(dn.div,{dir:m,"data-orientation":a,...h,ref:e})})});aC.displayName=zy;var lC="TabsList",cC=N.forwardRef((i,e)=>{const{__scopeTabs:t,loop:n=!0,...r}=i,s=AS(lC,t),a=oC(t);return H.jsx(z3,{asChild:!0,...a,orientation:s.orientation,dir:s.dir,loop:n,children:H.jsx(dn.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:e})})});cC.displayName=lC;var uC="TabsTrigger",fC=N.forwardRef((i,e)=>{const{__scopeTabs:t,value:n,disabled:r=!1,...s}=i,a=AS(uC,t),c=oC(t),d=pC(a.baseId,n),h=mC(a.baseId,n),m=n===a.value;return H.jsx(B3,{asChild:!0,...c,focusable:!r,active:m,children:H.jsx(dn.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":h,"data-state":m?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:d,...s,ref:e,onMouseDown:cn(i.onMouseDown,g=>{!r&&g.button===0&&g.ctrlKey===!1?a.onValueChange(n):g.preventDefault()}),onKeyDown:cn(i.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&a.onValueChange(n)}),onFocus:cn(i.onFocus,()=>{const g=a.activationMode!=="manual";!m&&!r&&g&&a.onValueChange(n)})})})});fC.displayName=uC;var dC="TabsContent",hC=N.forwardRef((i,e)=>{const{__scopeTabs:t,value:n,forceMount:r,children:s,...a}=i,c=AS(dC,t),d=pC(c.baseId,n),h=mC(c.baseId,n),m=n===c.value,g=N.useRef(m);return N.useEffect(()=>{const v=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(v)},[]),H.jsx(pm,{present:r||m,children:({present:v})=>H.jsx(dn.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!v,id:h,tabIndex:0,...a,ref:e,style:{...i.style,animationDuration:g.current?"0s":void 0},children:v&&s})})});hC.displayName=dC;function pC(i,e){return`${i}-trigger-${e}`}function mC(i,e){return`${i}-content-${e}`}var G3=aC,gC=cC,vC=fC,yC=hC;const W3=G3,xC=N.forwardRef(({className:i,...e},t)=>H.jsx(gC,{ref:t,className:kn("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",i),...e}));xC.displayName=gC.displayName;const Tp=N.forwardRef(({className:i,...e},t)=>H.jsx(vC,{ref:t,className:kn("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",i),...e}));Tp.displayName=vC.displayName;const bp=N.forwardRef(({className:i,...e},t)=>H.jsx(yC,{ref:t,className:kn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",i),...e}));bp.displayName=yC.displayName;var j3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],X3=j3.reduce((i,e)=>{const t=KT(`Primitive.${e}`),n=N.forwardRef((r,s)=>{const{asChild:a,...c}=r,d=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),H.jsx(d,{...c,ref:s})});return n.displayName=`Primitive.${e}`,{...i,[e]:n}},{}),Y3="Label",_C=N.forwardRef((i,e)=>H.jsx(X3.label,{...i,ref:e,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||((r=i.onMouseDown)==null||r.call(i,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));_C.displayName=Y3;var SC=_C;const q3=QT("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ri=N.forwardRef(({className:i,...e},t)=>H.jsx(SC,{ref:t,className:kn(q3(),i),...e}));Ri.displayName=SC.displayName;function Ov(i,[e,t]){return Math.min(t,Math.max(e,i))}function RS(i){const e=N.useRef({value:i,previous:i});return N.useMemo(()=>(e.current.value!==i&&(e.current.previous=e.current.value,e.current.value=i),e.current.previous),[i])}function PS(i){const[e,t]=N.useState(void 0);return pr(()=>{if(i){t({width:i.offsetWidth,height:i.offsetHeight});const n=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let a,c;if("borderBoxSize"in s){const d=s.borderBoxSize,h=Array.isArray(d)?d[0]:d;a=h.inlineSize,c=h.blockSize}else a=i.offsetWidth,c=i.offsetHeight;t({width:a,height:c})});return n.observe(i,{box:"border-box"}),()=>n.unobserve(i)}else t(void 0)},[i]),e}var wC=["PageUp","PageDown"],MC=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],EC={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},oh="Slider",[L_,K3,Z3]=CS(oh),[TC]=ac(oh,[Z3]),[$3,By]=TC(oh),bC=N.forwardRef((i,e)=>{const{name:t,min:n=0,max:r=100,step:s=1,orientation:a="horizontal",disabled:c=!1,minStepsBetweenThumbs:d=0,defaultValue:h=[n],value:m,onValueChange:g=()=>{},onValueCommit:v=()=>{},inverted:y=!1,form:M,...E}=i,w=N.useRef(new Set),S=N.useRef(0),C=a==="horizontal"?Q3:J3,[R=[],O]=ku({prop:m,defaultProp:h,onChange:G=>{var Q;(Q=[...w.current][S.current])==null||Q.focus(),g(G)}}),U=N.useRef(R);function F(G){const J=rO(R,G);L(G,J)}function z(G){L(G,S.current)}function k(){const G=U.current[S.current];R[S.current]!==G&&v(R)}function L(G,J,{commit:Q}={commit:!1}){const ce=lO(s),ge=cO(Math.round((G-n)/s)*s+n,ce),ne=Ov(ge,[n,r]);O((de=[])=>{const B=nO(de,ne,J);if(aO(B,d*s)){S.current=B.indexOf(ne);const ie=String(B)!==String(de);return ie&&Q&&v(B),ie?B:de}else return de})}return H.jsx($3,{scope:i.__scopeSlider,name:t,disabled:c,min:n,max:r,valueIndexToChangeRef:S,thumbs:w.current,values:R,orientation:a,form:M,children:H.jsx(L_.Provider,{scope:i.__scopeSlider,children:H.jsx(L_.Slot,{scope:i.__scopeSlider,children:H.jsx(C,{"aria-disabled":c,"data-disabled":c?"":void 0,...E,ref:e,onPointerDown:cn(E.onPointerDown,()=>{c||(U.current=R)}),min:n,max:r,inverted:y,onSlideStart:c?void 0:F,onSlideMove:c?void 0:z,onSlideEnd:c?void 0:k,onHomeKeyDown:()=>!c&&L(n,0,{commit:!0}),onEndKeyDown:()=>!c&&L(r,R.length-1,{commit:!0}),onStepKeyDown:({event:G,direction:J})=>{if(!c){const ge=wC.includes(G.key)||G.shiftKey&&MC.includes(G.key)?10:1,ne=S.current,de=R[ne],B=s*ge*J;L(de+B,ne,{commit:!0})}}})})})})});bC.displayName=oh;var[CC,AC]=TC(oh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Q3=N.forwardRef((i,e)=>{const{min:t,max:n,dir:r,inverted:s,onSlideStart:a,onSlideMove:c,onSlideEnd:d,onStepKeyDown:h,...m}=i,[g,v]=N.useState(null),y=An(e,C=>v(C)),M=N.useRef(void 0),E=Fy(r),w=E==="ltr",S=w&&!s||!w&&s;function A(C){const R=M.current||g.getBoundingClientRect(),O=[0,R.width],F=IS(O,S?[t,n]:[n,t]);return M.current=R,F(C-R.left)}return H.jsx(CC,{scope:i.__scopeSlider,startEdge:S?"left":"right",endEdge:S?"right":"left",direction:S?1:-1,size:"width",children:H.jsx(RC,{dir:E,"data-orientation":"horizontal",...m,ref:y,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:C=>{const R=A(C.clientX);a==null||a(R)},onSlideMove:C=>{const R=A(C.clientX);c==null||c(R)},onSlideEnd:()=>{M.current=void 0,d==null||d()},onStepKeyDown:C=>{const O=EC[S?"from-left":"from-right"].includes(C.key);h==null||h({event:C,direction:O?-1:1})}})})}),J3=N.forwardRef((i,e)=>{const{min:t,max:n,inverted:r,onSlideStart:s,onSlideMove:a,onSlideEnd:c,onStepKeyDown:d,...h}=i,m=N.useRef(null),g=An(e,m),v=N.useRef(void 0),y=!r;function M(E){const w=v.current||m.current.getBoundingClientRect(),S=[0,w.height],C=IS(S,y?[n,t]:[t,n]);return v.current=w,C(E-w.top)}return H.jsx(CC,{scope:i.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:H.jsx(RC,{"data-orientation":"vertical",...h,ref:g,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:E=>{const w=M(E.clientY);s==null||s(w)},onSlideMove:E=>{const w=M(E.clientY);a==null||a(w)},onSlideEnd:()=>{v.current=void 0,c==null||c()},onStepKeyDown:E=>{const S=EC[y?"from-bottom":"from-top"].includes(E.key);d==null||d({event:E,direction:S?-1:1})}})})}),RC=N.forwardRef((i,e)=>{const{__scopeSlider:t,onSlideStart:n,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:a,onEndKeyDown:c,onStepKeyDown:d,...h}=i,m=By(oh,t);return H.jsx(dn.span,{...h,ref:e,onKeyDown:cn(i.onKeyDown,g=>{g.key==="Home"?(a(g),g.preventDefault()):g.key==="End"?(c(g),g.preventDefault()):wC.concat(MC).includes(g.key)&&(d(g),g.preventDefault())}),onPointerDown:cn(i.onPointerDown,g=>{const v=g.target;v.setPointerCapture(g.pointerId),g.preventDefault(),m.thumbs.has(v)?v.focus():n(g)}),onPointerMove:cn(i.onPointerMove,g=>{g.target.hasPointerCapture(g.pointerId)&&r(g)}),onPointerUp:cn(i.onPointerUp,g=>{const v=g.target;v.hasPointerCapture(g.pointerId)&&(v.releasePointerCapture(g.pointerId),s(g))})})}),PC="SliderTrack",IC=N.forwardRef((i,e)=>{const{__scopeSlider:t,...n}=i,r=By(PC,t);return H.jsx(dn.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...n,ref:e})});IC.displayName=PC;var D_="SliderRange",NC=N.forwardRef((i,e)=>{const{__scopeSlider:t,...n}=i,r=By(D_,t),s=AC(D_,t),a=N.useRef(null),c=An(e,a),d=r.values.length,h=r.values.map(v=>OC(v,r.min,r.max)),m=d>1?Math.min(...h):0,g=100-Math.max(...h);return H.jsx(dn.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...n,ref:c,style:{...i.style,[s.startEdge]:m+"%",[s.endEdge]:g+"%"}})});NC.displayName=D_;var O_="SliderThumb",LC=N.forwardRef((i,e)=>{const t=K3(i.__scopeSlider),[n,r]=N.useState(null),s=An(e,c=>r(c)),a=N.useMemo(()=>n?t().findIndex(c=>c.ref.current===n):-1,[t,n]);return H.jsx(eO,{...i,ref:s,index:a})}),eO=N.forwardRef((i,e)=>{const{__scopeSlider:t,index:n,name:r,...s}=i,a=By(O_,t),c=AC(O_,t),[d,h]=N.useState(null),m=An(e,A=>h(A)),g=d?a.form||!!d.closest("form"):!0,v=PS(d),y=a.values[n],M=y===void 0?0:OC(y,a.min,a.max),E=iO(n,a.values.length),w=v==null?void 0:v[c.size],S=w?sO(w,M,c.direction):0;return N.useEffect(()=>{if(d)return a.thumbs.add(d),()=>{a.thumbs.delete(d)}},[d,a.thumbs]),H.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${M}% + ${S}px)`},children:[H.jsx(L_.ItemSlot,{scope:i.__scopeSlider,children:H.jsx(dn.span,{role:"slider","aria-label":i["aria-label"]||E,"aria-valuemin":a.min,"aria-valuenow":y,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...s,ref:m,style:y===void 0?{display:"none"}:i.style,onFocus:cn(i.onFocus,()=>{a.valueIndexToChangeRef.current=n})})}),g&&H.jsx(DC,{name:r??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:y},n)]})});LC.displayName=O_;var tO="RadioBubbleInput",DC=N.forwardRef(({__scopeSlider:i,value:e,...t},n)=>{const r=N.useRef(null),s=An(r,n),a=RS(e);return N.useEffect(()=>{const c=r.current;if(!c)return;const d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(a!==e&&m){const g=new Event("input",{bubbles:!0});m.call(c,e),c.dispatchEvent(g)}},[a,e]),H.jsx(dn.input,{style:{display:"none"},...t,ref:s,defaultValue:e})});DC.displayName=tO;function nO(i=[],e,t){const n=[...i];return n[t]=e,n.sort((r,s)=>r-s)}function OC(i,e,t){const s=100/(t-e)*(i-e);return Ov(s,[0,100])}function iO(i,e){return e>2?`Value ${i+1} of ${e}`:e===2?["Minimum","Maximum"][i]:void 0}function rO(i,e){if(i.length===1)return 0;const t=i.map(r=>Math.abs(r-e)),n=Math.min(...t);return t.indexOf(n)}function sO(i,e,t){const n=i/2,s=IS([0,50],[0,n]);return(n-s(e)*t)*t}function oO(i){return i.slice(0,-1).map((e,t)=>i[t+1]-e)}function aO(i,e){if(e>0){const t=oO(i);return Math.min(...t)>=e}return!0}function IS(i,e){return t=>{if(i[0]===i[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(i[1]-i[0]);return e[0]+n*(t-i[0])}}function lO(i){return(String(i).split(".")[1]||"").length}function cO(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}var UC=bC,uO=IC,fO=NC,dO=LC;const pu=N.forwardRef(({className:i,...e},t)=>H.jsxs(UC,{ref:t,className:kn("relative flex w-full touch-none select-none items-center",i),...e,children:[H.jsx(uO,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:H.jsx(fO,{className:"absolute h-full bg-primary"})}),H.jsx(dO,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));pu.displayName=UC.displayName;var Vy="Switch",[hO]=ac(Vy),[pO,mO]=hO(Vy),kC=N.forwardRef((i,e)=>{const{__scopeSwitch:t,name:n,checked:r,defaultChecked:s,required:a,disabled:c,value:d="on",onCheckedChange:h,form:m,...g}=i,[v,y]=N.useState(null),M=An(e,C=>y(C)),E=N.useRef(!1),w=v?m||!!v.closest("form"):!0,[S,A]=ku({prop:r,defaultProp:s??!1,onChange:h,caller:Vy});return H.jsxs(pO,{scope:t,checked:S,disabled:c,children:[H.jsx(dn.button,{type:"button",role:"switch","aria-checked":S,"aria-required":a,"data-state":VC(S),"data-disabled":c?"":void 0,disabled:c,value:d,...g,ref:M,onClick:cn(i.onClick,C=>{A(R=>!R),w&&(E.current=C.isPropagationStopped(),E.current||C.stopPropagation())})}),w&&H.jsx(BC,{control:v,bubbles:!E.current,name:n,value:d,checked:S,required:a,disabled:c,form:m,style:{transform:"translateX(-100%)"}})]})});kC.displayName=Vy;var FC="SwitchThumb",zC=N.forwardRef((i,e)=>{const{__scopeSwitch:t,...n}=i,r=mO(FC,t);return H.jsx(dn.span,{"data-state":VC(r.checked),"data-disabled":r.disabled?"":void 0,...n,ref:e})});zC.displayName=FC;var gO="SwitchBubbleInput",BC=N.forwardRef(({__scopeSwitch:i,control:e,checked:t,bubbles:n=!0,...r},s)=>{const a=N.useRef(null),c=An(a,s),d=RS(t),h=PS(e);return N.useEffect(()=>{const m=a.current;if(!m)return;const g=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(g,"checked").set;if(d!==t&&y){const M=new Event("click",{bubbles:n});y.call(m,t),m.dispatchEvent(M)}},[d,t,n]),H.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...r,tabIndex:-1,ref:c,style:{...r.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});BC.displayName=gO;function VC(i){return i?"checked":"unchecked"}var HC=kC,vO=zC;const mu=N.forwardRef(({className:i,...e},t)=>H.jsx(HC,{className:kn("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",i),...e,ref:t,children:H.jsx(vO,{className:kn("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));mu.displayName=HC.displayName;const yO=["top","right","bottom","left"],ic=Math.min,hs=Math.max,Uv=Math.round,Pg=Math.floor,jo=i=>({x:i,y:i}),xO={left:"right",right:"left",bottom:"top",top:"bottom"},_O={start:"end",end:"start"};function U_(i,e,t){return hs(i,ic(e,t))}function qa(i,e){return typeof i=="function"?i(e):i}function Ka(i){return i.split("-")[0]}function ah(i){return i.split("-")[1]}function NS(i){return i==="x"?"y":"x"}function LS(i){return i==="y"?"height":"width"}const SO=new Set(["top","bottom"]);function Ho(i){return SO.has(Ka(i))?"y":"x"}function DS(i){return NS(Ho(i))}function wO(i,e,t){t===void 0&&(t=!1);const n=ah(i),r=DS(i),s=LS(r);let a=r==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=kv(a)),[a,kv(a)]}function MO(i){const e=kv(i);return[k_(i),e,k_(e)]}function k_(i){return i.replace(/start|end/g,e=>_O[e])}const oE=["left","right"],aE=["right","left"],EO=["top","bottom"],TO=["bottom","top"];function bO(i,e,t){switch(i){case"top":case"bottom":return t?e?aE:oE:e?oE:aE;case"left":case"right":return e?EO:TO;default:return[]}}function CO(i,e,t,n){const r=ah(i);let s=bO(Ka(i),t==="start",n);return r&&(s=s.map(a=>a+"-"+r),e&&(s=s.concat(s.map(k_)))),s}function kv(i){return i.replace(/left|right|bottom|top/g,e=>xO[e])}function AO(i){return{top:0,right:0,bottom:0,left:0,...i}}function GC(i){return typeof i!="number"?AO(i):{top:i,right:i,bottom:i,left:i}}function Fv(i){const{x:e,y:t,width:n,height:r}=i;return{width:n,height:r,top:t,left:e,right:e+n,bottom:t+r,x:e,y:t}}function lE(i,e,t){let{reference:n,floating:r}=i;const s=Ho(e),a=DS(e),c=LS(a),d=Ka(e),h=s==="y",m=n.x+n.width/2-r.width/2,g=n.y+n.height/2-r.height/2,v=n[c]/2-r[c]/2;let y;switch(d){case"top":y={x:m,y:n.y-r.height};break;case"bottom":y={x:m,y:n.y+n.height};break;case"right":y={x:n.x+n.width,y:g};break;case"left":y={x:n.x-r.width,y:g};break;default:y={x:n.x,y:n.y}}switch(ah(e)){case"start":y[a]-=v*(t&&h?-1:1);break;case"end":y[a]+=v*(t&&h?-1:1);break}return y}const RO=async(i,e,t)=>{const{placement:n="bottom",strategy:r="absolute",middleware:s=[],platform:a}=t,c=s.filter(Boolean),d=await(a.isRTL==null?void 0:a.isRTL(e));let h=await a.getElementRects({reference:i,floating:e,strategy:r}),{x:m,y:g}=lE(h,n,d),v=n,y={},M=0;for(let E=0;E<c.length;E++){const{name:w,fn:S}=c[E],{x:A,y:C,data:R,reset:O}=await S({x:m,y:g,initialPlacement:n,placement:v,strategy:r,middlewareData:y,rects:h,platform:a,elements:{reference:i,floating:e}});m=A??m,g=C??g,y={...y,[w]:{...y[w],...R}},O&&M<=50&&(M++,typeof O=="object"&&(O.placement&&(v=O.placement),O.rects&&(h=O.rects===!0?await a.getElementRects({reference:i,floating:e,strategy:r}):O.rects),{x:m,y:g}=lE(h,v,d)),E=-1)}return{x:m,y:g,placement:v,strategy:r,middlewareData:y}};async function Wp(i,e){var t;e===void 0&&(e={});const{x:n,y:r,platform:s,rects:a,elements:c,strategy:d}=i,{boundary:h="clippingAncestors",rootBoundary:m="viewport",elementContext:g="floating",altBoundary:v=!1,padding:y=0}=qa(e,i),M=GC(y),w=c[v?g==="floating"?"reference":"floating":g],S=Fv(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(w)))==null||t?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(c.floating)),boundary:h,rootBoundary:m,strategy:d})),A=g==="floating"?{x:n,y:r,width:a.floating.width,height:a.floating.height}:a.reference,C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c.floating)),R=await(s.isElement==null?void 0:s.isElement(C))?await(s.getScale==null?void 0:s.getScale(C))||{x:1,y:1}:{x:1,y:1},O=Fv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:A,offsetParent:C,strategy:d}):A);return{top:(S.top-O.top+M.top)/R.y,bottom:(O.bottom-S.bottom+M.bottom)/R.y,left:(S.left-O.left+M.left)/R.x,right:(O.right-S.right+M.right)/R.x}}const PO=i=>({name:"arrow",options:i,async fn(e){const{x:t,y:n,placement:r,rects:s,platform:a,elements:c,middlewareData:d}=e,{element:h,padding:m=0}=qa(i,e)||{};if(h==null)return{};const g=GC(m),v={x:t,y:n},y=DS(r),M=LS(y),E=await a.getDimensions(h),w=y==="y",S=w?"top":"left",A=w?"bottom":"right",C=w?"clientHeight":"clientWidth",R=s.reference[M]+s.reference[y]-v[y]-s.floating[M],O=v[y]-s.reference[y],U=await(a.getOffsetParent==null?void 0:a.getOffsetParent(h));let F=U?U[C]:0;(!F||!await(a.isElement==null?void 0:a.isElement(U)))&&(F=c.floating[C]||s.floating[M]);const z=R/2-O/2,k=F/2-E[M]/2-1,L=ic(g[S],k),G=ic(g[A],k),J=L,Q=F-E[M]-G,ce=F/2-E[M]/2+z,ge=U_(J,ce,Q),ne=!d.arrow&&ah(r)!=null&&ce!==ge&&s.reference[M]/2-(ce<J?L:G)-E[M]/2<0,de=ne?ce<J?ce-J:ce-Q:0;return{[y]:v[y]+de,data:{[y]:ge,centerOffset:ce-ge-de,...ne&&{alignmentOffset:de}},reset:ne}}}),IO=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(e){var t,n;const{placement:r,middlewareData:s,rects:a,initialPlacement:c,platform:d,elements:h}=e,{mainAxis:m=!0,crossAxis:g=!0,fallbackPlacements:v,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:M="none",flipAlignment:E=!0,...w}=qa(i,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const S=Ka(r),A=Ho(c),C=Ka(c)===c,R=await(d.isRTL==null?void 0:d.isRTL(h.floating)),O=v||(C||!E?[kv(c)]:MO(c)),U=M!=="none";!v&&U&&O.push(...CO(c,E,M,R));const F=[c,...O],z=await Wp(e,w),k=[];let L=((n=s.flip)==null?void 0:n.overflows)||[];if(m&&k.push(z[S]),g){const ce=wO(r,a,R);k.push(z[ce[0]],z[ce[1]])}if(L=[...L,{placement:r,overflows:k}],!k.every(ce=>ce<=0)){var G,J;const ce=(((G=s.flip)==null?void 0:G.index)||0)+1,ge=F[ce];if(ge&&(!(g==="alignment"?A!==Ho(ge):!1)||L.every(B=>Ho(B.placement)===A?B.overflows[0]>0:!0)))return{data:{index:ce,overflows:L},reset:{placement:ge}};let ne=(J=L.filter(de=>de.overflows[0]<=0).sort((de,B)=>de.overflows[1]-B.overflows[1])[0])==null?void 0:J.placement;if(!ne)switch(y){case"bestFit":{var Q;const de=(Q=L.filter(B=>{if(U){const ie=Ho(B.placement);return ie===A||ie==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(ie=>ie>0).reduce((ie,te)=>ie+te,0)]).sort((B,ie)=>B[1]-ie[1])[0])==null?void 0:Q[0];de&&(ne=de);break}case"initialPlacement":ne=c;break}if(r!==ne)return{reset:{placement:ne}}}return{}}}};function cE(i,e){return{top:i.top-e.height,right:i.right-e.width,bottom:i.bottom-e.height,left:i.left-e.width}}function uE(i){return yO.some(e=>i[e]>=0)}const NO=function(i){return i===void 0&&(i={}),{name:"hide",options:i,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...r}=qa(i,e);switch(n){case"referenceHidden":{const s=await Wp(e,{...r,elementContext:"reference"}),a=cE(s,t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:uE(a)}}}case"escaped":{const s=await Wp(e,{...r,altBoundary:!0}),a=cE(s,t.floating);return{data:{escapedOffsets:a,escaped:uE(a)}}}default:return{}}}}},WC=new Set(["left","top"]);async function LO(i,e){const{placement:t,platform:n,elements:r}=i,s=await(n.isRTL==null?void 0:n.isRTL(r.floating)),a=Ka(t),c=ah(t),d=Ho(t)==="y",h=WC.has(a)?-1:1,m=s&&d?-1:1,g=qa(e,i);let{mainAxis:v,crossAxis:y,alignmentAxis:M}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return c&&typeof M=="number"&&(y=c==="end"?M*-1:M),d?{x:y*m,y:v*h}:{x:v*h,y:y*m}}const DO=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(e){var t,n;const{x:r,y:s,placement:a,middlewareData:c}=e,d=await LO(e,i);return a===((t=c.offset)==null?void 0:t.placement)&&(n=c.arrow)!=null&&n.alignmentOffset?{}:{x:r+d.x,y:s+d.y,data:{...d,placement:a}}}}},OO=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(e){const{x:t,y:n,placement:r}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:c={fn:w=>{let{x:S,y:A}=w;return{x:S,y:A}}},...d}=qa(i,e),h={x:t,y:n},m=await Wp(e,d),g=Ho(Ka(r)),v=NS(g);let y=h[v],M=h[g];if(s){const w=v==="y"?"top":"left",S=v==="y"?"bottom":"right",A=y+m[w],C=y-m[S];y=U_(A,y,C)}if(a){const w=g==="y"?"top":"left",S=g==="y"?"bottom":"right",A=M+m[w],C=M-m[S];M=U_(A,M,C)}const E=c.fn({...e,[v]:y,[g]:M});return{...E,data:{x:E.x-t,y:E.y-n,enabled:{[v]:s,[g]:a}}}}}},UO=function(i){return i===void 0&&(i={}),{options:i,fn(e){const{x:t,y:n,placement:r,rects:s,middlewareData:a}=e,{offset:c=0,mainAxis:d=!0,crossAxis:h=!0}=qa(i,e),m={x:t,y:n},g=Ho(r),v=NS(g);let y=m[v],M=m[g];const E=qa(c,e),w=typeof E=="number"?{mainAxis:E,crossAxis:0}:{mainAxis:0,crossAxis:0,...E};if(d){const C=v==="y"?"height":"width",R=s.reference[v]-s.floating[C]+w.mainAxis,O=s.reference[v]+s.reference[C]-w.mainAxis;y<R?y=R:y>O&&(y=O)}if(h){var S,A;const C=v==="y"?"width":"height",R=WC.has(Ka(r)),O=s.reference[g]-s.floating[C]+(R&&((S=a.offset)==null?void 0:S[g])||0)+(R?0:w.crossAxis),U=s.reference[g]+s.reference[C]+(R?0:((A=a.offset)==null?void 0:A[g])||0)-(R?w.crossAxis:0);M<O?M=O:M>U&&(M=U)}return{[v]:y,[g]:M}}}},kO=function(i){return i===void 0&&(i={}),{name:"size",options:i,async fn(e){var t,n;const{placement:r,rects:s,platform:a,elements:c}=e,{apply:d=()=>{},...h}=qa(i,e),m=await Wp(e,h),g=Ka(r),v=ah(r),y=Ho(r)==="y",{width:M,height:E}=s.floating;let w,S;g==="top"||g==="bottom"?(w=g,S=v===(await(a.isRTL==null?void 0:a.isRTL(c.floating))?"start":"end")?"left":"right"):(S=g,w=v==="end"?"top":"bottom");const A=E-m.top-m.bottom,C=M-m.left-m.right,R=ic(E-m[w],A),O=ic(M-m[S],C),U=!e.middlewareData.shift;let F=R,z=O;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(z=C),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(F=A),U&&!v){const L=hs(m.left,0),G=hs(m.right,0),J=hs(m.top,0),Q=hs(m.bottom,0);y?z=M-2*(L!==0||G!==0?L+G:hs(m.left,m.right)):F=E-2*(J!==0||Q!==0?J+Q:hs(m.top,m.bottom))}await d({...e,availableWidth:z,availableHeight:F});const k=await a.getDimensions(c.floating);return M!==k.width||E!==k.height?{reset:{rects:!0}}:{}}}};function Hy(){return typeof window<"u"}function lh(i){return jC(i)?(i.nodeName||"").toLowerCase():"#document"}function ps(i){var e;return(i==null||(e=i.ownerDocument)==null?void 0:e.defaultView)||window}function Zo(i){var e;return(e=(jC(i)?i.ownerDocument:i.document)||window.document)==null?void 0:e.documentElement}function jC(i){return Hy()?i instanceof Node||i instanceof ps(i).Node:!1}function po(i){return Hy()?i instanceof Element||i instanceof ps(i).Element:!1}function Ko(i){return Hy()?i instanceof HTMLElement||i instanceof ps(i).HTMLElement:!1}function fE(i){return!Hy()||typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof ps(i).ShadowRoot}const FO=new Set(["inline","contents"]);function gm(i){const{overflow:e,overflowX:t,overflowY:n,display:r}=mo(i);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!FO.has(r)}const zO=new Set(["table","td","th"]);function BO(i){return zO.has(lh(i))}const VO=[":popover-open",":modal"];function Gy(i){return VO.some(e=>{try{return i.matches(e)}catch{return!1}})}const HO=["transform","translate","scale","rotate","perspective"],GO=["transform","translate","scale","rotate","perspective","filter"],WO=["paint","layout","strict","content"];function OS(i){const e=US(),t=po(i)?mo(i):i;return HO.some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||GO.some(n=>(t.willChange||"").includes(n))||WO.some(n=>(t.contain||"").includes(n))}function jO(i){let e=rc(i);for(;Ko(e)&&!Zd(e);){if(OS(e))return e;if(Gy(e))return null;e=rc(e)}return null}function US(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const XO=new Set(["html","body","#document"]);function Zd(i){return XO.has(lh(i))}function mo(i){return ps(i).getComputedStyle(i)}function Wy(i){return po(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function rc(i){if(lh(i)==="html")return i;const e=i.assignedSlot||i.parentNode||fE(i)&&i.host||Zo(i);return fE(e)?e.host:e}function XC(i){const e=rc(i);return Zd(e)?i.ownerDocument?i.ownerDocument.body:i.body:Ko(e)&&gm(e)?e:XC(e)}function jp(i,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=XC(i),s=r===((n=i.ownerDocument)==null?void 0:n.body),a=ps(r);if(s){const c=F_(a);return e.concat(a,a.visualViewport||[],gm(r)?r:[],c&&t?jp(c):[])}return e.concat(r,jp(r,[],t))}function F_(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}function YC(i){const e=mo(i);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const r=Ko(i),s=r?i.offsetWidth:t,a=r?i.offsetHeight:n,c=Uv(t)!==s||Uv(n)!==a;return c&&(t=s,n=a),{width:t,height:n,$:c}}function kS(i){return po(i)?i:i.contextElement}function Bd(i){const e=kS(i);if(!Ko(e))return jo(1);const t=e.getBoundingClientRect(),{width:n,height:r,$:s}=YC(e);let a=(s?Uv(t.width):t.width)/n,c=(s?Uv(t.height):t.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!c||!Number.isFinite(c))&&(c=1),{x:a,y:c}}const YO=jo(0);function qC(i){const e=ps(i);return!US()||!e.visualViewport?YO:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function qO(i,e,t){return e===void 0&&(e=!1),!t||e&&t!==ps(i)?!1:e}function zu(i,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=i.getBoundingClientRect(),s=kS(i);let a=jo(1);e&&(n?po(n)&&(a=Bd(n)):a=Bd(i));const c=qO(s,t,n)?qC(s):jo(0);let d=(r.left+c.x)/a.x,h=(r.top+c.y)/a.y,m=r.width/a.x,g=r.height/a.y;if(s){const v=ps(s),y=n&&po(n)?ps(n):n;let M=v,E=F_(M);for(;E&&n&&y!==M;){const w=Bd(E),S=E.getBoundingClientRect(),A=mo(E),C=S.left+(E.clientLeft+parseFloat(A.paddingLeft))*w.x,R=S.top+(E.clientTop+parseFloat(A.paddingTop))*w.y;d*=w.x,h*=w.y,m*=w.x,g*=w.y,d+=C,h+=R,M=ps(E),E=F_(M)}}return Fv({width:m,height:g,x:d,y:h})}function jy(i,e){const t=Wy(i).scrollLeft;return e?e.left+t:zu(Zo(i)).left+t}function KC(i,e){const t=i.getBoundingClientRect(),n=t.left+e.scrollLeft-jy(i,t),r=t.top+e.scrollTop;return{x:n,y:r}}function KO(i){let{elements:e,rect:t,offsetParent:n,strategy:r}=i;const s=r==="fixed",a=Zo(n),c=e?Gy(e.floating):!1;if(n===a||c&&s)return t;let d={scrollLeft:0,scrollTop:0},h=jo(1);const m=jo(0),g=Ko(n);if((g||!g&&!s)&&((lh(n)!=="body"||gm(a))&&(d=Wy(n)),Ko(n))){const y=zu(n);h=Bd(n),m.x=y.x+n.clientLeft,m.y=y.y+n.clientTop}const v=a&&!g&&!s?KC(a,d):jo(0);return{width:t.width*h.x,height:t.height*h.y,x:t.x*h.x-d.scrollLeft*h.x+m.x+v.x,y:t.y*h.y-d.scrollTop*h.y+m.y+v.y}}function ZO(i){return Array.from(i.getClientRects())}function $O(i){const e=Zo(i),t=Wy(i),n=i.ownerDocument.body,r=hs(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=hs(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let a=-t.scrollLeft+jy(i);const c=-t.scrollTop;return mo(n).direction==="rtl"&&(a+=hs(e.clientWidth,n.clientWidth)-r),{width:r,height:s,x:a,y:c}}const dE=25;function QO(i,e){const t=ps(i),n=Zo(i),r=t.visualViewport;let s=n.clientWidth,a=n.clientHeight,c=0,d=0;if(r){s=r.width,a=r.height;const m=US();(!m||m&&e==="fixed")&&(c=r.offsetLeft,d=r.offsetTop)}const h=jy(n);if(h<=0){const m=n.ownerDocument,g=m.body,v=getComputedStyle(g),y=m.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,M=Math.abs(n.clientWidth-g.clientWidth-y);M<=dE&&(s-=M)}else h<=dE&&(s+=h);return{width:s,height:a,x:c,y:d}}const JO=new Set(["absolute","fixed"]);function eU(i,e){const t=zu(i,!0,e==="fixed"),n=t.top+i.clientTop,r=t.left+i.clientLeft,s=Ko(i)?Bd(i):jo(1),a=i.clientWidth*s.x,c=i.clientHeight*s.y,d=r*s.x,h=n*s.y;return{width:a,height:c,x:d,y:h}}function hE(i,e,t){let n;if(e==="viewport")n=QO(i,t);else if(e==="document")n=$O(Zo(i));else if(po(e))n=eU(e,t);else{const r=qC(i);n={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return Fv(n)}function ZC(i,e){const t=rc(i);return t===e||!po(t)||Zd(t)?!1:mo(t).position==="fixed"||ZC(t,e)}function tU(i,e){const t=e.get(i);if(t)return t;let n=jp(i,[],!1).filter(c=>po(c)&&lh(c)!=="body"),r=null;const s=mo(i).position==="fixed";let a=s?rc(i):i;for(;po(a)&&!Zd(a);){const c=mo(a),d=OS(a);!d&&c.position==="fixed"&&(r=null),(s?!d&&!r:!d&&c.position==="static"&&!!r&&JO.has(r.position)||gm(a)&&!d&&ZC(i,a))?n=n.filter(m=>m!==a):r=c,a=rc(a)}return e.set(i,n),n}function nU(i){let{element:e,boundary:t,rootBoundary:n,strategy:r}=i;const a=[...t==="clippingAncestors"?Gy(e)?[]:tU(e,this._c):[].concat(t),n],c=a[0],d=a.reduce((h,m)=>{const g=hE(e,m,r);return h.top=hs(g.top,h.top),h.right=ic(g.right,h.right),h.bottom=ic(g.bottom,h.bottom),h.left=hs(g.left,h.left),h},hE(e,c,r));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function iU(i){const{width:e,height:t}=YC(i);return{width:e,height:t}}function rU(i,e,t){const n=Ko(e),r=Zo(e),s=t==="fixed",a=zu(i,!0,s,e);let c={scrollLeft:0,scrollTop:0};const d=jo(0);function h(){d.x=jy(r)}if(n||!n&&!s)if((lh(e)!=="body"||gm(r))&&(c=Wy(e)),n){const y=zu(e,!0,s,e);d.x=y.x+e.clientLeft,d.y=y.y+e.clientTop}else r&&h();s&&!n&&r&&h();const m=r&&!n&&!s?KC(r,c):jo(0),g=a.left+c.scrollLeft-d.x-m.x,v=a.top+c.scrollTop-d.y-m.y;return{x:g,y:v,width:a.width,height:a.height}}function xx(i){return mo(i).position==="static"}function pE(i,e){if(!Ko(i)||mo(i).position==="fixed")return null;if(e)return e(i);let t=i.offsetParent;return Zo(i)===t&&(t=t.ownerDocument.body),t}function $C(i,e){const t=ps(i);if(Gy(i))return t;if(!Ko(i)){let r=rc(i);for(;r&&!Zd(r);){if(po(r)&&!xx(r))return r;r=rc(r)}return t}let n=pE(i,e);for(;n&&BO(n)&&xx(n);)n=pE(n,e);return n&&Zd(n)&&xx(n)&&!OS(n)?t:n||jO(i)||t}const sU=async function(i){const e=this.getOffsetParent||$C,t=this.getDimensions,n=await t(i.floating);return{reference:rU(i.reference,await e(i.floating),i.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function oU(i){return mo(i).direction==="rtl"}const aU={convertOffsetParentRelativeRectToViewportRelativeRect:KO,getDocumentElement:Zo,getClippingRect:nU,getOffsetParent:$C,getElementRects:sU,getClientRects:ZO,getDimensions:iU,getScale:Bd,isElement:po,isRTL:oU};function QC(i,e){return i.x===e.x&&i.y===e.y&&i.width===e.width&&i.height===e.height}function lU(i,e){let t=null,n;const r=Zo(i);function s(){var c;clearTimeout(n),(c=t)==null||c.disconnect(),t=null}function a(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),s();const h=i.getBoundingClientRect(),{left:m,top:g,width:v,height:y}=h;if(c||e(),!v||!y)return;const M=Pg(g),E=Pg(r.clientWidth-(m+v)),w=Pg(r.clientHeight-(g+y)),S=Pg(m),C={rootMargin:-M+"px "+-E+"px "+-w+"px "+-S+"px",threshold:hs(0,ic(1,d))||1};let R=!0;function O(U){const F=U[0].intersectionRatio;if(F!==d){if(!R)return a();F?a(!1,F):n=setTimeout(()=>{a(!1,1e-7)},1e3)}F===1&&!QC(h,i.getBoundingClientRect())&&a(),R=!1}try{t=new IntersectionObserver(O,{...C,root:r.ownerDocument})}catch{t=new IntersectionObserver(O,C)}t.observe(i)}return a(!0),s}function cU(i,e,t,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=n,h=kS(i),m=r||s?[...h?jp(h):[],...jp(e)]:[];m.forEach(S=>{r&&S.addEventListener("scroll",t,{passive:!0}),s&&S.addEventListener("resize",t)});const g=h&&c?lU(h,t):null;let v=-1,y=null;a&&(y=new ResizeObserver(S=>{let[A]=S;A&&A.target===h&&y&&(y.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var C;(C=y)==null||C.observe(e)})),t()}),h&&!d&&y.observe(h),y.observe(e));let M,E=d?zu(i):null;d&&w();function w(){const S=zu(i);E&&!QC(E,S)&&t(),E=S,M=requestAnimationFrame(w)}return t(),()=>{var S;m.forEach(A=>{r&&A.removeEventListener("scroll",t),s&&A.removeEventListener("resize",t)}),g==null||g(),(S=y)==null||S.disconnect(),y=null,d&&cancelAnimationFrame(M)}}const uU=DO,fU=OO,dU=IO,hU=kO,pU=NO,mE=PO,mU=UO,gU=(i,e,t)=>{const n=new Map,r={platform:aU,...t},s={...r.platform,_c:n};return RO(i,e,{...r,platform:s})};var vU=typeof document<"u",yU=function(){},Cv=vU?N.useLayoutEffect:yU;function zv(i,e){if(i===e)return!0;if(typeof i!=typeof e)return!1;if(typeof i=="function"&&i.toString()===e.toString())return!0;let t,n,r;if(i&&e&&typeof i=="object"){if(Array.isArray(i)){if(t=i.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!zv(i[n],e[n]))return!1;return!0}if(r=Object.keys(i),t=r.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,r[n]))return!1;for(n=t;n--!==0;){const s=r[n];if(!(s==="_owner"&&i.$$typeof)&&!zv(i[s],e[s]))return!1}return!0}return i!==i&&e!==e}function JC(i){return typeof window>"u"?1:(i.ownerDocument.defaultView||window).devicePixelRatio||1}function gE(i,e){const t=JC(i);return Math.round(e*t)/t}function _x(i){const e=N.useRef(i);return Cv(()=>{e.current=i}),e}function xU(i){i===void 0&&(i={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:r,elements:{reference:s,floating:a}={},transform:c=!0,whileElementsMounted:d,open:h}=i,[m,g]=N.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[v,y]=N.useState(n);zv(v,n)||y(n);const[M,E]=N.useState(null),[w,S]=N.useState(null),A=N.useCallback(B=>{B!==U.current&&(U.current=B,E(B))},[]),C=N.useCallback(B=>{B!==F.current&&(F.current=B,S(B))},[]),R=s||M,O=a||w,U=N.useRef(null),F=N.useRef(null),z=N.useRef(m),k=d!=null,L=_x(d),G=_x(r),J=_x(h),Q=N.useCallback(()=>{if(!U.current||!F.current)return;const B={placement:e,strategy:t,middleware:v};G.current&&(B.platform=G.current),gU(U.current,F.current,B).then(ie=>{const te={...ie,isPositioned:J.current!==!1};ce.current&&!zv(z.current,te)&&(z.current=te,hm.flushSync(()=>{g(te)}))})},[v,e,t,G,J]);Cv(()=>{h===!1&&z.current.isPositioned&&(z.current.isPositioned=!1,g(B=>({...B,isPositioned:!1})))},[h]);const ce=N.useRef(!1);Cv(()=>(ce.current=!0,()=>{ce.current=!1}),[]),Cv(()=>{if(R&&(U.current=R),O&&(F.current=O),R&&O){if(L.current)return L.current(R,O,Q);Q()}},[R,O,Q,L,k]);const ge=N.useMemo(()=>({reference:U,floating:F,setReference:A,setFloating:C}),[A,C]),ne=N.useMemo(()=>({reference:R,floating:O}),[R,O]),de=N.useMemo(()=>{const B={position:t,left:0,top:0};if(!ne.floating)return B;const ie=gE(ne.floating,m.x),te=gE(ne.floating,m.y);return c?{...B,transform:"translate("+ie+"px, "+te+"px)",...JC(ne.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ie,top:te}},[t,c,ne.floating,m.x,m.y]);return N.useMemo(()=>({...m,update:Q,refs:ge,elements:ne,floatingStyles:de}),[m,Q,ge,ne,de])}const _U=i=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:i,fn(t){const{element:n,padding:r}=typeof i=="function"?i(t):i;return n&&e(n)?n.current!=null?mE({element:n.current,padding:r}).fn(t):{}:n?mE({element:n,padding:r}).fn(t):{}}}},SU=(i,e)=>({...uU(i),options:[i,e]}),wU=(i,e)=>({...fU(i),options:[i,e]}),MU=(i,e)=>({...mU(i),options:[i,e]}),EU=(i,e)=>({...dU(i),options:[i,e]}),TU=(i,e)=>({...hU(i),options:[i,e]}),bU=(i,e)=>({...pU(i),options:[i,e]}),CU=(i,e)=>({..._U(i),options:[i,e]});var AU="Arrow",eA=N.forwardRef((i,e)=>{const{children:t,width:n=10,height:r=5,...s}=i;return H.jsx(dn.svg,{...s,ref:e,width:n,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:i.asChild?t:H.jsx("polygon",{points:"0,0 30,0 15,10"})})});eA.displayName=AU;var RU=eA,FS="Popper",[tA,nA]=ac(FS),[PU,iA]=tA(FS),rA=i=>{const{__scopePopper:e,children:t}=i,[n,r]=N.useState(null);return H.jsx(PU,{scope:e,anchor:n,onAnchorChange:r,children:t})};rA.displayName=FS;var sA="PopperAnchor",oA=N.forwardRef((i,e)=>{const{__scopePopper:t,virtualRef:n,...r}=i,s=iA(sA,t),a=N.useRef(null),c=An(e,a),d=N.useRef(null);return N.useEffect(()=>{const h=d.current;d.current=(n==null?void 0:n.current)||a.current,h!==d.current&&s.onAnchorChange(d.current)}),n?null:H.jsx(dn.div,{...r,ref:c})});oA.displayName=sA;var zS="PopperContent",[IU,NU]=tA(zS),aA=N.forwardRef((i,e)=>{var he,Fe,Xe,Ge,Qe,Se;const{__scopePopper:t,side:n="bottom",sideOffset:r=0,align:s="center",alignOffset:a=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:m=0,sticky:g="partial",hideWhenDetached:v=!1,updatePositionStrategy:y="optimized",onPlaced:M,...E}=i,w=iA(zS,t),[S,A]=N.useState(null),C=An(e,Le=>A(Le)),[R,O]=N.useState(null),U=PS(R),F=(U==null?void 0:U.width)??0,z=(U==null?void 0:U.height)??0,k=n+(s!=="center"?"-"+s:""),L=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},G=Array.isArray(h)?h:[h],J=G.length>0,Q={padding:L,boundary:G.filter(DU),altBoundary:J},{refs:ce,floatingStyles:ge,placement:ne,isPositioned:de,middlewareData:B}=xU({strategy:"fixed",placement:k,whileElementsMounted:(...Le)=>cU(...Le,{animationFrame:y==="always"}),elements:{reference:w.anchor},middleware:[SU({mainAxis:r+z,alignmentAxis:a}),d&&wU({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?MU():void 0,...Q}),d&&EU({...Q}),TU({...Q,apply:({elements:Le,rects:K,availableWidth:ht,availableHeight:Be})=>{const{width:nt,height:Ke}=K.reference,bt=Le.floating.style;bt.setProperty("--radix-popper-available-width",`${ht}px`),bt.setProperty("--radix-popper-available-height",`${Be}px`),bt.setProperty("--radix-popper-anchor-width",`${nt}px`),bt.setProperty("--radix-popper-anchor-height",`${Ke}px`)}}),R&&CU({element:R,padding:c}),OU({arrowWidth:F,arrowHeight:z}),v&&bU({strategy:"referenceHidden",...Q})]}),[ie,te]=uA(ne),X=nc(M);pr(()=>{de&&(X==null||X())},[de,X]);const fe=(he=B.arrow)==null?void 0:he.x,Pe=(Fe=B.arrow)==null?void 0:Fe.y,le=((Xe=B.arrow)==null?void 0:Xe.centerOffset)!==0,[Ee,Ue]=N.useState();return pr(()=>{S&&Ue(window.getComputedStyle(S).zIndex)},[S]),H.jsx("div",{ref:ce.setFloating,"data-radix-popper-content-wrapper":"",style:{...ge,transform:de?ge.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ee,"--radix-popper-transform-origin":[(Ge=B.transformOrigin)==null?void 0:Ge.x,(Qe=B.transformOrigin)==null?void 0:Qe.y].join(" "),...((Se=B.hide)==null?void 0:Se.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:i.dir,children:H.jsx(IU,{scope:t,placedSide:ie,onArrowChange:O,arrowX:fe,arrowY:Pe,shouldHideArrow:le,children:H.jsx(dn.div,{"data-side":ie,"data-align":te,...E,ref:C,style:{...E.style,animation:de?void 0:"none"}})})})});aA.displayName=zS;var lA="PopperArrow",LU={top:"bottom",right:"left",bottom:"top",left:"right"},cA=N.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,s=NU(lA,n),a=LU[s.placedSide];return H.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:H.jsx(RU,{...r,ref:t,style:{...r.style,display:"block"}})})});cA.displayName=lA;function DU(i){return i!==null}var OU=i=>({name:"transformOrigin",options:i,fn(e){var w,S,A;const{placement:t,rects:n,middlewareData:r}=e,a=((w=r.arrow)==null?void 0:w.centerOffset)!==0,c=a?0:i.arrowWidth,d=a?0:i.arrowHeight,[h,m]=uA(t),g={start:"0%",center:"50%",end:"100%"}[m],v=(((S=r.arrow)==null?void 0:S.x)??0)+c/2,y=(((A=r.arrow)==null?void 0:A.y)??0)+d/2;let M="",E="";return h==="bottom"?(M=a?g:`${v}px`,E=`${-d}px`):h==="top"?(M=a?g:`${v}px`,E=`${n.floating.height+d}px`):h==="right"?(M=`${-d}px`,E=a?g:`${y}px`):h==="left"&&(M=`${n.floating.width+d}px`,E=a?g:`${y}px`),{data:{x:M,y:E}}}});function uA(i){const[e,t="center"]=i.split("-");return[e,t]}var UU=rA,kU=oA,FU=aA,zU=cA;function BU(i){const e=VU(i),t=N.forwardRef((n,r)=>{const{children:s,...a}=n,c=N.Children.toArray(s),d=c.find(GU);if(d){const h=d.props.children,m=c.map(g=>g===d?N.Children.count(h)>1?N.Children.only(null):N.isValidElement(h)?h.props.children:null:g);return H.jsx(e,{...a,ref:r,children:N.isValidElement(h)?N.cloneElement(h,void 0,m):null})}return H.jsx(e,{...a,ref:r,children:s})});return t.displayName=`${i}.Slot`,t}function VU(i){const e=N.forwardRef((t,n)=>{const{children:r,...s}=t;if(N.isValidElement(r)){const a=jU(r),c=WU(s,r.props);return r.type!==N.Fragment&&(c.ref=n?ih(n,a):a),N.cloneElement(r,c)}return N.Children.count(r)>1?N.Children.only(null):null});return e.displayName=`${i}.SlotClone`,e}var HU=Symbol("radix.slottable");function GU(i){return N.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===HU}function WU(i,e){const t={...e};for(const n in e){const r=i[n],s=e[n];/^on[A-Z]/.test(n)?r&&s?t[n]=(...c)=>{const d=s(...c);return r(...c),d}:r&&(t[n]=r):n==="style"?t[n]={...r,...s}:n==="className"&&(t[n]=[r,s].filter(Boolean).join(" "))}return{...i,...t}}function jU(i){var n,r;let e=(n=Object.getOwnPropertyDescriptor(i.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=(r=Object.getOwnPropertyDescriptor(i,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}var fA=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),XU="VisuallyHidden",YU=N.forwardRef((i,e)=>H.jsx(dn.span,{...i,ref:e,style:{...fA,...i.style}}));YU.displayName=XU;var qU=[" ","Enter","ArrowUp","ArrowDown"],KU=[" ","Enter"],Bu="Select",[Xy,Yy,ZU]=CS(Bu),[ch]=ac(Bu,[ZU,nA]),qy=nA(),[$U,lc]=ch(Bu),[QU,JU]=ch(Bu),dA=i=>{const{__scopeSelect:e,children:t,open:n,defaultOpen:r,onOpenChange:s,value:a,defaultValue:c,onValueChange:d,dir:h,name:m,autoComplete:g,disabled:v,required:y,form:M}=i,E=qy(e),[w,S]=N.useState(null),[A,C]=N.useState(null),[R,O]=N.useState(!1),U=Fy(h),[F,z]=ku({prop:n,defaultProp:r??!1,onChange:s,caller:Bu}),[k,L]=ku({prop:a,defaultProp:c,onChange:d,caller:Bu}),G=N.useRef(null),J=w?M||!!w.closest("form"):!0,[Q,ce]=N.useState(new Set),ge=Array.from(Q).map(ne=>ne.props.value).join(";");return H.jsx(UU,{...E,children:H.jsxs($U,{required:y,scope:e,trigger:w,onTriggerChange:S,valueNode:A,onValueNodeChange:C,valueNodeHasChildren:R,onValueNodeHasChildrenChange:O,contentId:ec(),value:k,onValueChange:L,open:F,onOpenChange:z,dir:U,triggerPointerDownPosRef:G,disabled:v,children:[H.jsx(Xy.Provider,{scope:e,children:H.jsx(QU,{scope:i.__scopeSelect,onNativeOptionAdd:N.useCallback(ne=>{ce(de=>new Set(de).add(ne))},[]),onNativeOptionRemove:N.useCallback(ne=>{ce(de=>{const B=new Set(de);return B.delete(ne),B})},[]),children:t})}),J?H.jsxs(UA,{"aria-hidden":!0,required:y,tabIndex:-1,name:m,autoComplete:g,value:k,onChange:ne=>L(ne.target.value),disabled:v,form:M,children:[k===void 0?H.jsx("option",{value:""}):null,Array.from(Q)]},ge):null]})})};dA.displayName=Bu;var hA="SelectTrigger",pA=N.forwardRef((i,e)=>{const{__scopeSelect:t,disabled:n=!1,...r}=i,s=qy(t),a=lc(hA,t),c=a.disabled||n,d=An(e,a.onTriggerChange),h=Yy(t),m=N.useRef("touch"),[g,v,y]=FA(E=>{const w=h().filter(C=>!C.disabled),S=w.find(C=>C.value===a.value),A=zA(w,E,S);A!==void 0&&a.onValueChange(A.value)}),M=E=>{c||(a.onOpenChange(!0),y()),E&&(a.triggerPointerDownPosRef.current={x:Math.round(E.pageX),y:Math.round(E.pageY)})};return H.jsx(kU,{asChild:!0,...s,children:H.jsx(dn.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":kA(a.value)?"":void 0,...r,ref:d,onClick:cn(r.onClick,E=>{E.currentTarget.focus(),m.current!=="mouse"&&M(E)}),onPointerDown:cn(r.onPointerDown,E=>{m.current=E.pointerType;const w=E.target;w.hasPointerCapture(E.pointerId)&&w.releasePointerCapture(E.pointerId),E.button===0&&E.ctrlKey===!1&&E.pointerType==="mouse"&&(M(E),E.preventDefault())}),onKeyDown:cn(r.onKeyDown,E=>{const w=g.current!=="";!(E.ctrlKey||E.altKey||E.metaKey)&&E.key.length===1&&v(E.key),!(w&&E.key===" ")&&qU.includes(E.key)&&(M(),E.preventDefault())})})})});pA.displayName=hA;var mA="SelectValue",gA=N.forwardRef((i,e)=>{const{__scopeSelect:t,className:n,style:r,children:s,placeholder:a="",...c}=i,d=lc(mA,t),{onValueNodeHasChildrenChange:h}=d,m=s!==void 0,g=An(e,d.onValueNodeChange);return pr(()=>{h(m)},[h,m]),H.jsx(dn.span,{...c,ref:g,style:{pointerEvents:"none"},children:kA(d.value)?H.jsx(H.Fragment,{children:a}):s})});gA.displayName=mA;var ek="SelectIcon",vA=N.forwardRef((i,e)=>{const{__scopeSelect:t,children:n,...r}=i;return H.jsx(dn.span,{"aria-hidden":!0,...r,ref:e,children:n||""})});vA.displayName=ek;var tk="SelectPortal",yA=i=>H.jsx(wS,{asChild:!0,...i});yA.displayName=tk;var Vu="SelectContent",xA=N.forwardRef((i,e)=>{const t=lc(Vu,i.__scopeSelect),[n,r]=N.useState();if(pr(()=>{r(new DocumentFragment)},[]),!t.open){const s=n;return s?hm.createPortal(H.jsx(_A,{scope:i.__scopeSelect,children:H.jsx(Xy.Slot,{scope:i.__scopeSelect,children:H.jsx("div",{children:i.children})})}),s):null}return H.jsx(SA,{...i,ref:e})});xA.displayName=Vu;var ao=10,[_A,cc]=ch(Vu),nk="SelectContentImpl",ik=BU("SelectContent.RemoveScroll"),SA=N.forwardRef((i,e)=>{const{__scopeSelect:t,position:n="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:a,side:c,sideOffset:d,align:h,alignOffset:m,arrowPadding:g,collisionBoundary:v,collisionPadding:y,sticky:M,hideWhenDetached:E,avoidCollisions:w,...S}=i,A=lc(Vu,t),[C,R]=N.useState(null),[O,U]=N.useState(null),F=An(e,he=>R(he)),[z,k]=N.useState(null),[L,G]=N.useState(null),J=Yy(t),[Q,ce]=N.useState(!1),ge=N.useRef(!1);N.useEffect(()=>{if(C)return Cb(C)},[C]),yb();const ne=N.useCallback(he=>{const[Fe,...Xe]=J().map(Se=>Se.ref.current),[Ge]=Xe.slice(-1),Qe=document.activeElement;for(const Se of he)if(Se===Qe||(Se==null||Se.scrollIntoView({block:"nearest"}),Se===Fe&&O&&(O.scrollTop=0),Se===Ge&&O&&(O.scrollTop=O.scrollHeight),Se==null||Se.focus(),document.activeElement!==Qe))return},[J,O]),de=N.useCallback(()=>ne([z,C]),[ne,z,C]);N.useEffect(()=>{Q&&de()},[Q,de]);const{onOpenChange:B,triggerPointerDownPosRef:ie}=A;N.useEffect(()=>{if(C){let he={x:0,y:0};const Fe=Ge=>{var Qe,Se;he={x:Math.abs(Math.round(Ge.pageX)-(((Qe=ie.current)==null?void 0:Qe.x)??0)),y:Math.abs(Math.round(Ge.pageY)-(((Se=ie.current)==null?void 0:Se.y)??0))}},Xe=Ge=>{he.x<=10&&he.y<=10?Ge.preventDefault():C.contains(Ge.target)||B(!1),document.removeEventListener("pointermove",Fe),ie.current=null};return ie.current!==null&&(document.addEventListener("pointermove",Fe),document.addEventListener("pointerup",Xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Fe),document.removeEventListener("pointerup",Xe,{capture:!0})}}},[C,B,ie]),N.useEffect(()=>{const he=()=>B(!1);return window.addEventListener("blur",he),window.addEventListener("resize",he),()=>{window.removeEventListener("blur",he),window.removeEventListener("resize",he)}},[B]);const[te,X]=FA(he=>{const Fe=J().filter(Qe=>!Qe.disabled),Xe=Fe.find(Qe=>Qe.ref.current===document.activeElement),Ge=zA(Fe,he,Xe);Ge&&setTimeout(()=>Ge.ref.current.focus())}),fe=N.useCallback((he,Fe,Xe)=>{const Ge=!ge.current&&!Xe;(A.value!==void 0&&A.value===Fe||Ge)&&(k(he),Ge&&(ge.current=!0))},[A.value]),Pe=N.useCallback(()=>C==null?void 0:C.focus(),[C]),le=N.useCallback((he,Fe,Xe)=>{const Ge=!ge.current&&!Xe;(A.value!==void 0&&A.value===Fe||Ge)&&G(he)},[A.value]),Ee=n==="popper"?z_:wA,Ue=Ee===z_?{side:c,sideOffset:d,align:h,alignOffset:m,arrowPadding:g,collisionBoundary:v,collisionPadding:y,sticky:M,hideWhenDetached:E,avoidCollisions:w}:{};return H.jsx(_A,{scope:t,content:C,viewport:O,onViewportChange:U,itemRefCallback:fe,selectedItem:z,onItemLeave:Pe,itemTextRefCallback:le,focusSelectedItem:de,selectedItemText:L,position:n,isPositioned:Q,searchRef:te,children:H.jsx(MS,{as:ik,allowPinchZoom:!0,children:H.jsx(SS,{asChild:!0,trapped:A.open,onMountAutoFocus:he=>{he.preventDefault()},onUnmountAutoFocus:cn(r,he=>{var Fe;(Fe=A.trigger)==null||Fe.focus({preventScroll:!0}),he.preventDefault()}),children:H.jsx(_S,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:he=>he.preventDefault(),onDismiss:()=>A.onOpenChange(!1),children:H.jsx(Ee,{role:"listbox",id:A.contentId,"data-state":A.open?"open":"closed",dir:A.dir,onContextMenu:he=>he.preventDefault(),...S,...Ue,onPlaced:()=>ce(!0),ref:F,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:cn(S.onKeyDown,he=>{const Fe=he.ctrlKey||he.altKey||he.metaKey;if(he.key==="Tab"&&he.preventDefault(),!Fe&&he.key.length===1&&X(he.key),["ArrowUp","ArrowDown","Home","End"].includes(he.key)){let Ge=J().filter(Qe=>!Qe.disabled).map(Qe=>Qe.ref.current);if(["ArrowUp","End"].includes(he.key)&&(Ge=Ge.slice().reverse()),["ArrowUp","ArrowDown"].includes(he.key)){const Qe=he.target,Se=Ge.indexOf(Qe);Ge=Ge.slice(Se+1)}setTimeout(()=>ne(Ge)),he.preventDefault()}})})})})})})});SA.displayName=nk;var rk="SelectItemAlignedPosition",wA=N.forwardRef((i,e)=>{const{__scopeSelect:t,onPlaced:n,...r}=i,s=lc(Vu,t),a=cc(Vu,t),[c,d]=N.useState(null),[h,m]=N.useState(null),g=An(e,F=>m(F)),v=Yy(t),y=N.useRef(!1),M=N.useRef(!0),{viewport:E,selectedItem:w,selectedItemText:S,focusSelectedItem:A}=a,C=N.useCallback(()=>{if(s.trigger&&s.valueNode&&c&&h&&E&&w&&S){const F=s.trigger.getBoundingClientRect(),z=h.getBoundingClientRect(),k=s.valueNode.getBoundingClientRect(),L=S.getBoundingClientRect();if(s.dir!=="rtl"){const Qe=L.left-z.left,Se=k.left-Qe,Le=F.left-Se,K=F.width+Le,ht=Math.max(K,z.width),Be=window.innerWidth-ao,nt=Ov(Se,[ao,Math.max(ao,Be-ht)]);c.style.minWidth=K+"px",c.style.left=nt+"px"}else{const Qe=z.right-L.right,Se=window.innerWidth-k.right-Qe,Le=window.innerWidth-F.right-Se,K=F.width+Le,ht=Math.max(K,z.width),Be=window.innerWidth-ao,nt=Ov(Se,[ao,Math.max(ao,Be-ht)]);c.style.minWidth=K+"px",c.style.right=nt+"px"}const G=v(),J=window.innerHeight-ao*2,Q=E.scrollHeight,ce=window.getComputedStyle(h),ge=parseInt(ce.borderTopWidth,10),ne=parseInt(ce.paddingTop,10),de=parseInt(ce.borderBottomWidth,10),B=parseInt(ce.paddingBottom,10),ie=ge+ne+Q+B+de,te=Math.min(w.offsetHeight*5,ie),X=window.getComputedStyle(E),fe=parseInt(X.paddingTop,10),Pe=parseInt(X.paddingBottom,10),le=F.top+F.height/2-ao,Ee=J-le,Ue=w.offsetHeight/2,he=w.offsetTop+Ue,Fe=ge+ne+he,Xe=ie-Fe;if(Fe<=le){const Qe=G.length>0&&w===G[G.length-1].ref.current;c.style.bottom="0px";const Se=h.clientHeight-E.offsetTop-E.offsetHeight,Le=Math.max(Ee,Ue+(Qe?Pe:0)+Se+de),K=Fe+Le;c.style.height=K+"px"}else{const Qe=G.length>0&&w===G[0].ref.current;c.style.top="0px";const Le=Math.max(le,ge+E.offsetTop+(Qe?fe:0)+Ue)+Xe;c.style.height=Le+"px",E.scrollTop=Fe-le+E.offsetTop}c.style.margin=`${ao}px 0`,c.style.minHeight=te+"px",c.style.maxHeight=J+"px",n==null||n(),requestAnimationFrame(()=>y.current=!0)}},[v,s.trigger,s.valueNode,c,h,E,w,S,s.dir,n]);pr(()=>C(),[C]);const[R,O]=N.useState();pr(()=>{h&&O(window.getComputedStyle(h).zIndex)},[h]);const U=N.useCallback(F=>{F&&M.current===!0&&(C(),A==null||A(),M.current=!1)},[C,A]);return H.jsx(ok,{scope:t,contentWrapper:c,shouldExpandOnScrollRef:y,onScrollButtonChange:U,children:H.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:H.jsx(dn.div,{...r,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});wA.displayName=rk;var sk="SelectPopperPosition",z_=N.forwardRef((i,e)=>{const{__scopeSelect:t,align:n="start",collisionPadding:r=ao,...s}=i,a=qy(t);return H.jsx(FU,{...a,...s,ref:e,align:n,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});z_.displayName=sk;var[ok,BS]=ch(Vu,{}),B_="SelectViewport",MA=N.forwardRef((i,e)=>{const{__scopeSelect:t,nonce:n,...r}=i,s=cc(B_,t),a=BS(B_,t),c=An(e,s.onViewportChange),d=N.useRef(0);return H.jsxs(H.Fragment,{children:[H.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),H.jsx(Xy.Slot,{scope:t,children:H.jsx(dn.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:cn(r.onScroll,h=>{const m=h.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:v}=a;if(v!=null&&v.current&&g){const y=Math.abs(d.current-m.scrollTop);if(y>0){const M=window.innerHeight-ao*2,E=parseFloat(g.style.minHeight),w=parseFloat(g.style.height),S=Math.max(E,w);if(S<M){const A=S+y,C=Math.min(M,A),R=A-C;g.style.height=C+"px",g.style.bottom==="0px"&&(m.scrollTop=R>0?R:0,g.style.justifyContent="flex-end")}}}d.current=m.scrollTop})})})]})});MA.displayName=B_;var EA="SelectGroup",[ak,lk]=ch(EA),ck=N.forwardRef((i,e)=>{const{__scopeSelect:t,...n}=i,r=ec();return H.jsx(ak,{scope:t,id:r,children:H.jsx(dn.div,{role:"group","aria-labelledby":r,...n,ref:e})})});ck.displayName=EA;var TA="SelectLabel",bA=N.forwardRef((i,e)=>{const{__scopeSelect:t,...n}=i,r=lk(TA,t);return H.jsx(dn.div,{id:r.id,...n,ref:e})});bA.displayName=TA;var Bv="SelectItem",[uk,CA]=ch(Bv),AA=N.forwardRef((i,e)=>{const{__scopeSelect:t,value:n,disabled:r=!1,textValue:s,...a}=i,c=lc(Bv,t),d=cc(Bv,t),h=c.value===n,[m,g]=N.useState(s??""),[v,y]=N.useState(!1),M=An(e,A=>{var C;return(C=d.itemRefCallback)==null?void 0:C.call(d,A,n,r)}),E=ec(),w=N.useRef("touch"),S=()=>{r||(c.onValueChange(n),c.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return H.jsx(uk,{scope:t,value:n,disabled:r,textId:E,isSelected:h,onItemTextChange:N.useCallback(A=>{g(C=>C||((A==null?void 0:A.textContent)??"").trim())},[]),children:H.jsx(Xy.ItemSlot,{scope:t,value:n,disabled:r,textValue:m,children:H.jsx(dn.div,{role:"option","aria-labelledby":E,"data-highlighted":v?"":void 0,"aria-selected":h&&v,"data-state":h?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...a,ref:M,onFocus:cn(a.onFocus,()=>y(!0)),onBlur:cn(a.onBlur,()=>y(!1)),onClick:cn(a.onClick,()=>{w.current!=="mouse"&&S()}),onPointerUp:cn(a.onPointerUp,()=>{w.current==="mouse"&&S()}),onPointerDown:cn(a.onPointerDown,A=>{w.current=A.pointerType}),onPointerMove:cn(a.onPointerMove,A=>{var C;w.current=A.pointerType,r?(C=d.onItemLeave)==null||C.call(d):w.current==="mouse"&&A.currentTarget.focus({preventScroll:!0})}),onPointerLeave:cn(a.onPointerLeave,A=>{var C;A.currentTarget===document.activeElement&&((C=d.onItemLeave)==null||C.call(d))}),onKeyDown:cn(a.onKeyDown,A=>{var R;((R=d.searchRef)==null?void 0:R.current)!==""&&A.key===" "||(KU.includes(A.key)&&S(),A.key===" "&&A.preventDefault())})})})})});AA.displayName=Bv;var Cp="SelectItemText",RA=N.forwardRef((i,e)=>{const{__scopeSelect:t,className:n,style:r,...s}=i,a=lc(Cp,t),c=cc(Cp,t),d=CA(Cp,t),h=JU(Cp,t),[m,g]=N.useState(null),v=An(e,S=>g(S),d.onItemTextChange,S=>{var A;return(A=c.itemTextRefCallback)==null?void 0:A.call(c,S,d.value,d.disabled)}),y=m==null?void 0:m.textContent,M=N.useMemo(()=>H.jsx("option",{value:d.value,disabled:d.disabled,children:y},d.value),[d.disabled,d.value,y]),{onNativeOptionAdd:E,onNativeOptionRemove:w}=h;return pr(()=>(E(M),()=>w(M)),[E,w,M]),H.jsxs(H.Fragment,{children:[H.jsx(dn.span,{id:d.textId,...s,ref:v}),d.isSelected&&a.valueNode&&!a.valueNodeHasChildren?hm.createPortal(s.children,a.valueNode):null]})});RA.displayName=Cp;var PA="SelectItemIndicator",IA=N.forwardRef((i,e)=>{const{__scopeSelect:t,...n}=i;return CA(PA,t).isSelected?H.jsx(dn.span,{"aria-hidden":!0,...n,ref:e}):null});IA.displayName=PA;var V_="SelectScrollUpButton",NA=N.forwardRef((i,e)=>{const t=cc(V_,i.__scopeSelect),n=BS(V_,i.__scopeSelect),[r,s]=N.useState(!1),a=An(e,n.onScrollButtonChange);return pr(()=>{if(t.viewport&&t.isPositioned){let c=function(){const h=d.scrollTop>0;s(h)};const d=t.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),r?H.jsx(DA,{...i,ref:a,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=t;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});NA.displayName=V_;var H_="SelectScrollDownButton",LA=N.forwardRef((i,e)=>{const t=cc(H_,i.__scopeSelect),n=BS(H_,i.__scopeSelect),[r,s]=N.useState(!1),a=An(e,n.onScrollButtonChange);return pr(()=>{if(t.viewport&&t.isPositioned){let c=function(){const h=d.scrollHeight-d.clientHeight,m=Math.ceil(d.scrollTop)<h;s(m)};const d=t.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),r?H.jsx(DA,{...i,ref:a,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=t;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});LA.displayName=H_;var DA=N.forwardRef((i,e)=>{const{__scopeSelect:t,onAutoScroll:n,...r}=i,s=cc("SelectScrollButton",t),a=N.useRef(null),c=Yy(t),d=N.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return N.useEffect(()=>()=>d(),[d]),pr(()=>{var m;const h=c().find(g=>g.ref.current===document.activeElement);(m=h==null?void 0:h.ref.current)==null||m.scrollIntoView({block:"nearest"})},[c]),H.jsx(dn.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:cn(r.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:cn(r.onPointerMove,()=>{var h;(h=s.onItemLeave)==null||h.call(s),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:cn(r.onPointerLeave,()=>{d()})})}),fk="SelectSeparator",OA=N.forwardRef((i,e)=>{const{__scopeSelect:t,...n}=i;return H.jsx(dn.div,{"aria-hidden":!0,...n,ref:e})});OA.displayName=fk;var G_="SelectArrow",dk=N.forwardRef((i,e)=>{const{__scopeSelect:t,...n}=i,r=qy(t),s=lc(G_,t),a=cc(G_,t);return s.open&&a.position==="popper"?H.jsx(zU,{...r,...n,ref:e}):null});dk.displayName=G_;var hk="SelectBubbleInput",UA=N.forwardRef(({__scopeSelect:i,value:e,...t},n)=>{const r=N.useRef(null),s=An(n,r),a=RS(e);return N.useEffect(()=>{const c=r.current;if(!c)return;const d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(a!==e&&m){const g=new Event("change",{bubbles:!0});m.call(c,e),c.dispatchEvent(g)}},[a,e]),H.jsx(dn.select,{...t,style:{...fA,...t.style},ref:s,defaultValue:e})});UA.displayName=hk;function kA(i){return i===""||i===void 0}function FA(i){const e=nc(i),t=N.useRef(""),n=N.useRef(0),r=N.useCallback(a=>{const c=t.current+a;e(c),(function d(h){t.current=h,window.clearTimeout(n.current),h!==""&&(n.current=window.setTimeout(()=>d(""),1e3))})(c)},[e]),s=N.useCallback(()=>{t.current="",window.clearTimeout(n.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(n.current),[]),[t,r,s]}function zA(i,e,t){const r=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,s=t?i.indexOf(t):-1;let a=pk(i,Math.max(s,0));r.length===1&&(a=a.filter(h=>h!==t));const d=a.find(h=>h.textValue.toLowerCase().startsWith(r.toLowerCase()));return d!==t?d:void 0}function pk(i,e){return i.map((t,n)=>i[(e+n)%i.length])}var mk=dA,BA=pA,gk=gA,vk=vA,yk=yA,VA=xA,xk=MA,HA=bA,GA=AA,_k=RA,Sk=IA,WA=NA,jA=LA,XA=OA;const vE=mk,yE=gk,W_=N.forwardRef(({className:i,children:e,...t},n)=>H.jsxs(BA,{ref:n,className:kn("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",i),...t,children:[e,H.jsx(vk,{asChild:!0,children:H.jsx(qb,{className:"h-4 w-4 opacity-50"})})]}));W_.displayName=BA.displayName;const YA=N.forwardRef(({className:i,...e},t)=>H.jsx(WA,{ref:t,className:kn("flex cursor-default items-center justify-center py-1",i),...e,children:H.jsx(y3,{className:"h-4 w-4"})}));YA.displayName=WA.displayName;const qA=N.forwardRef(({className:i,...e},t)=>H.jsx(jA,{ref:t,className:kn("flex cursor-default items-center justify-center py-1",i),...e,children:H.jsx(qb,{className:"h-4 w-4"})}));qA.displayName=jA.displayName;const j_=N.forwardRef(({className:i,children:e,position:t="popper",...n},r)=>H.jsx(yk,{children:H.jsxs(VA,{ref:r,className:kn("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",i),position:t,...n,children:[H.jsx(YA,{}),H.jsx(xk,{className:kn("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),H.jsx(qA,{})]})}));j_.displayName=VA.displayName;const wk=N.forwardRef(({className:i,...e},t)=>H.jsx(HA,{ref:t,className:kn("px-2 py-1.5 text-sm font-semibold",i),...e}));wk.displayName=HA.displayName;const Ad=N.forwardRef(({className:i,children:e,...t},n)=>H.jsxs(GA,{ref:n,className:kn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i),...t,children:[H.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:H.jsx(Sk,{children:H.jsx(m3,{className:"h-4 w-4"})})}),H.jsx(_k,{children:e})]}));Ad.displayName=GA.displayName;const Mk=N.forwardRef(({className:i,...e},t)=>H.jsx(XA,{ref:t,className:kn("-mx-1 my-1 h-px bg-muted",i),...e}));Mk.displayName=XA.displayName;const Rd=N.forwardRef(({className:i,type:e,...t},n)=>H.jsx("input",{type:e,className:kn("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",i),ref:n,...t}));Rd.displayName="Input";function KA({open:i,onOpenChange:e}){const t=yS();return H.jsx(S3,{open:i,onOpenChange:e,children:H.jsxs(Zb,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[H.jsxs($b,{children:[H.jsx(Qb,{className:"text-2xl",children:" Game Settings"}),H.jsx(Jb,{children:"Configure your game experience"})]}),H.jsxs(W3,{defaultValue:"general",className:"w-full",children:[H.jsxs(xC,{className:"grid w-full grid-cols-4",children:[H.jsx(Tp,{value:"general",children:"General"}),H.jsx(Tp,{value:"graphics",children:"Graphics"}),H.jsx(Tp,{value:"audio",children:"Audio"}),H.jsx(Tp,{value:"multiplayer",children:"Multiplayer"})]}),H.jsxs(bp,{value:"general",className:"space-y-6 pt-4",children:[H.jsxs("div",{className:"space-y-2",children:[H.jsxs("div",{className:"flex justify-between",children:[H.jsx(Ri,{children:"Enemy Count"}),H.jsx("span",{className:"text-sm text-muted-foreground",children:t.enemyCount})]}),H.jsx(pu,{value:[t.enemyCount],onValueChange:([n])=>t.updateSetting("enemyCount",n),min:5,max:500,step:5})]}),H.jsxs("div",{className:"space-y-2",children:[H.jsxs("div",{className:"flex justify-between",children:[H.jsx(Ri,{children:"Map Size (meters)"}),H.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.mapSize,"m"]})]}),H.jsx(pu,{value:[t.mapSize],onValueChange:([n])=>t.updateSetting("mapSize",n),min:20,max:800,step:10})]}),H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsx(Ri,{htmlFor:"storm-enabled",children:"Enable Storm"}),H.jsx(mu,{id:"storm-enabled",checked:t.stormEnabled,onCheckedChange:n=>t.updateSetting("stormEnabled",n)})]}),t.stormEnabled&&H.jsxs("div",{className:"space-y-2",children:[H.jsxs("div",{className:"flex justify-between",children:[H.jsx(Ri,{children:"Storm Time (seconds)"}),H.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.stormTime,"s"]})]}),H.jsx(pu,{value:[t.stormTime],onValueChange:([n])=>t.updateSetting("stormTime",n),min:60,max:1800,step:30})]}),H.jsxs("div",{className:"space-y-2",children:[H.jsx(Ri,{children:"Camera Mode"}),H.jsxs(vE,{value:t.cameraMode,onValueChange:n=>t.updateSetting("cameraMode",n),children:[H.jsx(W_,{children:H.jsx(yE,{})}),H.jsxs(j_,{children:[H.jsx(Ad,{value:"TPS",children:"Third Person (TPS)"}),H.jsx(Ad,{value:"FPS",children:"First Person (FPS)"})]})]})]}),H.jsxs("div",{className:"space-y-2",children:[H.jsx(Ri,{children:"Difficulty"}),H.jsxs(vE,{value:t.difficulty,onValueChange:n=>t.updateSetting("difficulty",n),children:[H.jsx(W_,{children:H.jsx(yE,{})}),H.jsxs(j_,{children:[H.jsx(Ad,{value:"easy",children:"Easy"}),H.jsx(Ad,{value:"medium",children:"Medium"}),H.jsx(Ad,{value:"hard",children:"Hard"})]})]})]})]}),H.jsxs(bp,{value:"graphics",className:"space-y-6 pt-4",children:[H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsx(Ri,{htmlFor:"perf-mode",children:"Performance Mode"}),H.jsx(mu,{id:"perf-mode",checked:t.performanceMode,onCheckedChange:n=>t.updateSetting("performanceMode",n)})]}),H.jsxs("div",{className:"space-y-2",children:[H.jsxs("div",{className:"flex justify-between",children:[H.jsx(Ri,{children:"Render Scale"}),H.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.renderScale,"%"]})]}),H.jsx(pu,{value:[t.renderScale],onValueChange:([n])=>t.updateSetting("renderScale",n),min:50,max:100,step:5})]}),H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsx(Ri,{htmlFor:"show-fps",children:"Show FPS Counter"}),H.jsx(mu,{id:"show-fps",checked:t.showFPS,onCheckedChange:n=>t.updateSetting("showFPS",n)})]}),H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsx(Ri,{htmlFor:"show-minimap",children:"Show Minimap"}),H.jsx(mu,{id:"show-minimap",checked:t.showMinimap,onCheckedChange:n=>t.updateSetting("showMinimap",n)})]})]}),H.jsxs(bp,{value:"audio",className:"space-y-6 pt-4",children:[H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsx(Ri,{htmlFor:"music-enabled",children:"Background Music"}),H.jsx(mu,{id:"music-enabled",checked:t.musicEnabled,onCheckedChange:n=>t.updateSetting("musicEnabled",n)})]}),t.musicEnabled&&H.jsxs("div",{className:"space-y-2",children:[H.jsxs("div",{className:"flex justify-between",children:[H.jsx(Ri,{children:"Music Volume"}),H.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.musicVolume,"%"]})]}),H.jsx(pu,{value:[t.musicVolume],onValueChange:([n])=>t.updateSetting("musicVolume",n),min:0,max:100,step:5})]}),H.jsxs("div",{className:"space-y-2",children:[H.jsxs("div",{className:"flex justify-between",children:[H.jsx(Ri,{children:"SFX Volume"}),H.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.sfxVolume,"%"]})]}),H.jsx(pu,{value:[t.sfxVolume],onValueChange:([n])=>t.updateSetting("sfxVolume",n),min:0,max:100,step:5})]})]}),H.jsxs(bp,{value:"multiplayer",className:"space-y-6 pt-4",children:[H.jsxs("div",{className:"space-y-2",children:[H.jsx(Ri,{htmlFor:"mp-server",children:"Server URL"}),H.jsx(Rd,{id:"mp-server",value:t.mpServer,onChange:n=>t.updateSetting("mpServer",n.target.value),placeholder:"wss://server.com/socket"})]}),H.jsxs("div",{className:"space-y-2",children:[H.jsx(Ri,{htmlFor:"mp-nickname",children:"Nickname"}),H.jsx(Rd,{id:"mp-nickname",value:t.mpNickname,onChange:n=>t.updateSetting("mpNickname",n.target.value),placeholder:"Player123"})]}),H.jsxs("div",{className:"space-y-2",children:[H.jsx(Ri,{htmlFor:"mp-color",children:"Player Color"}),H.jsxs("div",{className:"flex gap-2",children:[H.jsx(Rd,{id:"mp-color",type:"color",value:t.mpColor,onChange:n=>t.updateSetting("mpColor",n.target.value),className:"w-20 h-10"}),H.jsx(Rd,{value:t.mpColor,onChange:n=>t.updateSetting("mpColor",n.target.value),placeholder:"#29b6f6"})]})]}),H.jsxs("div",{className:"space-y-2",children:[H.jsx(Ri,{htmlFor:"mp-room",children:"Room Code"}),H.jsx(Rd,{id:"mp-room",value:t.mpRoom,onChange:n=>t.updateSetting("mpRoom",n.target.value),placeholder:"ABCDE"})]}),H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsx(Ri,{htmlFor:"mp-zombies",children:"Enable Zombies in Multiplayer"}),H.jsx(mu,{id:"mp-zombies",checked:t.mpZombies,onCheckedChange:n=>t.updateSetting("mpZombies",n)})]})]})]}),H.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[H.jsx(Jl,{variant:"outline",onClick:()=>{t.resetToDefaults()},children:"Reset to Defaults"}),H.jsx(Jl,{onClick:()=>e(!1),children:"Close"})]})]})})}const xE=[{id:"arcade",title:"Arcade",emoji:"",description:"Modo clssico com tempestade, drops e progresso",color:"from-orange-500 to-red-500",route:"/arcade"},{id:"survival",title:"Survival",emoji:"",description:"Sobreviva sem tempestade, hardcore mode",color:"from-green-500 to-emerald-500",route:"/survival"},{id:"arena",title:"Arena",emoji:"",description:"Partidas rpidas, ao intensa",color:"from-red-500 to-pink-500",route:"/arena"},{id:"matrix",title:"Matrix",emoji:"",description:"Sandbox sem inimigos para testes",color:"from-blue-500 to-cyan-500",route:"/matrix"},{id:"multiplayer",title:"Multiplayer",emoji:"",description:"Jogue online com amigos",color:"from-purple-500 to-pink-500",route:"/multiplayer"},{id:"studio",title:"Studio",emoji:"",description:"Modo criativo com construo",color:"from-yellow-500 to-orange-500",route:"/studio"},{id:"matrix-ai",title:"Matrix AI",emoji:"",description:"Builder com IA",color:"from-indigo-500 to-blue-500",route:"/matrix-ai"}];function Ek(){const i=WT(),{gameMode:e,updateSetting:t}=yS(),[n,r]=N.useState(e),[s,a]=N.useState(!1),c=h=>{r(h),t("gameMode",h)},d=()=>{t("gameMode",n);const h=xE.find(m=>m.id===n);h&&i(h.route)};return H.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex flex-col items-center justify-center p-8",children:[H.jsx("h1",{className:"text-6xl font-bold text-white mb-4 tracking-tight",children:"VOXEL FIRECRAFT"}),H.jsx("p",{className:"text-slate-400 mb-12 text-lg",children:"Escolha seu modo de jogo"}),H.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8 max-w-7xl",children:xE.map(h=>H.jsx(fb,{className:`cursor-pointer transition-all duration-300 hover:scale-105 ${n===h.id?"ring-2 ring-white shadow-2xl":"hover:shadow-xl"} bg-gradient-to-br ${h.color} border-0`,onClick:()=>c(h.id),children:H.jsxs(db,{children:[H.jsx("div",{className:"text-5xl mb-2",children:h.emoji}),H.jsx(hb,{className:"text-white text-2xl",children:h.title}),H.jsx(pb,{className:"text-white/80",children:h.description})]})},h.id))}),H.jsxs("div",{className:"flex gap-4",children:[H.jsx(Jl,{onClick:d,size:"lg",className:"text-xl px-12 py-6 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:" PLAY GAME"}),H.jsx(Jl,{variant:"outline",size:"lg",className:"text-xl px-8 py-6",onClick:()=>a(!0),children:" Settings"})]}),H.jsx("p",{className:"text-slate-500 mt-12 text-sm",children:"Press ESC during game to pause"}),H.jsx(KA,{open:s,onOpenChange:a})]})}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ky="171",gu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},vu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},ZA=0,X_=1,$A=2,Tk=3,QA=0,Zy=1,Pp=2,co=3,Za=0,Ir=1,Vo=2,Xa=0,Nu=1,Y_=2,q_=3,K_=4,JA=5,jl=100,eR=101,tR=102,nR=103,iR=104,rR=200,sR=201,oR=202,aR=203,Vv=204,Hv=205,lR=206,cR=207,uR=208,fR=209,dR=210,hR=211,pR=212,mR=213,gR=214,Gv=0,Wv=1,jv=2,Hu=3,Xv=4,Yv=5,qv=6,Kv=7,vm=0,vR=1,yR=2,Xo=0,xR=1,_R=2,SR=3,VS=4,wR=5,MR=6,ER=7,Z_="attached",TR="detached",$y=300,$a=301,sc=302,Xp=303,Yp=304,uh=306,qp=1e3,Ds=1001,Kp=1002,Ji=1003,HS=1004,bk=1004,Ld=1005,Ck=1005,Pi=1006,Ip=1007,Ak=1007,Go=1008,Rk=1008,go=1009,GS=1010,WS=1011,$d=1012,Qy=1013,Qa=1014,$r=1015,fh=1016,Jy=1017,e0=1018,Gu=1020,jS=35902,XS=1021,YS=1022,fr=1023,qS=1024,KS=1025,Lu=1026,Wu=1027,t0=1028,ym=1029,ZS=1030,n0=1031,Pk=1032,i0=1033,Np=33776,Lp=33777,Dp=33778,Op=33779,Zv=35840,$v=35841,Qv=35842,Jv=35843,ey=36196,ty=37492,ny=37496,iy=37808,ry=37809,sy=37810,oy=37811,ay=37812,ly=37813,cy=37814,uy=37815,fy=37816,dy=37817,hy=37818,py=37819,my=37820,gy=37821,Up=36492,vy=36494,yy=36495,$S=36283,xy=36284,_y=36285,Sy=36286,bR=2200,CR=2201,AR=2202,Zp=2300,wy=2301,Av=2302,Su=2400,wu=2401,$p=2402,r0=2500,QS=2501,Ik=0,Nk=1,Lk=2,RR=3200,PR=3201,Dk=3202,Ok=3203,uc=0,IR=1,Ga="",Kr="srgb",ju="srgb-linear",Qp="linear",In="srgb",Uk=0,yu=7680,kk=7681,Fk=7682,zk=7683,Bk=34055,Vk=34056,Hk=5386,Gk=512,Wk=513,jk=514,Xk=515,Yk=516,qk=517,Kk=518,$_=519,NR=512,LR=513,DR=514,JS=515,OR=516,UR=517,kR=518,FR=519,Jp=35044,Zk=35048,$k=35040,Qk=35045,Jk=35049,eF=35041,tF=35046,nF=35050,iF=35042,rF="100",Q_="300 es",Wo=2e3,em=2001;let $o=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}};const lr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _E=1234567;const Du=Math.PI/180,Qd=180/Math.PI;function ms(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(lr[i&255]+lr[i>>8&255]+lr[i>>16&255]+lr[i>>24&255]+"-"+lr[e&255]+lr[e>>8&255]+"-"+lr[e>>16&15|64]+lr[e>>24&255]+"-"+lr[t&63|128]+lr[t>>8&255]+"-"+lr[t>>16&255]+lr[t>>24&255]+lr[n&255]+lr[n>>8&255]+lr[n>>16&255]+lr[n>>24&255]).toLowerCase()}function $t(i,e,t){return Math.max(e,Math.min(t,i))}function ew(i,e){return(i%e+e)%e}function sF(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function oF(i,e,t){return i!==e?(t-i)/(e-i):0}function kp(i,e,t){return(1-t)*i+t*e}function aF(i,e,t,n){return kp(i,e,1-Math.exp(-t*n))}function lF(i,e=1){return e-Math.abs(ew(i,e*2)-e)}function cF(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function uF(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function fF(i,e){return i+Math.floor(Math.random()*(e-i+1))}function dF(i,e){return i+Math.random()*(e-i)}function hF(i){return i*(.5-Math.random())}function pF(i){i!==void 0&&(_E=i);let e=_E+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function mF(i){return i*Du}function gF(i){return i*Qd}function vF(i){return(i&i-1)===0&&i!==0}function yF(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function xF(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function _F(i,e,t,n,r){const s=Math.cos,a=Math.sin,c=s(t/2),d=a(t/2),h=s((e+n)/2),m=a((e+n)/2),g=s((e-n)/2),v=a((e-n)/2),y=s((n-e)/2),M=a((n-e)/2);switch(r){case"XYX":i.set(c*m,d*g,d*v,c*h);break;case"YZY":i.set(d*v,c*m,d*g,c*h);break;case"ZXZ":i.set(d*g,d*v,c*m,c*h);break;case"XZX":i.set(c*m,d*M,d*y,c*h);break;case"YXY":i.set(d*y,c*m,d*M,c*h);break;case"ZYZ":i.set(d*M,d*y,c*m,c*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Pr(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function rn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const SF={DEG2RAD:Du,RAD2DEG:Qd,generateUUID:ms,clamp:$t,euclideanModulo:ew,mapLinear:sF,inverseLerp:oF,lerp:kp,damp:aF,pingpong:lF,smoothstep:cF,smootherstep:uF,randInt:fF,randFloat:dF,randFloatSpread:hF,seededRandom:pF,degToRad:mF,radToDeg:gF,isPowerOfTwo:vF,ceilPowerOfTwo:yF,floorPowerOfTwo:xF,setQuaternionFromProperEuler:_F,normalize:rn,denormalize:Pr};class ke{constructor(e=0,t=0){ke.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=$t(this.x,e.x,t.x),this.y=$t(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=$t(this.x,e,t),this.y=$t(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar($t(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos($t(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*n-a*r+e.x,this.y=s*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Jt{constructor(e,t,n,r,s,a,c,d,h){Jt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,a,c,d,h)}set(e,t,n,r,s,a,c,d,h){const m=this.elements;return m[0]=e,m[1]=r,m[2]=c,m[3]=t,m[4]=s,m[5]=d,m[6]=n,m[7]=a,m[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,a=n[0],c=n[3],d=n[6],h=n[1],m=n[4],g=n[7],v=n[2],y=n[5],M=n[8],E=r[0],w=r[3],S=r[6],A=r[1],C=r[4],R=r[7],O=r[2],U=r[5],F=r[8];return s[0]=a*E+c*A+d*O,s[3]=a*w+c*C+d*U,s[6]=a*S+c*R+d*F,s[1]=h*E+m*A+g*O,s[4]=h*w+m*C+g*U,s[7]=h*S+m*R+g*F,s[2]=v*E+y*A+M*O,s[5]=v*w+y*C+M*U,s[8]=v*S+y*R+M*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],c=e[5],d=e[6],h=e[7],m=e[8];return t*a*m-t*c*h-n*s*m+n*c*d+r*s*h-r*a*d}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],c=e[5],d=e[6],h=e[7],m=e[8],g=m*a-c*h,v=c*d-m*s,y=h*s-a*d,M=t*g+n*v+r*y;if(M===0)return this.set(0,0,0,0,0,0,0,0,0);const E=1/M;return e[0]=g*E,e[1]=(r*h-m*n)*E,e[2]=(c*n-r*a)*E,e[3]=v*E,e[4]=(m*t-r*d)*E,e[5]=(r*s-c*t)*E,e[6]=y*E,e[7]=(n*d-h*t)*E,e[8]=(a*t-n*s)*E,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,a,c){const d=Math.cos(s),h=Math.sin(s);return this.set(n*d,n*h,-n*(d*a+h*c)+a+e,-r*h,r*d,-r*(-h*a+d*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply(Sx.makeScale(e,t)),this}rotate(e){return this.premultiply(Sx.makeRotation(-e)),this}translate(e,t){return this.premultiply(Sx.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Sx=new Jt;function zR(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const wF={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Dd(i,e){return new wF[i](e)}function tm(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function BR(){const i=tm("canvas");return i.style.display="block",i}const SE={};function Pd(i){i in SE||(SE[i]=!0,console.warn(i))}function MF(i,e,t){return new Promise(function(n,r){function s(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}function EF(i){const e=i.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function TF(i){const e=i.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const wE=new Jt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),ME=new Jt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function bF(){const i={enabled:!0,workingColorSpace:ju,spaces:{},convert:function(r,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===In&&(r.r=Ya(r.r),r.g=Ya(r.g),r.b=Ya(r.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===In&&(r.r=Vd(r.r),r.g=Vd(r.g),r.b=Vd(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Ga?Qp:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,a){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[ju]:{primaries:e,whitePoint:n,transfer:Qp,toXYZ:wE,fromXYZ:ME,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Kr},outputColorSpaceConfig:{drawingBufferColorSpace:Kr}},[Kr]:{primaries:e,whitePoint:n,transfer:In,toXYZ:wE,fromXYZ:ME,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Kr}}}),i}const xn=bF();function Ya(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Vd(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let ld;class VR{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ld===void 0&&(ld=tm("canvas")),ld.width=e.width,ld.height=e.height;const n=ld.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=ld}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=tm("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=Ya(s[a]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Ya(t[n]/255)*255):t[n]=Ya(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let CF=0;class Mu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:CF++}),this.uuid=ms(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,c=r.length;a<c;a++)r[a].isDataTexture?s.push(wx(r[a].image)):s.push(wx(r[a]))}else s=wx(r);n.url=s}return t||(e.images[this.uuid]=n),n}}function wx(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?VR.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let AF=0;class ai extends $o{constructor(e=ai.DEFAULT_IMAGE,t=ai.DEFAULT_MAPPING,n=Ds,r=Ds,s=Pi,a=Go,c=fr,d=go,h=ai.DEFAULT_ANISOTROPY,m=Ga){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:AF++}),this.uuid=ms(),this.name="",this.source=new Mu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=h,this.format=c,this.internalFormat=null,this.type=d,this.offset=new ke(0,0),this.repeat=new ke(1,1),this.center=new ke(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Jt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==$y)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case qp:e.x=e.x-Math.floor(e.x);break;case Ds:e.x=e.x<0?0:1;break;case Kp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case qp:e.y=e.y-Math.floor(e.y);break;case Ds:e.y=e.y<0?0:1;break;case Kp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ai.DEFAULT_IMAGE=null;ai.DEFAULT_MAPPING=$y;ai.DEFAULT_ANISOTROPY=1;class wn{constructor(e=0,t=0,n=0,r=1){wn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const d=e.elements,h=d[0],m=d[4],g=d[8],v=d[1],y=d[5],M=d[9],E=d[2],w=d[6],S=d[10];if(Math.abs(m-v)<.01&&Math.abs(g-E)<.01&&Math.abs(M-w)<.01){if(Math.abs(m+v)<.1&&Math.abs(g+E)<.1&&Math.abs(M+w)<.1&&Math.abs(h+y+S-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const C=(h+1)/2,R=(y+1)/2,O=(S+1)/2,U=(m+v)/4,F=(g+E)/4,z=(M+w)/4;return C>R&&C>O?C<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(C),r=U/n,s=F/n):R>O?R<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(R),n=U/r,s=z/r):O<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(O),n=F/s,r=z/s),this.set(n,r,s,t),this}let A=Math.sqrt((w-M)*(w-M)+(g-E)*(g-E)+(v-m)*(v-m));return Math.abs(A)<.001&&(A=1),this.x=(w-M)/A,this.y=(g-E)/A,this.z=(v-m)/A,this.w=Math.acos((h+y+S-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=$t(this.x,e.x,t.x),this.y=$t(this.y,e.y,t.y),this.z=$t(this.z,e.z,t.z),this.w=$t(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=$t(this.x,e,t),this.y=$t(this.y,e,t),this.z=$t(this.z,e,t),this.w=$t(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar($t(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class HR extends $o{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new wn(0,0,e,t),this.scissorTest=!1,this.viewport=new wn(0,0,e,t);const r={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Pi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new ai(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const a=n.count;for(let c=0;c<a;c++)this.textures[c]=s.clone(),this.textures[c].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Mu(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class vo extends HR{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class s0 extends ai{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Ji,this.minFilter=Ji,this.wrapR=Ds,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class RF extends vo{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new s0(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class tw extends ai{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Ji,this.minFilter=Ji,this.wrapR=Ds,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class PF extends vo{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new tw(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class dr{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,a,c){let d=n[r+0],h=n[r+1],m=n[r+2],g=n[r+3];const v=s[a+0],y=s[a+1],M=s[a+2],E=s[a+3];if(c===0){e[t+0]=d,e[t+1]=h,e[t+2]=m,e[t+3]=g;return}if(c===1){e[t+0]=v,e[t+1]=y,e[t+2]=M,e[t+3]=E;return}if(g!==E||d!==v||h!==y||m!==M){let w=1-c;const S=d*v+h*y+m*M+g*E,A=S>=0?1:-1,C=1-S*S;if(C>Number.EPSILON){const O=Math.sqrt(C),U=Math.atan2(O,S*A);w=Math.sin(w*U)/O,c=Math.sin(c*U)/O}const R=c*A;if(d=d*w+v*R,h=h*w+y*R,m=m*w+M*R,g=g*w+E*R,w===1-c){const O=1/Math.sqrt(d*d+h*h+m*m+g*g);d*=O,h*=O,m*=O,g*=O}}e[t]=d,e[t+1]=h,e[t+2]=m,e[t+3]=g}static multiplyQuaternionsFlat(e,t,n,r,s,a){const c=n[r],d=n[r+1],h=n[r+2],m=n[r+3],g=s[a],v=s[a+1],y=s[a+2],M=s[a+3];return e[t]=c*M+m*g+d*y-h*v,e[t+1]=d*M+m*v+h*g-c*y,e[t+2]=h*M+m*y+c*v-d*g,e[t+3]=m*M-c*g-d*v-h*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,s=e._z,a=e._order,c=Math.cos,d=Math.sin,h=c(n/2),m=c(r/2),g=c(s/2),v=d(n/2),y=d(r/2),M=d(s/2);switch(a){case"XYZ":this._x=v*m*g+h*y*M,this._y=h*y*g-v*m*M,this._z=h*m*M+v*y*g,this._w=h*m*g-v*y*M;break;case"YXZ":this._x=v*m*g+h*y*M,this._y=h*y*g-v*m*M,this._z=h*m*M-v*y*g,this._w=h*m*g+v*y*M;break;case"ZXY":this._x=v*m*g-h*y*M,this._y=h*y*g+v*m*M,this._z=h*m*M+v*y*g,this._w=h*m*g-v*y*M;break;case"ZYX":this._x=v*m*g-h*y*M,this._y=h*y*g+v*m*M,this._z=h*m*M-v*y*g,this._w=h*m*g+v*y*M;break;case"YZX":this._x=v*m*g+h*y*M,this._y=h*y*g+v*m*M,this._z=h*m*M-v*y*g,this._w=h*m*g-v*y*M;break;case"XZY":this._x=v*m*g-h*y*M,this._y=h*y*g-v*m*M,this._z=h*m*M+v*y*g,this._w=h*m*g+v*y*M;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],a=t[1],c=t[5],d=t[9],h=t[2],m=t[6],g=t[10],v=n+c+g;if(v>0){const y=.5/Math.sqrt(v+1);this._w=.25/y,this._x=(m-d)*y,this._y=(s-h)*y,this._z=(a-r)*y}else if(n>c&&n>g){const y=2*Math.sqrt(1+n-c-g);this._w=(m-d)/y,this._x=.25*y,this._y=(r+a)/y,this._z=(s+h)/y}else if(c>g){const y=2*Math.sqrt(1+c-n-g);this._w=(s-h)/y,this._x=(r+a)/y,this._y=.25*y,this._z=(d+m)/y}else{const y=2*Math.sqrt(1+g-n-c);this._w=(a-r)/y,this._x=(s+h)/y,this._y=(d+m)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs($t(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,a=e._w,c=t._x,d=t._y,h=t._z,m=t._w;return this._x=n*m+a*c+r*h-s*d,this._y=r*m+a*d+s*c-n*h,this._z=s*m+a*h+n*d-r*c,this._w=a*m-n*c-r*d-s*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,a=this._w;let c=a*e._w+n*e._x+r*e._y+s*e._z;if(c<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,c=-c):this.copy(e),c>=1)return this._w=a,this._x=n,this._y=r,this._z=s,this;const d=1-c*c;if(d<=Number.EPSILON){const y=1-t;return this._w=y*a+t*this._w,this._x=y*n+t*this._x,this._y=y*r+t*this._y,this._z=y*s+t*this._z,this.normalize(),this}const h=Math.sqrt(d),m=Math.atan2(h,c),g=Math.sin((1-t)*m)/h,v=Math.sin(t*m)/h;return this._w=a*g+this._w*v,this._x=n*g+this._x*v,this._y=r*g+this._y*v,this._z=s*g+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class q{constructor(e=0,t=0,n=0){q.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(EE.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(EE.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,a=e.y,c=e.z,d=e.w,h=2*(a*r-c*n),m=2*(c*t-s*r),g=2*(s*n-a*t);return this.x=t+d*h+a*g-c*m,this.y=n+d*m+c*h-s*g,this.z=r+d*g+s*m-a*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=$t(this.x,e.x,t.x),this.y=$t(this.y,e.y,t.y),this.z=$t(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=$t(this.x,e,t),this.y=$t(this.y,e,t),this.z=$t(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar($t(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,a=t.x,c=t.y,d=t.z;return this.x=r*d-s*c,this.y=s*a-n*d,this.z=n*c-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Mx.copy(this).projectOnVector(e),this.sub(Mx)}reflect(e){return this.sub(Mx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos($t(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Mx=new q,EE=new dr;class Nr{constructor(e=new q(1/0,1/0,1/0),t=new q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(ro.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(ro.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=ro.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,c=s.count;a<c;a++)e.isMesh===!0?e.getVertexPosition(a,ro):ro.fromBufferAttribute(s,a),ro.applyMatrix4(e.matrixWorld),this.expandByPoint(ro);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Ig.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),Ig.copy(n.boundingBox)),Ig.applyMatrix4(e.matrixWorld),this.union(Ig)}const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,ro),ro.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(fp),Ng.subVectors(this.max,fp),cd.subVectors(e.a,fp),ud.subVectors(e.b,fp),fd.subVectors(e.c,fp),Dl.subVectors(ud,cd),Ol.subVectors(fd,ud),eu.subVectors(cd,fd);let t=[0,-Dl.z,Dl.y,0,-Ol.z,Ol.y,0,-eu.z,eu.y,Dl.z,0,-Dl.x,Ol.z,0,-Ol.x,eu.z,0,-eu.x,-Dl.y,Dl.x,0,-Ol.y,Ol.x,0,-eu.y,eu.x,0];return!Ex(t,cd,ud,fd,Ng)||(t=[1,0,0,0,1,0,0,0,1],!Ex(t,cd,ud,fd,Ng))?!1:(Lg.crossVectors(Dl,Ol),t=[Lg.x,Lg.y,Lg.z],Ex(t,cd,ud,fd,Ng))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ro).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ro).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(La[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),La[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),La[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),La[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),La[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),La[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),La[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),La[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(La),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const La=[new q,new q,new q,new q,new q,new q,new q,new q],ro=new q,Ig=new Nr,cd=new q,ud=new q,fd=new q,Dl=new q,Ol=new q,eu=new q,fp=new q,Ng=new q,Lg=new q,tu=new q;function Ex(i,e,t,n,r){for(let s=0,a=i.length-3;s<=a;s+=3){tu.fromArray(i,s);const c=r.x*Math.abs(tu.x)+r.y*Math.abs(tu.y)+r.z*Math.abs(tu.z),d=e.dot(tu),h=t.dot(tu),m=n.dot(tu);if(Math.max(-Math.max(d,h,m),Math.min(d,h,m))>c)return!1}return!0}const IF=new Nr,dp=new q,Tx=new q;class hr{constructor(e=new q,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):IF.setFromPoints(e).getCenter(n);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;dp.subVectors(e,this.center);const t=dp.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(dp,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Tx.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(dp.copy(e.center).add(Tx)),this.expandByPoint(dp.copy(e.center).sub(Tx))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Da=new q,bx=new q,Dg=new q,Ul=new q,Cx=new q,Og=new q,Ax=new q;class Ku{constructor(e=new q,t=new q(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Da)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Da.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Da.copy(this.origin).addScaledVector(this.direction,t),Da.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){bx.copy(e).add(t).multiplyScalar(.5),Dg.copy(t).sub(e).normalize(),Ul.copy(this.origin).sub(bx);const s=e.distanceTo(t)*.5,a=-this.direction.dot(Dg),c=Ul.dot(this.direction),d=-Ul.dot(Dg),h=Ul.lengthSq(),m=Math.abs(1-a*a);let g,v,y,M;if(m>0)if(g=a*d-c,v=a*c-d,M=s*m,g>=0)if(v>=-M)if(v<=M){const E=1/m;g*=E,v*=E,y=g*(g+a*v+2*c)+v*(a*g+v+2*d)+h}else v=s,g=Math.max(0,-(a*v+c)),y=-g*g+v*(v+2*d)+h;else v=-s,g=Math.max(0,-(a*v+c)),y=-g*g+v*(v+2*d)+h;else v<=-M?(g=Math.max(0,-(-a*s+c)),v=g>0?-s:Math.min(Math.max(-s,-d),s),y=-g*g+v*(v+2*d)+h):v<=M?(g=0,v=Math.min(Math.max(-s,-d),s),y=v*(v+2*d)+h):(g=Math.max(0,-(a*s+c)),v=g>0?s:Math.min(Math.max(-s,-d),s),y=-g*g+v*(v+2*d)+h);else v=a>0?-s:s,g=Math.max(0,-(a*v+c)),y=-g*g+v*(v+2*d)+h;return n&&n.copy(this.origin).addScaledVector(this.direction,g),r&&r.copy(bx).addScaledVector(Dg,v),y}intersectSphere(e,t){Da.subVectors(e.center,this.origin);const n=Da.dot(this.direction),r=Da.dot(Da)-n*n,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),c=n-a,d=n+a;return d<0?null:c<0?this.at(d,t):this.at(c,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,a,c,d;const h=1/this.direction.x,m=1/this.direction.y,g=1/this.direction.z,v=this.origin;return h>=0?(n=(e.min.x-v.x)*h,r=(e.max.x-v.x)*h):(n=(e.max.x-v.x)*h,r=(e.min.x-v.x)*h),m>=0?(s=(e.min.y-v.y)*m,a=(e.max.y-v.y)*m):(s=(e.max.y-v.y)*m,a=(e.min.y-v.y)*m),n>a||s>r||((s>n||isNaN(n))&&(n=s),(a<r||isNaN(r))&&(r=a),g>=0?(c=(e.min.z-v.z)*g,d=(e.max.z-v.z)*g):(c=(e.max.z-v.z)*g,d=(e.min.z-v.z)*g),n>d||c>r)||((c>n||n!==n)&&(n=c),(d<r||r!==r)&&(r=d),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,Da)!==null}intersectTriangle(e,t,n,r,s){Cx.subVectors(t,e),Og.subVectors(n,e),Ax.crossVectors(Cx,Og);let a=this.direction.dot(Ax),c;if(a>0){if(r)return null;c=1}else if(a<0)c=-1,a=-a;else return null;Ul.subVectors(this.origin,e);const d=c*this.direction.dot(Og.crossVectors(Ul,Og));if(d<0)return null;const h=c*this.direction.dot(Cx.cross(Ul));if(h<0||d+h>a)return null;const m=-c*Ul.dot(Ax);return m<0?null:this.at(m/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Wt{constructor(e,t,n,r,s,a,c,d,h,m,g,v,y,M,E,w){Wt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,a,c,d,h,m,g,v,y,M,E,w)}set(e,t,n,r,s,a,c,d,h,m,g,v,y,M,E,w){const S=this.elements;return S[0]=e,S[4]=t,S[8]=n,S[12]=r,S[1]=s,S[5]=a,S[9]=c,S[13]=d,S[2]=h,S[6]=m,S[10]=g,S[14]=v,S[3]=y,S[7]=M,S[11]=E,S[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Wt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/dd.setFromMatrixColumn(e,0).length(),s=1/dd.setFromMatrixColumn(e,1).length(),a=1/dd.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,a=Math.cos(n),c=Math.sin(n),d=Math.cos(r),h=Math.sin(r),m=Math.cos(s),g=Math.sin(s);if(e.order==="XYZ"){const v=a*m,y=a*g,M=c*m,E=c*g;t[0]=d*m,t[4]=-d*g,t[8]=h,t[1]=y+M*h,t[5]=v-E*h,t[9]=-c*d,t[2]=E-v*h,t[6]=M+y*h,t[10]=a*d}else if(e.order==="YXZ"){const v=d*m,y=d*g,M=h*m,E=h*g;t[0]=v+E*c,t[4]=M*c-y,t[8]=a*h,t[1]=a*g,t[5]=a*m,t[9]=-c,t[2]=y*c-M,t[6]=E+v*c,t[10]=a*d}else if(e.order==="ZXY"){const v=d*m,y=d*g,M=h*m,E=h*g;t[0]=v-E*c,t[4]=-a*g,t[8]=M+y*c,t[1]=y+M*c,t[5]=a*m,t[9]=E-v*c,t[2]=-a*h,t[6]=c,t[10]=a*d}else if(e.order==="ZYX"){const v=a*m,y=a*g,M=c*m,E=c*g;t[0]=d*m,t[4]=M*h-y,t[8]=v*h+E,t[1]=d*g,t[5]=E*h+v,t[9]=y*h-M,t[2]=-h,t[6]=c*d,t[10]=a*d}else if(e.order==="YZX"){const v=a*d,y=a*h,M=c*d,E=c*h;t[0]=d*m,t[4]=E-v*g,t[8]=M*g+y,t[1]=g,t[5]=a*m,t[9]=-c*m,t[2]=-h*m,t[6]=y*g+M,t[10]=v-E*g}else if(e.order==="XZY"){const v=a*d,y=a*h,M=c*d,E=c*h;t[0]=d*m,t[4]=-g,t[8]=h*m,t[1]=v*g+E,t[5]=a*m,t[9]=y*g-M,t[2]=M*g-y,t[6]=c*m,t[10]=E*g+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(NF,e,LF)}lookAt(e,t,n){const r=this.elements;return fs.subVectors(e,t),fs.lengthSq()===0&&(fs.z=1),fs.normalize(),kl.crossVectors(n,fs),kl.lengthSq()===0&&(Math.abs(n.z)===1?fs.x+=1e-4:fs.z+=1e-4,fs.normalize(),kl.crossVectors(n,fs)),kl.normalize(),Ug.crossVectors(fs,kl),r[0]=kl.x,r[4]=Ug.x,r[8]=fs.x,r[1]=kl.y,r[5]=Ug.y,r[9]=fs.y,r[2]=kl.z,r[6]=Ug.z,r[10]=fs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,a=n[0],c=n[4],d=n[8],h=n[12],m=n[1],g=n[5],v=n[9],y=n[13],M=n[2],E=n[6],w=n[10],S=n[14],A=n[3],C=n[7],R=n[11],O=n[15],U=r[0],F=r[4],z=r[8],k=r[12],L=r[1],G=r[5],J=r[9],Q=r[13],ce=r[2],ge=r[6],ne=r[10],de=r[14],B=r[3],ie=r[7],te=r[11],X=r[15];return s[0]=a*U+c*L+d*ce+h*B,s[4]=a*F+c*G+d*ge+h*ie,s[8]=a*z+c*J+d*ne+h*te,s[12]=a*k+c*Q+d*de+h*X,s[1]=m*U+g*L+v*ce+y*B,s[5]=m*F+g*G+v*ge+y*ie,s[9]=m*z+g*J+v*ne+y*te,s[13]=m*k+g*Q+v*de+y*X,s[2]=M*U+E*L+w*ce+S*B,s[6]=M*F+E*G+w*ge+S*ie,s[10]=M*z+E*J+w*ne+S*te,s[14]=M*k+E*Q+w*de+S*X,s[3]=A*U+C*L+R*ce+O*B,s[7]=A*F+C*G+R*ge+O*ie,s[11]=A*z+C*J+R*ne+O*te,s[15]=A*k+C*Q+R*de+O*X,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],a=e[1],c=e[5],d=e[9],h=e[13],m=e[2],g=e[6],v=e[10],y=e[14],M=e[3],E=e[7],w=e[11],S=e[15];return M*(+s*d*g-r*h*g-s*c*v+n*h*v+r*c*y-n*d*y)+E*(+t*d*y-t*h*v+s*a*v-r*a*y+r*h*m-s*d*m)+w*(+t*h*g-t*c*y-s*a*g+n*a*y+s*c*m-n*h*m)+S*(-r*c*m-t*d*g+t*c*v+r*a*g-n*a*v+n*d*m)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],c=e[5],d=e[6],h=e[7],m=e[8],g=e[9],v=e[10],y=e[11],M=e[12],E=e[13],w=e[14],S=e[15],A=g*w*h-E*v*h+E*d*y-c*w*y-g*d*S+c*v*S,C=M*v*h-m*w*h-M*d*y+a*w*y+m*d*S-a*v*S,R=m*E*h-M*g*h+M*c*y-a*E*y-m*c*S+a*g*S,O=M*g*d-m*E*d-M*c*v+a*E*v+m*c*w-a*g*w,U=t*A+n*C+r*R+s*O;if(U===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/U;return e[0]=A*F,e[1]=(E*v*s-g*w*s-E*r*y+n*w*y+g*r*S-n*v*S)*F,e[2]=(c*w*s-E*d*s+E*r*h-n*w*h-c*r*S+n*d*S)*F,e[3]=(g*d*s-c*v*s-g*r*h+n*v*h+c*r*y-n*d*y)*F,e[4]=C*F,e[5]=(m*w*s-M*v*s+M*r*y-t*w*y-m*r*S+t*v*S)*F,e[6]=(M*d*s-a*w*s-M*r*h+t*w*h+a*r*S-t*d*S)*F,e[7]=(a*v*s-m*d*s+m*r*h-t*v*h-a*r*y+t*d*y)*F,e[8]=R*F,e[9]=(M*g*s-m*E*s-M*n*y+t*E*y+m*n*S-t*g*S)*F,e[10]=(a*E*s-M*c*s+M*n*h-t*E*h-a*n*S+t*c*S)*F,e[11]=(m*c*s-a*g*s-m*n*h+t*g*h+a*n*y-t*c*y)*F,e[12]=O*F,e[13]=(m*E*r-M*g*r+M*n*v-t*E*v-m*n*w+t*g*w)*F,e[14]=(M*c*r-a*E*r-M*n*d+t*E*d+a*n*w-t*c*w)*F,e[15]=(a*g*r-m*c*r+m*n*d-t*g*d-a*n*v+t*c*v)*F,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,a=e.x,c=e.y,d=e.z,h=s*a,m=s*c;return this.set(h*a+n,h*c-r*d,h*d+r*c,0,h*c+r*d,m*c+n,m*d-r*a,0,h*d-r*c,m*d+r*a,s*d*d+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,a){return this.set(1,n,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,a=t._y,c=t._z,d=t._w,h=s+s,m=a+a,g=c+c,v=s*h,y=s*m,M=s*g,E=a*m,w=a*g,S=c*g,A=d*h,C=d*m,R=d*g,O=n.x,U=n.y,F=n.z;return r[0]=(1-(E+S))*O,r[1]=(y+R)*O,r[2]=(M-C)*O,r[3]=0,r[4]=(y-R)*U,r[5]=(1-(v+S))*U,r[6]=(w+A)*U,r[7]=0,r[8]=(M+C)*F,r[9]=(w-A)*F,r[10]=(1-(v+E))*F,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=dd.set(r[0],r[1],r[2]).length();const a=dd.set(r[4],r[5],r[6]).length(),c=dd.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],so.copy(this);const h=1/s,m=1/a,g=1/c;return so.elements[0]*=h,so.elements[1]*=h,so.elements[2]*=h,so.elements[4]*=m,so.elements[5]*=m,so.elements[6]*=m,so.elements[8]*=g,so.elements[9]*=g,so.elements[10]*=g,t.setFromRotationMatrix(so),n.x=s,n.y=a,n.z=c,this}makePerspective(e,t,n,r,s,a,c=Wo){const d=this.elements,h=2*s/(t-e),m=2*s/(n-r),g=(t+e)/(t-e),v=(n+r)/(n-r);let y,M;if(c===Wo)y=-(a+s)/(a-s),M=-2*a*s/(a-s);else if(c===em)y=-a/(a-s),M=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return d[0]=h,d[4]=0,d[8]=g,d[12]=0,d[1]=0,d[5]=m,d[9]=v,d[13]=0,d[2]=0,d[6]=0,d[10]=y,d[14]=M,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}makeOrthographic(e,t,n,r,s,a,c=Wo){const d=this.elements,h=1/(t-e),m=1/(n-r),g=1/(a-s),v=(t+e)*h,y=(n+r)*m;let M,E;if(c===Wo)M=(a+s)*g,E=-2*g;else if(c===em)M=s*g,E=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return d[0]=2*h,d[4]=0,d[8]=0,d[12]=-v,d[1]=0,d[5]=2*m,d[9]=0,d[13]=-y,d[2]=0,d[6]=0,d[10]=E,d[14]=-M,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const dd=new q,so=new Wt,NF=new q(0,0,0),LF=new q(1,1,1),kl=new q,Ug=new q,fs=new q,TE=new Wt,bE=new dr;class gs{constructor(e=0,t=0,n=0,r=gs.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],a=r[4],c=r[8],d=r[1],h=r[5],m=r[9],g=r[2],v=r[6],y=r[10];switch(t){case"XYZ":this._y=Math.asin($t(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-m,y),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(v,h),this._z=0);break;case"YXZ":this._x=Math.asin(-$t(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(c,y),this._z=Math.atan2(d,h)):(this._y=Math.atan2(-g,s),this._z=0);break;case"ZXY":this._x=Math.asin($t(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-g,y),this._z=Math.atan2(-a,h)):(this._y=0,this._z=Math.atan2(d,s));break;case"ZYX":this._y=Math.asin(-$t(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(v,y),this._z=Math.atan2(d,s)):(this._x=0,this._z=Math.atan2(-a,h));break;case"YZX":this._z=Math.asin($t(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-m,h),this._y=Math.atan2(-g,s)):(this._x=0,this._y=Math.atan2(c,y));break;case"XZY":this._z=Math.asin(-$t(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(v,h),this._y=Math.atan2(c,s)):(this._x=Math.atan2(-m,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return TE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(TE,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return bE.setFromEuler(this),this.setFromQuaternion(bE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}gs.DEFAULT_ORDER="XYZ";class Ou{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let DF=0;const CE=new q,hd=new dr,Oa=new Wt,kg=new q,hp=new q,OF=new q,UF=new dr,AE=new q(1,0,0),RE=new q(0,1,0),PE=new q(0,0,1),IE={type:"added"},kF={type:"removed"},pd={type:"childadded",child:null},Rx={type:"childremoved",child:null};class Mn extends $o{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:DF++}),this.uuid=ms(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Mn.DEFAULT_UP.clone();const e=new q,t=new gs,n=new dr,r=new q(1,1,1);function s(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Wt},normalMatrix:{value:new Jt}}),this.matrix=new Wt,this.matrixWorld=new Wt,this.matrixAutoUpdate=Mn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Mn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Ou,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return hd.setFromAxisAngle(e,t),this.quaternion.multiply(hd),this}rotateOnWorldAxis(e,t){return hd.setFromAxisAngle(e,t),this.quaternion.premultiply(hd),this}rotateX(e){return this.rotateOnAxis(AE,e)}rotateY(e){return this.rotateOnAxis(RE,e)}rotateZ(e){return this.rotateOnAxis(PE,e)}translateOnAxis(e,t){return CE.copy(e).applyQuaternion(this.quaternion),this.position.add(CE.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(AE,e)}translateY(e){return this.translateOnAxis(RE,e)}translateZ(e){return this.translateOnAxis(PE,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Oa.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?kg.copy(e):kg.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),hp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Oa.lookAt(hp,kg,this.up):Oa.lookAt(kg,hp,this.up),this.quaternion.setFromRotationMatrix(Oa),r&&(Oa.extractRotation(r.matrixWorld),hd.setFromRotationMatrix(Oa),this.quaternion.premultiply(hd.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(IE),pd.child=e,this.dispatchEvent(pd),pd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(kF),Rx.child=e,this.dispatchEvent(Rx),Rx.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Oa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Oa.multiply(e.parent.matrixWorld)),e.applyMatrix4(Oa),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(IE),pd.child=e,this.dispatchEvent(pd),pd.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const a=this.children[n].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hp,e,OF),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hp,UF,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(c=>({boxInitialized:c.boxInitialized,boxMin:c.box.min.toArray(),boxMax:c.box.max.toArray(),sphereInitialized:c.sphereInitialized,sphereRadius:c.sphere.radius,sphereCenter:c.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(c,d){return c[d.uuid]===void 0&&(c[d.uuid]=d.toJSON(e)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const d=c.shapes;if(Array.isArray(d))for(let h=0,m=d.length;h<m;h++){const g=d[h];s(e.shapes,g)}else s(e.shapes,d)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let d=0,h=this.material.length;d<h;d++)c.push(s(e.materials,this.material[d]));r.material=c}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let c=0;c<this.children.length;c++)r.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let c=0;c<this.animations.length;c++){const d=this.animations[c];r.animations.push(s(e.animations,d))}}if(t){const c=a(e.geometries),d=a(e.materials),h=a(e.textures),m=a(e.images),g=a(e.shapes),v=a(e.skeletons),y=a(e.animations),M=a(e.nodes);c.length>0&&(n.geometries=c),d.length>0&&(n.materials=d),h.length>0&&(n.textures=h),m.length>0&&(n.images=m),g.length>0&&(n.shapes=g),v.length>0&&(n.skeletons=v),y.length>0&&(n.animations=y),M.length>0&&(n.nodes=M)}return n.object=r,n;function a(c){const d=[];for(const h in c){const m=c[h];delete m.metadata,d.push(m)}return d}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}Mn.DEFAULT_UP=new q(0,1,0);Mn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Mn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const oo=new q,Ua=new q,Px=new q,ka=new q,md=new q,gd=new q,NE=new q,Ix=new q,Nx=new q,Lx=new q,Dx=new wn,Ox=new wn,Ux=new wn;class Zr{constructor(e=new q,t=new q,n=new q){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),oo.subVectors(e,t),r.cross(oo);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){oo.subVectors(r,t),Ua.subVectors(n,t),Px.subVectors(e,t);const a=oo.dot(oo),c=oo.dot(Ua),d=oo.dot(Px),h=Ua.dot(Ua),m=Ua.dot(Px),g=a*h-c*c;if(g===0)return s.set(0,0,0),null;const v=1/g,y=(h*d-c*m)*v,M=(a*m-c*d)*v;return s.set(1-y-M,M,y)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,ka)===null?!1:ka.x>=0&&ka.y>=0&&ka.x+ka.y<=1}static getInterpolation(e,t,n,r,s,a,c,d){return this.getBarycoord(e,t,n,r,ka)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(s,ka.x),d.addScaledVector(a,ka.y),d.addScaledVector(c,ka.z),d)}static getInterpolatedAttribute(e,t,n,r,s,a){return Dx.setScalar(0),Ox.setScalar(0),Ux.setScalar(0),Dx.fromBufferAttribute(e,t),Ox.fromBufferAttribute(e,n),Ux.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(Dx,s.x),a.addScaledVector(Ox,s.y),a.addScaledVector(Ux,s.z),a}static isFrontFacing(e,t,n,r){return oo.subVectors(n,t),Ua.subVectors(e,t),oo.cross(Ua).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return oo.subVectors(this.c,this.b),Ua.subVectors(this.a,this.b),oo.cross(Ua).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Zr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Zr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,s){return Zr.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return Zr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Zr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let a,c;md.subVectors(r,n),gd.subVectors(s,n),Ix.subVectors(e,n);const d=md.dot(Ix),h=gd.dot(Ix);if(d<=0&&h<=0)return t.copy(n);Nx.subVectors(e,r);const m=md.dot(Nx),g=gd.dot(Nx);if(m>=0&&g<=m)return t.copy(r);const v=d*g-m*h;if(v<=0&&d>=0&&m<=0)return a=d/(d-m),t.copy(n).addScaledVector(md,a);Lx.subVectors(e,s);const y=md.dot(Lx),M=gd.dot(Lx);if(M>=0&&y<=M)return t.copy(s);const E=y*h-d*M;if(E<=0&&h>=0&&M<=0)return c=h/(h-M),t.copy(n).addScaledVector(gd,c);const w=m*M-y*g;if(w<=0&&g-m>=0&&y-M>=0)return NE.subVectors(s,r),c=(g-m)/(g-m+(y-M)),t.copy(r).addScaledVector(NE,c);const S=1/(w+E+v);return a=E*S,c=v*S,t.copy(n).addScaledVector(md,a).addScaledVector(gd,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const GR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Fl={h:0,s:0,l:0},Fg={h:0,s:0,l:0};function kx(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class vt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Kr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,xn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=xn.workingColorSpace){return this.r=e,this.g=t,this.b=n,xn.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=xn.workingColorSpace){if(e=ew(e,1),t=$t(t,0,1),n=$t(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,a=2*n-s;this.r=kx(a,s,e+1/3),this.g=kx(a,s,e),this.b=kx(a,s,e-1/3)}return xn.toWorkingColorSpace(this,r),this}setStyle(e,t=Kr){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],c=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Kr){const n=GR[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ya(e.r),this.g=Ya(e.g),this.b=Ya(e.b),this}copyLinearToSRGB(e){return this.r=Vd(e.r),this.g=Vd(e.g),this.b=Vd(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Kr){return xn.fromWorkingColorSpace(cr.copy(this),e),Math.round($t(cr.r*255,0,255))*65536+Math.round($t(cr.g*255,0,255))*256+Math.round($t(cr.b*255,0,255))}getHexString(e=Kr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=xn.workingColorSpace){xn.fromWorkingColorSpace(cr.copy(this),t);const n=cr.r,r=cr.g,s=cr.b,a=Math.max(n,r,s),c=Math.min(n,r,s);let d,h;const m=(c+a)/2;if(c===a)d=0,h=0;else{const g=a-c;switch(h=m<=.5?g/(a+c):g/(2-a-c),a){case n:d=(r-s)/g+(r<s?6:0);break;case r:d=(s-n)/g+2;break;case s:d=(n-r)/g+4;break}d/=6}return e.h=d,e.s=h,e.l=m,e}getRGB(e,t=xn.workingColorSpace){return xn.fromWorkingColorSpace(cr.copy(this),t),e.r=cr.r,e.g=cr.g,e.b=cr.b,e}getStyle(e=Kr){xn.fromWorkingColorSpace(cr.copy(this),e);const t=cr.r,n=cr.g,r=cr.b;return e!==Kr?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(Fl),this.setHSL(Fl.h+e,Fl.s+t,Fl.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Fl),e.getHSL(Fg);const n=kp(Fl.h,Fg.h,t),r=kp(Fl.s,Fg.s,t),s=kp(Fl.l,Fg.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const cr=new vt;vt.NAMES=GR;let FF=0;class mr extends $o{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:FF++}),this.uuid=ms(),this.name="",this.type="Material",this.blending=Nu,this.side=Za,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Vv,this.blendDst=Hv,this.blendEquation=jl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new vt(0,0,0),this.blendAlpha=0,this.depthFunc=Hu,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=$_,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=yu,this.stencilZFail=yu,this.stencilZPass=yu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Nu&&(n.blending=this.blending),this.side!==Za&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==Vv&&(n.blendSrc=this.blendSrc),this.blendDst!==Hv&&(n.blendDst=this.blendDst),this.blendEquation!==jl&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Hu&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==$_&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==yu&&(n.stencilFail=this.stencilFail),this.stencilZFail!==yu&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==yu&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){const a=[];for(const c in s){const d=s[c];delete d.metadata,a.push(d)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(n.textures=s),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class fc extends mr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gs,this.combine=vm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Wa=zF();function zF(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),r=new Uint32Array(512);for(let d=0;d<256;++d){const h=d-127;h<-27?(n[d]=0,n[d|256]=32768,r[d]=24,r[d|256]=24):h<-14?(n[d]=1024>>-h-14,n[d|256]=1024>>-h-14|32768,r[d]=-h-1,r[d|256]=-h-1):h<=15?(n[d]=h+15<<10,n[d|256]=h+15<<10|32768,r[d]=13,r[d|256]=13):h<128?(n[d]=31744,n[d|256]=64512,r[d]=24,r[d|256]=24):(n[d]=31744,n[d|256]=64512,r[d]=13,r[d|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),c=new Uint32Array(64);for(let d=1;d<1024;++d){let h=d<<13,m=0;for(;(h&8388608)===0;)h<<=1,m-=8388608;h&=-8388609,m+=947912704,s[d]=h|m}for(let d=1024;d<2048;++d)s[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)a[d]=d<<23;a[31]=1199570944,a[32]=2147483648;for(let d=33;d<63;++d)a[d]=2147483648+(d-32<<23);a[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(c[d]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:c}}function qr(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=$t(i,-65504,65504),Wa.floatView[0]=i;const e=Wa.uint32View[0],t=e>>23&511;return Wa.baseTable[t]+((e&8388607)>>Wa.shiftTable[t])}function Ap(i){const e=i>>10;return Wa.uint32View[0]=Wa.mantissaTable[Wa.offsetTable[e]+(i&1023)]+Wa.exponentTable[e],Wa.floatView[0]}const BF={toHalfFloat:qr,fromHalfFloat:Ap},xi=new q,zg=new ke;class Un{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=Jp,this.updateRanges=[],this.gpuType=$r,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)zg.fromBufferAttribute(this,t),zg.applyMatrix3(e),this.setXY(t,zg.x,zg.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)xi.fromBufferAttribute(this,t),xi.applyMatrix3(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)xi.fromBufferAttribute(this,t),xi.applyMatrix4(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)xi.fromBufferAttribute(this,t),xi.applyNormalMatrix(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)xi.fromBufferAttribute(this,t),xi.transformDirection(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Pr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=rn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Pr(t,this.array)),t}setX(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Pr(t,this.array)),t}setY(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Pr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Pr(t,this.array)),t}setW(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),n=rn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),n=rn(n,this.array),r=rn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),n=rn(n,this.array),r=rn(r,this.array),s=rn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Jp&&(e.usage=this.usage),e}}class VF extends Un{constructor(e,t,n){super(new Int8Array(e),t,n)}}class HF extends Un{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class GF extends Un{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class WF extends Un{constructor(e,t,n){super(new Int16Array(e),t,n)}}class nw extends Un{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class jF extends Un{constructor(e,t,n){super(new Int32Array(e),t,n)}}class iw extends Un{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class XF extends Un{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Ap(this.array[e*this.itemSize]);return this.normalized&&(t=Pr(t,this.array)),t}setX(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize]=qr(t),this}getY(e){let t=Ap(this.array[e*this.itemSize+1]);return this.normalized&&(t=Pr(t,this.array)),t}setY(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+1]=qr(t),this}getZ(e){let t=Ap(this.array[e*this.itemSize+2]);return this.normalized&&(t=Pr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+2]=qr(t),this}getW(e){let t=Ap(this.array[e*this.itemSize+3]);return this.normalized&&(t=Pr(t,this.array)),t}setW(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+3]=qr(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),n=rn(n,this.array)),this.array[e+0]=qr(t),this.array[e+1]=qr(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),n=rn(n,this.array),r=rn(r,this.array)),this.array[e+0]=qr(t),this.array[e+1]=qr(n),this.array[e+2]=qr(r),this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),n=rn(n,this.array),r=rn(r,this.array),s=rn(s,this.array)),this.array[e+0]=qr(t),this.array[e+1]=qr(n),this.array[e+2]=qr(r),this.array[e+3]=qr(s),this}}class Pt extends Un{constructor(e,t,n){super(new Float32Array(e),t,n)}}let YF=0;const Is=new Wt,Fx=new Mn,vd=new q,ds=new Nr,pp=new Nr,Hi=new q;class un extends $o{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:YF++}),this.uuid=ms(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(zR(e)?iw:nw)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Jt().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Is.makeRotationFromQuaternion(e),this.applyMatrix4(Is),this}rotateX(e){return Is.makeRotationX(e),this.applyMatrix4(Is),this}rotateY(e){return Is.makeRotationY(e),this.applyMatrix4(Is),this}rotateZ(e){return Is.makeRotationZ(e),this.applyMatrix4(Is),this}translate(e,t,n){return Is.makeTranslation(e,t,n),this.applyMatrix4(Is),this}scale(e,t,n){return Is.makeScale(e,t,n),this.applyMatrix4(Is),this}lookAt(e){return Fx.lookAt(e),Fx.updateMatrix(),this.applyMatrix4(Fx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(vd).negate(),this.translate(vd.x,vd.y,vd.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];n.push(a.x,a.y,a.z||0)}this.setAttribute("position",new Pt(n,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Nr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new q(-1/0,-1/0,-1/0),new q(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const s=t[n];ds.setFromBufferAttribute(s),this.morphTargetsRelative?(Hi.addVectors(this.boundingBox.min,ds.min),this.boundingBox.expandByPoint(Hi),Hi.addVectors(this.boundingBox.max,ds.max),this.boundingBox.expandByPoint(Hi)):(this.boundingBox.expandByPoint(ds.min),this.boundingBox.expandByPoint(ds.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new hr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new q,1/0);return}if(e){const n=this.boundingSphere.center;if(ds.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const c=t[s];pp.setFromBufferAttribute(c),this.morphTargetsRelative?(Hi.addVectors(ds.min,pp.min),ds.expandByPoint(Hi),Hi.addVectors(ds.max,pp.max),ds.expandByPoint(Hi)):(ds.expandByPoint(pp.min),ds.expandByPoint(pp.max))}ds.getCenter(n);let r=0;for(let s=0,a=e.count;s<a;s++)Hi.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(Hi));if(t)for(let s=0,a=t.length;s<a;s++){const c=t[s],d=this.morphTargetsRelative;for(let h=0,m=c.count;h<m;h++)Hi.fromBufferAttribute(c,h),d&&(vd.fromBufferAttribute(e,h),Hi.add(vd)),r=Math.max(r,n.distanceToSquared(Hi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Un(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),c=[],d=[];for(let z=0;z<n.count;z++)c[z]=new q,d[z]=new q;const h=new q,m=new q,g=new q,v=new ke,y=new ke,M=new ke,E=new q,w=new q;function S(z,k,L){h.fromBufferAttribute(n,z),m.fromBufferAttribute(n,k),g.fromBufferAttribute(n,L),v.fromBufferAttribute(s,z),y.fromBufferAttribute(s,k),M.fromBufferAttribute(s,L),m.sub(h),g.sub(h),y.sub(v),M.sub(v);const G=1/(y.x*M.y-M.x*y.y);isFinite(G)&&(E.copy(m).multiplyScalar(M.y).addScaledVector(g,-y.y).multiplyScalar(G),w.copy(g).multiplyScalar(y.x).addScaledVector(m,-M.x).multiplyScalar(G),c[z].add(E),c[k].add(E),c[L].add(E),d[z].add(w),d[k].add(w),d[L].add(w))}let A=this.groups;A.length===0&&(A=[{start:0,count:e.count}]);for(let z=0,k=A.length;z<k;++z){const L=A[z],G=L.start,J=L.count;for(let Q=G,ce=G+J;Q<ce;Q+=3)S(e.getX(Q+0),e.getX(Q+1),e.getX(Q+2))}const C=new q,R=new q,O=new q,U=new q;function F(z){O.fromBufferAttribute(r,z),U.copy(O);const k=c[z];C.copy(k),C.sub(O.multiplyScalar(O.dot(k))).normalize(),R.crossVectors(U,k);const G=R.dot(d[z])<0?-1:1;a.setXYZW(z,C.x,C.y,C.z,G)}for(let z=0,k=A.length;z<k;++z){const L=A[z],G=L.start,J=L.count;for(let Q=G,ce=G+J;Q<ce;Q+=3)F(e.getX(Q+0)),F(e.getX(Q+1)),F(e.getX(Q+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Un(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let v=0,y=n.count;v<y;v++)n.setXYZ(v,0,0,0);const r=new q,s=new q,a=new q,c=new q,d=new q,h=new q,m=new q,g=new q;if(e)for(let v=0,y=e.count;v<y;v+=3){const M=e.getX(v+0),E=e.getX(v+1),w=e.getX(v+2);r.fromBufferAttribute(t,M),s.fromBufferAttribute(t,E),a.fromBufferAttribute(t,w),m.subVectors(a,s),g.subVectors(r,s),m.cross(g),c.fromBufferAttribute(n,M),d.fromBufferAttribute(n,E),h.fromBufferAttribute(n,w),c.add(m),d.add(m),h.add(m),n.setXYZ(M,c.x,c.y,c.z),n.setXYZ(E,d.x,d.y,d.z),n.setXYZ(w,h.x,h.y,h.z)}else for(let v=0,y=t.count;v<y;v+=3)r.fromBufferAttribute(t,v+0),s.fromBufferAttribute(t,v+1),a.fromBufferAttribute(t,v+2),m.subVectors(a,s),g.subVectors(r,s),m.cross(g),n.setXYZ(v+0,m.x,m.y,m.z),n.setXYZ(v+1,m.x,m.y,m.z),n.setXYZ(v+2,m.x,m.y,m.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Hi.fromBufferAttribute(e,t),Hi.normalize(),e.setXYZ(t,Hi.x,Hi.y,Hi.z)}toNonIndexed(){function e(c,d){const h=c.array,m=c.itemSize,g=c.normalized,v=new h.constructor(d.length*m);let y=0,M=0;for(let E=0,w=d.length;E<w;E++){c.isInterleavedBufferAttribute?y=d[E]*c.data.stride+c.offset:y=d[E]*m;for(let S=0;S<m;S++)v[M++]=h[y++]}return new Un(v,m,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new un,n=this.index.array,r=this.attributes;for(const c in r){const d=r[c],h=e(d,n);t.setAttribute(c,h)}const s=this.morphAttributes;for(const c in s){const d=[],h=s[c];for(let m=0,g=h.length;m<g;m++){const v=h[m],y=e(v,n);d.push(y)}t.morphAttributes[c]=d}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let c=0,d=a.length;c<d;c++){const h=a[c];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const h in d)d[h]!==void 0&&(e[h]=d[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const d in n){const h=n[d];e.data.attributes[d]=h.toJSON(e.data)}const r={};let s=!1;for(const d in this.morphAttributes){const h=this.morphAttributes[d],m=[];for(let g=0,v=h.length;g<v;g++){const y=h[g];m.push(y.toJSON(e.data))}m.length>0&&(r[d]=m,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const r=e.attributes;for(const h in r){const m=r[h];this.setAttribute(h,m.clone(t))}const s=e.morphAttributes;for(const h in s){const m=[],g=s[h];for(let v=0,y=g.length;v<y;v++)m.push(g[v].clone(t));this.morphAttributes[h]=m}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let h=0,m=a.length;h<m;h++){const g=a[h];this.addGroup(g.start,g.count,g.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const LE=new Wt,nu=new Ku,Bg=new hr,DE=new q,Vg=new q,Hg=new q,Gg=new q,zx=new q,Wg=new q,OE=new q,jg=new q;class _i extends Mn{constructor(e=new un,t=new fc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const c=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const c=this.morphTargetInfluences;if(s&&c){Wg.set(0,0,0);for(let d=0,h=s.length;d<h;d++){const m=c[d],g=s[d];m!==0&&(zx.fromBufferAttribute(g,e),a?Wg.addScaledVector(zx,m):Wg.addScaledVector(zx.sub(t),m))}t.add(Wg)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Bg.copy(n.boundingSphere),Bg.applyMatrix4(s),nu.copy(e.ray).recast(e.near),!(Bg.containsPoint(nu.origin)===!1&&(nu.intersectSphere(Bg,DE)===null||nu.origin.distanceToSquared(DE)>(e.far-e.near)**2))&&(LE.copy(s).invert(),nu.copy(e.ray).applyMatrix4(LE),!(n.boundingBox!==null&&nu.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,nu)))}_computeIntersections(e,t,n){let r;const s=this.geometry,a=this.material,c=s.index,d=s.attributes.position,h=s.attributes.uv,m=s.attributes.uv1,g=s.attributes.normal,v=s.groups,y=s.drawRange;if(c!==null)if(Array.isArray(a))for(let M=0,E=v.length;M<E;M++){const w=v[M],S=a[w.materialIndex],A=Math.max(w.start,y.start),C=Math.min(c.count,Math.min(w.start+w.count,y.start+y.count));for(let R=A,O=C;R<O;R+=3){const U=c.getX(R),F=c.getX(R+1),z=c.getX(R+2);r=Xg(this,S,e,n,h,m,g,U,F,z),r&&(r.faceIndex=Math.floor(R/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const M=Math.max(0,y.start),E=Math.min(c.count,y.start+y.count);for(let w=M,S=E;w<S;w+=3){const A=c.getX(w),C=c.getX(w+1),R=c.getX(w+2);r=Xg(this,a,e,n,h,m,g,A,C,R),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}else if(d!==void 0)if(Array.isArray(a))for(let M=0,E=v.length;M<E;M++){const w=v[M],S=a[w.materialIndex],A=Math.max(w.start,y.start),C=Math.min(d.count,Math.min(w.start+w.count,y.start+y.count));for(let R=A,O=C;R<O;R+=3){const U=R,F=R+1,z=R+2;r=Xg(this,S,e,n,h,m,g,U,F,z),r&&(r.faceIndex=Math.floor(R/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const M=Math.max(0,y.start),E=Math.min(d.count,y.start+y.count);for(let w=M,S=E;w<S;w+=3){const A=w,C=w+1,R=w+2;r=Xg(this,a,e,n,h,m,g,A,C,R),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}}}function qF(i,e,t,n,r,s,a,c){let d;if(e.side===Ir?d=n.intersectTriangle(a,s,r,!0,c):d=n.intersectTriangle(r,s,a,e.side===Za,c),d===null)return null;jg.copy(c),jg.applyMatrix4(i.matrixWorld);const h=t.ray.origin.distanceTo(jg);return h<t.near||h>t.far?null:{distance:h,point:jg.clone(),object:i}}function Xg(i,e,t,n,r,s,a,c,d,h){i.getVertexPosition(c,Vg),i.getVertexPosition(d,Hg),i.getVertexPosition(h,Gg);const m=qF(i,e,t,n,Vg,Hg,Gg,OE);if(m){const g=new q;Zr.getBarycoord(OE,Vg,Hg,Gg,g),r&&(m.uv=Zr.getInterpolatedAttribute(r,c,d,h,g,new ke)),s&&(m.uv1=Zr.getInterpolatedAttribute(s,c,d,h,g,new ke)),a&&(m.normal=Zr.getInterpolatedAttribute(a,c,d,h,g,new q),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const v={a:c,b:d,c:h,normal:new q,materialIndex:0};Zr.getNormal(Vg,Hg,Gg,v.normal),m.face=v,m.barycoord=g}return m}class Zu extends un{constructor(e=1,t=1,n=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:a};const c=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const d=[],h=[],m=[],g=[];let v=0,y=0;M("z","y","x",-1,-1,n,t,e,a,s,0),M("z","y","x",1,-1,n,t,-e,a,s,1),M("x","z","y",1,1,e,n,t,r,a,2),M("x","z","y",1,-1,e,n,-t,r,a,3),M("x","y","z",1,-1,e,t,n,r,s,4),M("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(d),this.setAttribute("position",new Pt(h,3)),this.setAttribute("normal",new Pt(m,3)),this.setAttribute("uv",new Pt(g,2));function M(E,w,S,A,C,R,O,U,F,z,k){const L=R/F,G=O/z,J=R/2,Q=O/2,ce=U/2,ge=F+1,ne=z+1;let de=0,B=0;const ie=new q;for(let te=0;te<ne;te++){const X=te*G-Q;for(let fe=0;fe<ge;fe++){const Pe=fe*L-J;ie[E]=Pe*A,ie[w]=X*C,ie[S]=ce,h.push(ie.x,ie.y,ie.z),ie[E]=0,ie[w]=0,ie[S]=U>0?1:-1,m.push(ie.x,ie.y,ie.z),g.push(fe/F),g.push(1-te/z),de+=1}}for(let te=0;te<z;te++)for(let X=0;X<F;X++){const fe=v+X+ge*te,Pe=v+X+ge*(te+1),le=v+(X+1)+ge*(te+1),Ee=v+(X+1)+ge*te;d.push(fe,Pe,Ee),d.push(Pe,le,Ee),B+=6}c.addGroup(y,B,k),y+=B,v+=de}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Jd(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function Cr(i){const e={};for(let t=0;t<i.length;t++){const n=Jd(i[t]);for(const r in n)e[r]=n[r]}return e}function KF(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function WR(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:xn.workingColorSpace}const jR={clone:Jd,merge:Cr};var ZF=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,$F=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class yo extends mr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=ZF,this.fragmentShader=$F,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Jd(e.uniforms),this.uniformsGroups=KF(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class xm extends Mn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Wt,this.projectionMatrix=new Wt,this.projectionMatrixInverse=new Wt,this.coordinateSystem=Wo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const zl=new q,UE=new ke,kE=new ke;class di extends xm{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Qd*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Du*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Qd*2*Math.atan(Math.tan(Du*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){zl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(zl.x,zl.y).multiplyScalar(-e/zl.z),zl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(zl.x,zl.y).multiplyScalar(-e/zl.z)}getViewSize(e,t){return this.getViewBounds(e,UE,kE),t.subVectors(kE,UE)}setViewOffset(e,t,n,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Du*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const d=a.fullWidth,h=a.fullHeight;s+=a.offsetX*r/d,t-=a.offsetY*n/h,r*=a.width/d,n*=a.height/h}const c=this.filmOffset;c!==0&&(s+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const yd=-90,xd=1;class XR extends Mn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new di(yd,xd,e,t);r.layers=this.layers,this.add(r);const s=new di(yd,xd,e,t);s.layers=this.layers,this.add(s);const a=new di(yd,xd,e,t);a.layers=this.layers,this.add(a);const c=new di(yd,xd,e,t);c.layers=this.layers,this.add(c);const d=new di(yd,xd,e,t);d.layers=this.layers,this.add(d);const h=new di(yd,xd,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,a,c,d]=t;for(const h of t)this.remove(h);if(e===Wo)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(e===em)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,c,d,h,m]=this.children,g=e.getRenderTarget(),v=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),M=e.xr.enabled;e.xr.enabled=!1;const E=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,s),e.setRenderTarget(n,1,r),e.render(t,a),e.setRenderTarget(n,2,r),e.render(t,c),e.setRenderTarget(n,3,r),e.render(t,d),e.setRenderTarget(n,4,r),e.render(t,h),n.texture.generateMipmaps=E,e.setRenderTarget(n,5,r),e.render(t,m),e.setRenderTarget(g,v,y),e.xr.enabled=M,n.texture.needsPMREMUpdate=!0}}class _m extends ai{constructor(e,t,n,r,s,a,c,d,h,m){e=e!==void 0?e:[],t=t!==void 0?t:$a,super(e,t,n,r,s,a,c,d,h,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class YR extends vo{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new _m(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Pi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Zu(5,5,5),s=new yo({name:"CubemapFromEquirect",uniforms:Jd(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Ir,blending:Xa});s.uniforms.tEquirect.value=t;const a=new _i(r,s),c=t.minFilter;return t.minFilter===Go&&(t.minFilter=Pi),new XR(1,10,this).update(e,a),t.minFilter=c,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(s)}}class o0{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new vt(e),this.density=t}clone(){return new o0(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class a0{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new vt(e),this.near=t,this.far=n}clone(){return new a0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class rw extends Mn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new gs,this.environmentIntensity=1,this.environmentRotation=new gs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class l0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Jp,this.updateRanges=[],this.version=0,this.uuid=ms()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ms()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ms()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const br=new q;class Xu{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)br.fromBufferAttribute(this,t),br.applyMatrix4(e),this.setXYZ(t,br.x,br.y,br.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)br.fromBufferAttribute(this,t),br.applyNormalMatrix(e),this.setXYZ(t,br.x,br.y,br.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)br.fromBufferAttribute(this,t),br.transformDirection(e),this.setXYZ(t,br.x,br.y,br.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Pr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=rn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=rn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Pr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Pr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Pr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Pr(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=rn(t,this.array),n=rn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=rn(t,this.array),n=rn(n,this.array),r=rn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=rn(t,this.array),n=rn(n,this.array),r=rn(r,this.array),s=rn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Un(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Xu(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class sw extends mr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new vt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let _d;const mp=new q,Sd=new q,wd=new q,Md=new ke,gp=new ke,qR=new Wt,Yg=new q,vp=new q,qg=new q,FE=new ke,Bx=new ke,zE=new ke;class KR extends Mn{constructor(e=new sw){if(super(),this.isSprite=!0,this.type="Sprite",_d===void 0){_d=new un;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new l0(t,5);_d.setIndex([0,1,2,0,2,3]),_d.setAttribute("position",new Xu(n,3,0,!1)),_d.setAttribute("uv",new Xu(n,2,3,!1))}this.geometry=_d,this.material=e,this.center=new ke(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Sd.setFromMatrixScale(this.matrixWorld),qR.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),wd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Sd.multiplyScalar(-wd.z);const n=this.material.rotation;let r,s;n!==0&&(s=Math.cos(n),r=Math.sin(n));const a=this.center;Kg(Yg.set(-.5,-.5,0),wd,a,Sd,r,s),Kg(vp.set(.5,-.5,0),wd,a,Sd,r,s),Kg(qg.set(.5,.5,0),wd,a,Sd,r,s),FE.set(0,0),Bx.set(1,0),zE.set(1,1);let c=e.ray.intersectTriangle(Yg,vp,qg,!1,mp);if(c===null&&(Kg(vp.set(-.5,.5,0),wd,a,Sd,r,s),Bx.set(0,1),c=e.ray.intersectTriangle(Yg,qg,vp,!1,mp),c===null))return;const d=e.ray.origin.distanceTo(mp);d<e.near||d>e.far||t.push({distance:d,point:mp.clone(),uv:Zr.getInterpolation(mp,Yg,vp,qg,FE,Bx,zE,new ke),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Kg(i,e,t,n,r,s){Md.subVectors(i,t).addScalar(.5).multiply(n),r!==void 0?(gp.x=s*Md.x-r*Md.y,gp.y=r*Md.x+s*Md.y):gp.copy(Md),i.copy(e),i.x+=gp.x,i.y+=gp.y,i.applyMatrix4(qR)}const Zg=new q,BE=new q;class ZR extends Mn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const r=t.splice(n,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Zg.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Zg);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Zg.setFromMatrixPosition(e.matrixWorld),BE.setFromMatrixPosition(this.matrixWorld);const n=Zg.distanceTo(BE)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),n>=a)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,s=n.length;r<s;r++){const a=n[r];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const VE=new q,HE=new wn,GE=new wn,QF=new q,WE=new Wt,$g=new q,Vx=new hr,jE=new Wt,Hx=new Ku;class $R extends _i{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Z_,this.bindMatrix=new Wt,this.bindMatrixInverse=new Wt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Nr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,$g),this.boundingBox.expandByPoint($g)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new hr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,$g),this.boundingSphere.expandByPoint($g)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Vx.copy(this.boundingSphere),Vx.applyMatrix4(r),e.ray.intersectsSphere(Vx)!==!1&&(jE.copy(r).invert(),Hx.copy(e.ray).applyMatrix4(jE),!(this.boundingBox!==null&&Hx.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Hx)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new wn,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Z_?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===TR?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;HE.fromBufferAttribute(r.attributes.skinIndex,e),GE.fromBufferAttribute(r.attributes.skinWeight,e),VE.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=GE.getComponent(s);if(a!==0){const c=HE.getComponent(s);WE.multiplyMatrices(n.bones[c].matrixWorld,n.boneInverses[c]),t.addScaledVector(QF.copy(VE).applyMatrix4(WE),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class ow extends Mn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Yo extends ai{constructor(e=null,t=1,n=1,r,s,a,c,d,h=Ji,m=Ji,g,v){super(null,a,c,d,h,m,r,s,g,v),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const XE=new Wt,JF=new Wt;class c0{constructor(e=[],t=[]){this.uuid=ms(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Wt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Wt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const c=e[s]?e[s].matrixWorld:JF;XE.multiplyMatrices(c,t[s]),XE.toArray(n,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new c0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Yo(t,e,e,fr,$r);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new ow),this.bones.push(a),this.boneInverses.push(new Wt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const a=t[r];e.bones.push(a.uuid);const c=n[r];e.boneInverses.push(c.toArray())}return e}}class eh extends Un{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Ed=new Wt,YE=new Wt,Qg=[],qE=new Nr,ez=new Wt,yp=new _i,xp=new hr;class QR extends _i{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new eh(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,ez)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Nr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Ed),qE.copy(e.boundingBox).applyMatrix4(Ed),this.boundingBox.union(qE)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new hr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Ed),xp.copy(e.boundingSphere).applyMatrix4(Ed),this.boundingSphere.union(xp)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=n.length+1,a=e*s+1;for(let c=0;c<n.length;c++)n[c]=r[a+c]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(yp.geometry=this.geometry,yp.material=this.material,yp.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),xp.copy(this.boundingSphere),xp.applyMatrix4(n),e.ray.intersectsSphere(xp)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Ed),YE.multiplyMatrices(n,Ed),yp.matrixWorld=YE,yp.raycast(e,Qg);for(let a=0,c=Qg.length;a<c;a++){const d=Qg[a];d.instanceId=s,d.object=this,t.push(d)}Qg.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new eh(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;this.morphTexture===null&&(this.morphTexture=new Yo(new Float32Array(r*this.count),r,this.count,t0,$r));const s=this.morphTexture.source.data.data;let a=0;for(let h=0;h<n.length;h++)a+=n[h];const c=this.geometry.morphTargetsRelative?1:1-a,d=r*e;s[d]=c,s.set(n,d+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const Gx=new q,tz=new q,nz=new Jt;class Va{constructor(e=new q(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Gx.subVectors(n,t).cross(tz.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Gx),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||nz.getNormalMatrix(e),r=this.coplanarPoint(Gx).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const iu=new hr,Jg=new q;class Sm{constructor(e=new Va,t=new Va,n=new Va,r=new Va,s=new Va,a=new Va){this.planes=[e,t,n,r,s,a]}set(e,t,n,r,s,a){const c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(n),c[3].copy(r),c[4].copy(s),c[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Wo){const n=this.planes,r=e.elements,s=r[0],a=r[1],c=r[2],d=r[3],h=r[4],m=r[5],g=r[6],v=r[7],y=r[8],M=r[9],E=r[10],w=r[11],S=r[12],A=r[13],C=r[14],R=r[15];if(n[0].setComponents(d-s,v-h,w-y,R-S).normalize(),n[1].setComponents(d+s,v+h,w+y,R+S).normalize(),n[2].setComponents(d+a,v+m,w+M,R+A).normalize(),n[3].setComponents(d-a,v-m,w-M,R-A).normalize(),n[4].setComponents(d-c,v-g,w-E,R-C).normalize(),t===Wo)n[5].setComponents(d+c,v+g,w+E,R+C).normalize();else if(t===em)n[5].setComponents(c,g,E,C).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),iu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),iu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(iu)}intersectsSprite(e){return iu.center.set(0,0,0),iu.radius=.7071067811865476,iu.applyMatrix4(e.matrixWorld),this.intersectsSphere(iu)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Jg.x=r.normal.x>0?e.max.x:e.min.x,Jg.y=r.normal.y>0?e.max.y:e.min.y,Jg.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Jg)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Wx(i,e){return i-e}function iz(i,e){return i.z-e.z}function rz(i,e){return e.z-i.z}class sz{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,r){const s=this.pool,a=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const c=s[this.index];a.push(c),this.index++,c.start=e,c.count=t,c.z=n,c.index=r}reset(){this.list.length=0,this.index=0}}const Yr=new Wt,oz=new vt(1,1,1),jx=new Sm,ev=new Nr,ru=new hr,_p=new q,KE=new q,az=new q,Xx=new sz,ur=new _i,tv=[];function lz(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const r=i.count;for(let s=0;s<r;s++)for(let a=0;a<n;a++)e.setComponent(s+t,a,i.getComponent(s,a))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function su(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class JR extends _i{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,n=t*2,r){super(new un,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Yo(t,e,e,fr,$r);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Yo(t,e,e,ym,Qa);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Yo(t,e,e,fr,$r);n.colorSpace=xn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const a=e.getAttribute(s),{array:c,itemSize:d,normalized:h}=a,m=new c.constructor(n*d),g=new Un(m,d,h);t.setAttribute(s,g)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new Un(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=e.getAttribute(n),s=t.getAttribute(n);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Nr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Yr),this.getBoundingBoxAt(s,ev).applyMatrix4(Yr),e.union(ev)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new hr);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Yr),this.getBoundingSphereAt(s,ru).applyMatrix4(Yr),e.union(ru)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(Wx),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=n):(r=this._instanceInfo.length,this._instanceInfo.push(n));const s=this._matricesTexture;Yr.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const a=this._colorsTexture;return a&&(oz.toArray(a.image.data,r*4),a.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const a=e.getIndex();if(a!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=n===-1?a.count:n),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let d;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(Wx),d=this._availableGeometryIds.shift(),s[d]=r):(d=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(d,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,d}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=n.getIndex()!==null,s=n.getIndex(),a=t.getIndex(),c=this._geometryInfo[e];if(r&&a.count>c.reservedIndexCount||t.attributes.position.count>c.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const d=c.vertexStart,h=c.reservedVertexCount;c.vertexCount=t.getAttribute("position").count;for(const m in n.attributes){const g=t.getAttribute(m),v=n.getAttribute(m);lz(g,v,d);const y=g.itemSize;for(let M=g.count,E=h;M<E;M++){const w=d+M;for(let S=0;S<y;S++)v.setComponent(w,S,0)}v.needsUpdate=!0,v.addUpdateRange(d*y,h*y)}if(r){const m=c.indexStart,g=c.reservedIndexCount;c.indexCount=t.getIndex().count;for(let v=0;v<a.count;v++)s.setX(m+v,d+a.getX(v));for(let v=a.count,y=g;v<y;v++)s.setX(m+v,d);s.needsUpdate=!0,s.addUpdateRange(m,c.reservedIndexCount)}return c.start=r?c.indexStart:c.vertexStart,c.count=r?c.indexCount:c.vertexCount,c.boundingBox=null,t.boundingBox!==null&&(c.boundingBox=t.boundingBox.clone()),c.boundingSphere=null,t.boundingSphere!==null&&(c.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let r=0,s=n.length;r<s;r++)n[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,r=n.map((a,c)=>c).sort((a,c)=>n[a].vertexStart-n[c].vertexStart),s=this.geometry;for(let a=0,c=n.length;a<c;a++){const d=r[a],h=n[d];if(h.active!==!1){if(s.index!==null){if(h.indexStart!==t){const{indexStart:m,vertexStart:g,reservedIndexCount:v}=h,y=s.index,M=y.array,E=e-g;for(let w=m;w<m+v;w++)M[w]=M[w]+E;y.array.copyWithin(t,m,m+v),y.addUpdateRange(t,v),h.indexStart=t}t+=h.reservedIndexCount}if(h.vertexStart!==e){const{vertexStart:m,reservedVertexCount:g}=h,v=s.attributes;for(const y in v){const M=v[y],{array:E,itemSize:w}=M;E.copyWithin(e*w,m*w,(m+g)*w),M.addUpdateRange(e*w,g*w)}h.vertexStart=e}e+=h.reservedVertexCount,h.start=s.index?h.indexStart:h.vertexStart,this._nextIndexStart=s.index?h.indexStart+h.reservedIndexCount:0,this._nextVertexStart=h.vertexStart+h.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new Nr,a=n.index,c=n.attributes.position;for(let d=r.start,h=r.start+r.count;d<h;d++){let m=d;a&&(m=a.getX(m)),s.expandByPoint(_p.fromBufferAttribute(c,m))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new hr;this.getBoundingBoxAt(e,ev),ev.getCenter(s.center);const a=n.index,c=n.attributes.position;let d=0;for(let h=r.start,m=r.start+r.count;h<m;h++){let g=h;a&&(g=a.getX(g)),_p.fromBufferAttribute(c,g),d=Math.max(d,s.center.distanceToSquared(_p))}s.radius=Math.sqrt(d),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(Wx);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);su(this._multiDrawCounts,r),su(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const a=this._indirectTexture,c=this._matricesTexture,d=this._colorsTexture;a.dispose(),this._initIndirectTexture(),su(a.image.data,this._indirectTexture.image.data),c.dispose(),this._initMatricesTexture(),su(c.image.data,this._matricesTexture.image.data),d&&(d.dispose(),this._initColorsTexture(),su(d.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(c=>c.active);if(Math.max(...n.map(c=>c.vertexStart+c.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(d=>d.indexStart+d.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new un,this._initializeGeometry(s));const a=this.geometry;s.index&&su(s.index.array,a.index.array);for(const c in s.attributes)su(s.attributes[c].array,a.attributes[c].array)}raycast(e,t){const n=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,a=this.geometry;ur.material=this.material,ur.geometry.index=a.index,ur.geometry.attributes=a.attributes,ur.geometry.boundingBox===null&&(ur.geometry.boundingBox=new Nr),ur.geometry.boundingSphere===null&&(ur.geometry.boundingSphere=new hr);for(let c=0,d=n.length;c<d;c++){if(!n[c].visible||!n[c].active)continue;const h=n[c].geometryIndex,m=r[h];ur.geometry.setDrawRange(m.start,m.count),this.getMatrixAt(c,ur.matrixWorld).premultiply(s),this.getBoundingBoxAt(h,ur.geometry.boundingBox),this.getBoundingSphereAt(h,ur.geometry.boundingSphere),ur.raycast(e,tv);for(let g=0,v=tv.length;g<v;g++){const y=tv[g];y.object=this,y.batchId=c,t.push(y)}tv.length=0}ur.material=null,ur.geometry.index=null,ur.geometry.attributes={},ur.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,n,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=r.getIndex(),c=a===null?1:a.array.BYTES_PER_ELEMENT,d=this._instanceInfo,h=this._multiDrawStarts,m=this._multiDrawCounts,g=this._geometryInfo,v=this.perObjectFrustumCulled,y=this._indirectTexture,M=y.image.data;v&&(Yr.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),jx.setFromProjectionMatrix(Yr,e.coordinateSystem));let E=0;if(this.sortObjects){Yr.copy(this.matrixWorld).invert(),_p.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Yr),KE.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Yr);for(let A=0,C=d.length;A<C;A++)if(d[A].visible&&d[A].active){const R=d[A].geometryIndex;this.getMatrixAt(A,Yr),this.getBoundingSphereAt(R,ru).applyMatrix4(Yr);let O=!1;if(v&&(O=!jx.intersectsSphere(ru)),!O){const U=g[R],F=az.subVectors(ru.center,_p).dot(KE);Xx.push(U.start,U.count,F,A)}}const w=Xx.list,S=this.customSort;S===null?w.sort(s.transparent?rz:iz):S.call(this,w,n);for(let A=0,C=w.length;A<C;A++){const R=w[A];h[E]=R.start*c,m[E]=R.count,M[E]=R.index,E++}Xx.reset()}else for(let w=0,S=d.length;w<S;w++)if(d[w].visible&&d[w].active){const A=d[w].geometryIndex;let C=!1;if(v&&(this.getMatrixAt(w,Yr),this.getBoundingSphereAt(A,ru).applyMatrix4(Yr),C=!jx.intersectsSphere(ru)),!C){const R=g[A];h[E]=R.start*c,m[E]=R.count,M[E]=w,E++}}y.needsUpdate=!0,this._multiDrawCount=E,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,s,a){this.onBeforeRender(e,null,r,s,a)}}class Lr extends mr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new vt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const My=new q,Ey=new q,ZE=new Wt,Sp=new Ku,nv=new hr,Yx=new q,$E=new q;class oc extends Mn{constructor(e=new un,t=new Lr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)My.fromBufferAttribute(t,r-1),Ey.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=My.distanceTo(Ey);e.setAttribute("lineDistance",new Pt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),nv.copy(n.boundingSphere),nv.applyMatrix4(r),nv.radius+=s,e.ray.intersectsSphere(nv)===!1)return;ZE.copy(r).invert(),Sp.copy(e.ray).applyMatrix4(ZE);const c=s/((this.scale.x+this.scale.y+this.scale.z)/3),d=c*c,h=this.isLineSegments?2:1,m=n.index,v=n.attributes.position;if(m!==null){const y=Math.max(0,a.start),M=Math.min(m.count,a.start+a.count);for(let E=y,w=M-1;E<w;E+=h){const S=m.getX(E),A=m.getX(E+1),C=iv(this,e,Sp,d,S,A);C&&t.push(C)}if(this.isLineLoop){const E=m.getX(M-1),w=m.getX(y),S=iv(this,e,Sp,d,E,w);S&&t.push(S)}}else{const y=Math.max(0,a.start),M=Math.min(v.count,a.start+a.count);for(let E=y,w=M-1;E<w;E+=h){const S=iv(this,e,Sp,d,E,E+1);S&&t.push(S)}if(this.isLineLoop){const E=iv(this,e,Sp,d,M-1,y);E&&t.push(E)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const c=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}}function iv(i,e,t,n,r,s){const a=i.geometry.attributes.position;if(My.fromBufferAttribute(a,r),Ey.fromBufferAttribute(a,s),t.distanceSqToSegment(My,Ey,Yx,$E)>n)return;Yx.applyMatrix4(i.matrixWorld);const d=e.ray.origin.distanceTo(Yx);if(!(d<e.near||d>e.far))return{distance:d,point:$E.clone().applyMatrix4(i.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:i}}const QE=new q,JE=new q;class Qo extends oc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)QE.fromBufferAttribute(t,r),JE.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+QE.distanceTo(JE);e.setAttribute("lineDistance",new Pt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class eP extends oc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class aw extends mr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new vt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const e1=new Wt,J_=new Ku,rv=new hr,sv=new q;class tP extends Mn{constructor(e=new un,t=new aw){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),rv.copy(n.boundingSphere),rv.applyMatrix4(r),rv.radius+=s,e.ray.intersectsSphere(rv)===!1)return;e1.copy(r).invert(),J_.copy(e.ray).applyMatrix4(e1);const c=s/((this.scale.x+this.scale.y+this.scale.z)/3),d=c*c,h=n.index,g=n.attributes.position;if(h!==null){const v=Math.max(0,a.start),y=Math.min(h.count,a.start+a.count);for(let M=v,E=y;M<E;M++){const w=h.getX(M);sv.fromBufferAttribute(g,w),t1(sv,w,d,r,e,t,this)}}else{const v=Math.max(0,a.start),y=Math.min(g.count,a.start+a.count);for(let M=v,E=y;M<E;M++)sv.fromBufferAttribute(g,M),t1(sv,M,d,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const c=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}}function t1(i,e,t,n,r,s,a){const c=J_.distanceSqToPoint(i);if(c<t){const d=new q;J_.closestPointToPoint(i,d),d.applyMatrix4(n);const h=r.ray.origin.distanceTo(d);if(h<r.near||h>r.far)return;s.push({distance:h,distanceToRay:Math.sqrt(c),point:d,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class Od extends Mn{constructor(){super(),this.isGroup=!0,this.type="Group"}}class cz extends ai{constructor(e,t,n,r,s,a,c,d,h){super(e,t,n,r,s,a,c,d,h),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Pi,this.magFilter=s!==void 0?s:Pi,this.generateMipmaps=!1;const m=this;function g(){m.needsUpdate=!0,e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(g)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class uz extends ai{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ji,this.minFilter=Ji,this.generateMipmaps=!1,this.needsUpdate=!0}}class u0 extends ai{constructor(e,t,n,r,s,a,c,d,h,m,g,v){super(null,a,c,d,h,m,r,s,g,v),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class fz extends u0{constructor(e,t,n,r,s,a){super(e,t,n,s,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Ds,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class dz extends u0{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,$a),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class hz extends ai{constructor(e,t,n,r,s,a,c,d,h){super(e,t,n,r,s,a,c,d,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class lw extends ai{constructor(e,t,n,r,s,a,c,d,h,m=Lu){if(m!==Lu&&m!==Wu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&m===Lu&&(n=Qa),n===void 0&&m===Wu&&(n=Gu),super(null,r,s,a,c,d,m,n,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=c!==void 0?c:Ji,this.minFilter=d!==void 0?d:Ji,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class _o{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const s=n.length;let a;t?a=t:a=e*n[s-1];let c=0,d=s-1,h;for(;c<=d;)if(r=Math.floor(c+(d-c)/2),h=n[r]-a,h<0)c=r+1;else if(h>0)d=r-1;else{d=r;break}if(r=d,n[r]===a)return r/(s-1);const m=n[r],v=n[r+1]-m,y=(a-m)/v;return(r+y)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),c=this.getPoint(s),d=t||(a.isVector2?new ke:new q);return d.copy(c).sub(a).normalize(),d}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new q,r=[],s=[],a=[],c=new q,d=new Wt;for(let y=0;y<=e;y++){const M=y/e;r[y]=this.getTangentAt(M,new q)}s[0]=new q,a[0]=new q;let h=Number.MAX_VALUE;const m=Math.abs(r[0].x),g=Math.abs(r[0].y),v=Math.abs(r[0].z);m<=h&&(h=m,n.set(1,0,0)),g<=h&&(h=g,n.set(0,1,0)),v<=h&&n.set(0,0,1),c.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],c),a[0].crossVectors(r[0],s[0]);for(let y=1;y<=e;y++){if(s[y]=s[y-1].clone(),a[y]=a[y-1].clone(),c.crossVectors(r[y-1],r[y]),c.length()>Number.EPSILON){c.normalize();const M=Math.acos($t(r[y-1].dot(r[y]),-1,1));s[y].applyMatrix4(d.makeRotationAxis(c,M))}a[y].crossVectors(r[y],s[y])}if(t===!0){let y=Math.acos($t(s[0].dot(s[e]),-1,1));y/=e,r[0].dot(c.crossVectors(s[0],s[e]))>0&&(y=-y);for(let M=1;M<=e;M++)s[M].applyMatrix4(d.makeRotationAxis(r[M],y*M)),a[M].crossVectors(r[M],s[M])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class f0 extends _o{constructor(e=0,t=0,n=1,r=1,s=0,a=Math.PI*2,c=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=c,this.aRotation=d}getPoint(e,t=new ke){const n=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const c=this.aStartAngle+e*s;let d=this.aX+this.xRadius*Math.cos(c),h=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const m=Math.cos(this.aRotation),g=Math.sin(this.aRotation),v=d-this.aX,y=h-this.aY;d=v*m-y*g+this.aX,h=v*g+y*m+this.aY}return n.set(d,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class nP extends f0{constructor(e,t,n,r,s,a){super(e,t,n,n,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function cw(){let i=0,e=0,t=0,n=0;function r(s,a,c,d){i=s,e=c,t=-3*s+3*a-2*c-d,n=2*s-2*a+c+d}return{initCatmullRom:function(s,a,c,d,h){r(a,c,h*(c-s),h*(d-a))},initNonuniformCatmullRom:function(s,a,c,d,h,m,g){let v=(a-s)/h-(c-s)/(h+m)+(c-a)/m,y=(c-a)/m-(d-a)/(m+g)+(d-c)/g;v*=m,y*=m,r(a,c,v,y)},calc:function(s){const a=s*s,c=a*s;return i+e*s+t*a+n*c}}}const ov=new q,qx=new cw,Kx=new cw,Zx=new cw;class iP extends _o{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new q){const n=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let c=Math.floor(a),d=a-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/s)+1)*s:d===0&&c===s-1&&(c=s-2,d=1);let h,m;this.closed||c>0?h=r[(c-1)%s]:(ov.subVectors(r[0],r[1]).add(r[0]),h=ov);const g=r[c%s],v=r[(c+1)%s];if(this.closed||c+2<s?m=r[(c+2)%s]:(ov.subVectors(r[s-1],r[s-2]).add(r[s-1]),m=ov),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let M=Math.pow(h.distanceToSquared(g),y),E=Math.pow(g.distanceToSquared(v),y),w=Math.pow(v.distanceToSquared(m),y);E<1e-4&&(E=1),M<1e-4&&(M=E),w<1e-4&&(w=E),qx.initNonuniformCatmullRom(h.x,g.x,v.x,m.x,M,E,w),Kx.initNonuniformCatmullRom(h.y,g.y,v.y,m.y,M,E,w),Zx.initNonuniformCatmullRom(h.z,g.z,v.z,m.z,M,E,w)}else this.curveType==="catmullrom"&&(qx.initCatmullRom(h.x,g.x,v.x,m.x,this.tension),Kx.initCatmullRom(h.y,g.y,v.y,m.y,this.tension),Zx.initCatmullRom(h.z,g.z,v.z,m.z,this.tension));return n.set(qx.calc(d),Kx.calc(d),Zx.calc(d)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new q().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function n1(i,e,t,n,r){const s=(n-e)*.5,a=(r-t)*.5,c=i*i,d=i*c;return(2*t-2*n+s+a)*d+(-3*t+3*n-2*s-a)*c+s*i+t}function pz(i,e){const t=1-i;return t*t*e}function mz(i,e){return 2*(1-i)*i*e}function gz(i,e){return i*i*e}function Fp(i,e,t,n){return pz(i,e)+mz(i,t)+gz(i,n)}function vz(i,e){const t=1-i;return t*t*t*e}function yz(i,e){const t=1-i;return 3*t*t*i*e}function xz(i,e){return 3*(1-i)*i*i*e}function _z(i,e){return i*i*i*e}function zp(i,e,t,n,r){return vz(i,e)+yz(i,t)+xz(i,n)+_z(i,r)}class uw extends _o{constructor(e=new ke,t=new ke,n=new ke,r=new ke){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new ke){const n=t,r=this.v0,s=this.v1,a=this.v2,c=this.v3;return n.set(zp(e,r.x,s.x,a.x,c.x),zp(e,r.y,s.y,a.y,c.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rP extends _o{constructor(e=new q,t=new q,n=new q,r=new q){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new q){const n=t,r=this.v0,s=this.v1,a=this.v2,c=this.v3;return n.set(zp(e,r.x,s.x,a.x,c.x),zp(e,r.y,s.y,a.y,c.y),zp(e,r.z,s.z,a.z,c.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class fw extends _o{constructor(e=new ke,t=new ke){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ke){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ke){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sP extends _o{constructor(e=new q,t=new q){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new q){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new q){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class dw extends _o{constructor(e=new ke,t=new ke,n=new ke){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ke){const n=t,r=this.v0,s=this.v1,a=this.v2;return n.set(Fp(e,r.x,s.x,a.x),Fp(e,r.y,s.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hw extends _o{constructor(e=new q,t=new q,n=new q){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new q){const n=t,r=this.v0,s=this.v1,a=this.v2;return n.set(Fp(e,r.x,s.x,a.x),Fp(e,r.y,s.y,a.y),Fp(e,r.z,s.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pw extends _o{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ke){const n=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),c=s-a,d=r[a===0?a:a-1],h=r[a],m=r[a>r.length-2?r.length-1:a+1],g=r[a>r.length-3?r.length-1:a+2];return n.set(n1(c,d.x,h.x,m.x,g.x),n1(c,d.y,h.y,m.y,g.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new ke().fromArray(r))}return this}}var Ty=Object.freeze({__proto__:null,ArcCurve:nP,CatmullRomCurve3:iP,CubicBezierCurve:uw,CubicBezierCurve3:rP,EllipseCurve:f0,LineCurve:fw,LineCurve3:sP,QuadraticBezierCurve:dw,QuadraticBezierCurve3:hw,SplineCurve:pw});class oP extends _o{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Ty[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const a=r[s]-n,c=this.curves[s],d=c.getLength(),h=d===0?0:1-a/d;return c.getPointAt(h,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],c=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,d=a.getPoints(c);for(let h=0;h<d.length;h++){const m=d[h];n&&n.equals(m)||(t.push(m),n=m)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new Ty[r.type]().fromJSON(r))}return this}}class nm extends oP{constructor(e){super(),this.type="Path",this.currentPoint=new ke,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new fw(this.currentPoint.clone(),new ke(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new dw(this.currentPoint.clone(),new ke(e,t),new ke(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,a){const c=new uw(this.currentPoint.clone(),new ke(e,t),new ke(n,r),new ke(s,a));return this.curves.push(c),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new pw(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,a){const c=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(e+c,t+d,n,r,s,a),this}absarc(e,t,n,r,s,a){return this.absellipse(e,t,n,n,r,s,a),this}ellipse(e,t,n,r,s,a,c,d){const h=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(e+h,t+m,n,r,s,a,c,d),this}absellipse(e,t,n,r,s,a,c,d){const h=new f0(e,t,n,r,s,a,c,d);if(this.curves.length>0){const g=h.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(h);const m=h.getPoint(1);return this.currentPoint.copy(m),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class wm extends un{constructor(e=[new ke(0,-.5),new ke(.5,0),new ke(0,.5)],t=12,n=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=$t(r,0,Math.PI*2);const s=[],a=[],c=[],d=[],h=[],m=1/t,g=new q,v=new ke,y=new q,M=new q,E=new q;let w=0,S=0;for(let A=0;A<=e.length-1;A++)switch(A){case 0:w=e[A+1].x-e[A].x,S=e[A+1].y-e[A].y,y.x=S*1,y.y=-w,y.z=S*0,E.copy(y),y.normalize(),d.push(y.x,y.y,y.z);break;case e.length-1:d.push(E.x,E.y,E.z);break;default:w=e[A+1].x-e[A].x,S=e[A+1].y-e[A].y,y.x=S*1,y.y=-w,y.z=S*0,M.copy(y),y.x+=E.x,y.y+=E.y,y.z+=E.z,y.normalize(),d.push(y.x,y.y,y.z),E.copy(M)}for(let A=0;A<=t;A++){const C=n+A*m*r,R=Math.sin(C),O=Math.cos(C);for(let U=0;U<=e.length-1;U++){g.x=e[U].x*R,g.y=e[U].y,g.z=e[U].x*O,a.push(g.x,g.y,g.z),v.x=A/t,v.y=U/(e.length-1),c.push(v.x,v.y);const F=d[3*U+0]*R,z=d[3*U+1],k=d[3*U+0]*O;h.push(F,z,k)}}for(let A=0;A<t;A++)for(let C=0;C<e.length-1;C++){const R=C+A*e.length,O=R,U=R+e.length,F=R+e.length+1,z=R+1;s.push(O,U,z),s.push(F,z,U)}this.setIndex(s),this.setAttribute("position",new Pt(a,3)),this.setAttribute("uv",new Pt(c,2)),this.setAttribute("normal",new Pt(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wm(e.points,e.segments,e.phiStart,e.phiLength)}}class d0 extends wm{constructor(e=1,t=1,n=4,r=8){const s=new nm;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new d0(e.radius,e.length,e.capSegments,e.radialSegments)}}class h0 extends un{constructor(e=1,t=32,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],a=[],c=[],d=[],h=new q,m=new ke;a.push(0,0,0),c.push(0,0,1),d.push(.5,.5);for(let g=0,v=3;g<=t;g++,v+=3){const y=n+g/t*r;h.x=e*Math.cos(y),h.y=e*Math.sin(y),a.push(h.x,h.y,h.z),c.push(0,0,1),m.x=(a[v]/e+1)/2,m.y=(a[v+1]/e+1)/2,d.push(m.x,m.y)}for(let g=1;g<=t;g++)s.push(g,g+1,0);this.setIndex(s),this.setAttribute("position",new Pt(a,3)),this.setAttribute("normal",new Pt(c,3)),this.setAttribute("uv",new Pt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new h0(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class dh extends un{constructor(e=1,t=1,n=1,r=32,s=1,a=!1,c=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:c,thetaLength:d};const h=this;r=Math.floor(r),s=Math.floor(s);const m=[],g=[],v=[],y=[];let M=0;const E=[],w=n/2;let S=0;A(),a===!1&&(e>0&&C(!0),t>0&&C(!1)),this.setIndex(m),this.setAttribute("position",new Pt(g,3)),this.setAttribute("normal",new Pt(v,3)),this.setAttribute("uv",new Pt(y,2));function A(){const R=new q,O=new q;let U=0;const F=(t-e)/n;for(let z=0;z<=s;z++){const k=[],L=z/s,G=L*(t-e)+e;for(let J=0;J<=r;J++){const Q=J/r,ce=Q*d+c,ge=Math.sin(ce),ne=Math.cos(ce);O.x=G*ge,O.y=-L*n+w,O.z=G*ne,g.push(O.x,O.y,O.z),R.set(ge,F,ne).normalize(),v.push(R.x,R.y,R.z),y.push(Q,1-L),k.push(M++)}E.push(k)}for(let z=0;z<r;z++)for(let k=0;k<s;k++){const L=E[k][z],G=E[k+1][z],J=E[k+1][z+1],Q=E[k][z+1];(e>0||k!==0)&&(m.push(L,G,Q),U+=3),(t>0||k!==s-1)&&(m.push(G,J,Q),U+=3)}h.addGroup(S,U,0),S+=U}function C(R){const O=M,U=new ke,F=new q;let z=0;const k=R===!0?e:t,L=R===!0?1:-1;for(let J=1;J<=r;J++)g.push(0,w*L,0),v.push(0,L,0),y.push(.5,.5),M++;const G=M;for(let J=0;J<=r;J++){const ce=J/r*d+c,ge=Math.cos(ce),ne=Math.sin(ce);F.x=k*ne,F.y=w*L,F.z=k*ge,g.push(F.x,F.y,F.z),v.push(0,L,0),U.x=ge*.5+.5,U.y=ne*.5*L+.5,y.push(U.x,U.y),M++}for(let J=0;J<r;J++){const Q=O+J,ce=G+J;R===!0?m.push(ce,ce+1,Q):m.push(ce+1,ce,Q),z+=3}h.addGroup(S,z,R===!0?1:2),S+=z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class p0 extends dh{constructor(e=1,t=1,n=32,r=1,s=!1,a=0,c=Math.PI*2){super(0,e,t,n,r,s,a,c),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:c}}static fromJSON(e){return new p0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class dc extends un{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const s=[],a=[];c(r),h(n),m(),this.setAttribute("position",new Pt(s,3)),this.setAttribute("normal",new Pt(s.slice(),3)),this.setAttribute("uv",new Pt(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function c(A){const C=new q,R=new q,O=new q;for(let U=0;U<t.length;U+=3)y(t[U+0],C),y(t[U+1],R),y(t[U+2],O),d(C,R,O,A)}function d(A,C,R,O){const U=O+1,F=[];for(let z=0;z<=U;z++){F[z]=[];const k=A.clone().lerp(R,z/U),L=C.clone().lerp(R,z/U),G=U-z;for(let J=0;J<=G;J++)J===0&&z===U?F[z][J]=k:F[z][J]=k.clone().lerp(L,J/G)}for(let z=0;z<U;z++)for(let k=0;k<2*(U-z)-1;k++){const L=Math.floor(k/2);k%2===0?(v(F[z][L+1]),v(F[z+1][L]),v(F[z][L])):(v(F[z][L+1]),v(F[z+1][L+1]),v(F[z+1][L]))}}function h(A){const C=new q;for(let R=0;R<s.length;R+=3)C.x=s[R+0],C.y=s[R+1],C.z=s[R+2],C.normalize().multiplyScalar(A),s[R+0]=C.x,s[R+1]=C.y,s[R+2]=C.z}function m(){const A=new q;for(let C=0;C<s.length;C+=3){A.x=s[C+0],A.y=s[C+1],A.z=s[C+2];const R=w(A)/2/Math.PI+.5,O=S(A)/Math.PI+.5;a.push(R,1-O)}M(),g()}function g(){for(let A=0;A<a.length;A+=6){const C=a[A+0],R=a[A+2],O=a[A+4],U=Math.max(C,R,O),F=Math.min(C,R,O);U>.9&&F<.1&&(C<.2&&(a[A+0]+=1),R<.2&&(a[A+2]+=1),O<.2&&(a[A+4]+=1))}}function v(A){s.push(A.x,A.y,A.z)}function y(A,C){const R=A*3;C.x=e[R+0],C.y=e[R+1],C.z=e[R+2]}function M(){const A=new q,C=new q,R=new q,O=new q,U=new ke,F=new ke,z=new ke;for(let k=0,L=0;k<s.length;k+=9,L+=6){A.set(s[k+0],s[k+1],s[k+2]),C.set(s[k+3],s[k+4],s[k+5]),R.set(s[k+6],s[k+7],s[k+8]),U.set(a[L+0],a[L+1]),F.set(a[L+2],a[L+3]),z.set(a[L+4],a[L+5]),O.copy(A).add(C).add(R).divideScalar(3);const G=w(O);E(U,L+0,A,G),E(F,L+2,C,G),E(z,L+4,R,G)}}function E(A,C,R,O){O<0&&A.x===1&&(a[C]=A.x-1),R.x===0&&R.z===0&&(a[C]=O/2/Math.PI+.5)}function w(A){return Math.atan2(A.z,-A.x)}function S(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dc(e.vertices,e.indices,e.radius,e.details)}}class m0 extends dc{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new m0(e.radius,e.detail)}}const av=new q,lv=new q,$x=new q,cv=new Zr;class aP extends un{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Du*t),a=e.getIndex(),c=e.getAttribute("position"),d=a?a.count:c.count,h=[0,0,0],m=["a","b","c"],g=new Array(3),v={},y=[];for(let M=0;M<d;M+=3){a?(h[0]=a.getX(M),h[1]=a.getX(M+1),h[2]=a.getX(M+2)):(h[0]=M,h[1]=M+1,h[2]=M+2);const{a:E,b:w,c:S}=cv;if(E.fromBufferAttribute(c,h[0]),w.fromBufferAttribute(c,h[1]),S.fromBufferAttribute(c,h[2]),cv.getNormal($x),g[0]=`${Math.round(E.x*r)},${Math.round(E.y*r)},${Math.round(E.z*r)}`,g[1]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,g[2]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let A=0;A<3;A++){const C=(A+1)%3,R=g[A],O=g[C],U=cv[m[A]],F=cv[m[C]],z=`${R}_${O}`,k=`${O}_${R}`;k in v&&v[k]?($x.dot(v[k].normal)<=s&&(y.push(U.x,U.y,U.z),y.push(F.x,F.y,F.z)),v[k]=null):z in v||(v[z]={index0:h[A],index1:h[C],normal:$x.clone()})}}for(const M in v)if(v[M]){const{index0:E,index1:w}=v[M];av.fromBufferAttribute(c,E),lv.fromBufferAttribute(c,w),y.push(av.x,av.y,av.z),y.push(lv.x,lv.y,lv.z)}this.setAttribute("position",new Pt(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Uu extends nm{constructor(e){super(e),this.uuid=ms(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new nm().fromJSON(r))}return this}}const Sz={triangulate:function(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=lP(i,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let c,d,h,m,g,v,y;if(n&&(s=bz(i,e,s,t)),i.length>80*t){c=h=i[0],d=m=i[1];for(let M=t;M<r;M+=t)g=i[M],v=i[M+1],g<c&&(c=g),v<d&&(d=v),g>h&&(h=g),v>m&&(m=v);y=Math.max(h-c,m-d),y=y!==0?32767/y:0}return im(s,a,t,c,d,y,0),a}};function lP(i,e,t,n,r){let s,a;if(r===kz(i,e,t,n)>0)for(s=e;s<t;s+=n)a=i1(s,i[s],i[s+1],a);else for(s=t-n;s>=e;s-=n)a=i1(s,i[s],i[s+1],a);return a&&g0(a,a.next)&&(sm(a),a=a.next),a}function Yu(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(g0(t,t.next)||Jn(t.prev,t,t.next)===0)){if(sm(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function im(i,e,t,n,r,s,a){if(!i)return;!a&&s&&Iz(i,n,r,s);let c=i,d,h;for(;i.prev!==i.next;){if(d=i.prev,h=i.next,s?Mz(i,n,r,s):wz(i)){e.push(d.i/t|0),e.push(i.i/t|0),e.push(h.i/t|0),sm(i),i=h.next,c=h.next;continue}if(i=h,i===c){a?a===1?(i=Ez(Yu(i),e,t),im(i,e,t,n,r,s,2)):a===2&&Tz(i,e,t,n,r,s):im(Yu(i),e,t,n,r,s,1);break}}}function wz(i){const e=i.prev,t=i,n=i.next;if(Jn(e,t,n)>=0)return!1;const r=e.x,s=t.x,a=n.x,c=e.y,d=t.y,h=n.y,m=r<s?r<a?r:a:s<a?s:a,g=c<d?c<h?c:h:d<h?d:h,v=r>s?r>a?r:a:s>a?s:a,y=c>d?c>h?c:h:d>h?d:h;let M=n.next;for(;M!==e;){if(M.x>=m&&M.x<=v&&M.y>=g&&M.y<=y&&Ud(r,c,s,d,a,h,M.x,M.y)&&Jn(M.prev,M,M.next)>=0)return!1;M=M.next}return!0}function Mz(i,e,t,n){const r=i.prev,s=i,a=i.next;if(Jn(r,s,a)>=0)return!1;const c=r.x,d=s.x,h=a.x,m=r.y,g=s.y,v=a.y,y=c<d?c<h?c:h:d<h?d:h,M=m<g?m<v?m:v:g<v?g:v,E=c>d?c>h?c:h:d>h?d:h,w=m>g?m>v?m:v:g>v?g:v,S=eS(y,M,e,t,n),A=eS(E,w,e,t,n);let C=i.prevZ,R=i.nextZ;for(;C&&C.z>=S&&R&&R.z<=A;){if(C.x>=y&&C.x<=E&&C.y>=M&&C.y<=w&&C!==r&&C!==a&&Ud(c,m,d,g,h,v,C.x,C.y)&&Jn(C.prev,C,C.next)>=0||(C=C.prevZ,R.x>=y&&R.x<=E&&R.y>=M&&R.y<=w&&R!==r&&R!==a&&Ud(c,m,d,g,h,v,R.x,R.y)&&Jn(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;C&&C.z>=S;){if(C.x>=y&&C.x<=E&&C.y>=M&&C.y<=w&&C!==r&&C!==a&&Ud(c,m,d,g,h,v,C.x,C.y)&&Jn(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;R&&R.z<=A;){if(R.x>=y&&R.x<=E&&R.y>=M&&R.y<=w&&R!==r&&R!==a&&Ud(c,m,d,g,h,v,R.x,R.y)&&Jn(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function Ez(i,e,t){let n=i;do{const r=n.prev,s=n.next.next;!g0(r,s)&&cP(r,n,n.next,s)&&rm(r,s)&&rm(s,r)&&(e.push(r.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),sm(n),sm(n.next),n=i=s),n=n.next}while(n!==i);return Yu(n)}function Tz(i,e,t,n,r,s){let a=i;do{let c=a.next.next;for(;c!==a.prev;){if(a.i!==c.i&&Dz(a,c)){let d=uP(a,c);a=Yu(a,a.next),d=Yu(d,d.next),im(a,e,t,n,r,s,0),im(d,e,t,n,r,s,0);return}c=c.next}a=a.next}while(a!==i)}function bz(i,e,t,n){const r=[];let s,a,c,d,h;for(s=0,a=e.length;s<a;s++)c=e[s]*n,d=s<a-1?e[s+1]*n:i.length,h=lP(i,c,d,n,!1),h===h.next&&(h.steiner=!0),r.push(Lz(h));for(r.sort(Cz),s=0;s<r.length;s++)t=Az(r[s],t);return t}function Cz(i,e){return i.x-e.x}function Az(i,e){const t=Rz(i,e);if(!t)return e;const n=uP(t,i);return Yu(n,n.next),Yu(t,t.next)}function Rz(i,e){let t=e,n=-1/0,r;const s=i.x,a=i.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const v=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(v<=s&&v>n&&(n=v,r=t.x<t.next.x?t:t.next,v===s))return r}t=t.next}while(t!==e);if(!r)return null;const c=r,d=r.x,h=r.y;let m=1/0,g;t=r;do s>=t.x&&t.x>=d&&s!==t.x&&Ud(a<h?s:n,a,d,h,a<h?n:s,a,t.x,t.y)&&(g=Math.abs(a-t.y)/(s-t.x),rm(t,i)&&(g<m||g===m&&(t.x>r.x||t.x===r.x&&Pz(r,t)))&&(r=t,m=g)),t=t.next;while(t!==c);return r}function Pz(i,e){return Jn(i.prev,i,e.prev)<0&&Jn(e.next,i,i.next)<0}function Iz(i,e,t,n){let r=i;do r.z===0&&(r.z=eS(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,Nz(r)}function Nz(i){let e,t,n,r,s,a,c,d,h=1;do{for(t=i,i=null,s=null,a=0;t;){for(a++,n=t,c=0,e=0;e<h&&(c++,n=n.nextZ,!!n);e++);for(d=h;c>0||d>0&&n;)c!==0&&(d===0||!n||t.z<=n.z)?(r=t,t=t.nextZ,c--):(r=n,n=n.nextZ,d--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;t=n}s.nextZ=null,h*=2}while(a>1);return i}function eS(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function Lz(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function Ud(i,e,t,n,r,s,a,c){return(r-a)*(e-c)>=(i-a)*(s-c)&&(i-a)*(n-c)>=(t-a)*(e-c)&&(t-a)*(s-c)>=(r-a)*(n-c)}function Dz(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!Oz(i,e)&&(rm(i,e)&&rm(e,i)&&Uz(i,e)&&(Jn(i.prev,i,e.prev)||Jn(i,e.prev,e))||g0(i,e)&&Jn(i.prev,i,i.next)>0&&Jn(e.prev,e,e.next)>0)}function Jn(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function g0(i,e){return i.x===e.x&&i.y===e.y}function cP(i,e,t,n){const r=fv(Jn(i,e,t)),s=fv(Jn(i,e,n)),a=fv(Jn(t,n,i)),c=fv(Jn(t,n,e));return!!(r!==s&&a!==c||r===0&&uv(i,t,e)||s===0&&uv(i,n,e)||a===0&&uv(t,i,n)||c===0&&uv(t,e,n))}function uv(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function fv(i){return i>0?1:i<0?-1:0}function Oz(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&cP(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function rm(i,e){return Jn(i.prev,i,i.next)<0?Jn(i,e,i.next)>=0&&Jn(i,i.prev,e)>=0:Jn(i,e,i.prev)<0||Jn(i,i.next,e)<0}function Uz(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function uP(i,e){const t=new tS(i.i,i.x,i.y),n=new tS(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function i1(i,e,t,n){const r=new tS(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function sm(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function tS(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function kz(i,e,t,n){let r=0;for(let s=e,a=t-n;s<t;s+=n)r+=(i[a]-i[s])*(i[s+1]+i[a+1]),a=s;return r}class qo{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return n*.5}static isClockWise(e){return qo.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];r1(e),s1(n,e);let a=e.length;t.forEach(r1);for(let d=0;d<t.length;d++)r.push(a),a+=t[d].length,s1(n,t[d]);const c=Sz.triangulate(n,r);for(let d=0;d<c.length;d+=3)s.push(c.slice(d,d+3));return s}}function r1(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function s1(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class v0 extends un{constructor(e=new Uu([new ke(.5,.5),new ke(-.5,.5),new ke(-.5,-.5),new ke(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let c=0,d=e.length;c<d;c++){const h=e[c];a(h)}this.setAttribute("position",new Pt(r,3)),this.setAttribute("uv",new Pt(s,2)),this.computeVertexNormals();function a(c){const d=[],h=t.curveSegments!==void 0?t.curveSegments:12,m=t.steps!==void 0?t.steps:1,g=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,M=t.bevelSize!==void 0?t.bevelSize:y-.1,E=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const S=t.extrudePath,A=t.UVGenerator!==void 0?t.UVGenerator:Fz;let C,R=!1,O,U,F,z;S&&(C=S.getSpacedPoints(m),R=!0,v=!1,O=S.computeFrenetFrames(m,!1),U=new q,F=new q,z=new q),v||(w=0,y=0,M=0,E=0);const k=c.extractPoints(h);let L=k.shape;const G=k.holes;if(!qo.isClockWise(L)){L=L.reverse();for(let Se=0,Le=G.length;Se<Le;Se++){const K=G[Se];qo.isClockWise(K)&&(G[Se]=K.reverse())}}const Q=qo.triangulateShape(L,G),ce=L;for(let Se=0,Le=G.length;Se<Le;Se++){const K=G[Se];L=L.concat(K)}function ge(Se,Le,K){return Le||console.error("THREE.ExtrudeGeometry: vec does not exist"),Se.clone().addScaledVector(Le,K)}const ne=L.length,de=Q.length;function B(Se,Le,K){let ht,Be,nt;const Ke=Se.x-Le.x,bt=Se.y-Le.y,tt=K.x-Se.x,Y=K.y-Se.y,W=Ke*Ke+bt*bt,ye=Ke*Y-bt*tt;if(Math.abs(ye)>Number.EPSILON){const Re=Math.sqrt(W),ze=Math.sqrt(tt*tt+Y*Y),De=Le.x-bt/Re,yt=Le.y+Ke/Re,Je=K.x-Y/ze,ct=K.y+tt/ze,Xt=((Je-De)*Y-(ct-yt)*tt)/(Ke*Y-bt*tt);ht=De+Ke*Xt-Se.x,Be=yt+bt*Xt-Se.y;const We=ht*ht+Be*Be;if(We<=2)return new ke(ht,Be);nt=Math.sqrt(We/2)}else{let Re=!1;Ke>Number.EPSILON?tt>Number.EPSILON&&(Re=!0):Ke<-Number.EPSILON?tt<-Number.EPSILON&&(Re=!0):Math.sign(bt)===Math.sign(Y)&&(Re=!0),Re?(ht=-bt,Be=Ke,nt=Math.sqrt(W)):(ht=Ke,Be=bt,nt=Math.sqrt(W/2))}return new ke(ht/nt,Be/nt)}const ie=[];for(let Se=0,Le=ce.length,K=Le-1,ht=Se+1;Se<Le;Se++,K++,ht++)K===Le&&(K=0),ht===Le&&(ht=0),ie[Se]=B(ce[Se],ce[K],ce[ht]);const te=[];let X,fe=ie.concat();for(let Se=0,Le=G.length;Se<Le;Se++){const K=G[Se];X=[];for(let ht=0,Be=K.length,nt=Be-1,Ke=ht+1;ht<Be;ht++,nt++,Ke++)nt===Be&&(nt=0),Ke===Be&&(Ke=0),X[ht]=B(K[ht],K[nt],K[Ke]);te.push(X),fe=fe.concat(X)}for(let Se=0;Se<w;Se++){const Le=Se/w,K=y*Math.cos(Le*Math.PI/2),ht=M*Math.sin(Le*Math.PI/2)+E;for(let Be=0,nt=ce.length;Be<nt;Be++){const Ke=ge(ce[Be],ie[Be],ht);he(Ke.x,Ke.y,-K)}for(let Be=0,nt=G.length;Be<nt;Be++){const Ke=G[Be];X=te[Be];for(let bt=0,tt=Ke.length;bt<tt;bt++){const Y=ge(Ke[bt],X[bt],ht);he(Y.x,Y.y,-K)}}}const Pe=M+E;for(let Se=0;Se<ne;Se++){const Le=v?ge(L[Se],fe[Se],Pe):L[Se];R?(F.copy(O.normals[0]).multiplyScalar(Le.x),U.copy(O.binormals[0]).multiplyScalar(Le.y),z.copy(C[0]).add(F).add(U),he(z.x,z.y,z.z)):he(Le.x,Le.y,0)}for(let Se=1;Se<=m;Se++)for(let Le=0;Le<ne;Le++){const K=v?ge(L[Le],fe[Le],Pe):L[Le];R?(F.copy(O.normals[Se]).multiplyScalar(K.x),U.copy(O.binormals[Se]).multiplyScalar(K.y),z.copy(C[Se]).add(F).add(U),he(z.x,z.y,z.z)):he(K.x,K.y,g/m*Se)}for(let Se=w-1;Se>=0;Se--){const Le=Se/w,K=y*Math.cos(Le*Math.PI/2),ht=M*Math.sin(Le*Math.PI/2)+E;for(let Be=0,nt=ce.length;Be<nt;Be++){const Ke=ge(ce[Be],ie[Be],ht);he(Ke.x,Ke.y,g+K)}for(let Be=0,nt=G.length;Be<nt;Be++){const Ke=G[Be];X=te[Be];for(let bt=0,tt=Ke.length;bt<tt;bt++){const Y=ge(Ke[bt],X[bt],ht);R?he(Y.x,Y.y+C[m-1].y,C[m-1].x+K):he(Y.x,Y.y,g+K)}}}le(),Ee();function le(){const Se=r.length/3;if(v){let Le=0,K=ne*Le;for(let ht=0;ht<de;ht++){const Be=Q[ht];Fe(Be[2]+K,Be[1]+K,Be[0]+K)}Le=m+w*2,K=ne*Le;for(let ht=0;ht<de;ht++){const Be=Q[ht];Fe(Be[0]+K,Be[1]+K,Be[2]+K)}}else{for(let Le=0;Le<de;Le++){const K=Q[Le];Fe(K[2],K[1],K[0])}for(let Le=0;Le<de;Le++){const K=Q[Le];Fe(K[0]+ne*m,K[1]+ne*m,K[2]+ne*m)}}n.addGroup(Se,r.length/3-Se,0)}function Ee(){const Se=r.length/3;let Le=0;Ue(ce,Le),Le+=ce.length;for(let K=0,ht=G.length;K<ht;K++){const Be=G[K];Ue(Be,Le),Le+=Be.length}n.addGroup(Se,r.length/3-Se,1)}function Ue(Se,Le){let K=Se.length;for(;--K>=0;){const ht=K;let Be=K-1;Be<0&&(Be=Se.length-1);for(let nt=0,Ke=m+w*2;nt<Ke;nt++){const bt=ne*nt,tt=ne*(nt+1),Y=Le+ht+bt,W=Le+Be+bt,ye=Le+Be+tt,Re=Le+ht+tt;Xe(Y,W,ye,Re)}}}function he(Se,Le,K){d.push(Se),d.push(Le),d.push(K)}function Fe(Se,Le,K){Ge(Se),Ge(Le),Ge(K);const ht=r.length/3,Be=A.generateTopUV(n,r,ht-3,ht-2,ht-1);Qe(Be[0]),Qe(Be[1]),Qe(Be[2])}function Xe(Se,Le,K,ht){Ge(Se),Ge(Le),Ge(ht),Ge(Le),Ge(K),Ge(ht);const Be=r.length/3,nt=A.generateSideWallUV(n,r,Be-6,Be-3,Be-2,Be-1);Qe(nt[0]),Qe(nt[1]),Qe(nt[3]),Qe(nt[1]),Qe(nt[2]),Qe(nt[3])}function Ge(Se){r.push(d[Se*3+0]),r.push(d[Se*3+1]),r.push(d[Se*3+2])}function Qe(Se){s.push(Se.x),s.push(Se.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return zz(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,a=e.shapes.length;s<a;s++){const c=t[e.shapes[s]];n.push(c)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Ty[r.type]().fromJSON(r)),new v0(n,e.options)}}const Fz={generateTopUV:function(i,e,t,n,r){const s=e[t*3],a=e[t*3+1],c=e[n*3],d=e[n*3+1],h=e[r*3],m=e[r*3+1];return[new ke(s,a),new ke(c,d),new ke(h,m)]},generateSideWallUV:function(i,e,t,n,r,s){const a=e[t*3],c=e[t*3+1],d=e[t*3+2],h=e[n*3],m=e[n*3+1],g=e[n*3+2],v=e[r*3],y=e[r*3+1],M=e[r*3+2],E=e[s*3],w=e[s*3+1],S=e[s*3+2];return Math.abs(c-m)<Math.abs(a-h)?[new ke(a,1-d),new ke(h,1-g),new ke(v,1-M),new ke(E,1-S)]:[new ke(c,1-d),new ke(m,1-g),new ke(y,1-M),new ke(w,1-S)]}};function zz(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class y0 extends dc{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new y0(e.radius,e.detail)}}class Mm extends dc{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Mm(e.radius,e.detail)}}class hh extends un{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,a=t/2,c=Math.floor(n),d=Math.floor(r),h=c+1,m=d+1,g=e/c,v=t/d,y=[],M=[],E=[],w=[];for(let S=0;S<m;S++){const A=S*v-a;for(let C=0;C<h;C++){const R=C*g-s;M.push(R,-A,0),E.push(0,0,1),w.push(C/c),w.push(1-S/d)}}for(let S=0;S<d;S++)for(let A=0;A<c;A++){const C=A+h*S,R=A+h*(S+1),O=A+1+h*(S+1),U=A+1+h*S;y.push(C,R,U),y.push(R,O,U)}this.setIndex(y),this.setAttribute("position",new Pt(M,3)),this.setAttribute("normal",new Pt(E,3)),this.setAttribute("uv",new Pt(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hh(e.width,e.height,e.widthSegments,e.heightSegments)}}class x0 extends un{constructor(e=.5,t=1,n=32,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:a},n=Math.max(3,n),r=Math.max(1,r);const c=[],d=[],h=[],m=[];let g=e;const v=(t-e)/r,y=new q,M=new ke;for(let E=0;E<=r;E++){for(let w=0;w<=n;w++){const S=s+w/n*a;y.x=g*Math.cos(S),y.y=g*Math.sin(S),d.push(y.x,y.y,y.z),h.push(0,0,1),M.x=(y.x/t+1)/2,M.y=(y.y/t+1)/2,m.push(M.x,M.y)}g+=v}for(let E=0;E<r;E++){const w=E*(n+1);for(let S=0;S<n;S++){const A=S+w,C=A,R=A+n+1,O=A+n+2,U=A+1;c.push(C,R,U),c.push(R,O,U)}}this.setIndex(c),this.setAttribute("position",new Pt(d,3)),this.setAttribute("normal",new Pt(h,3)),this.setAttribute("uv",new Pt(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new x0(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class _0 extends un{constructor(e=new Uu([new ke(0,.5),new ke(-.5,-.5),new ke(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],s=[],a=[];let c=0,d=0;if(Array.isArray(e)===!1)h(e);else for(let m=0;m<e.length;m++)h(e[m]),this.addGroup(c,d,m),c+=d,d=0;this.setIndex(n),this.setAttribute("position",new Pt(r,3)),this.setAttribute("normal",new Pt(s,3)),this.setAttribute("uv",new Pt(a,2));function h(m){const g=r.length/3,v=m.extractPoints(t);let y=v.shape;const M=v.holes;qo.isClockWise(y)===!1&&(y=y.reverse());for(let w=0,S=M.length;w<S;w++){const A=M[w];qo.isClockWise(A)===!0&&(M[w]=A.reverse())}const E=qo.triangulateShape(y,M);for(let w=0,S=M.length;w<S;w++){const A=M[w];y=y.concat(A)}for(let w=0,S=y.length;w<S;w++){const A=y[w];r.push(A.x,A.y,0),s.push(0,0,1),a.push(A.x,A.y)}for(let w=0,S=E.length;w<S;w++){const A=E[w],C=A[0]+g,R=A[1]+g,O=A[2]+g;n.push(C,R,O),d+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Bz(t,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=t[e.shapes[r]];n.push(a)}return new _0(n,e.curveSegments)}}function Bz(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const r=i[t];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e}class Em extends un{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,a=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:a,thetaLength:c},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const d=Math.min(a+c,Math.PI);let h=0;const m=[],g=new q,v=new q,y=[],M=[],E=[],w=[];for(let S=0;S<=n;S++){const A=[],C=S/n;let R=0;S===0&&a===0?R=.5/t:S===n&&d===Math.PI&&(R=-.5/t);for(let O=0;O<=t;O++){const U=O/t;g.x=-e*Math.cos(r+U*s)*Math.sin(a+C*c),g.y=e*Math.cos(a+C*c),g.z=e*Math.sin(r+U*s)*Math.sin(a+C*c),M.push(g.x,g.y,g.z),v.copy(g).normalize(),E.push(v.x,v.y,v.z),w.push(U+R,1-C),A.push(h++)}m.push(A)}for(let S=0;S<n;S++)for(let A=0;A<t;A++){const C=m[S][A+1],R=m[S][A],O=m[S+1][A],U=m[S+1][A+1];(S!==0||a>0)&&y.push(C,R,U),(S!==n-1||d<Math.PI)&&y.push(R,O,U)}this.setIndex(y),this.setAttribute("position",new Pt(M,3)),this.setAttribute("normal",new Pt(E,3)),this.setAttribute("uv",new Pt(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Em(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class S0 extends dc{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new S0(e.radius,e.detail)}}class w0 extends un{constructor(e=1,t=.4,n=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:s},n=Math.floor(n),r=Math.floor(r);const a=[],c=[],d=[],h=[],m=new q,g=new q,v=new q;for(let y=0;y<=n;y++)for(let M=0;M<=r;M++){const E=M/r*s,w=y/n*Math.PI*2;g.x=(e+t*Math.cos(w))*Math.cos(E),g.y=(e+t*Math.cos(w))*Math.sin(E),g.z=t*Math.sin(w),c.push(g.x,g.y,g.z),m.x=e*Math.cos(E),m.y=e*Math.sin(E),v.subVectors(g,m).normalize(),d.push(v.x,v.y,v.z),h.push(M/r),h.push(y/n)}for(let y=1;y<=n;y++)for(let M=1;M<=r;M++){const E=(r+1)*y+M-1,w=(r+1)*(y-1)+M-1,S=(r+1)*(y-1)+M,A=(r+1)*y+M;a.push(E,w,A),a.push(w,S,A)}this.setIndex(a),this.setAttribute("position",new Pt(c,3)),this.setAttribute("normal",new Pt(d,3)),this.setAttribute("uv",new Pt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new w0(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class M0 extends un{constructor(e=1,t=.4,n=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:a},n=Math.floor(n),r=Math.floor(r);const c=[],d=[],h=[],m=[],g=new q,v=new q,y=new q,M=new q,E=new q,w=new q,S=new q;for(let C=0;C<=n;++C){const R=C/n*s*Math.PI*2;A(R,s,a,e,y),A(R+.01,s,a,e,M),w.subVectors(M,y),S.addVectors(M,y),E.crossVectors(w,S),S.crossVectors(E,w),E.normalize(),S.normalize();for(let O=0;O<=r;++O){const U=O/r*Math.PI*2,F=-t*Math.cos(U),z=t*Math.sin(U);g.x=y.x+(F*S.x+z*E.x),g.y=y.y+(F*S.y+z*E.y),g.z=y.z+(F*S.z+z*E.z),d.push(g.x,g.y,g.z),v.subVectors(g,y).normalize(),h.push(v.x,v.y,v.z),m.push(C/n),m.push(O/r)}}for(let C=1;C<=n;C++)for(let R=1;R<=r;R++){const O=(r+1)*(C-1)+(R-1),U=(r+1)*C+(R-1),F=(r+1)*C+R,z=(r+1)*(C-1)+R;c.push(O,U,z),c.push(U,F,z)}this.setIndex(c),this.setAttribute("position",new Pt(d,3)),this.setAttribute("normal",new Pt(h,3)),this.setAttribute("uv",new Pt(m,2));function A(C,R,O,U,F){const z=Math.cos(C),k=Math.sin(C),L=O/R*C,G=Math.cos(L);F.x=U*(2+G)*.5*z,F.y=U*(2+G)*k*.5,F.z=U*Math.sin(L)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new M0(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class E0 extends un{constructor(e=new hw(new q(-1,-1,0),new q(-1,1,0),new q(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const c=new q,d=new q,h=new ke;let m=new q;const g=[],v=[],y=[],M=[];E(),this.setIndex(M),this.setAttribute("position",new Pt(g,3)),this.setAttribute("normal",new Pt(v,3)),this.setAttribute("uv",new Pt(y,2));function E(){for(let C=0;C<t;C++)w(C);w(s===!1?t:0),A(),S()}function w(C){m=e.getPointAt(C/t,m);const R=a.normals[C],O=a.binormals[C];for(let U=0;U<=r;U++){const F=U/r*Math.PI*2,z=Math.sin(F),k=-Math.cos(F);d.x=k*R.x+z*O.x,d.y=k*R.y+z*O.y,d.z=k*R.z+z*O.z,d.normalize(),v.push(d.x,d.y,d.z),c.x=m.x+n*d.x,c.y=m.y+n*d.y,c.z=m.z+n*d.z,g.push(c.x,c.y,c.z)}}function S(){for(let C=1;C<=t;C++)for(let R=1;R<=r;R++){const O=(r+1)*(C-1)+(R-1),U=(r+1)*C+(R-1),F=(r+1)*C+R,z=(r+1)*(C-1)+R;M.push(O,U,z),M.push(U,F,z)}}function A(){for(let C=0;C<=t;C++)for(let R=0;R<=r;R++)h.x=C/t,h.y=R/r,y.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new E0(new Ty[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class fP extends un{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,r=new q,s=new q;if(e.index!==null){const a=e.attributes.position,c=e.index;let d=e.groups;d.length===0&&(d=[{start:0,count:c.count,materialIndex:0}]);for(let h=0,m=d.length;h<m;++h){const g=d[h],v=g.start,y=g.count;for(let M=v,E=v+y;M<E;M+=3)for(let w=0;w<3;w++){const S=c.getX(M+w),A=c.getX(M+(w+1)%3);r.fromBufferAttribute(a,S),s.fromBufferAttribute(a,A),o1(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let c=0,d=a.count/3;c<d;c++)for(let h=0;h<3;h++){const m=3*c+h,g=3*c+(h+1)%3;r.fromBufferAttribute(a,m),s.fromBufferAttribute(a,g),o1(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Pt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function o1(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(r)===!0?!1:(t.add(n),t.add(r),!0)}var a1=Object.freeze({__proto__:null,BoxGeometry:Zu,CapsuleGeometry:d0,CircleGeometry:h0,ConeGeometry:p0,CylinderGeometry:dh,DodecahedronGeometry:m0,EdgesGeometry:aP,ExtrudeGeometry:v0,IcosahedronGeometry:y0,LatheGeometry:wm,OctahedronGeometry:Mm,PlaneGeometry:hh,PolyhedronGeometry:dc,RingGeometry:x0,ShapeGeometry:_0,SphereGeometry:Em,TetrahedronGeometry:S0,TorusGeometry:w0,TorusKnotGeometry:M0,TubeGeometry:E0,WireframeGeometry:fP});class dP extends mr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new vt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class hP extends yo{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class mw extends mr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new vt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uc,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gs,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class pP extends mw{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ke(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return $t(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new vt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new vt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new vt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class mP extends mr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new vt(16777215),this.specular=new vt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uc,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gs,this.combine=vm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class gP extends mr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new vt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uc,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class vP extends mr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uc,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class yP extends mr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uc,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gs,this.combine=vm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class gw extends mr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=RR,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class vw extends mr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class xP extends mr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new vt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uc,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _P extends Lr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Eu(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function SP(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function wP(i){function e(r,s){return i[r]-i[s]}const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function nS(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,a=0;a!==n;++s){const c=t[s]*e;for(let d=0;d!==e;++d)r[a++]=i[c+d]}return r}function yw(i,e,t,n){let r=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[r++];if(s===void 0)return;let a=s[n];if(a!==void 0)if(Array.isArray(a))do a=s[n],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=i[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[n],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=i[r++];while(s!==void 0);else do a=s[n],a!==void 0&&(e.push(s.time),t.push(a)),s=i[r++];while(s!==void 0)}function Vz(i,e,t,n,r=30){const s=i.clone();s.name=e;const a=[];for(let d=0;d<s.tracks.length;++d){const h=s.tracks[d],m=h.getValueSize(),g=[],v=[];for(let y=0;y<h.times.length;++y){const M=h.times[y]*r;if(!(M<t||M>=n)){g.push(h.times[y]);for(let E=0;E<m;++E)v.push(h.values[y*m+E])}}g.length!==0&&(h.times=Eu(g,h.times.constructor),h.values=Eu(v,h.values.constructor),a.push(h))}s.tracks=a;let c=1/0;for(let d=0;d<s.tracks.length;++d)c>s.tracks[d].times[0]&&(c=s.tracks[d].times[0]);for(let d=0;d<s.tracks.length;++d)s.tracks[d].shift(-1*c);return s.resetDuration(),s}function Hz(i,e=0,t=i,n=30){n<=0&&(n=30);const r=t.tracks.length,s=e/n;for(let a=0;a<r;++a){const c=t.tracks[a],d=c.ValueTypeName;if(d==="bool"||d==="string")continue;const h=i.tracks.find(function(S){return S.name===c.name&&S.ValueTypeName===d});if(h===void 0)continue;let m=0;const g=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);let v=0;const y=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=y/3);const M=c.times.length-1;let E;if(s<=c.times[0]){const S=m,A=g-m;E=c.values.slice(S,A)}else if(s>=c.times[M]){const S=M*g+m,A=S+g-m;E=c.values.slice(S,A)}else{const S=c.createInterpolant(),A=m,C=g-m;S.evaluate(s),E=S.resultBuffer.slice(A,C)}d==="quaternion"&&new dr().fromArray(E).normalize().conjugate().toArray(E);const w=h.times.length;for(let S=0;S<w;++S){const A=S*y+v;if(d==="quaternion")dr.multiplyQuaternionsFlat(h.values,A,E,0,h.values,A);else{const C=y-v*2;for(let R=0;R<C;++R)h.values[A+R]-=E[R]}}}return i.blendMode=QS,i}const Gz={convertArray:Eu,isTypedArray:SP,getKeyframeOrder:wP,sortedArray:nS,flattenJSON:yw,subclip:Vz,makeClipAdditive:Hz};class Tm{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let a;n:{i:if(!(e<r)){for(let c=n+2;;){if(r===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===c)break;if(s=r,r=t[++n],e<r)break t}a=t.length;break n}if(!(e>=s)){const c=t[1];e<c&&(n=2,s=c);for(let d=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===d)break;if(r=s,s=t[--n-1],e>=s)break t}a=n,n=0;break n}break e}for(;n<a;){const c=n+a>>>1;e<t[c]?a=c:n=c+1}if(r=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=n[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class MP extends Tm{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Su,endingEnd:Su}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,a=e+1,c=r[s],d=r[a];if(c===void 0)switch(this.getSettings_().endingStart){case wu:s=e,c=2*t-n;break;case $p:s=r.length-2,c=t+r[s]-r[s+1];break;default:s=e,c=n}if(d===void 0)switch(this.getSettings_().endingEnd){case wu:a=e,d=2*n-t;break;case $p:a=1,d=n+r[1]-r[0];break;default:a=e-1,d=t}const h=(n-t)*.5,m=this.valueSize;this._weightPrev=h/(t-c),this._weightNext=h/(d-n),this._offsetPrev=s*m,this._offsetNext=a*m}interpolate_(e,t,n,r){const s=this.resultBuffer,a=this.sampleValues,c=this.valueSize,d=e*c,h=d-c,m=this._offsetPrev,g=this._offsetNext,v=this._weightPrev,y=this._weightNext,M=(n-t)/(r-t),E=M*M,w=E*M,S=-v*w+2*v*E-v*M,A=(1+v)*w+(-1.5-2*v)*E+(-.5+v)*M+1,C=(-1-y)*w+(1.5+y)*E+.5*M,R=y*w-y*E;for(let O=0;O!==c;++O)s[O]=S*a[m+O]+A*a[h+O]+C*a[d+O]+R*a[g+O];return s}}class xw extends Tm{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,a=this.sampleValues,c=this.valueSize,d=e*c,h=d-c,m=(n-t)/(r-t),g=1-m;for(let v=0;v!==c;++v)s[v]=a[h+v]*g+a[d+v]*m;return s}}class EP extends Tm{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class So{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Eu(t,this.TimeBufferType),this.values=Eu(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Eu(e.times,Array),values:Eu(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new EP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new xw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new MP(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Zp:t=this.InterpolantFactoryMethodDiscrete;break;case wy:t=this.InterpolantFactoryMethodLinear;break;case Av:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Zp;case this.InterpolantFactoryMethodLinear:return wy;case this.InterpolantFactoryMethodSmooth:return Av}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,a=r-1;for(;s!==r&&n[s]<e;)++s;for(;a!==-1&&n[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const c=this.getValueSize();this.times=n.slice(s,a),this.values=this.values.slice(s*c,a*c)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let c=0;c!==s;c++){const d=n[c];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,d),e=!1;break}if(a!==null&&a>d){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,d,a),e=!1;break}a=d}if(r!==void 0&&SP(r))for(let c=0,d=r.length;c!==d;++c){const h=r[c];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===Av,s=e.length-1;let a=1;for(let c=1;c<s;++c){let d=!1;const h=e[c],m=e[c+1];if(h!==m&&(c!==1||h!==e[0]))if(r)d=!0;else{const g=c*n,v=g-n,y=g+n;for(let M=0;M!==n;++M){const E=t[g+M];if(E!==t[v+M]||E!==t[y+M]){d=!0;break}}}if(d){if(c!==a){e[a]=e[c];const g=c*n,v=a*n;for(let y=0;y!==n;++y)t[v+y]=t[g+y]}++a}}if(s>0){e[a]=e[s];for(let c=s*n,d=a*n,h=0;h!==n;++h)t[d+h]=t[c+h];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}So.prototype.TimeBufferType=Float32Array;So.prototype.ValueBufferType=Float32Array;So.prototype.DefaultInterpolation=wy;class $u extends So{constructor(e,t,n){super(e,t,n)}}$u.prototype.ValueTypeName="bool";$u.prototype.ValueBufferType=Array;$u.prototype.DefaultInterpolation=Zp;$u.prototype.InterpolantFactoryMethodLinear=void 0;$u.prototype.InterpolantFactoryMethodSmooth=void 0;class _w extends So{}_w.prototype.ValueTypeName="color";class om extends So{}om.prototype.ValueTypeName="number";class TP extends Tm{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,a=this.sampleValues,c=this.valueSize,d=(n-t)/(r-t);let h=e*c;for(let m=h+c;h!==m;h+=4)dr.slerpFlat(s,0,a,h-c,a,h,d);return s}}class bm extends So{InterpolantFactoryMethodLinear(e){return new TP(this.times,this.values,this.getValueSize(),e)}}bm.prototype.ValueTypeName="quaternion";bm.prototype.InterpolantFactoryMethodSmooth=void 0;class Qu extends So{constructor(e,t,n){super(e,t,n)}}Qu.prototype.ValueTypeName="string";Qu.prototype.ValueBufferType=Array;Qu.prototype.DefaultInterpolation=Zp;Qu.prototype.InterpolantFactoryMethodLinear=void 0;Qu.prototype.InterpolantFactoryMethodSmooth=void 0;class am extends So{}am.prototype.ValueTypeName="vector";class lm{constructor(e="",t=-1,n=[],r=r0){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=ms(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let a=0,c=n.length;a!==c;++a)t.push(jz(n[a]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=n.length;s!==a;++s)t.push(So.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,a=[];for(let c=0;c<s;c++){let d=[],h=[];d.push((c+s-1)%s,c,(c+1)%s),h.push(0,1,0);const m=wP(d);d=nS(d,1,m),h=nS(h,1,m),!r&&d[0]===0&&(d.push(s),h.push(h[0])),a.push(new om(".morphTargetInfluences["+t[c].name+"]",d,h).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let c=0,d=e.length;c<d;c++){const h=e[c],m=h.name.match(s);if(m&&m.length>1){const g=m[1];let v=r[g];v||(r[g]=v=[]),v.push(h)}}const a=[];for(const c in r)a.push(this.CreateFromMorphTargetSequence(c,r[c],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(g,v,y,M,E){if(y.length!==0){const w=[],S=[];yw(y,w,S,M),w.length!==0&&E.push(new g(v,w,S))}},r=[],s=e.name||"default",a=e.fps||30,c=e.blendMode;let d=e.length||-1;const h=e.hierarchy||[];for(let g=0;g<h.length;g++){const v=h[g].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const y={};let M;for(M=0;M<v.length;M++)if(v[M].morphTargets)for(let E=0;E<v[M].morphTargets.length;E++)y[v[M].morphTargets[E]]=-1;for(const E in y){const w=[],S=[];for(let A=0;A!==v[M].morphTargets.length;++A){const C=v[M];w.push(C.time),S.push(C.morphTarget===E?1:0)}r.push(new om(".morphTargetInfluence["+E+"]",w,S))}d=y.length*a}else{const y=".bones["+t[g].name+"]";n(am,y+".position",v,"pos",r),n(bm,y+".quaternion",v,"rot",r),n(am,y+".scale",v,"scl",r)}}return r.length===0?null:new this(s,d,r,c)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Wz(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return om;case"vector":case"vector2":case"vector3":case"vector4":return am;case"color":return _w;case"quaternion":return bm;case"bool":case"boolean":return $u;case"string":return Qu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function jz(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Wz(i.type);if(i.times===void 0){const t=[],n=[];yw(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const ja={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class Sw{constructor(e,t,n){const r=this;let s=!1,a=0,c=0,d;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(m){c++,s===!1&&r.onStart!==void 0&&r.onStart(m,a,c),s=!0},this.itemEnd=function(m){a++,r.onProgress!==void 0&&r.onProgress(m,a,c),a===c&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(m){r.onError!==void 0&&r.onError(m)},this.resolveURL=function(m){return d?d(m):m},this.setURLModifier=function(m){return d=m,this},this.addHandler=function(m,g){return h.push(m,g),this},this.removeHandler=function(m){const g=h.indexOf(m);return g!==-1&&h.splice(g,2),this},this.getHandler=function(m){for(let g=0,v=h.length;g<v;g+=2){const y=h[g],M=h[g+1];if(y.global&&(y.lastIndex=0),y.test(m))return M}return null}}}const bP=new Sw;class Qr{constructor(e){this.manager=e!==void 0?e:bP,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Qr.DEFAULT_MATERIAL_NAME="__DEFAULT";const Fa={};class Xz extends Error{constructor(e,t){super(e),this.response=t}}class Ja extends Qr{constructor(e){super(e)}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=ja.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Fa[e]!==void 0){Fa[e].push({onLoad:t,onProgress:n,onError:r});return}Fa[e]=[],Fa[e].push({onLoad:t,onProgress:n,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),c=this.mimeType,d=this.responseType;fetch(a).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const m=Fa[e],g=h.body.getReader(),v=h.headers.get("X-File-Size")||h.headers.get("Content-Length"),y=v?parseInt(v):0,M=y!==0;let E=0;const w=new ReadableStream({start(S){A();function A(){g.read().then(({done:C,value:R})=>{if(C)S.close();else{E+=R.byteLength;const O=new ProgressEvent("progress",{lengthComputable:M,loaded:E,total:y});for(let U=0,F=m.length;U<F;U++){const z=m[U];z.onProgress&&z.onProgress(O)}S.enqueue(R),A()}},C=>{S.error(C)})}}});return new Response(w)}else throw new Xz(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(d){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(m=>new DOMParser().parseFromString(m,c));case"json":return h.json();default:if(c===void 0)return h.text();{const g=/charset="?([^;"\s]*)"?/i.exec(c),v=g&&g[1]?g[1].toLowerCase():void 0,y=new TextDecoder(v);return h.arrayBuffer().then(M=>y.decode(M))}}}).then(h=>{ja.add(e,h);const m=Fa[e];delete Fa[e];for(let g=0,v=m.length;g<v;g++){const y=m[g];y.onLoad&&y.onLoad(h)}}).catch(h=>{const m=Fa[e];if(m===void 0)throw this.manager.itemError(e),h;delete Fa[e];for(let g=0,v=m.length;g<v;g++){const y=m[g];y.onError&&y.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Yz extends Qr{constructor(e){super(e)}load(e,t,n,r){const s=this,a=new Ja(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(d){r?r(d):console.error(d),s.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=lm.parse(e[n]);t.push(r)}return t}}class qz extends Qr{constructor(e){super(e)}load(e,t,n,r){const s=this,a=[],c=new u0,d=new Ja(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(s.withCredentials);let h=0;function m(g){d.load(e[g],function(v){const y=s.parse(v,!0);a[g]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},h+=1,h===6&&(y.mipmapCount===1&&(c.minFilter=Pi),c.image=a,c.format=y.format,c.needsUpdate=!0,t&&t(c))},n,r)}if(Array.isArray(e))for(let g=0,v=e.length;g<v;++g)m(g);else d.load(e,function(g){const v=s.parse(g,!0);if(v.isCubemap){const y=v.mipmaps.length/v.mipmapCount;for(let M=0;M<y;M++){a[M]={mipmaps:[]};for(let E=0;E<v.mipmapCount;E++)a[M].mipmaps.push(v.mipmaps[M*v.mipmapCount+E]),a[M].format=v.format,a[M].width=v.width,a[M].height=v.height}c.image=a}else c.image.width=v.width,c.image.height=v.height,c.mipmaps=v.mipmaps;v.mipmapCount===1&&(c.minFilter=Pi),c.format=v.format,c.needsUpdate=!0,t&&t(c)},n,r);return c}}class cm extends Qr{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=ja.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const c=tm("img");function d(){m(),ja.add(e,this),t&&t(this),s.manager.itemEnd(e)}function h(g){m(),r&&r(g),s.manager.itemError(e),s.manager.itemEnd(e)}function m(){c.removeEventListener("load",d,!1),c.removeEventListener("error",h,!1)}return c.addEventListener("load",d,!1),c.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),s.manager.itemStart(e),c.src=e,c}}class Kz extends Qr{constructor(e){super(e)}load(e,t,n,r){const s=new _m;s.colorSpace=Kr;const a=new cm(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let c=0;function d(h){a.load(e[h],function(m){s.images[h]=m,c++,c===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let h=0;h<e.length;++h)d(h);return s}}class Zz extends Qr{constructor(e){super(e)}load(e,t,n,r){const s=this,a=new Yo,c=new Ja(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(s.withCredentials),c.load(e,function(d){let h;try{h=s.parse(d)}catch(m){if(r!==void 0)r(m);else{console.error(m);return}}h.image!==void 0?a.image=h.image:h.data!==void 0&&(a.image.width=h.width,a.image.height=h.height,a.image.data=h.data),a.wrapS=h.wrapS!==void 0?h.wrapS:Ds,a.wrapT=h.wrapT!==void 0?h.wrapT:Ds,a.magFilter=h.magFilter!==void 0?h.magFilter:Pi,a.minFilter=h.minFilter!==void 0?h.minFilter:Pi,a.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0&&(a.colorSpace=h.colorSpace),h.flipY!==void 0&&(a.flipY=h.flipY),h.format!==void 0&&(a.format=h.format),h.type!==void 0&&(a.type=h.type),h.mipmaps!==void 0&&(a.mipmaps=h.mipmaps,a.minFilter=Go),h.mipmapCount===1&&(a.minFilter=Pi),h.generateMipmaps!==void 0&&(a.generateMipmaps=h.generateMipmaps),a.needsUpdate=!0,t&&t(a,h)},n,r),a}}class $z extends Qr{constructor(e){super(e)}load(e,t,n,r){const s=new ai,a=new cm(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(c){s.image=c,s.needsUpdate=!0,t!==void 0&&t(s)},n,r),s}}class hc extends Mn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new vt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class CP extends hc{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Mn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new vt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Qx=new Wt,l1=new q,c1=new q;class ww{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ke(512,512),this.map=null,this.mapPass=null,this.matrix=new Wt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Sm,this._frameExtents=new ke(1,1),this._viewportCount=1,this._viewports=[new wn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;l1.setFromMatrixPosition(e.matrixWorld),t.position.copy(l1),c1.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(c1),t.updateMatrixWorld(),Qx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Qx),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Qx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Qz extends ww{constructor(){super(new di(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=Qd*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class AP extends hc{constructor(e,t,n=0,r=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Mn.DEFAULT_UP),this.updateMatrix(),this.target=new Mn,this.distance=n,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new Qz}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const u1=new Wt,wp=new q,Jx=new q;class Jz extends ww{constructor(){super(new di(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ke(4,2),this._viewportCount=6,this._viewports=[new wn(2,1,1,1),new wn(0,1,1,1),new wn(3,1,1,1),new wn(1,1,1,1),new wn(3,0,1,1),new wn(1,0,1,1)],this._cubeDirections=[new q(1,0,0),new q(-1,0,0),new q(0,0,1),new q(0,0,-1),new q(0,1,0),new q(0,-1,0)],this._cubeUps=[new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,0,1),new q(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),wp.setFromMatrixPosition(e.matrixWorld),n.position.copy(wp),Jx.copy(n.position),Jx.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Jx),n.updateMatrixWorld(),r.makeTranslation(-wp.x,-wp.y,-wp.z),u1.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(u1)}}class RP extends hc{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Jz}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class tc extends xm{constructor(e=-1,t=1,n=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,a=n+e,c=r+t,d=r-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=h*this.view.offsetX,a=s+h*this.view.width,c-=m*this.view.offsetY,d=c-m*this.view.height}this.projectionMatrix.makeOrthographic(s,a,c,d,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class eB extends ww{constructor(){super(new tc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class PP extends hc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Mn.DEFAULT_UP),this.updateMatrix(),this.target=new Mn,this.shadow=new eB}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class IP extends hc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class NP extends hc{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class LP{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new q)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],1.092548*(n*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(n*s)),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*n),t.addScaledVector(a[4],2*.429043*n*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*n*s),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}class DP extends hc{constructor(e=new LP,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class T0 extends Qr{constructor(e){super(e),this.textures={}}load(e,t,n,r){const s=this,a=new Ja(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(d){r?r(d):console.error(d),s.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new vt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=n(a.value);break;case"c":r.uniforms[s].value=new vt().setHex(a.value);break;case"v2":r.uniforms[s].value=new ke().fromArray(a.value);break;case"v3":r.uniforms[s].value=new q().fromArray(a.value);break;case"v4":r.uniforms[s].value=new wn().fromArray(a.value);break;case"m3":r.uniforms[s].value=new Jt().fromArray(a.value);break;case"m4":r.uniforms[s].value=new Wt().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new ke().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new ke().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return T0.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:dP,SpriteMaterial:sw,RawShaderMaterial:hP,ShaderMaterial:yo,PointsMaterial:aw,MeshPhysicalMaterial:pP,MeshStandardMaterial:mw,MeshPhongMaterial:mP,MeshToonMaterial:gP,MeshNormalMaterial:vP,MeshLambertMaterial:yP,MeshDepthMaterial:gw,MeshDistanceMaterial:vw,MeshBasicMaterial:fc,MeshMatcapMaterial:xP,LineDashedMaterial:_P,LineBasicMaterial:Lr,Material:mr};return new t[e]}}class iS{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class OP extends un{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class UP extends Qr{constructor(e){super(e)}load(e,t,n,r){const s=this,a=new Ja(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(d){r?r(d):console.error(d),s.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(y,M){if(t[M]!==void 0)return t[M];const w=y.interleavedBuffers[M],S=s(y,w.buffer),A=Dd(w.type,S),C=new l0(A,w.stride);return C.uuid=w.uuid,t[M]=C,C}function s(y,M){if(n[M]!==void 0)return n[M];const w=y.arrayBuffers[M],S=new Uint32Array(w).buffer;return n[M]=S,S}const a=e.isInstancedBufferGeometry?new OP:new un,c=e.data.index;if(c!==void 0){const y=Dd(c.type,c.array);a.setIndex(new Un(y,1))}const d=e.data.attributes;for(const y in d){const M=d[y];let E;if(M.isInterleavedBufferAttribute){const w=r(e.data,M.data);E=new Xu(w,M.itemSize,M.offset,M.normalized)}else{const w=Dd(M.type,M.array),S=M.isInstancedBufferAttribute?eh:Un;E=new S(w,M.itemSize,M.normalized)}M.name!==void 0&&(E.name=M.name),M.usage!==void 0&&E.setUsage(M.usage),a.setAttribute(y,E)}const h=e.data.morphAttributes;if(h)for(const y in h){const M=h[y],E=[];for(let w=0,S=M.length;w<S;w++){const A=M[w];let C;if(A.isInterleavedBufferAttribute){const R=r(e.data,A.data);C=new Xu(R,A.itemSize,A.offset,A.normalized)}else{const R=Dd(A.type,A.array);C=new Un(R,A.itemSize,A.normalized)}A.name!==void 0&&(C.name=A.name),E.push(C)}a.morphAttributes[y]=E}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let y=0,M=g.length;y!==M;++y){const E=g[y];a.addGroup(E.start,E.count,E.materialIndex)}const v=e.data.boundingSphere;if(v!==void 0){const y=new q;v.center!==void 0&&y.fromArray(v.center),a.boundingSphere=new hr(y,v.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class tB extends Qr{constructor(e){super(e)}load(e,t,n,r){const s=this,a=this.path===""?iS.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const c=new Ja(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(d){let h=null;try{h=JSON.parse(d)}catch(g){r!==void 0&&r(g),console.error("THREE:ObjectLoader: Can't parse "+e+".",g.message);return}const m=h.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(h,t)},n,r)}async loadAsync(e,t){const n=this,r=this.path===""?iS.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Ja(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),c=JSON.parse(a),d=c.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(c)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){t!==void 0&&t(h)}),c=this.parseTextures(e.textures,a),d=this.parseMaterials(e.materials,c),h=this.parseObject(e.object,s,d,c,n),m=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,m),this.bindLightTargets(h),t!==void 0){let g=!1;for(const v in a)if(a[v].data instanceof HTMLImageElement){g=!0;break}g===!1&&t(h)}return h}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),c=this.parseMaterials(e.materials,a),d=this.parseObject(e.object,r,c,a,t),h=this.parseSkeletons(e.skeletons,d);return this.bindSkeletons(d,h),this.bindLightTargets(d),d}parseShapes(e){const t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){const s=new Uu().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const c=new c0().fromJSON(e[s],r);n[c.uuid]=c}return n}parseGeometries(e,t){const n={};if(e!==void 0){const r=new UP;for(let s=0,a=e.length;s<a;s++){let c;const d=e[s];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":c=r.parse(d);break;default:d.type in a1?c=a1[d.type].fromJSON(d,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${d.type}"`)}c.uuid=d.uuid,d.name!==void 0&&(c.name=d.name),d.userData!==void 0&&(c.userData=d.userData),n[d.uuid]=c}}return n}parseMaterials(e,t){const n={},r={};if(e!==void 0){const s=new T0;s.setTextures(t);for(let a=0,c=e.length;a<c;a++){const d=e[a];n[d.uuid]===void 0&&(n[d.uuid]=s.parse(d)),r[d.uuid]=n[d.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const r=e[n],s=lm.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const n=this,r={};let s;function a(d){return n.manager.itemStart(d),s.load(d,function(){n.manager.itemEnd(d)},void 0,function(){n.manager.itemError(d),n.manager.itemEnd(d)})}function c(d){if(typeof d=="string"){const h=d,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:n.resourcePath+h;return a(m)}else return d.data?{data:Dd(d.type,d.data),width:d.width,height:d.height}:null}if(e!==void 0&&e.length>0){const d=new Sw(t);s=new cm(d),s.setCrossOrigin(this.crossOrigin);for(let h=0,m=e.length;h<m;h++){const g=e[h],v=g.url;if(Array.isArray(v)){const y=[];for(let M=0,E=v.length;M<E;M++){const w=v[M],S=c(w);S!==null&&(S instanceof HTMLImageElement?y.push(S):y.push(new Yo(S.data,S.width,S.height)))}r[g.uuid]=new Mu(y)}else{const y=c(g.url);r[g.uuid]=new Mu(y)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function s(a){if(typeof a=="string"){const c=a,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:t.resourcePath+c;return await r.loadAsync(d)}else return a.data?{data:Dd(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new cm(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,c=e.length;a<c;a++){const d=e[a],h=d.url;if(Array.isArray(h)){const m=[];for(let g=0,v=h.length;g<v;g++){const y=h[g],M=await s(y);M!==null&&(M instanceof HTMLImageElement?m.push(M):m.push(new Yo(M.data,M.width,M.height)))}n[d.uuid]=new Mu(m)}else{const m=await s(d.url);n[d.uuid]=new Mu(m)}}}return n}parseTextures(e,t){function n(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const c=e[s];c.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),t[c.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",c.image);const d=t[c.image],h=d.data;let m;Array.isArray(h)?(m=new _m,h.length===6&&(m.needsUpdate=!0)):(h&&h.data?m=new Yo:m=new ai,h&&(m.needsUpdate=!0)),m.source=d,m.uuid=c.uuid,c.name!==void 0&&(m.name=c.name),c.mapping!==void 0&&(m.mapping=n(c.mapping,nB)),c.channel!==void 0&&(m.channel=c.channel),c.offset!==void 0&&m.offset.fromArray(c.offset),c.repeat!==void 0&&m.repeat.fromArray(c.repeat),c.center!==void 0&&m.center.fromArray(c.center),c.rotation!==void 0&&(m.rotation=c.rotation),c.wrap!==void 0&&(m.wrapS=n(c.wrap[0],f1),m.wrapT=n(c.wrap[1],f1)),c.format!==void 0&&(m.format=c.format),c.internalFormat!==void 0&&(m.internalFormat=c.internalFormat),c.type!==void 0&&(m.type=c.type),c.colorSpace!==void 0&&(m.colorSpace=c.colorSpace),c.minFilter!==void 0&&(m.minFilter=n(c.minFilter,d1)),c.magFilter!==void 0&&(m.magFilter=n(c.magFilter,d1)),c.anisotropy!==void 0&&(m.anisotropy=c.anisotropy),c.flipY!==void 0&&(m.flipY=c.flipY),c.generateMipmaps!==void 0&&(m.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(m.unpackAlignment=c.unpackAlignment),c.compareFunction!==void 0&&(m.compareFunction=c.compareFunction),c.userData!==void 0&&(m.userData=c.userData),r[c.uuid]=m}return r}parseObject(e,t,n,r,s){let a;function c(v){return t[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),t[v]}function d(v){if(v!==void 0){if(Array.isArray(v)){const y=[];for(let M=0,E=v.length;M<E;M++){const w=v[M];n[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),y.push(n[w])}return y}return n[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),n[v]}}function h(v){return r[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),r[v]}let m,g;switch(e.type){case"Scene":a=new rw,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new vt(e.background):a.background=h(e.background)),e.environment!==void 0&&(a.environment=h(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new a0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new o0(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new di(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new tc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new IP(e.color,e.intensity);break;case"DirectionalLight":a=new PP(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new RP(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new NP(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new AP(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new CP(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new DP().fromJSON(e);break;case"SkinnedMesh":m=c(e.geometry),g=d(e.material),a=new $R(m,g),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":m=c(e.geometry),g=d(e.material),a=new _i(m,g);break;case"InstancedMesh":m=c(e.geometry),g=d(e.material);const v=e.count,y=e.instanceMatrix,M=e.instanceColor;a=new QR(m,g,v),a.instanceMatrix=new eh(new Float32Array(y.array),16),M!==void 0&&(a.instanceColor=new eh(new Float32Array(M.array),M.itemSize));break;case"BatchedMesh":m=c(e.geometry),g=d(e.material),a=new JR(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,g),a.geometry=m,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(E=>{const w=new Nr;w.min.fromArray(E.boxMin),w.max.fromArray(E.boxMax);const S=new hr;return S.radius=E.sphereRadius,S.center.fromArray(E.sphereCenter),{boxInitialized:E.boxInitialized,box:w,sphereInitialized:E.sphereInitialized,sphere:S}}),a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=h(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(a._colorsTexture=h(e.colorsTexture.uuid));break;case"LOD":a=new ZR;break;case"Line":a=new oc(c(e.geometry),d(e.material));break;case"LineLoop":a=new eP(c(e.geometry),d(e.material));break;case"LineSegments":a=new Qo(c(e.geometry),d(e.material));break;case"PointCloud":case"Points":a=new tP(c(e.geometry),d(e.material));break;case"Sprite":a=new KR(d(e.material));break;case"Group":a=new Od;break;case"Bone":a=new ow;break;default:a=new Mn}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(a.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let y=0;y<v.length;y++)a.add(this.parseObject(v[y],t,n,r,s))}if(e.animations!==void 0){const v=e.animations;for(let y=0;y<v.length;y++){const M=v[y];a.animations.push(s[M])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const v=e.levels;for(let y=0;y<v.length;y++){const M=v[y],E=a.getObjectByProperty("uuid",M.object);E!==void 0&&a.addLevel(E,M.distance,M.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const r=t[n.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,r=e.getObjectByProperty("uuid",n);r!==void 0?t.target=r:t.target=new Mn}})}}const nB={UVMapping:$y,CubeReflectionMapping:$a,CubeRefractionMapping:sc,EquirectangularReflectionMapping:Xp,EquirectangularRefractionMapping:Yp,CubeUVReflectionMapping:uh},f1={RepeatWrapping:qp,ClampToEdgeWrapping:Ds,MirroredRepeatWrapping:Kp},d1={NearestFilter:Ji,NearestMipmapNearestFilter:HS,NearestMipmapLinearFilter:Ld,LinearFilter:Pi,LinearMipmapNearestFilter:Ip,LinearMipmapLinearFilter:Go};class iB extends Qr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=ja.get(e);if(a!==void 0){if(s.manager.itemStart(e),a.then){a.then(h=>{t&&t(h),s.manager.itemEnd(e)}).catch(h=>{r&&r(h)});return}return setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a}const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader;const d=fetch(e,c).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(h){return ja.add(e,h),t&&t(h),s.manager.itemEnd(e),h}).catch(function(h){r&&r(h),ja.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});ja.add(e,d),s.manager.itemStart(e)}}let dv;class Mw{static getContext(){return dv===void 0&&(dv=new(window.AudioContext||window.webkitAudioContext)),dv}static setContext(e){dv=e}}class rB extends Qr{constructor(e){super(e)}load(e,t,n,r){const s=this,a=new Ja(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(d){try{const h=d.slice(0);Mw.getContext().decodeAudioData(h,function(g){t(g)}).catch(c)}catch(h){c(h)}},n,r);function c(d){r?r(d):console.error(d),s.manager.itemError(e)}}}const h1=new Wt,p1=new Wt,ou=new Wt;class sB{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new di,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new di,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ou.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,a=t.near*Math.tan(Du*t.fov*.5)/t.zoom;let c,d;p1.elements[12]=-r,h1.elements[12]=r,c=-a*t.aspect+s,d=a*t.aspect+s,ou.elements[0]=2*t.near/(d-c),ou.elements[8]=(d+c)/(d-c),this.cameraL.projectionMatrix.copy(ou),c=-a*t.aspect-s,d=a*t.aspect-s,ou.elements[0]=2*t.near/(d-c),ou.elements[8]=(d+c)/(d-c),this.cameraR.projectionMatrix.copy(ou)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(p1),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(h1)}}class kP extends di{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Ew{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=m1(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=m1();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function m1(){return performance.now()}const au=new q,g1=new dr,oB=new q,lu=new q;class aB extends Mn{constructor(){super(),this.type="AudioListener",this.context=Mw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Ew}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(au,g1,oB),lu.set(0,0,-1).applyQuaternion(g1),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(au.x,r),t.positionY.linearRampToValueAtTime(au.y,r),t.positionZ.linearRampToValueAtTime(au.z,r),t.forwardX.linearRampToValueAtTime(lu.x,r),t.forwardY.linearRampToValueAtTime(lu.y,r),t.forwardZ.linearRampToValueAtTime(lu.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(au.x,au.y,au.z),t.setOrientation(lu.x,lu.y,lu.z,n.x,n.y,n.z)}}class FP extends Mn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const cu=new q,v1=new dr,lB=new q,uu=new q;class cB extends FP{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(cu,v1,lB),uu.set(0,0,1).applyQuaternion(v1);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(cu.x,n),t.positionY.linearRampToValueAtTime(cu.y,n),t.positionZ.linearRampToValueAtTime(cu.z,n),t.orientationX.linearRampToValueAtTime(uu.x,n),t.orientationY.linearRampToValueAtTime(uu.y,n),t.orientationZ.linearRampToValueAtTime(uu.z,n)}else t.setPosition(cu.x,cu.y,cu.z),t.setOrientation(uu.x,uu.y,uu.z)}}class uB{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class zP{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,s,a;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let c=0;c!==r;++c)n[s+c]=n[c];a=t}else{a+=t;const c=t/a;this._mixBufferRegion(n,s,0,c,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const d=t*this._origIndex;this._mixBufferRegion(n,r,d,1-s,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let d=t,h=t+t;d!==h;++d)if(n[d]!==n[d+t]){c.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let s=n,a=r;s!==a;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[t+a]=e[n+a]}_slerp(e,t,n,r){dr.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){const a=this._workIndex*s;dr.multiplyQuaternionsFlat(e,a,e,t,e,n),dr.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,n,r,s){const a=1-r;for(let c=0;c!==s;++c){const d=t+c;e[d]=e[d]*a+e[n+c]*r}}_lerpAdditive(e,t,n,r,s){for(let a=0;a!==s;++a){const c=t+a;e[c]=e[c]+e[n+a]*r}}}const Tw="\\[\\]\\.:\\/",fB=new RegExp("["+Tw+"]","g"),bw="[^"+Tw+"]",dB="[^"+Tw.replace("\\.","")+"]",hB=/((?:WC+[\/:])*)/.source.replace("WC",bw),pB=/(WCOD+)?/.source.replace("WCOD",dB),mB=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",bw),gB=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",bw),vB=new RegExp("^"+hB+pB+mB+gB+"$"),yB=["material","materials","bones","map"];class xB{constructor(e,t,n){const r=n||Sn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Sn{constructor(e,t,n){this.path=t,this.parsedPath=n||Sn.parseTrackName(t),this.node=Sn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Sn.Composite(e,t,n):new Sn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(fB,"")}static parseTrackName(e){const t=vB.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=n.nodeName.substring(r+1);yB.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let a=0;a<s.length;a++){const c=s[a];if(c.name===t||c.uuid===t)return c;const d=n(c.children);if(d)return d}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Sn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let h=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===h){h=m;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const a=e[r];if(a===void 0){const h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+r+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?c=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}d=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(d=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Sn.Composite=xB;Sn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Sn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Sn.prototype.GetterByBindingType=[Sn.prototype._getValue_direct,Sn.prototype._getValue_array,Sn.prototype._getValue_arrayElement,Sn.prototype._getValue_toArray];Sn.prototype.SetterByBindingTypeAndVersioning=[[Sn.prototype._setValue_direct,Sn.prototype._setValue_direct_setNeedsUpdate,Sn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Sn.prototype._setValue_array,Sn.prototype._setValue_array_setNeedsUpdate,Sn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Sn.prototype._setValue_arrayElement,Sn.prototype._setValue_arrayElement_setNeedsUpdate,Sn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Sn.prototype._setValue_fromArray,Sn.prototype._setValue_fromArray_setNeedsUpdate,Sn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class _B{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ms(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length;let c,d=e.length,h=this.nCachedObjects_;for(let m=0,g=arguments.length;m!==g;++m){const v=arguments[m],y=v.uuid;let M=t[y];if(M===void 0){M=d++,t[y]=M,e.push(v);for(let E=0,w=a;E!==w;++E)s[E].push(new Sn(v,n[E],r[E]))}else if(M<h){c=e[M];const E=--h,w=e[E];t[w.uuid]=M,e[M]=w,t[y]=E,e[E]=v;for(let S=0,A=a;S!==A;++S){const C=s[S],R=C[E];let O=C[M];C[M]=R,O===void 0&&(O=new Sn(v,n[S],r[S])),C[E]=O}}else e[M]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_;for(let a=0,c=arguments.length;a!==c;++a){const d=arguments[a],h=d.uuid,m=t[h];if(m!==void 0&&m>=s){const g=s++,v=e[g];t[v.uuid]=m,e[m]=v,t[h]=g,e[g]=d;for(let y=0,M=r;y!==M;++y){const E=n[y],w=E[g],S=E[m];E[m]=w,E[g]=S}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_,a=e.length;for(let c=0,d=arguments.length;c!==d;++c){const h=arguments[c],m=h.uuid,g=t[m];if(g!==void 0)if(delete t[m],g<s){const v=--s,y=e[v],M=--a,E=e[M];t[y.uuid]=g,e[g]=y,t[E.uuid]=v,e[v]=E,e.pop();for(let w=0,S=r;w!==S;++w){const A=n[w],C=A[v],R=A[M];A[g]=C,A[v]=R,A.pop()}}else{const v=--a,y=e[v];v>0&&(t[y.uuid]=g),e[g]=y,e.pop();for(let M=0,E=r;M!==E;++M){const w=n[M];w[g]=w[v],w.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const s=this._bindings;if(r!==void 0)return s[r];const a=this._paths,c=this._parsedPaths,d=this._objects,h=d.length,m=this.nCachedObjects_,g=new Array(h);r=s.length,n[e]=r,a.push(e),c.push(t),s.push(g);for(let v=m,y=d.length;v!==y;++v){const M=d[v];g[v]=new Sn(M,e,t)}return g}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const r=this._paths,s=this._parsedPaths,a=this._bindings,c=a.length-1,d=a[c],h=e[c];t[h]=n,a[n]=d,a.pop(),s[n]=s[c],s.pop(),r[n]=r[c],r.pop()}}}class BP{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const s=t.tracks,a=s.length,c=new Array(a),d={endingStart:Su,endingEnd:Su};for(let h=0;h!==a;++h){const m=s[h].createInterpolant(null);c[h]=m,m.settings=d}this._interpolantSettings=d,this._interpolants=c,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=CR,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const r=this._clip.duration,s=e._clip.duration,a=s/r,c=r/s;e.warp(1,a,t),this.warp(c,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,s=r.time,a=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=r._lendControlInterpolant(),this._timeScaleInterpolant=c);const d=c.parameterPositions,h=c.sampleValues;return d[0]=s,d[1]=s+n,h[0]=e/a,h[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const d=(e-s)*n;d<0||n===0?t=0:(this._startTime=null,t=n*d)}t*=this._updateTimeScale(e);const a=this._updateTime(t),c=this._updateWeight(e);if(c>0){const d=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case QS:for(let m=0,g=d.length;m!==g;++m)d[m].evaluate(a),h[m].accumulateAdditive(c);break;case r0:default:for(let m=0,g=d.length;m!==g;++m)d[m].evaluate(a),h[m].accumulate(r,c)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,s=this._loopCount;const a=n===AR;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(n===bR){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){const c=Math.floor(r/t);r-=t*c,s+=Math.abs(c);const d=this.repetitions-s;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(d===1){const h=e<0;this._setEndings(h,!h,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=wu,r.endingEnd=wu):(e?r.endingStart=this.zeroSlopeAtStart?wu:Su:r.endingStart=$p,t?r.endingEnd=this.zeroSlopeAtEnd?wu:Su:r.endingEnd=$p)}_scheduleFading(e,t,n){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const c=a.parameterPositions,d=a.sampleValues;return c[0]=s,d[0]=t,c[1]=s+e,d[1]=n,this}}const SB=new Float32Array(1);class wB extends $o{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,c=e._interpolants,d=n.uuid,h=this._bindingsByRootAndName;let m=h[d];m===void 0&&(m={},h[d]=m);for(let g=0;g!==s;++g){const v=r[g],y=v.name;let M=m[y];if(M!==void 0)++M.referenceCount,a[g]=M;else{if(M=a[g],M!==void 0){M._cacheIndex===null&&(++M.referenceCount,this._addInactiveBinding(M,d,y));continue}const E=t&&t._propertyBindings[g].binding.parsedPath;M=new zP(Sn.create(n,y,E),v.ValueTypeName,v.getValueSize()),++M.referenceCount,this._addInactiveBinding(M,d,y),a[g]=M}c[g].resultBuffer=M.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const c=a.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,c=a[s],d=c.knownActions,h=d[d.length-1],m=e._byClipCacheIndex;h._byClipCacheIndex=m,d[m]=h,d.pop(),e._byClipCacheIndex=null;const g=c.actionByRoot,v=(e._localRoot||this._root).uuid;delete g[v],d.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[t];a===void 0&&(a={},r[t]=a),a[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,a=this._bindingsByRootAndName,c=a[r],d=t[t.length-1],h=e._cacheIndex;d._cacheIndex=h,t[h]=d,t.pop(),delete c[s],Object.keys(c).length===0&&delete a[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new xw(new Float32Array(2),new Float32Array(2),1,SB),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const r=t||this._root,s=r.uuid;let a=typeof e=="string"?lm.findByName(r,e):e;const c=a!==null?a.uuid:e,d=this._actionsByClip[c];let h=null;if(n===void 0&&(a!==null?n=a.blendMode:n=r0),d!==void 0){const g=d.actionByRoot[s];if(g!==void 0&&g.blendMode===n)return g;h=d.knownActions[0],a===null&&(a=h._clip)}if(a===null)return null;const m=new BP(this,a,t,n);return this._bindAction(m,h),this._addInactiveAction(m,c,s),m}existingAction(e,t){const n=t||this._root,r=n.uuid,s=typeof e=="string"?lm.findByName(n,e):e,a=s?s.uuid:e,c=this._actionsByClip[a];return c!==void 0&&c.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let h=0;h!==n;++h)t[h]._update(r,e,s,a);const c=this._bindings,d=this._nActiveBindings;for(let h=0;h!==d;++h)c[h].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(s!==void 0){const a=s.knownActions;for(let c=0,d=a.length;c!==d;++c){const h=a[c];this._deactivateAction(h);const m=h._cacheIndex,g=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,g._cacheIndex=m,t[m]=g,t.pop(),this._removeInactiveBindingsForAction(h)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const a in n){const c=n[a].actionByRoot,d=c[t];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const a in s){const c=s[a];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Cw{constructor(e){this.value=e}clone(){return new Cw(this.value.clone===void 0?this.value:this.value.clone())}}let MB=0;class EB extends $o{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:MB++}),this.name="",this.usage=Jp,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let a=0;a<s.length;a++)this.uniforms.push(s[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class TB extends l0{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class bB{constructor(e,t,n,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const y1=new Wt;class VP{constructor(e,t,n=0,r=1/0){this.ray=new Ku(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new Ou,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return y1.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(y1),this}intersectObject(e,t=!0,n=[]){return rS(e,this,n,t),n.sort(x1),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)rS(e[r],this,n,t);return n.sort(x1),n}}function x1(i,e){return i.distance-e.distance}function rS(i,e,t,n){let r=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(r=!1),r===!0&&n===!0){const s=i.children;for(let a=0,c=s.length;a<c;a++)rS(s[a],e,t,!0)}}class sS{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=$t(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos($t(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class CB{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class Aw{constructor(e,t,n,r){Aw.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=r,this}}const _1=new ke;class AB{constructor(e=new ke(1/0,1/0),t=new ke(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=_1.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,_1).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const S1=new q,hv=new q;class RB{constructor(e=new q,t=new q){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){S1.subVectors(e,this.start),hv.subVectors(this.end,this.start);const n=hv.dot(hv);let s=hv.dot(S1)/n;return t&&(s=$t(s,0,1)),s}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const w1=new q;class PB extends Mn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new un,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,c=1,d=32;a<d;a++,c++){const h=a/d*Math.PI*2,m=c/d*Math.PI*2;r.push(Math.cos(h),Math.sin(h),1,Math.cos(m),Math.sin(m),1)}n.setAttribute("position",new Pt(r,3));const s=new Lr({fog:!1,toneMapped:!1});this.cone=new Qo(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),w1.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(w1),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Bl=new q,pv=new Wt,e_=new Wt;class IB extends Qo{constructor(e){const t=HP(e),n=new un,r=[],s=[],a=new vt(0,0,1),c=new vt(0,1,0);for(let h=0;h<t.length;h++){const m=t[h];m.parent&&m.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(a.r,a.g,a.b),s.push(c.r,c.g,c.b))}n.setAttribute("position",new Pt(r,3)),n.setAttribute("color",new Pt(s,3));const d=new Lr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,d),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");e_.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const c=t[s];c.parent&&c.parent.isBone&&(pv.multiplyMatrices(e_,c.matrixWorld),Bl.setFromMatrixPosition(pv),r.setXYZ(a,Bl.x,Bl.y,Bl.z),pv.multiplyMatrices(e_,c.parent.matrixWorld),Bl.setFromMatrixPosition(pv),r.setXYZ(a+1,Bl.x,Bl.y,Bl.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function HP(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push.apply(e,HP(i.children[t]));return e}class NB extends _i{constructor(e,t,n){const r=new Em(t,4,2),s=new fc({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const LB=new q,M1=new vt,E1=new vt;class DB extends Mn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new Mm(t);r.rotateY(Math.PI*.5),this.material=new fc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),a=new Float32Array(s.count*3);r.setAttribute("color",new Un(a,3)),this.add(new _i(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");M1.copy(this.light.color),E1.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const s=n<r/2?M1:E1;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(LB.setFromMatrixPosition(this.light.matrixWorld).negate())}}class OB extends Qo{constructor(e=10,t=10,n=4473924,r=8947848){n=new vt(n),r=new vt(r);const s=t/2,a=e/t,c=e/2,d=[],h=[];for(let v=0,y=0,M=-c;v<=t;v++,M+=a){d.push(-c,0,M,c,0,M),d.push(M,0,-c,M,0,c);const E=v===s?n:r;E.toArray(h,y),y+=3,E.toArray(h,y),y+=3,E.toArray(h,y),y+=3,E.toArray(h,y),y+=3}const m=new un;m.setAttribute("position",new Pt(d,3)),m.setAttribute("color",new Pt(h,3));const g=new Lr({vertexColors:!0,toneMapped:!1});super(m,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class UB extends Qo{constructor(e=10,t=16,n=8,r=64,s=4473924,a=8947848){s=new vt(s),a=new vt(a);const c=[],d=[];if(t>1)for(let g=0;g<t;g++){const v=g/t*(Math.PI*2),y=Math.sin(v)*e,M=Math.cos(v)*e;c.push(0,0,0),c.push(y,0,M);const E=g&1?s:a;d.push(E.r,E.g,E.b),d.push(E.r,E.g,E.b)}for(let g=0;g<n;g++){const v=g&1?s:a,y=e-e/n*g;for(let M=0;M<r;M++){let E=M/r*(Math.PI*2),w=Math.sin(E)*y,S=Math.cos(E)*y;c.push(w,0,S),d.push(v.r,v.g,v.b),E=(M+1)/r*(Math.PI*2),w=Math.sin(E)*y,S=Math.cos(E)*y,c.push(w,0,S),d.push(v.r,v.g,v.b)}}const h=new un;h.setAttribute("position",new Pt(c,3)),h.setAttribute("color",new Pt(d,3));const m=new Lr({vertexColors:!0,toneMapped:!1});super(h,m),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const T1=new q,mv=new q,b1=new q;class kB extends Mn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new un;r.setAttribute("position",new Pt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Lr({fog:!1,toneMapped:!1});this.lightPlane=new oc(r,s),this.add(this.lightPlane),r=new un,r.setAttribute("position",new Pt([0,0,0,0,0,1],3)),this.targetLine=new oc(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),T1.setFromMatrixPosition(this.light.matrixWorld),mv.setFromMatrixPosition(this.light.target.matrixWorld),b1.subVectors(mv,T1),this.lightPlane.lookAt(mv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(mv),this.targetLine.scale.z=b1.length()}}const gv=new q,si=new xm;class FB extends Qo{constructor(e){const t=new un,n=new Lr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(M,E){d(M),d(E)}function d(M){r.push(0,0,0),s.push(0,0,0),a[M]===void 0&&(a[M]=[]),a[M].push(r.length/3-1)}t.setAttribute("position",new Pt(r,3)),t.setAttribute("color",new Pt(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const h=new vt(16755200),m=new vt(16711680),g=new vt(43775),v=new vt(16777215),y=new vt(3355443);this.setColors(h,m,g,v,y)}setColors(e,t,n,r,s){const c=this.geometry.getAttribute("color");c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,t.r,t.g,t.b),c.setXYZ(25,t.r,t.g,t.b),c.setXYZ(26,t.r,t.g,t.b),c.setXYZ(27,t.r,t.g,t.b),c.setXYZ(28,t.r,t.g,t.b),c.setXYZ(29,t.r,t.g,t.b),c.setXYZ(30,t.r,t.g,t.b),c.setXYZ(31,t.r,t.g,t.b),c.setXYZ(32,n.r,n.g,n.b),c.setXYZ(33,n.r,n.g,n.b),c.setXYZ(34,n.r,n.g,n.b),c.setXYZ(35,n.r,n.g,n.b),c.setXYZ(36,n.r,n.g,n.b),c.setXYZ(37,n.r,n.g,n.b),c.setXYZ(38,r.r,r.g,r.b),c.setXYZ(39,r.r,r.g,r.b),c.setXYZ(40,s.r,s.g,s.b),c.setXYZ(41,s.r,s.g,s.b),c.setXYZ(42,s.r,s.g,s.b),c.setXYZ(43,s.r,s.g,s.b),c.setXYZ(44,s.r,s.g,s.b),c.setXYZ(45,s.r,s.g,s.b),c.setXYZ(46,s.r,s.g,s.b),c.setXYZ(47,s.r,s.g,s.b),c.setXYZ(48,s.r,s.g,s.b),c.setXYZ(49,s.r,s.g,s.b),c.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;si.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),fi("c",t,e,si,0,0,-1),fi("t",t,e,si,0,0,1),fi("n1",t,e,si,-n,-r,-1),fi("n2",t,e,si,n,-r,-1),fi("n3",t,e,si,-n,r,-1),fi("n4",t,e,si,n,r,-1),fi("f1",t,e,si,-n,-r,1),fi("f2",t,e,si,n,-r,1),fi("f3",t,e,si,-n,r,1),fi("f4",t,e,si,n,r,1),fi("u1",t,e,si,n*.7,r*1.1,-1),fi("u2",t,e,si,-n*.7,r*1.1,-1),fi("u3",t,e,si,0,r*2,-1),fi("cf1",t,e,si,-n,0,1),fi("cf2",t,e,si,n,0,1),fi("cf3",t,e,si,0,-r,1),fi("cf4",t,e,si,0,r,1),fi("cn1",t,e,si,-n,0,-1),fi("cn2",t,e,si,n,0,-1),fi("cn3",t,e,si,0,-r,-1),fi("cn4",t,e,si,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function fi(i,e,t,n,r,s,a){gv.set(r,s,a).unproject(n);const c=e[i];if(c!==void 0){const d=t.getAttribute("position");for(let h=0,m=c.length;h<m;h++)d.setXYZ(c[h],gv.x,gv.y,gv.z)}}const vv=new Nr;class zB extends Qo{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),s=new un;s.setIndex(new Un(n,1)),s.setAttribute("position",new Un(r,3)),super(s,new Lr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&vv.setFromObject(this.object),vv.isEmpty())return;const t=vv.min,n=vv.max,r=this.geometry.attributes.position,s=r.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class BB extends Qo{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new un;s.setIndex(new Un(n,1)),s.setAttribute("position",new Pt(r,3)),super(s,new Lr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class VB extends oc{constructor(e,t=1,n=16776960){const r=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new un;a.setAttribute("position",new Pt(s,3)),a.computeBoundingSphere(),super(a,new Lr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new un;d.setAttribute("position",new Pt(c,3)),d.computeBoundingSphere(),this.add(new _i(d,new fc({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const C1=new q;let yv,t_;class HB extends Mn{constructor(e=new q(0,0,1),t=new q(0,0,0),n=1,r=16776960,s=n*.2,a=s*.2){super(),this.type="ArrowHelper",yv===void 0&&(yv=new un,yv.setAttribute("position",new Pt([0,0,0,0,1,0],3)),t_=new dh(0,.5,1,5,1),t_.translate(0,-.5,0)),this.position.copy(t),this.line=new oc(yv,new Lr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new _i(t_,new fc({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{C1.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(C1,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class GB extends Qo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new un;r.setAttribute("position",new Pt(t,3)),r.setAttribute("color",new Pt(n,3));const s=new Lr({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,n){const r=new vt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class WB{constructor(){this.type="ShapePath",this.color=new vt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new nm,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,a){return this.currentPath.bezierCurveTo(e,t,n,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(S){const A=[];for(let C=0,R=S.length;C<R;C++){const O=S[C],U=new Uu;U.curves=O.curves,A.push(U)}return A}function n(S,A){const C=A.length;let R=!1;for(let O=C-1,U=0;U<C;O=U++){let F=A[O],z=A[U],k=z.x-F.x,L=z.y-F.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(F=A[U],k=-k,z=A[O],L=-L),S.y<F.y||S.y>z.y)continue;if(S.y===F.y){if(S.x===F.x)return!0}else{const G=L*(S.x-F.x)-k*(S.y-F.y);if(G===0)return!0;if(G<0)continue;R=!R}}else{if(S.y!==F.y)continue;if(z.x<=S.x&&S.x<=F.x||F.x<=S.x&&S.x<=z.x)return!0}}return R}const r=qo.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,c,d;const h=[];if(s.length===1)return c=s[0],d=new Uu,d.curves=c.curves,h.push(d),h;let m=!r(s[0].getPoints());m=e?!m:m;const g=[],v=[];let y=[],M=0,E;v[M]=void 0,y[M]=[];for(let S=0,A=s.length;S<A;S++)c=s[S],E=c.getPoints(),a=r(E),a=e?!a:a,a?(!m&&v[M]&&M++,v[M]={s:new Uu,p:E},v[M].s.curves=c.curves,m&&M++,y[M]=[]):y[M].push({h:c,p:E[0]});if(!v[0])return t(s);if(v.length>1){let S=!1,A=0;for(let C=0,R=v.length;C<R;C++)g[C]=[];for(let C=0,R=v.length;C<R;C++){const O=y[C];for(let U=0;U<O.length;U++){const F=O[U];let z=!0;for(let k=0;k<v.length;k++)n(F.p,v[k].p)&&(C!==k&&A++,z?(z=!1,g[k].push(F)):S=!0);z&&g[C].push(F)}}A>0&&S===!1&&(y=g)}let w;for(let S=0,A=v.length;S<A;S++){d=v[S].s,h.push(d),w=y[S];for(let C=0,R=w.length;C<R;C++)d.holes.push(w[C].h)}return h}}class jB extends $o{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function XB(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function YB(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function qB(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function oS(i,e,t,n){const r=KB(n);switch(t){case XS:return i*e;case qS:return i*e;case KS:return i*e*2;case t0:return i*e/r.components*r.byteLength;case ym:return i*e/r.components*r.byteLength;case ZS:return i*e*2/r.components*r.byteLength;case n0:return i*e*2/r.components*r.byteLength;case YS:return i*e*3/r.components*r.byteLength;case fr:return i*e*4/r.components*r.byteLength;case i0:return i*e*4/r.components*r.byteLength;case Np:case Lp:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case Dp:case Op:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case $v:case Jv:return Math.max(i,16)*Math.max(e,8)/4;case Zv:case Qv:return Math.max(i,8)*Math.max(e,8)/2;case ey:case ty:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case ny:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case iy:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case ry:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case sy:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case oy:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case ay:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case ly:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case cy:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case uy:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case fy:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case dy:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case hy:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case py:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case my:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case gy:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case Up:case vy:case yy:return Math.ceil(i/4)*Math.ceil(e/4)*16;case $S:case xy:return Math.ceil(i/4)*Math.ceil(e/4)*8;case _y:case Sy:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function KB(i){switch(i){case go:case GS:return{byteLength:1,components:1};case $d:case WS:case fh:return{byteLength:2,components:1};case Jy:case e0:return{byteLength:2,components:4};case Qa:case Qy:case $r:return{byteLength:4,components:1};case jS:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}const ZB={contain:XB,cover:YB,fill:qB,getByteLength:oS};class $B extends vo{constructor(e=1,t=1,n=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:n}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ky}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ky);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function GP(){let i=null,e=!1,t=null,n=null;function r(s,a){t(s,a),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function QB(i){const e=new WeakMap;function t(c,d){const h=c.array,m=c.usage,g=h.byteLength,v=i.createBuffer();i.bindBuffer(d,v),i.bufferData(d,h,m),c.onUploadCallback();let y;if(h instanceof Float32Array)y=i.FLOAT;else if(h instanceof Uint16Array)c.isFloat16BufferAttribute?y=i.HALF_FLOAT:y=i.UNSIGNED_SHORT;else if(h instanceof Int16Array)y=i.SHORT;else if(h instanceof Uint32Array)y=i.UNSIGNED_INT;else if(h instanceof Int32Array)y=i.INT;else if(h instanceof Int8Array)y=i.BYTE;else if(h instanceof Uint8Array)y=i.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)y=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:v,type:y,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version,size:g}}function n(c,d,h){const m=d.array,g=d.updateRanges;if(i.bindBuffer(h,c),g.length===0)i.bufferSubData(h,0,m);else{g.sort((y,M)=>y.start-M.start);let v=0;for(let y=1;y<g.length;y++){const M=g[v],E=g[y];E.start<=M.start+M.count+1?M.count=Math.max(M.count,E.start+E.count-M.start):(++v,g[v]=E)}g.length=v+1;for(let y=0,M=g.length;y<M;y++){const E=g[y];i.bufferSubData(h,E.start*m.BYTES_PER_ELEMENT,m,E.start,E.count)}d.clearUpdateRanges()}d.onUploadCallback()}function r(c){return c.isInterleavedBufferAttribute&&(c=c.data),e.get(c)}function s(c){c.isInterleavedBufferAttribute&&(c=c.data);const d=e.get(c);d&&(i.deleteBuffer(d.buffer),e.delete(c))}function a(c,d){if(c.isInterleavedBufferAttribute&&(c=c.data),c.isGLBufferAttribute){const m=e.get(c);(!m||m.version<c.version)&&e.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}const h=e.get(c);if(h===void 0)e.set(c,t(c,d));else if(h.version<c.version){if(h.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(h.buffer,c,d),h.version=c.version}}return{get:r,remove:s,update:a}}var JB=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,e4=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,t4=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,n4=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,i4=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,r4=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,s4=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,o4=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,a4=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,l4=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,c4=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,u4=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,f4=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,d4=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,h4=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,p4=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,m4=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,g4=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,v4=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,y4=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,x4=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,_4=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,S4=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,w4=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,M4=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,E4=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,T4=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,b4=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,C4=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,A4=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,R4="gl_FragColor = linearToOutputTexel( gl_FragColor );",P4=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,I4=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,N4=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,L4=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,D4=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,O4=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,U4=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,k4=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,F4=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,z4=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,B4=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,V4=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,H4=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,G4=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,W4=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,j4=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,X4=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Y4=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,q4=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,K4=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Z4=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,$4=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Q4=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,J4=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,eV=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,tV=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,nV=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,iV=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,rV=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,sV=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,oV=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,aV=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,lV=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,cV=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,uV=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,fV=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,dV=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,hV=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,pV=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,mV=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,gV=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,vV=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,yV=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,xV=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,_V=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,SV=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,wV=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,MV=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,EV=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,TV=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,bV=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,CV=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,AV=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,RV=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,PV=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,IV=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,NV=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,LV=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,DV=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,OV=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,UV=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,kV=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,FV=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,zV=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,BV=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,VV=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,HV=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,GV=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,WV=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,jV=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,XV=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,YV=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,qV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,KV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ZV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,$V=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const QV=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,JV=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,eH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,tH=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,iH=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,rH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,sH=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,oH=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,aH=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,lH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,cH=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,uH=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fH=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,dH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,hH=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pH=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mH=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gH=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,vH=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yH=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,xH=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,_H=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,SH=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wH=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,MH=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EH=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,TH=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bH=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,CH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,AH=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,RH=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,PH=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,IH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ln={alphahash_fragment:JB,alphahash_pars_fragment:e4,alphamap_fragment:t4,alphamap_pars_fragment:n4,alphatest_fragment:i4,alphatest_pars_fragment:r4,aomap_fragment:s4,aomap_pars_fragment:o4,batching_pars_vertex:a4,batching_vertex:l4,begin_vertex:c4,beginnormal_vertex:u4,bsdfs:f4,iridescence_fragment:d4,bumpmap_pars_fragment:h4,clipping_planes_fragment:p4,clipping_planes_pars_fragment:m4,clipping_planes_pars_vertex:g4,clipping_planes_vertex:v4,color_fragment:y4,color_pars_fragment:x4,color_pars_vertex:_4,color_vertex:S4,common:w4,cube_uv_reflection_fragment:M4,defaultnormal_vertex:E4,displacementmap_pars_vertex:T4,displacementmap_vertex:b4,emissivemap_fragment:C4,emissivemap_pars_fragment:A4,colorspace_fragment:R4,colorspace_pars_fragment:P4,envmap_fragment:I4,envmap_common_pars_fragment:N4,envmap_pars_fragment:L4,envmap_pars_vertex:D4,envmap_physical_pars_fragment:j4,envmap_vertex:O4,fog_vertex:U4,fog_pars_vertex:k4,fog_fragment:F4,fog_pars_fragment:z4,gradientmap_pars_fragment:B4,lightmap_pars_fragment:V4,lights_lambert_fragment:H4,lights_lambert_pars_fragment:G4,lights_pars_begin:W4,lights_toon_fragment:X4,lights_toon_pars_fragment:Y4,lights_phong_fragment:q4,lights_phong_pars_fragment:K4,lights_physical_fragment:Z4,lights_physical_pars_fragment:$4,lights_fragment_begin:Q4,lights_fragment_maps:J4,lights_fragment_end:eV,logdepthbuf_fragment:tV,logdepthbuf_pars_fragment:nV,logdepthbuf_pars_vertex:iV,logdepthbuf_vertex:rV,map_fragment:sV,map_pars_fragment:oV,map_particle_fragment:aV,map_particle_pars_fragment:lV,metalnessmap_fragment:cV,metalnessmap_pars_fragment:uV,morphinstance_vertex:fV,morphcolor_vertex:dV,morphnormal_vertex:hV,morphtarget_pars_vertex:pV,morphtarget_vertex:mV,normal_fragment_begin:gV,normal_fragment_maps:vV,normal_pars_fragment:yV,normal_pars_vertex:xV,normal_vertex:_V,normalmap_pars_fragment:SV,clearcoat_normal_fragment_begin:wV,clearcoat_normal_fragment_maps:MV,clearcoat_pars_fragment:EV,iridescence_pars_fragment:TV,opaque_fragment:bV,packing:CV,premultiplied_alpha_fragment:AV,project_vertex:RV,dithering_fragment:PV,dithering_pars_fragment:IV,roughnessmap_fragment:NV,roughnessmap_pars_fragment:LV,shadowmap_pars_fragment:DV,shadowmap_pars_vertex:OV,shadowmap_vertex:UV,shadowmask_pars_fragment:kV,skinbase_vertex:FV,skinning_pars_vertex:zV,skinning_vertex:BV,skinnormal_vertex:VV,specularmap_fragment:HV,specularmap_pars_fragment:GV,tonemapping_fragment:WV,tonemapping_pars_fragment:jV,transmission_fragment:XV,transmission_pars_fragment:YV,uv_pars_fragment:qV,uv_pars_vertex:KV,uv_vertex:ZV,worldpos_vertex:$V,background_vert:QV,background_frag:JV,backgroundCube_vert:eH,backgroundCube_frag:tH,cube_vert:nH,cube_frag:iH,depth_vert:rH,depth_frag:sH,distanceRGBA_vert:oH,distanceRGBA_frag:aH,equirect_vert:lH,equirect_frag:cH,linedashed_vert:uH,linedashed_frag:fH,meshbasic_vert:dH,meshbasic_frag:hH,meshlambert_vert:pH,meshlambert_frag:mH,meshmatcap_vert:gH,meshmatcap_frag:vH,meshnormal_vert:yH,meshnormal_frag:xH,meshphong_vert:_H,meshphong_frag:SH,meshphysical_vert:wH,meshphysical_frag:MH,meshtoon_vert:EH,meshtoon_frag:TH,points_vert:bH,points_frag:CH,shadow_vert:AH,shadow_frag:RH,sprite_vert:PH,sprite_frag:IH},at={common:{diffuse:{value:new vt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Jt},alphaMap:{value:null},alphaMapTransform:{value:new Jt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Jt}},envmap:{envMap:{value:null},envMapRotation:{value:new Jt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Jt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Jt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Jt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Jt},normalScale:{value:new ke(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Jt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Jt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Jt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Jt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new vt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Jt},alphaTest:{value:0},uvTransform:{value:new Jt}},sprite:{diffuse:{value:new vt(16777215)},opacity:{value:1},center:{value:new ke(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Jt},alphaMap:{value:null},alphaMapTransform:{value:new Jt},alphaTest:{value:0}}},ho={basic:{uniforms:Cr([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.fog]),vertexShader:ln.meshbasic_vert,fragmentShader:ln.meshbasic_frag},lambert:{uniforms:Cr([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.fog,at.lights,{emissive:{value:new vt(0)}}]),vertexShader:ln.meshlambert_vert,fragmentShader:ln.meshlambert_frag},phong:{uniforms:Cr([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.fog,at.lights,{emissive:{value:new vt(0)},specular:{value:new vt(1118481)},shininess:{value:30}}]),vertexShader:ln.meshphong_vert,fragmentShader:ln.meshphong_frag},standard:{uniforms:Cr([at.common,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.roughnessmap,at.metalnessmap,at.fog,at.lights,{emissive:{value:new vt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ln.meshphysical_vert,fragmentShader:ln.meshphysical_frag},toon:{uniforms:Cr([at.common,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.gradientmap,at.fog,at.lights,{emissive:{value:new vt(0)}}]),vertexShader:ln.meshtoon_vert,fragmentShader:ln.meshtoon_frag},matcap:{uniforms:Cr([at.common,at.bumpmap,at.normalmap,at.displacementmap,at.fog,{matcap:{value:null}}]),vertexShader:ln.meshmatcap_vert,fragmentShader:ln.meshmatcap_frag},points:{uniforms:Cr([at.points,at.fog]),vertexShader:ln.points_vert,fragmentShader:ln.points_frag},dashed:{uniforms:Cr([at.common,at.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ln.linedashed_vert,fragmentShader:ln.linedashed_frag},depth:{uniforms:Cr([at.common,at.displacementmap]),vertexShader:ln.depth_vert,fragmentShader:ln.depth_frag},normal:{uniforms:Cr([at.common,at.bumpmap,at.normalmap,at.displacementmap,{opacity:{value:1}}]),vertexShader:ln.meshnormal_vert,fragmentShader:ln.meshnormal_frag},sprite:{uniforms:Cr([at.sprite,at.fog]),vertexShader:ln.sprite_vert,fragmentShader:ln.sprite_frag},background:{uniforms:{uvTransform:{value:new Jt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ln.background_vert,fragmentShader:ln.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Jt}},vertexShader:ln.backgroundCube_vert,fragmentShader:ln.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ln.cube_vert,fragmentShader:ln.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ln.equirect_vert,fragmentShader:ln.equirect_frag},distanceRGBA:{uniforms:Cr([at.common,at.displacementmap,{referencePosition:{value:new q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ln.distanceRGBA_vert,fragmentShader:ln.distanceRGBA_frag},shadow:{uniforms:Cr([at.lights,at.fog,{color:{value:new vt(0)},opacity:{value:1}}]),vertexShader:ln.shadow_vert,fragmentShader:ln.shadow_frag}};ho.physical={uniforms:Cr([ho.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Jt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Jt},clearcoatNormalScale:{value:new ke(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Jt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Jt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Jt},sheen:{value:0},sheenColor:{value:new vt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Jt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Jt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Jt},transmissionSamplerSize:{value:new ke},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Jt},attenuationDistance:{value:0},attenuationColor:{value:new vt(0)},specularColor:{value:new vt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Jt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Jt},anisotropyVector:{value:new ke},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Jt}}]),vertexShader:ln.meshphysical_vert,fragmentShader:ln.meshphysical_frag};const xv={r:0,b:0,g:0},fu=new gs,NH=new Wt;function LH(i,e,t,n,r,s,a){const c=new vt(0);let d=s===!0?0:1,h,m,g=null,v=0,y=null;function M(C){let R=C.isScene===!0?C.background:null;return R&&R.isTexture&&(R=(C.backgroundBlurriness>0?t:e).get(R)),R}function E(C){let R=!1;const O=M(C);O===null?S(c,d):O&&O.isColor&&(S(O,1),R=!0);const U=i.xr.getEnvironmentBlendMode();U==="additive"?n.buffers.color.setClear(0,0,0,1,a):U==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(i.autoClear||R)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function w(C,R){const O=M(R);O&&(O.isCubeTexture||O.mapping===uh)?(m===void 0&&(m=new _i(new Zu(1,1,1),new yo({name:"BackgroundCubeMaterial",uniforms:Jd(ho.backgroundCube.uniforms),vertexShader:ho.backgroundCube.vertexShader,fragmentShader:ho.backgroundCube.fragmentShader,side:Ir,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(U,F,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(m)),fu.copy(R.backgroundRotation),fu.x*=-1,fu.y*=-1,fu.z*=-1,O.isCubeTexture&&O.isRenderTargetTexture===!1&&(fu.y*=-1,fu.z*=-1),m.material.uniforms.envMap.value=O,m.material.uniforms.flipEnvMap.value=O.isCubeTexture&&O.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=R.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=R.backgroundIntensity,m.material.uniforms.backgroundRotation.value.setFromMatrix4(NH.makeRotationFromEuler(fu)),m.material.toneMapped=xn.getTransfer(O.colorSpace)!==In,(g!==O||v!==O.version||y!==i.toneMapping)&&(m.material.needsUpdate=!0,g=O,v=O.version,y=i.toneMapping),m.layers.enableAll(),C.unshift(m,m.geometry,m.material,0,0,null)):O&&O.isTexture&&(h===void 0&&(h=new _i(new hh(2,2),new yo({name:"BackgroundMaterial",uniforms:Jd(ho.background.uniforms),vertexShader:ho.background.vertexShader,fragmentShader:ho.background.fragmentShader,side:Za,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(h)),h.material.uniforms.t2D.value=O,h.material.uniforms.backgroundIntensity.value=R.backgroundIntensity,h.material.toneMapped=xn.getTransfer(O.colorSpace)!==In,O.matrixAutoUpdate===!0&&O.updateMatrix(),h.material.uniforms.uvTransform.value.copy(O.matrix),(g!==O||v!==O.version||y!==i.toneMapping)&&(h.material.needsUpdate=!0,g=O,v=O.version,y=i.toneMapping),h.layers.enableAll(),C.unshift(h,h.geometry,h.material,0,0,null))}function S(C,R){C.getRGB(xv,WR(i)),n.buffers.color.setClear(xv.r,xv.g,xv.b,R,a)}function A(){m!==void 0&&(m.geometry.dispose(),m.material.dispose()),h!==void 0&&(h.geometry.dispose(),h.material.dispose())}return{getClearColor:function(){return c},setClearColor:function(C,R=1){c.set(C),d=R,S(c,d)},getClearAlpha:function(){return d},setClearAlpha:function(C){d=C,S(c,d)},render:E,addToRenderList:w,dispose:A}}function DH(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=v(null);let s=r,a=!1;function c(L,G,J,Q,ce){let ge=!1;const ne=g(Q,J,G);s!==ne&&(s=ne,h(s.object)),ge=y(L,Q,J,ce),ge&&M(L,Q,J,ce),ce!==null&&e.update(ce,i.ELEMENT_ARRAY_BUFFER),(ge||a)&&(a=!1,R(L,G,J,Q),ce!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(ce).buffer))}function d(){return i.createVertexArray()}function h(L){return i.bindVertexArray(L)}function m(L){return i.deleteVertexArray(L)}function g(L,G,J){const Q=J.wireframe===!0;let ce=n[L.id];ce===void 0&&(ce={},n[L.id]=ce);let ge=ce[G.id];ge===void 0&&(ge={},ce[G.id]=ge);let ne=ge[Q];return ne===void 0&&(ne=v(d()),ge[Q]=ne),ne}function v(L){const G=[],J=[],Q=[];for(let ce=0;ce<t;ce++)G[ce]=0,J[ce]=0,Q[ce]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:G,enabledAttributes:J,attributeDivisors:Q,object:L,attributes:{},index:null}}function y(L,G,J,Q){const ce=s.attributes,ge=G.attributes;let ne=0;const de=J.getAttributes();for(const B in de)if(de[B].location>=0){const te=ce[B];let X=ge[B];if(X===void 0&&(B==="instanceMatrix"&&L.instanceMatrix&&(X=L.instanceMatrix),B==="instanceColor"&&L.instanceColor&&(X=L.instanceColor)),te===void 0||te.attribute!==X||X&&te.data!==X.data)return!0;ne++}return s.attributesNum!==ne||s.index!==Q}function M(L,G,J,Q){const ce={},ge=G.attributes;let ne=0;const de=J.getAttributes();for(const B in de)if(de[B].location>=0){let te=ge[B];te===void 0&&(B==="instanceMatrix"&&L.instanceMatrix&&(te=L.instanceMatrix),B==="instanceColor"&&L.instanceColor&&(te=L.instanceColor));const X={};X.attribute=te,te&&te.data&&(X.data=te.data),ce[B]=X,ne++}s.attributes=ce,s.attributesNum=ne,s.index=Q}function E(){const L=s.newAttributes;for(let G=0,J=L.length;G<J;G++)L[G]=0}function w(L){S(L,0)}function S(L,G){const J=s.newAttributes,Q=s.enabledAttributes,ce=s.attributeDivisors;J[L]=1,Q[L]===0&&(i.enableVertexAttribArray(L),Q[L]=1),ce[L]!==G&&(i.vertexAttribDivisor(L,G),ce[L]=G)}function A(){const L=s.newAttributes,G=s.enabledAttributes;for(let J=0,Q=G.length;J<Q;J++)G[J]!==L[J]&&(i.disableVertexAttribArray(J),G[J]=0)}function C(L,G,J,Q,ce,ge,ne){ne===!0?i.vertexAttribIPointer(L,G,J,ce,ge):i.vertexAttribPointer(L,G,J,Q,ce,ge)}function R(L,G,J,Q){E();const ce=Q.attributes,ge=J.getAttributes(),ne=G.defaultAttributeValues;for(const de in ge){const B=ge[de];if(B.location>=0){let ie=ce[de];if(ie===void 0&&(de==="instanceMatrix"&&L.instanceMatrix&&(ie=L.instanceMatrix),de==="instanceColor"&&L.instanceColor&&(ie=L.instanceColor)),ie!==void 0){const te=ie.normalized,X=ie.itemSize,fe=e.get(ie);if(fe===void 0)continue;const Pe=fe.buffer,le=fe.type,Ee=fe.bytesPerElement,Ue=le===i.INT||le===i.UNSIGNED_INT||ie.gpuType===Qy;if(ie.isInterleavedBufferAttribute){const he=ie.data,Fe=he.stride,Xe=ie.offset;if(he.isInstancedInterleavedBuffer){for(let Ge=0;Ge<B.locationSize;Ge++)S(B.location+Ge,he.meshPerAttribute);L.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=he.meshPerAttribute*he.count)}else for(let Ge=0;Ge<B.locationSize;Ge++)w(B.location+Ge);i.bindBuffer(i.ARRAY_BUFFER,Pe);for(let Ge=0;Ge<B.locationSize;Ge++)C(B.location+Ge,X/B.locationSize,le,te,Fe*Ee,(Xe+X/B.locationSize*Ge)*Ee,Ue)}else{if(ie.isInstancedBufferAttribute){for(let he=0;he<B.locationSize;he++)S(B.location+he,ie.meshPerAttribute);L.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=ie.meshPerAttribute*ie.count)}else for(let he=0;he<B.locationSize;he++)w(B.location+he);i.bindBuffer(i.ARRAY_BUFFER,Pe);for(let he=0;he<B.locationSize;he++)C(B.location+he,X/B.locationSize,le,te,X*Ee,X/B.locationSize*he*Ee,Ue)}}else if(ne!==void 0){const te=ne[de];if(te!==void 0)switch(te.length){case 2:i.vertexAttrib2fv(B.location,te);break;case 3:i.vertexAttrib3fv(B.location,te);break;case 4:i.vertexAttrib4fv(B.location,te);break;default:i.vertexAttrib1fv(B.location,te)}}}}A()}function O(){z();for(const L in n){const G=n[L];for(const J in G){const Q=G[J];for(const ce in Q)m(Q[ce].object),delete Q[ce];delete G[J]}delete n[L]}}function U(L){if(n[L.id]===void 0)return;const G=n[L.id];for(const J in G){const Q=G[J];for(const ce in Q)m(Q[ce].object),delete Q[ce];delete G[J]}delete n[L.id]}function F(L){for(const G in n){const J=n[G];if(J[L.id]===void 0)continue;const Q=J[L.id];for(const ce in Q)m(Q[ce].object),delete Q[ce];delete J[L.id]}}function z(){k(),a=!0,s!==r&&(s=r,h(s.object))}function k(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:c,reset:z,resetDefaultState:k,dispose:O,releaseStatesOfGeometry:U,releaseStatesOfProgram:F,initAttributes:E,enableAttribute:w,disableUnusedAttributes:A}}function OH(i,e,t){let n;function r(h){n=h}function s(h,m){i.drawArrays(n,h,m),t.update(m,n,1)}function a(h,m,g){g!==0&&(i.drawArraysInstanced(n,h,m,g),t.update(m,n,g))}function c(h,m,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,h,0,m,0,g);let y=0;for(let M=0;M<g;M++)y+=m[M];t.update(y,n,1)}function d(h,m,g,v){if(g===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let M=0;M<h.length;M++)a(h[M],m[M],v[M]);else{y.multiDrawArraysInstancedWEBGL(n,h,0,m,0,v,0,g);let M=0;for(let E=0;E<g;E++)M+=m[E]*v[E];t.update(M,n,1)}}this.setMode=r,this.render=s,this.renderInstances=a,this.renderMultiDraw=c,this.renderMultiDrawInstances=d}function UH(i,e,t,n){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const F=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(F){return!(F!==fr&&n.convert(F)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function c(F){const z=F===fh&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(F!==go&&n.convert(F)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&F!==$r&&!z)}function d(F){if(F==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";F="mediump"}return F==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let h=t.precision!==void 0?t.precision:"highp";const m=d(h);m!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",m,"instead."),h=m);const g=t.logarithmicDepthBuffer===!0,v=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),y=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),M=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),E=i.getParameter(i.MAX_TEXTURE_SIZE),w=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),S=i.getParameter(i.MAX_VERTEX_ATTRIBS),A=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),C=i.getParameter(i.MAX_VARYING_VECTORS),R=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),O=M>0,U=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:d,textureFormatReadable:a,textureTypeReadable:c,precision:h,logarithmicDepthBuffer:g,reverseDepthBuffer:v,maxTextures:y,maxVertexTextures:M,maxTextureSize:E,maxCubemapSize:w,maxAttributes:S,maxVertexUniforms:A,maxVaryings:C,maxFragmentUniforms:R,vertexTextures:O,maxSamples:U}}function kH(i){const e=this;let t=null,n=0,r=!1,s=!1;const a=new Va,c=new Jt,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(g,v){const y=g.length!==0||v||n!==0||r;return r=v,n=g.length,y},this.beginShadows=function(){s=!0,m(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(g,v){t=m(g,v,0)},this.setState=function(g,v,y){const M=g.clippingPlanes,E=g.clipIntersection,w=g.clipShadows,S=i.get(g);if(!r||M===null||M.length===0||s&&!w)s?m(null):h();else{const A=s?0:n,C=A*4;let R=S.clippingState||null;d.value=R,R=m(M,v,C,y);for(let O=0;O!==C;++O)R[O]=t[O];S.clippingState=R,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=A}};function h(){d.value!==t&&(d.value=t,d.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function m(g,v,y,M){const E=g!==null?g.length:0;let w=null;if(E!==0){if(w=d.value,M!==!0||w===null){const S=y+E*4,A=v.matrixWorldInverse;c.getNormalMatrix(A),(w===null||w.length<S)&&(w=new Float32Array(S));for(let C=0,R=y;C!==E;++C,R+=4)a.copy(g[C]).applyMatrix4(A,c),a.normal.toArray(w,R),w[R+3]=a.constant}d.value=w,d.needsUpdate=!0}return e.numPlanes=E,e.numIntersection=0,w}}function FH(i){let e=new WeakMap;function t(a,c){return c===Xp?a.mapping=$a:c===Yp&&(a.mapping=sc),a}function n(a){if(a&&a.isTexture){const c=a.mapping;if(c===Xp||c===Yp)if(e.has(a)){const d=e.get(a).texture;return t(d,a.mapping)}else{const d=a.image;if(d&&d.height>0){const h=new YR(d.height);return h.fromEquirectangularTexture(i,a),e.set(a,h),a.addEventListener("dispose",r),t(h.texture,a.mapping)}else return null}}return a}function r(a){const c=a.target;c.removeEventListener("dispose",r);const d=e.get(c);d!==void 0&&(e.delete(c),d.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}const kd=4,A1=[.125,.215,.35,.446,.526,.582],_u=20,n_=new tc,R1=new vt;let i_=null,r_=0,s_=0,o_=!1;const xu=(1+Math.sqrt(5))/2,Td=1/xu,P1=[new q(-xu,Td,0),new q(xu,Td,0),new q(-Td,0,xu),new q(Td,0,xu),new q(0,xu,-Td),new q(0,xu,Td),new q(-1,1,-1),new q(1,1,-1),new q(-1,1,1),new q(1,1,1)];class aS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){i_=this._renderer.getRenderTarget(),r_=this._renderer.getActiveCubeFace(),s_=this._renderer.getActiveMipmapLevel(),o_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=L1(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=N1(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(i_,r_,s_),this._renderer.xr.enabled=o_,e.scissorTest=!1,_v(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===$a||e.mapping===sc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),i_=this._renderer.getRenderTarget(),r_=this._renderer.getActiveCubeFace(),s_=this._renderer.getActiveMipmapLevel(),o_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Pi,minFilter:Pi,generateMipmaps:!1,type:fh,format:fr,colorSpace:ju,depthBuffer:!1},r=I1(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=I1(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=zH(s)),this._blurMaterial=BH(s,e,t)}return r}_compileMaterial(e){const t=new _i(this._lodPlanes[0],e);this._renderer.compile(t,n_)}_sceneToCubeUV(e,t,n,r){const c=new di(90,1,t,n),d=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],m=this._renderer,g=m.autoClear,v=m.toneMapping;m.getClearColor(R1),m.toneMapping=Xo,m.autoClear=!1;const y=new fc({name:"PMREM.Background",side:Ir,depthWrite:!1,depthTest:!1}),M=new _i(new Zu,y);let E=!1;const w=e.background;w?w.isColor&&(y.color.copy(w),e.background=null,E=!0):(y.color.copy(R1),E=!0);for(let S=0;S<6;S++){const A=S%3;A===0?(c.up.set(0,d[S],0),c.lookAt(h[S],0,0)):A===1?(c.up.set(0,0,d[S]),c.lookAt(0,h[S],0)):(c.up.set(0,d[S],0),c.lookAt(0,0,h[S]));const C=this._cubeSize;_v(r,A*C,S>2?C:0,C,C),m.setRenderTarget(r),E&&m.render(M,c),m.render(e,c)}M.geometry.dispose(),M.material.dispose(),m.toneMapping=v,m.autoClear=g,e.background=w}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===$a||e.mapping===sc;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=L1()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=N1());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new _i(this._lodPlanes[0],s),c=s.uniforms;c.envMap.value=e;const d=this._cubeSize;_v(t,0,0,3*d,2*d),n.setRenderTarget(t),n.render(a,n_)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),c=P1[(r-s-1)%P1.length];this._blur(e,s-1,s,a,c)}t.autoClear=n}_blur(e,t,n,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",s),this._halfBlur(a,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,a,c){const d=this._renderer,h=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,g=new _i(this._lodPlanes[r],h),v=h.uniforms,y=this._sizeLods[n]-1,M=isFinite(s)?Math.PI/(2*y):2*Math.PI/(2*_u-1),E=s/M,w=isFinite(s)?1+Math.floor(m*E):_u;w>_u&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${_u}`);const S=[];let A=0;for(let F=0;F<_u;++F){const z=F/E,k=Math.exp(-z*z/2);S.push(k),F===0?A+=k:F<w&&(A+=2*k)}for(let F=0;F<S.length;F++)S[F]=S[F]/A;v.envMap.value=e.texture,v.samples.value=w,v.weights.value=S,v.latitudinal.value=a==="latitudinal",c&&(v.poleAxis.value=c);const{_lodMax:C}=this;v.dTheta.value=M,v.mipInt.value=C-n;const R=this._sizeLods[r],O=3*R*(r>C-kd?r-C+kd:0),U=4*(this._cubeSize-R);_v(t,O,U,3*R,2*R),d.setRenderTarget(t),d.render(g,n_)}}function zH(i){const e=[],t=[],n=[];let r=i;const s=i-kd+1+A1.length;for(let a=0;a<s;a++){const c=Math.pow(2,r);t.push(c);let d=1/c;a>i-kd?d=A1[a-i+kd-1]:a===0&&(d=0),n.push(d);const h=1/(c-2),m=-h,g=1+h,v=[m,m,g,m,g,g,m,m,g,g,m,g],y=6,M=6,E=3,w=2,S=1,A=new Float32Array(E*M*y),C=new Float32Array(w*M*y),R=new Float32Array(S*M*y);for(let U=0;U<y;U++){const F=U%3*2/3-1,z=U>2?0:-1,k=[F,z,0,F+2/3,z,0,F+2/3,z+1,0,F,z,0,F+2/3,z+1,0,F,z+1,0];A.set(k,E*M*U),C.set(v,w*M*U);const L=[U,U,U,U,U,U];R.set(L,S*M*U)}const O=new un;O.setAttribute("position",new Un(A,E)),O.setAttribute("uv",new Un(C,w)),O.setAttribute("faceIndex",new Un(R,S)),e.push(O),r>kd&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function I1(i,e,t){const n=new vo(i,e,t);return n.texture.mapping=uh,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function _v(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function BH(i,e,t){const n=new Float32Array(_u),r=new q(0,1,0);return new yo({name:"SphericalGaussianBlur",defines:{n:_u,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Rw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Xa,depthTest:!1,depthWrite:!1})}function N1(){return new yo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Rw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Xa,depthTest:!1,depthWrite:!1})}function L1(){return new yo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Rw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Xa,depthTest:!1,depthWrite:!1})}function Rw(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function VH(i){let e=new WeakMap,t=null;function n(c){if(c&&c.isTexture){const d=c.mapping,h=d===Xp||d===Yp,m=d===$a||d===sc;if(h||m){let g=e.get(c);const v=g!==void 0?g.texture.pmremVersion:0;if(c.isRenderTargetTexture&&c.pmremVersion!==v)return t===null&&(t=new aS(i)),g=h?t.fromEquirectangular(c,g):t.fromCubemap(c,g),g.texture.pmremVersion=c.pmremVersion,e.set(c,g),g.texture;if(g!==void 0)return g.texture;{const y=c.image;return h&&y&&y.height>0||m&&y&&r(y)?(t===null&&(t=new aS(i)),g=h?t.fromEquirectangular(c):t.fromCubemap(c),g.texture.pmremVersion=c.pmremVersion,e.set(c,g),c.addEventListener("dispose",s),g.texture):null}}}return c}function r(c){let d=0;const h=6;for(let m=0;m<h;m++)c[m]!==void 0&&d++;return d===h}function s(c){const d=c.target;d.removeEventListener("dispose",s);const h=e.get(d);h!==void 0&&(e.delete(d),h.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:a}}function HH(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const r=t(n);return r===null&&Pd("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function GH(i,e,t,n){const r={},s=new WeakMap;function a(g){const v=g.target;v.index!==null&&e.remove(v.index);for(const M in v.attributes)e.remove(v.attributes[M]);v.removeEventListener("dispose",a),delete r[v.id];const y=s.get(v);y&&(e.remove(y),s.delete(v)),n.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function c(g,v){return r[v.id]===!0||(v.addEventListener("dispose",a),r[v.id]=!0,t.memory.geometries++),v}function d(g){const v=g.attributes;for(const y in v)e.update(v[y],i.ARRAY_BUFFER)}function h(g){const v=[],y=g.index,M=g.attributes.position;let E=0;if(y!==null){const A=y.array;E=y.version;for(let C=0,R=A.length;C<R;C+=3){const O=A[C+0],U=A[C+1],F=A[C+2];v.push(O,U,U,F,F,O)}}else if(M!==void 0){const A=M.array;E=M.version;for(let C=0,R=A.length/3-1;C<R;C+=3){const O=C+0,U=C+1,F=C+2;v.push(O,U,U,F,F,O)}}else return;const w=new(zR(v)?iw:nw)(v,1);w.version=E;const S=s.get(g);S&&e.remove(S),s.set(g,w)}function m(g){const v=s.get(g);if(v){const y=g.index;y!==null&&v.version<y.version&&h(g)}else h(g);return s.get(g)}return{get:c,update:d,getWireframeAttribute:m}}function WH(i,e,t){let n;function r(v){n=v}let s,a;function c(v){s=v.type,a=v.bytesPerElement}function d(v,y){i.drawElements(n,y,s,v*a),t.update(y,n,1)}function h(v,y,M){M!==0&&(i.drawElementsInstanced(n,y,s,v*a,M),t.update(y,n,M))}function m(v,y,M){if(M===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,y,0,s,v,0,M);let w=0;for(let S=0;S<M;S++)w+=y[S];t.update(w,n,1)}function g(v,y,M,E){if(M===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let S=0;S<v.length;S++)h(v[S]/a,y[S],E[S]);else{w.multiDrawElementsInstancedWEBGL(n,y,0,s,v,0,E,0,M);let S=0;for(let A=0;A<M;A++)S+=y[A]*E[A];t.update(S,n,1)}}this.setMode=r,this.setIndex=c,this.render=d,this.renderInstances=h,this.renderMultiDraw=m,this.renderMultiDrawInstances=g}function jH(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,a,c){switch(t.calls++,a){case i.TRIANGLES:t.triangles+=c*(s/3);break;case i.LINES:t.lines+=c*(s/2);break;case i.LINE_STRIP:t.lines+=c*(s-1);break;case i.LINE_LOOP:t.lines+=c*s;break;case i.POINTS:t.points+=c*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function XH(i,e,t){const n=new WeakMap,r=new wn;function s(a,c,d){const h=a.morphTargetInfluences,m=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,g=m!==void 0?m.length:0;let v=n.get(c);if(v===void 0||v.count!==g){let L=function(){z.dispose(),n.delete(c),c.removeEventListener("dispose",L)};var y=L;v!==void 0&&v.texture.dispose();const M=c.morphAttributes.position!==void 0,E=c.morphAttributes.normal!==void 0,w=c.morphAttributes.color!==void 0,S=c.morphAttributes.position||[],A=c.morphAttributes.normal||[],C=c.morphAttributes.color||[];let R=0;M===!0&&(R=1),E===!0&&(R=2),w===!0&&(R=3);let O=c.attributes.position.count*R,U=1;O>e.maxTextureSize&&(U=Math.ceil(O/e.maxTextureSize),O=e.maxTextureSize);const F=new Float32Array(O*U*4*g),z=new s0(F,O,U,g);z.type=$r,z.needsUpdate=!0;const k=R*4;for(let G=0;G<g;G++){const J=S[G],Q=A[G],ce=C[G],ge=O*U*4*G;for(let ne=0;ne<J.count;ne++){const de=ne*k;M===!0&&(r.fromBufferAttribute(J,ne),F[ge+de+0]=r.x,F[ge+de+1]=r.y,F[ge+de+2]=r.z,F[ge+de+3]=0),E===!0&&(r.fromBufferAttribute(Q,ne),F[ge+de+4]=r.x,F[ge+de+5]=r.y,F[ge+de+6]=r.z,F[ge+de+7]=0),w===!0&&(r.fromBufferAttribute(ce,ne),F[ge+de+8]=r.x,F[ge+de+9]=r.y,F[ge+de+10]=r.z,F[ge+de+11]=ce.itemSize===4?r.w:1)}}v={count:g,texture:z,size:new ke(O,U)},n.set(c,v),c.addEventListener("dispose",L)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)d.getUniforms().setValue(i,"morphTexture",a.morphTexture,t);else{let M=0;for(let w=0;w<h.length;w++)M+=h[w];const E=c.morphTargetsRelative?1:1-M;d.getUniforms().setValue(i,"morphTargetBaseInfluence",E),d.getUniforms().setValue(i,"morphTargetInfluences",h)}d.getUniforms().setValue(i,"morphTargetsTexture",v.texture,t),d.getUniforms().setValue(i,"morphTargetsTextureSize",v.size)}return{update:s}}function YH(i,e,t,n){let r=new WeakMap;function s(d){const h=n.render.frame,m=d.geometry,g=e.get(d,m);if(r.get(g)!==h&&(e.update(g),r.set(g,h)),d.isInstancedMesh&&(d.hasEventListener("dispose",c)===!1&&d.addEventListener("dispose",c),r.get(d)!==h&&(t.update(d.instanceMatrix,i.ARRAY_BUFFER),d.instanceColor!==null&&t.update(d.instanceColor,i.ARRAY_BUFFER),r.set(d,h))),d.isSkinnedMesh){const v=d.skeleton;r.get(v)!==h&&(v.update(),r.set(v,h))}return g}function a(){r=new WeakMap}function c(d){const h=d.target;h.removeEventListener("dispose",c),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:s,dispose:a}}const WP=new ai,D1=new lw(1,1),jP=new s0,XP=new tw,YP=new _m,O1=[],U1=[],k1=new Float32Array(16),F1=new Float32Array(9),z1=new Float32Array(4);function ph(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=O1[r];if(s===void 0&&(s=new Float32Array(r),O1[r]=s),e!==0){n.toArray(s,0);for(let a=1,c=0;a!==e;++a)c+=t,i[a].toArray(s,c)}return s}function Ni(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Li(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function b0(i,e){let t=U1[e];t===void 0&&(t=new Int32Array(e),U1[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function qH(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function KH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ni(t,e))return;i.uniform2fv(this.addr,e),Li(t,e)}}function ZH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ni(t,e))return;i.uniform3fv(this.addr,e),Li(t,e)}}function $H(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ni(t,e))return;i.uniform4fv(this.addr,e),Li(t,e)}}function QH(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ni(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Li(t,e)}else{if(Ni(t,n))return;z1.set(n),i.uniformMatrix2fv(this.addr,!1,z1),Li(t,n)}}function JH(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ni(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Li(t,e)}else{if(Ni(t,n))return;F1.set(n),i.uniformMatrix3fv(this.addr,!1,F1),Li(t,n)}}function e5(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ni(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Li(t,e)}else{if(Ni(t,n))return;k1.set(n),i.uniformMatrix4fv(this.addr,!1,k1),Li(t,n)}}function t5(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function n5(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ni(t,e))return;i.uniform2iv(this.addr,e),Li(t,e)}}function i5(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ni(t,e))return;i.uniform3iv(this.addr,e),Li(t,e)}}function r5(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ni(t,e))return;i.uniform4iv(this.addr,e),Li(t,e)}}function s5(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function o5(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ni(t,e))return;i.uniform2uiv(this.addr,e),Li(t,e)}}function a5(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ni(t,e))return;i.uniform3uiv(this.addr,e),Li(t,e)}}function l5(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ni(t,e))return;i.uniform4uiv(this.addr,e),Li(t,e)}}function c5(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r);let s;this.type===i.SAMPLER_2D_SHADOW?(D1.compareFunction=JS,s=D1):s=WP,t.setTexture2D(e||s,r)}function u5(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||XP,r)}function f5(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||YP,r)}function d5(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||jP,r)}function h5(i){switch(i){case 5126:return qH;case 35664:return KH;case 35665:return ZH;case 35666:return $H;case 35674:return QH;case 35675:return JH;case 35676:return e5;case 5124:case 35670:return t5;case 35667:case 35671:return n5;case 35668:case 35672:return i5;case 35669:case 35673:return r5;case 5125:return s5;case 36294:return o5;case 36295:return a5;case 36296:return l5;case 35678:case 36198:case 36298:case 36306:case 35682:return c5;case 35679:case 36299:case 36307:return u5;case 35680:case 36300:case 36308:case 36293:return f5;case 36289:case 36303:case 36311:case 36292:return d5}}function p5(i,e){i.uniform1fv(this.addr,e)}function m5(i,e){const t=ph(e,this.size,2);i.uniform2fv(this.addr,t)}function g5(i,e){const t=ph(e,this.size,3);i.uniform3fv(this.addr,t)}function v5(i,e){const t=ph(e,this.size,4);i.uniform4fv(this.addr,t)}function y5(i,e){const t=ph(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function x5(i,e){const t=ph(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function _5(i,e){const t=ph(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function S5(i,e){i.uniform1iv(this.addr,e)}function w5(i,e){i.uniform2iv(this.addr,e)}function M5(i,e){i.uniform3iv(this.addr,e)}function E5(i,e){i.uniform4iv(this.addr,e)}function T5(i,e){i.uniform1uiv(this.addr,e)}function b5(i,e){i.uniform2uiv(this.addr,e)}function C5(i,e){i.uniform3uiv(this.addr,e)}function A5(i,e){i.uniform4uiv(this.addr,e)}function R5(i,e,t){const n=this.cache,r=e.length,s=b0(t,r);Ni(n,s)||(i.uniform1iv(this.addr,s),Li(n,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||WP,s[a])}function P5(i,e,t){const n=this.cache,r=e.length,s=b0(t,r);Ni(n,s)||(i.uniform1iv(this.addr,s),Li(n,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||XP,s[a])}function I5(i,e,t){const n=this.cache,r=e.length,s=b0(t,r);Ni(n,s)||(i.uniform1iv(this.addr,s),Li(n,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||YP,s[a])}function N5(i,e,t){const n=this.cache,r=e.length,s=b0(t,r);Ni(n,s)||(i.uniform1iv(this.addr,s),Li(n,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||jP,s[a])}function L5(i){switch(i){case 5126:return p5;case 35664:return m5;case 35665:return g5;case 35666:return v5;case 35674:return y5;case 35675:return x5;case 35676:return _5;case 5124:case 35670:return S5;case 35667:case 35671:return w5;case 35668:case 35672:return M5;case 35669:case 35673:return E5;case 5125:return T5;case 36294:return b5;case 36295:return C5;case 36296:return A5;case 35678:case 36198:case 36298:case 36306:case 35682:return R5;case 35679:case 36299:case 36307:return P5;case 35680:case 36300:case 36308:case 36293:return I5;case 36289:case 36303:case 36311:case 36292:return N5}}class D5{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=h5(t.type)}}class O5{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=L5(t.type)}}class U5{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const c=r[s];c.setValue(e,t[c.id],n)}}}const a_=/(\w+)(\])?(\[|\.)?/g;function B1(i,e){i.seq.push(e),i.map[e.id]=e}function k5(i,e,t){const n=i.name,r=n.length;for(a_.lastIndex=0;;){const s=a_.exec(n),a=a_.lastIndex;let c=s[1];const d=s[2]==="]",h=s[3];if(d&&(c=c|0),h===void 0||h==="["&&a+2===r){B1(t,h===void 0?new D5(c,i,e):new O5(c,i,e));break}else{let g=t.map[c];g===void 0&&(g=new U5(c),B1(t,g)),t=g}}}class Rv{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);k5(s,a,this)}}setValue(e,t,n,r){const s=this.map[t];s!==void 0&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,a=t.length;s!==a;++s){const c=t[s],d=n[c.id];d.needsUpdate!==!1&&c.setValue(e,d.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&n.push(a)}return n}}function V1(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const F5=37297;let z5=0;function B5(i,e){const t=i.split(`
`),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const c=a+1;n.push(`${c===e?">":" "} ${c}: ${t[a]}`)}return n.join(`
`)}const H1=new Jt;function V5(i){xn._getMatrix(H1,xn.workingColorSpace,i);const e=`mat3( ${H1.elements.map(t=>t.toFixed(4))} )`;switch(xn.getTransfer(i)){case Qp:return[e,"LinearTransferOETF"];case In:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function G1(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(n&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+B5(i.getShaderSource(e),a)}else return r}function H5(i,e){const t=V5(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function G5(i,e){let t;switch(e){case xR:t="Linear";break;case _R:t="Reinhard";break;case SR:t="Cineon";break;case VS:t="ACESFilmic";break;case MR:t="AgX";break;case ER:t="Neutral";break;case wR:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Sv=new q;function W5(){xn.getLuminanceCoefficients(Sv);const i=Sv.x.toFixed(4),e=Sv.y.toFixed(4),t=Sv.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function j5(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Rp).join(`
`)}function X5(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function Y5(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),a=s.name;let c=1;s.type===i.FLOAT_MAT2&&(c=2),s.type===i.FLOAT_MAT3&&(c=3),s.type===i.FLOAT_MAT4&&(c=4),t[a]={type:s.type,location:i.getAttribLocation(e,a),locationSize:c}}return t}function Rp(i){return i!==""}function W1(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function j1(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const q5=/^[ \t]*#include +<([\w\d./]+)>/gm;function lS(i){return i.replace(q5,Z5)}const K5=new Map;function Z5(i,e){let t=ln[e];if(t===void 0){const n=K5.get(e);if(n!==void 0)t=ln[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return lS(t)}const $5=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function X1(i){return i.replace($5,Q5)}function Q5(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Y1(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function J5(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===Zy?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===Pp?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===co&&(e="SHADOWMAP_TYPE_VSM"),e}function eG(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case $a:case sc:e="ENVMAP_TYPE_CUBE";break;case uh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function tG(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case sc:e="ENVMAP_MODE_REFRACTION";break}return e}function nG(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case vm:e="ENVMAP_BLENDING_MULTIPLY";break;case vR:e="ENVMAP_BLENDING_MIX";break;case yR:e="ENVMAP_BLENDING_ADD";break}return e}function iG(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function rG(i,e,t,n){const r=i.getContext(),s=t.defines;let a=t.vertexShader,c=t.fragmentShader;const d=J5(t),h=eG(t),m=tG(t),g=nG(t),v=iG(t),y=j5(t),M=X5(s),E=r.createProgram();let w,S,A=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(Rp).join(`
`),w.length>0&&(w+=`
`),S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(Rp).join(`
`),S.length>0&&(S+=`
`)):(w=[Y1(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Rp).join(`
`),S=[Y1(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+m:"",t.envMap?"#define "+g:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Xo?"#define TONE_MAPPING":"",t.toneMapping!==Xo?ln.tonemapping_pars_fragment:"",t.toneMapping!==Xo?G5("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ln.colorspace_pars_fragment,H5("linearToOutputTexel",t.outputColorSpace),W5(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Rp).join(`
`)),a=lS(a),a=W1(a,t),a=j1(a,t),c=lS(c),c=W1(c,t),c=j1(c,t),a=X1(a),c=X1(c),t.isRawShaderMaterial!==!0&&(A=`#version 300 es
`,w=[y,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,S=["#define varying in",t.glslVersion===Q_?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Q_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const C=A+w+a,R=A+S+c,O=V1(r,r.VERTEX_SHADER,C),U=V1(r,r.FRAGMENT_SHADER,R);r.attachShader(E,O),r.attachShader(E,U),t.index0AttributeName!==void 0?r.bindAttribLocation(E,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(E,0,"position"),r.linkProgram(E);function F(G){if(i.debug.checkShaderErrors){const J=r.getProgramInfoLog(E).trim(),Q=r.getShaderInfoLog(O).trim(),ce=r.getShaderInfoLog(U).trim();let ge=!0,ne=!0;if(r.getProgramParameter(E,r.LINK_STATUS)===!1)if(ge=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,E,O,U);else{const de=G1(r,O,"vertex"),B=G1(r,U,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(E,r.VALIDATE_STATUS)+`

Material Name: `+G.name+`
Material Type: `+G.type+`

Program Info Log: `+J+`
`+de+`
`+B)}else J!==""?console.warn("THREE.WebGLProgram: Program Info Log:",J):(Q===""||ce==="")&&(ne=!1);ne&&(G.diagnostics={runnable:ge,programLog:J,vertexShader:{log:Q,prefix:w},fragmentShader:{log:ce,prefix:S}})}r.deleteShader(O),r.deleteShader(U),z=new Rv(r,E),k=Y5(r,E)}let z;this.getUniforms=function(){return z===void 0&&F(this),z};let k;this.getAttributes=function(){return k===void 0&&F(this),k};let L=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=r.getProgramParameter(E,F5)),L},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(E),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=z5++,this.cacheKey=e,this.usedTimes=1,this.program=E,this.vertexShader=O,this.fragmentShader=U,this}let sG=0;class oG{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new aG(e),t.set(e,n)),n}}class aG{constructor(e){this.id=sG++,this.code=e,this.usedTimes=0}}function lG(i,e,t,n,r,s,a){const c=new Ou,d=new oG,h=new Set,m=[],g=r.logarithmicDepthBuffer,v=r.vertexTextures;let y=r.precision;const M={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E(k){return h.add(k),k===0?"uv":`uv${k}`}function w(k,L,G,J,Q){const ce=J.fog,ge=Q.geometry,ne=k.isMeshStandardMaterial?J.environment:null,de=(k.isMeshStandardMaterial?t:e).get(k.envMap||ne),B=de&&de.mapping===uh?de.image.height:null,ie=M[k.type];k.precision!==null&&(y=r.getMaxPrecision(k.precision),y!==k.precision&&console.warn("THREE.WebGLProgram.getParameters:",k.precision,"not supported, using",y,"instead."));const te=ge.morphAttributes.position||ge.morphAttributes.normal||ge.morphAttributes.color,X=te!==void 0?te.length:0;let fe=0;ge.morphAttributes.position!==void 0&&(fe=1),ge.morphAttributes.normal!==void 0&&(fe=2),ge.morphAttributes.color!==void 0&&(fe=3);let Pe,le,Ee,Ue;if(ie){const en=ho[ie];Pe=en.vertexShader,le=en.fragmentShader}else Pe=k.vertexShader,le=k.fragmentShader,d.update(k),Ee=d.getVertexShaderID(k),Ue=d.getFragmentShaderID(k);const he=i.getRenderTarget(),Fe=i.state.buffers.depth.getReversed(),Xe=Q.isInstancedMesh===!0,Ge=Q.isBatchedMesh===!0,Qe=!!k.map,Se=!!k.matcap,Le=!!de,K=!!k.aoMap,ht=!!k.lightMap,Be=!!k.bumpMap,nt=!!k.normalMap,Ke=!!k.displacementMap,bt=!!k.emissiveMap,tt=!!k.metalnessMap,Y=!!k.roughnessMap,W=k.anisotropy>0,ye=k.clearcoat>0,Re=k.dispersion>0,ze=k.iridescence>0,De=k.sheen>0,yt=k.transmission>0,Je=W&&!!k.anisotropyMap,ct=ye&&!!k.clearcoatMap,Xt=ye&&!!k.clearcoatNormalMap,We=ye&&!!k.clearcoatRoughnessMap,gt=ze&&!!k.iridescenceMap,Dt=ze&&!!k.iridescenceThicknessMap,kt=De&&!!k.sheenColorMap,dt=De&&!!k.sheenRoughnessMap,re=!!k.specularMap,Ie=!!k.specularColorMap,rt=!!k.specularIntensityMap,ee=yt&&!!k.transmissionMap,Ye=yt&&!!k.thicknessMap,Te=!!k.gradientMap,Ne=!!k.alphaMap,lt=k.alphaTest>0,st=!!k.alphaHash,Lt=!!k.extensions;let pn=Xo;k.toneMapped&&(he===null||he.isXRRenderTarget===!0)&&(pn=i.toneMapping);const Nn={shaderID:ie,shaderType:k.type,shaderName:k.name,vertexShader:Pe,fragmentShader:le,defines:k.defines,customVertexShaderID:Ee,customFragmentShaderID:Ue,isRawShaderMaterial:k.isRawShaderMaterial===!0,glslVersion:k.glslVersion,precision:y,batching:Ge,batchingColor:Ge&&Q._colorsTexture!==null,instancing:Xe,instancingColor:Xe&&Q.instanceColor!==null,instancingMorph:Xe&&Q.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:he===null?i.outputColorSpace:he.isXRRenderTarget===!0?he.texture.colorSpace:ju,alphaToCoverage:!!k.alphaToCoverage,map:Qe,matcap:Se,envMap:Le,envMapMode:Le&&de.mapping,envMapCubeUVHeight:B,aoMap:K,lightMap:ht,bumpMap:Be,normalMap:nt,displacementMap:v&&Ke,emissiveMap:bt,normalMapObjectSpace:nt&&k.normalMapType===IR,normalMapTangentSpace:nt&&k.normalMapType===uc,metalnessMap:tt,roughnessMap:Y,anisotropy:W,anisotropyMap:Je,clearcoat:ye,clearcoatMap:ct,clearcoatNormalMap:Xt,clearcoatRoughnessMap:We,dispersion:Re,iridescence:ze,iridescenceMap:gt,iridescenceThicknessMap:Dt,sheen:De,sheenColorMap:kt,sheenRoughnessMap:dt,specularMap:re,specularColorMap:Ie,specularIntensityMap:rt,transmission:yt,transmissionMap:ee,thicknessMap:Ye,gradientMap:Te,opaque:k.transparent===!1&&k.blending===Nu&&k.alphaToCoverage===!1,alphaMap:Ne,alphaTest:lt,alphaHash:st,combine:k.combine,mapUv:Qe&&E(k.map.channel),aoMapUv:K&&E(k.aoMap.channel),lightMapUv:ht&&E(k.lightMap.channel),bumpMapUv:Be&&E(k.bumpMap.channel),normalMapUv:nt&&E(k.normalMap.channel),displacementMapUv:Ke&&E(k.displacementMap.channel),emissiveMapUv:bt&&E(k.emissiveMap.channel),metalnessMapUv:tt&&E(k.metalnessMap.channel),roughnessMapUv:Y&&E(k.roughnessMap.channel),anisotropyMapUv:Je&&E(k.anisotropyMap.channel),clearcoatMapUv:ct&&E(k.clearcoatMap.channel),clearcoatNormalMapUv:Xt&&E(k.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:We&&E(k.clearcoatRoughnessMap.channel),iridescenceMapUv:gt&&E(k.iridescenceMap.channel),iridescenceThicknessMapUv:Dt&&E(k.iridescenceThicknessMap.channel),sheenColorMapUv:kt&&E(k.sheenColorMap.channel),sheenRoughnessMapUv:dt&&E(k.sheenRoughnessMap.channel),specularMapUv:re&&E(k.specularMap.channel),specularColorMapUv:Ie&&E(k.specularColorMap.channel),specularIntensityMapUv:rt&&E(k.specularIntensityMap.channel),transmissionMapUv:ee&&E(k.transmissionMap.channel),thicknessMapUv:Ye&&E(k.thicknessMap.channel),alphaMapUv:Ne&&E(k.alphaMap.channel),vertexTangents:!!ge.attributes.tangent&&(nt||W),vertexColors:k.vertexColors,vertexAlphas:k.vertexColors===!0&&!!ge.attributes.color&&ge.attributes.color.itemSize===4,pointsUvs:Q.isPoints===!0&&!!ge.attributes.uv&&(Qe||Ne),fog:!!ce,useFog:k.fog===!0,fogExp2:!!ce&&ce.isFogExp2,flatShading:k.flatShading===!0,sizeAttenuation:k.sizeAttenuation===!0,logarithmicDepthBuffer:g,reverseDepthBuffer:Fe,skinning:Q.isSkinnedMesh===!0,morphTargets:ge.morphAttributes.position!==void 0,morphNormals:ge.morphAttributes.normal!==void 0,morphColors:ge.morphAttributes.color!==void 0,morphTargetsCount:X,morphTextureStride:fe,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:k.dithering,shadowMapEnabled:i.shadowMap.enabled&&G.length>0,shadowMapType:i.shadowMap.type,toneMapping:pn,decodeVideoTexture:Qe&&k.map.isVideoTexture===!0&&xn.getTransfer(k.map.colorSpace)===In,decodeVideoTextureEmissive:bt&&k.emissiveMap.isVideoTexture===!0&&xn.getTransfer(k.emissiveMap.colorSpace)===In,premultipliedAlpha:k.premultipliedAlpha,doubleSided:k.side===Vo,flipSided:k.side===Ir,useDepthPacking:k.depthPacking>=0,depthPacking:k.depthPacking||0,index0AttributeName:k.index0AttributeName,extensionClipCullDistance:Lt&&k.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Lt&&k.extensions.multiDraw===!0||Ge)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:k.customProgramCacheKey()};return Nn.vertexUv1s=h.has(1),Nn.vertexUv2s=h.has(2),Nn.vertexUv3s=h.has(3),h.clear(),Nn}function S(k){const L=[];if(k.shaderID?L.push(k.shaderID):(L.push(k.customVertexShaderID),L.push(k.customFragmentShaderID)),k.defines!==void 0)for(const G in k.defines)L.push(G),L.push(k.defines[G]);return k.isRawShaderMaterial===!1&&(A(L,k),C(L,k),L.push(i.outputColorSpace)),L.push(k.customProgramCacheKey),L.join()}function A(k,L){k.push(L.precision),k.push(L.outputColorSpace),k.push(L.envMapMode),k.push(L.envMapCubeUVHeight),k.push(L.mapUv),k.push(L.alphaMapUv),k.push(L.lightMapUv),k.push(L.aoMapUv),k.push(L.bumpMapUv),k.push(L.normalMapUv),k.push(L.displacementMapUv),k.push(L.emissiveMapUv),k.push(L.metalnessMapUv),k.push(L.roughnessMapUv),k.push(L.anisotropyMapUv),k.push(L.clearcoatMapUv),k.push(L.clearcoatNormalMapUv),k.push(L.clearcoatRoughnessMapUv),k.push(L.iridescenceMapUv),k.push(L.iridescenceThicknessMapUv),k.push(L.sheenColorMapUv),k.push(L.sheenRoughnessMapUv),k.push(L.specularMapUv),k.push(L.specularColorMapUv),k.push(L.specularIntensityMapUv),k.push(L.transmissionMapUv),k.push(L.thicknessMapUv),k.push(L.combine),k.push(L.fogExp2),k.push(L.sizeAttenuation),k.push(L.morphTargetsCount),k.push(L.morphAttributeCount),k.push(L.numDirLights),k.push(L.numPointLights),k.push(L.numSpotLights),k.push(L.numSpotLightMaps),k.push(L.numHemiLights),k.push(L.numRectAreaLights),k.push(L.numDirLightShadows),k.push(L.numPointLightShadows),k.push(L.numSpotLightShadows),k.push(L.numSpotLightShadowsWithMaps),k.push(L.numLightProbes),k.push(L.shadowMapType),k.push(L.toneMapping),k.push(L.numClippingPlanes),k.push(L.numClipIntersection),k.push(L.depthPacking)}function C(k,L){c.disableAll(),L.supportsVertexTextures&&c.enable(0),L.instancing&&c.enable(1),L.instancingColor&&c.enable(2),L.instancingMorph&&c.enable(3),L.matcap&&c.enable(4),L.envMap&&c.enable(5),L.normalMapObjectSpace&&c.enable(6),L.normalMapTangentSpace&&c.enable(7),L.clearcoat&&c.enable(8),L.iridescence&&c.enable(9),L.alphaTest&&c.enable(10),L.vertexColors&&c.enable(11),L.vertexAlphas&&c.enable(12),L.vertexUv1s&&c.enable(13),L.vertexUv2s&&c.enable(14),L.vertexUv3s&&c.enable(15),L.vertexTangents&&c.enable(16),L.anisotropy&&c.enable(17),L.alphaHash&&c.enable(18),L.batching&&c.enable(19),L.dispersion&&c.enable(20),L.batchingColor&&c.enable(21),k.push(c.mask),c.disableAll(),L.fog&&c.enable(0),L.useFog&&c.enable(1),L.flatShading&&c.enable(2),L.logarithmicDepthBuffer&&c.enable(3),L.reverseDepthBuffer&&c.enable(4),L.skinning&&c.enable(5),L.morphTargets&&c.enable(6),L.morphNormals&&c.enable(7),L.morphColors&&c.enable(8),L.premultipliedAlpha&&c.enable(9),L.shadowMapEnabled&&c.enable(10),L.doubleSided&&c.enable(11),L.flipSided&&c.enable(12),L.useDepthPacking&&c.enable(13),L.dithering&&c.enable(14),L.transmission&&c.enable(15),L.sheen&&c.enable(16),L.opaque&&c.enable(17),L.pointsUvs&&c.enable(18),L.decodeVideoTexture&&c.enable(19),L.decodeVideoTextureEmissive&&c.enable(20),L.alphaToCoverage&&c.enable(21),k.push(c.mask)}function R(k){const L=M[k.type];let G;if(L){const J=ho[L];G=jR.clone(J.uniforms)}else G=k.uniforms;return G}function O(k,L){let G;for(let J=0,Q=m.length;J<Q;J++){const ce=m[J];if(ce.cacheKey===L){G=ce,++G.usedTimes;break}}return G===void 0&&(G=new rG(i,L,k,s),m.push(G)),G}function U(k){if(--k.usedTimes===0){const L=m.indexOf(k);m[L]=m[m.length-1],m.pop(),k.destroy()}}function F(k){d.remove(k)}function z(){d.dispose()}return{getParameters:w,getProgramCacheKey:S,getUniforms:R,acquireProgram:O,releaseProgram:U,releaseShaderCache:F,programs:m,dispose:z}}function cG(){let i=new WeakMap;function e(a){return i.has(a)}function t(a){let c=i.get(a);return c===void 0&&(c={},i.set(a,c)),c}function n(a){i.delete(a)}function r(a,c,d){i.get(a)[c]=d}function s(){i=new WeakMap}return{has:e,get:t,remove:n,update:r,dispose:s}}function uG(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function q1(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function K1(){const i=[];let e=0;const t=[],n=[],r=[];function s(){e=0,t.length=0,n.length=0,r.length=0}function a(g,v,y,M,E,w){let S=i[e];return S===void 0?(S={id:g.id,object:g,geometry:v,material:y,groupOrder:M,renderOrder:g.renderOrder,z:E,group:w},i[e]=S):(S.id=g.id,S.object=g,S.geometry=v,S.material=y,S.groupOrder=M,S.renderOrder=g.renderOrder,S.z=E,S.group=w),e++,S}function c(g,v,y,M,E,w){const S=a(g,v,y,M,E,w);y.transmission>0?n.push(S):y.transparent===!0?r.push(S):t.push(S)}function d(g,v,y,M,E,w){const S=a(g,v,y,M,E,w);y.transmission>0?n.unshift(S):y.transparent===!0?r.unshift(S):t.unshift(S)}function h(g,v){t.length>1&&t.sort(g||uG),n.length>1&&n.sort(v||q1),r.length>1&&r.sort(v||q1)}function m(){for(let g=e,v=i.length;g<v;g++){const y=i[g];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:n,transparent:r,init:s,push:c,unshift:d,finish:m,sort:h}}function fG(){let i=new WeakMap;function e(n,r){const s=i.get(n);let a;return s===void 0?(a=new K1,i.set(n,[a])):r>=s.length?(a=new K1,s.push(a)):a=s[r],a}function t(){i=new WeakMap}return{get:e,dispose:t}}function dG(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new q,color:new vt};break;case"SpotLight":t={position:new q,direction:new q,color:new vt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new q,color:new vt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new q,skyColor:new vt,groundColor:new vt};break;case"RectAreaLight":t={color:new vt,position:new q,halfWidth:new q,halfHeight:new q};break}return i[e.id]=t,t}}}function hG(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ke};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ke};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ke,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let pG=0;function mG(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function gG(i){const e=new dG,t=hG(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)n.probe.push(new q);const r=new q,s=new Wt,a=new Wt;function c(h){let m=0,g=0,v=0;for(let k=0;k<9;k++)n.probe[k].set(0,0,0);let y=0,M=0,E=0,w=0,S=0,A=0,C=0,R=0,O=0,U=0,F=0;h.sort(mG);for(let k=0,L=h.length;k<L;k++){const G=h[k],J=G.color,Q=G.intensity,ce=G.distance,ge=G.shadow&&G.shadow.map?G.shadow.map.texture:null;if(G.isAmbientLight)m+=J.r*Q,g+=J.g*Q,v+=J.b*Q;else if(G.isLightProbe){for(let ne=0;ne<9;ne++)n.probe[ne].addScaledVector(G.sh.coefficients[ne],Q);F++}else if(G.isDirectionalLight){const ne=e.get(G);if(ne.color.copy(G.color).multiplyScalar(G.intensity),G.castShadow){const de=G.shadow,B=t.get(G);B.shadowIntensity=de.intensity,B.shadowBias=de.bias,B.shadowNormalBias=de.normalBias,B.shadowRadius=de.radius,B.shadowMapSize=de.mapSize,n.directionalShadow[y]=B,n.directionalShadowMap[y]=ge,n.directionalShadowMatrix[y]=G.shadow.matrix,A++}n.directional[y]=ne,y++}else if(G.isSpotLight){const ne=e.get(G);ne.position.setFromMatrixPosition(G.matrixWorld),ne.color.copy(J).multiplyScalar(Q),ne.distance=ce,ne.coneCos=Math.cos(G.angle),ne.penumbraCos=Math.cos(G.angle*(1-G.penumbra)),ne.decay=G.decay,n.spot[E]=ne;const de=G.shadow;if(G.map&&(n.spotLightMap[O]=G.map,O++,de.updateMatrices(G),G.castShadow&&U++),n.spotLightMatrix[E]=de.matrix,G.castShadow){const B=t.get(G);B.shadowIntensity=de.intensity,B.shadowBias=de.bias,B.shadowNormalBias=de.normalBias,B.shadowRadius=de.radius,B.shadowMapSize=de.mapSize,n.spotShadow[E]=B,n.spotShadowMap[E]=ge,R++}E++}else if(G.isRectAreaLight){const ne=e.get(G);ne.color.copy(J).multiplyScalar(Q),ne.halfWidth.set(G.width*.5,0,0),ne.halfHeight.set(0,G.height*.5,0),n.rectArea[w]=ne,w++}else if(G.isPointLight){const ne=e.get(G);if(ne.color.copy(G.color).multiplyScalar(G.intensity),ne.distance=G.distance,ne.decay=G.decay,G.castShadow){const de=G.shadow,B=t.get(G);B.shadowIntensity=de.intensity,B.shadowBias=de.bias,B.shadowNormalBias=de.normalBias,B.shadowRadius=de.radius,B.shadowMapSize=de.mapSize,B.shadowCameraNear=de.camera.near,B.shadowCameraFar=de.camera.far,n.pointShadow[M]=B,n.pointShadowMap[M]=ge,n.pointShadowMatrix[M]=G.shadow.matrix,C++}n.point[M]=ne,M++}else if(G.isHemisphereLight){const ne=e.get(G);ne.skyColor.copy(G.color).multiplyScalar(Q),ne.groundColor.copy(G.groundColor).multiplyScalar(Q),n.hemi[S]=ne,S++}}w>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=at.LTC_FLOAT_1,n.rectAreaLTC2=at.LTC_FLOAT_2):(n.rectAreaLTC1=at.LTC_HALF_1,n.rectAreaLTC2=at.LTC_HALF_2)),n.ambient[0]=m,n.ambient[1]=g,n.ambient[2]=v;const z=n.hash;(z.directionalLength!==y||z.pointLength!==M||z.spotLength!==E||z.rectAreaLength!==w||z.hemiLength!==S||z.numDirectionalShadows!==A||z.numPointShadows!==C||z.numSpotShadows!==R||z.numSpotMaps!==O||z.numLightProbes!==F)&&(n.directional.length=y,n.spot.length=E,n.rectArea.length=w,n.point.length=M,n.hemi.length=S,n.directionalShadow.length=A,n.directionalShadowMap.length=A,n.pointShadow.length=C,n.pointShadowMap.length=C,n.spotShadow.length=R,n.spotShadowMap.length=R,n.directionalShadowMatrix.length=A,n.pointShadowMatrix.length=C,n.spotLightMatrix.length=R+O-U,n.spotLightMap.length=O,n.numSpotLightShadowsWithMaps=U,n.numLightProbes=F,z.directionalLength=y,z.pointLength=M,z.spotLength=E,z.rectAreaLength=w,z.hemiLength=S,z.numDirectionalShadows=A,z.numPointShadows=C,z.numSpotShadows=R,z.numSpotMaps=O,z.numLightProbes=F,n.version=pG++)}function d(h,m){let g=0,v=0,y=0,M=0,E=0;const w=m.matrixWorldInverse;for(let S=0,A=h.length;S<A;S++){const C=h[S];if(C.isDirectionalLight){const R=n.directional[g];R.direction.setFromMatrixPosition(C.matrixWorld),r.setFromMatrixPosition(C.target.matrixWorld),R.direction.sub(r),R.direction.transformDirection(w),g++}else if(C.isSpotLight){const R=n.spot[y];R.position.setFromMatrixPosition(C.matrixWorld),R.position.applyMatrix4(w),R.direction.setFromMatrixPosition(C.matrixWorld),r.setFromMatrixPosition(C.target.matrixWorld),R.direction.sub(r),R.direction.transformDirection(w),y++}else if(C.isRectAreaLight){const R=n.rectArea[M];R.position.setFromMatrixPosition(C.matrixWorld),R.position.applyMatrix4(w),a.identity(),s.copy(C.matrixWorld),s.premultiply(w),a.extractRotation(s),R.halfWidth.set(C.width*.5,0,0),R.halfHeight.set(0,C.height*.5,0),R.halfWidth.applyMatrix4(a),R.halfHeight.applyMatrix4(a),M++}else if(C.isPointLight){const R=n.point[v];R.position.setFromMatrixPosition(C.matrixWorld),R.position.applyMatrix4(w),v++}else if(C.isHemisphereLight){const R=n.hemi[E];R.direction.setFromMatrixPosition(C.matrixWorld),R.direction.transformDirection(w),E++}}}return{setup:c,setupView:d,state:n}}function Z1(i){const e=new gG(i),t=[],n=[];function r(m){h.camera=m,t.length=0,n.length=0}function s(m){t.push(m)}function a(m){n.push(m)}function c(){e.setup(t)}function d(m){e.setupView(t,m)}const h={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:h,setupLights:c,setupLightsView:d,pushLight:s,pushShadow:a}}function vG(i){let e=new WeakMap;function t(r,s=0){const a=e.get(r);let c;return a===void 0?(c=new Z1(i),e.set(r,[c])):s>=a.length?(c=new Z1(i),a.push(c)):c=a[s],c}function n(){e=new WeakMap}return{get:t,dispose:n}}const yG=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,xG=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function _G(i,e,t){let n=new Sm;const r=new ke,s=new ke,a=new wn,c=new gw({depthPacking:PR}),d=new vw,h={},m=t.maxTextureSize,g={[Za]:Ir,[Ir]:Za,[Vo]:Vo},v=new yo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ke},radius:{value:4}},vertexShader:yG,fragmentShader:xG}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const M=new un;M.setAttribute("position",new Un(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new _i(M,v),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Zy;let S=this.type;this.render=function(U,F,z){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||U.length===0)return;const k=i.getRenderTarget(),L=i.getActiveCubeFace(),G=i.getActiveMipmapLevel(),J=i.state;J.setBlending(Xa),J.buffers.color.setClear(1,1,1,1),J.buffers.depth.setTest(!0),J.setScissorTest(!1);const Q=S!==co&&this.type===co,ce=S===co&&this.type!==co;for(let ge=0,ne=U.length;ge<ne;ge++){const de=U[ge],B=de.shadow;if(B===void 0){console.warn("THREE.WebGLShadowMap:",de,"has no shadow.");continue}if(B.autoUpdate===!1&&B.needsUpdate===!1)continue;r.copy(B.mapSize);const ie=B.getFrameExtents();if(r.multiply(ie),s.copy(B.mapSize),(r.x>m||r.y>m)&&(r.x>m&&(s.x=Math.floor(m/ie.x),r.x=s.x*ie.x,B.mapSize.x=s.x),r.y>m&&(s.y=Math.floor(m/ie.y),r.y=s.y*ie.y,B.mapSize.y=s.y)),B.map===null||Q===!0||ce===!0){const X=this.type!==co?{minFilter:Ji,magFilter:Ji}:{};B.map!==null&&B.map.dispose(),B.map=new vo(r.x,r.y,X),B.map.texture.name=de.name+".shadowMap",B.camera.updateProjectionMatrix()}i.setRenderTarget(B.map),i.clear();const te=B.getViewportCount();for(let X=0;X<te;X++){const fe=B.getViewport(X);a.set(s.x*fe.x,s.y*fe.y,s.x*fe.z,s.y*fe.w),J.viewport(a),B.updateMatrices(de,X),n=B.getFrustum(),R(F,z,B.camera,de,this.type)}B.isPointLightShadow!==!0&&this.type===co&&A(B,z),B.needsUpdate=!1}S=this.type,w.needsUpdate=!1,i.setRenderTarget(k,L,G)};function A(U,F){const z=e.update(E);v.defines.VSM_SAMPLES!==U.blurSamples&&(v.defines.VSM_SAMPLES=U.blurSamples,y.defines.VSM_SAMPLES=U.blurSamples,v.needsUpdate=!0,y.needsUpdate=!0),U.mapPass===null&&(U.mapPass=new vo(r.x,r.y)),v.uniforms.shadow_pass.value=U.map.texture,v.uniforms.resolution.value=U.mapSize,v.uniforms.radius.value=U.radius,i.setRenderTarget(U.mapPass),i.clear(),i.renderBufferDirect(F,null,z,v,E,null),y.uniforms.shadow_pass.value=U.mapPass.texture,y.uniforms.resolution.value=U.mapSize,y.uniforms.radius.value=U.radius,i.setRenderTarget(U.map),i.clear(),i.renderBufferDirect(F,null,z,y,E,null)}function C(U,F,z,k){let L=null;const G=z.isPointLight===!0?U.customDistanceMaterial:U.customDepthMaterial;if(G!==void 0)L=G;else if(L=z.isPointLight===!0?d:c,i.localClippingEnabled&&F.clipShadows===!0&&Array.isArray(F.clippingPlanes)&&F.clippingPlanes.length!==0||F.displacementMap&&F.displacementScale!==0||F.alphaMap&&F.alphaTest>0||F.map&&F.alphaTest>0){const J=L.uuid,Q=F.uuid;let ce=h[J];ce===void 0&&(ce={},h[J]=ce);let ge=ce[Q];ge===void 0&&(ge=L.clone(),ce[Q]=ge,F.addEventListener("dispose",O)),L=ge}if(L.visible=F.visible,L.wireframe=F.wireframe,k===co?L.side=F.shadowSide!==null?F.shadowSide:F.side:L.side=F.shadowSide!==null?F.shadowSide:g[F.side],L.alphaMap=F.alphaMap,L.alphaTest=F.alphaTest,L.map=F.map,L.clipShadows=F.clipShadows,L.clippingPlanes=F.clippingPlanes,L.clipIntersection=F.clipIntersection,L.displacementMap=F.displacementMap,L.displacementScale=F.displacementScale,L.displacementBias=F.displacementBias,L.wireframeLinewidth=F.wireframeLinewidth,L.linewidth=F.linewidth,z.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const J=i.properties.get(L);J.light=z}return L}function R(U,F,z,k,L){if(U.visible===!1)return;if(U.layers.test(F.layers)&&(U.isMesh||U.isLine||U.isPoints)&&(U.castShadow||U.receiveShadow&&L===co)&&(!U.frustumCulled||n.intersectsObject(U))){U.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,U.matrixWorld);const Q=e.update(U),ce=U.material;if(Array.isArray(ce)){const ge=Q.groups;for(let ne=0,de=ge.length;ne<de;ne++){const B=ge[ne],ie=ce[B.materialIndex];if(ie&&ie.visible){const te=C(U,ie,k,L);U.onBeforeShadow(i,U,F,z,Q,te,B),i.renderBufferDirect(z,null,Q,te,U,B),U.onAfterShadow(i,U,F,z,Q,te,B)}}}else if(ce.visible){const ge=C(U,ce,k,L);U.onBeforeShadow(i,U,F,z,Q,ge,null),i.renderBufferDirect(z,null,Q,ge,U,null),U.onAfterShadow(i,U,F,z,Q,ge,null)}}const J=U.children;for(let Q=0,ce=J.length;Q<ce;Q++)R(J[Q],F,z,k,L)}function O(U){U.target.removeEventListener("dispose",O);for(const z in h){const k=h[z],L=U.target.uuid;L in k&&(k[L].dispose(),delete k[L])}}}const SG={[Gv]:Wv,[jv]:qv,[Xv]:Kv,[Hu]:Yv,[Wv]:Gv,[qv]:jv,[Kv]:Xv,[Yv]:Hu};function wG(i,e){function t(){let ee=!1;const Ye=new wn;let Te=null;const Ne=new wn(0,0,0,0);return{setMask:function(lt){Te!==lt&&!ee&&(i.colorMask(lt,lt,lt,lt),Te=lt)},setLocked:function(lt){ee=lt},setClear:function(lt,st,Lt,pn,Nn){Nn===!0&&(lt*=pn,st*=pn,Lt*=pn),Ye.set(lt,st,Lt,pn),Ne.equals(Ye)===!1&&(i.clearColor(lt,st,Lt,pn),Ne.copy(Ye))},reset:function(){ee=!1,Te=null,Ne.set(-1,0,0,0)}}}function n(){let ee=!1,Ye=!1,Te=null,Ne=null,lt=null;return{setReversed:function(st){if(Ye!==st){const Lt=e.get("EXT_clip_control");Ye?Lt.clipControlEXT(Lt.LOWER_LEFT_EXT,Lt.ZERO_TO_ONE_EXT):Lt.clipControlEXT(Lt.LOWER_LEFT_EXT,Lt.NEGATIVE_ONE_TO_ONE_EXT);const pn=lt;lt=null,this.setClear(pn)}Ye=st},getReversed:function(){return Ye},setTest:function(st){st?he(i.DEPTH_TEST):Fe(i.DEPTH_TEST)},setMask:function(st){Te!==st&&!ee&&(i.depthMask(st),Te=st)},setFunc:function(st){if(Ye&&(st=SG[st]),Ne!==st){switch(st){case Gv:i.depthFunc(i.NEVER);break;case Wv:i.depthFunc(i.ALWAYS);break;case jv:i.depthFunc(i.LESS);break;case Hu:i.depthFunc(i.LEQUAL);break;case Xv:i.depthFunc(i.EQUAL);break;case Yv:i.depthFunc(i.GEQUAL);break;case qv:i.depthFunc(i.GREATER);break;case Kv:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Ne=st}},setLocked:function(st){ee=st},setClear:function(st){lt!==st&&(Ye&&(st=1-st),i.clearDepth(st),lt=st)},reset:function(){ee=!1,Te=null,Ne=null,lt=null,Ye=!1}}}function r(){let ee=!1,Ye=null,Te=null,Ne=null,lt=null,st=null,Lt=null,pn=null,Nn=null;return{setTest:function(en){ee||(en?he(i.STENCIL_TEST):Fe(i.STENCIL_TEST))},setMask:function(en){Ye!==en&&!ee&&(i.stencilMask(en),Ye=en)},setFunc:function(en,Kn,ei){(Te!==en||Ne!==Kn||lt!==ei)&&(i.stencilFunc(en,Kn,ei),Te=en,Ne=Kn,lt=ei)},setOp:function(en,Kn,ei){(st!==en||Lt!==Kn||pn!==ei)&&(i.stencilOp(en,Kn,ei),st=en,Lt=Kn,pn=ei)},setLocked:function(en){ee=en},setClear:function(en){Nn!==en&&(i.clearStencil(en),Nn=en)},reset:function(){ee=!1,Ye=null,Te=null,Ne=null,lt=null,st=null,Lt=null,pn=null,Nn=null}}}const s=new t,a=new n,c=new r,d=new WeakMap,h=new WeakMap;let m={},g={},v=new WeakMap,y=[],M=null,E=!1,w=null,S=null,A=null,C=null,R=null,O=null,U=null,F=new vt(0,0,0),z=0,k=!1,L=null,G=null,J=null,Q=null,ce=null;const ge=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ne=!1,de=0;const B=i.getParameter(i.VERSION);B.indexOf("WebGL")!==-1?(de=parseFloat(/^WebGL (\d)/.exec(B)[1]),ne=de>=1):B.indexOf("OpenGL ES")!==-1&&(de=parseFloat(/^OpenGL ES (\d)/.exec(B)[1]),ne=de>=2);let ie=null,te={};const X=i.getParameter(i.SCISSOR_BOX),fe=i.getParameter(i.VIEWPORT),Pe=new wn().fromArray(X),le=new wn().fromArray(fe);function Ee(ee,Ye,Te,Ne){const lt=new Uint8Array(4),st=i.createTexture();i.bindTexture(ee,st),i.texParameteri(ee,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(ee,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Lt=0;Lt<Te;Lt++)ee===i.TEXTURE_3D||ee===i.TEXTURE_2D_ARRAY?i.texImage3D(Ye,0,i.RGBA,1,1,Ne,0,i.RGBA,i.UNSIGNED_BYTE,lt):i.texImage2D(Ye+Lt,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,lt);return st}const Ue={};Ue[i.TEXTURE_2D]=Ee(i.TEXTURE_2D,i.TEXTURE_2D,1),Ue[i.TEXTURE_CUBE_MAP]=Ee(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ue[i.TEXTURE_2D_ARRAY]=Ee(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Ue[i.TEXTURE_3D]=Ee(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),c.setClear(0),he(i.DEPTH_TEST),a.setFunc(Hu),Be(!1),nt(X_),he(i.CULL_FACE),K(Xa);function he(ee){m[ee]!==!0&&(i.enable(ee),m[ee]=!0)}function Fe(ee){m[ee]!==!1&&(i.disable(ee),m[ee]=!1)}function Xe(ee,Ye){return g[ee]!==Ye?(i.bindFramebuffer(ee,Ye),g[ee]=Ye,ee===i.DRAW_FRAMEBUFFER&&(g[i.FRAMEBUFFER]=Ye),ee===i.FRAMEBUFFER&&(g[i.DRAW_FRAMEBUFFER]=Ye),!0):!1}function Ge(ee,Ye){let Te=y,Ne=!1;if(ee){Te=v.get(Ye),Te===void 0&&(Te=[],v.set(Ye,Te));const lt=ee.textures;if(Te.length!==lt.length||Te[0]!==i.COLOR_ATTACHMENT0){for(let st=0,Lt=lt.length;st<Lt;st++)Te[st]=i.COLOR_ATTACHMENT0+st;Te.length=lt.length,Ne=!0}}else Te[0]!==i.BACK&&(Te[0]=i.BACK,Ne=!0);Ne&&i.drawBuffers(Te)}function Qe(ee){return M!==ee?(i.useProgram(ee),M=ee,!0):!1}const Se={[jl]:i.FUNC_ADD,[eR]:i.FUNC_SUBTRACT,[tR]:i.FUNC_REVERSE_SUBTRACT};Se[nR]=i.MIN,Se[iR]=i.MAX;const Le={[rR]:i.ZERO,[sR]:i.ONE,[oR]:i.SRC_COLOR,[Vv]:i.SRC_ALPHA,[dR]:i.SRC_ALPHA_SATURATE,[uR]:i.DST_COLOR,[lR]:i.DST_ALPHA,[aR]:i.ONE_MINUS_SRC_COLOR,[Hv]:i.ONE_MINUS_SRC_ALPHA,[fR]:i.ONE_MINUS_DST_COLOR,[cR]:i.ONE_MINUS_DST_ALPHA,[hR]:i.CONSTANT_COLOR,[pR]:i.ONE_MINUS_CONSTANT_COLOR,[mR]:i.CONSTANT_ALPHA,[gR]:i.ONE_MINUS_CONSTANT_ALPHA};function K(ee,Ye,Te,Ne,lt,st,Lt,pn,Nn,en){if(ee===Xa){E===!0&&(Fe(i.BLEND),E=!1);return}if(E===!1&&(he(i.BLEND),E=!0),ee!==JA){if(ee!==w||en!==k){if((S!==jl||R!==jl)&&(i.blendEquation(i.FUNC_ADD),S=jl,R=jl),en)switch(ee){case Nu:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Y_:i.blendFunc(i.ONE,i.ONE);break;case q_:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case K_:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ee);break}else switch(ee){case Nu:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Y_:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case q_:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case K_:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ee);break}A=null,C=null,O=null,U=null,F.set(0,0,0),z=0,w=ee,k=en}return}lt=lt||Ye,st=st||Te,Lt=Lt||Ne,(Ye!==S||lt!==R)&&(i.blendEquationSeparate(Se[Ye],Se[lt]),S=Ye,R=lt),(Te!==A||Ne!==C||st!==O||Lt!==U)&&(i.blendFuncSeparate(Le[Te],Le[Ne],Le[st],Le[Lt]),A=Te,C=Ne,O=st,U=Lt),(pn.equals(F)===!1||Nn!==z)&&(i.blendColor(pn.r,pn.g,pn.b,Nn),F.copy(pn),z=Nn),w=ee,k=!1}function ht(ee,Ye){ee.side===Vo?Fe(i.CULL_FACE):he(i.CULL_FACE);let Te=ee.side===Ir;Ye&&(Te=!Te),Be(Te),ee.blending===Nu&&ee.transparent===!1?K(Xa):K(ee.blending,ee.blendEquation,ee.blendSrc,ee.blendDst,ee.blendEquationAlpha,ee.blendSrcAlpha,ee.blendDstAlpha,ee.blendColor,ee.blendAlpha,ee.premultipliedAlpha),a.setFunc(ee.depthFunc),a.setTest(ee.depthTest),a.setMask(ee.depthWrite),s.setMask(ee.colorWrite);const Ne=ee.stencilWrite;c.setTest(Ne),Ne&&(c.setMask(ee.stencilWriteMask),c.setFunc(ee.stencilFunc,ee.stencilRef,ee.stencilFuncMask),c.setOp(ee.stencilFail,ee.stencilZFail,ee.stencilZPass)),bt(ee.polygonOffset,ee.polygonOffsetFactor,ee.polygonOffsetUnits),ee.alphaToCoverage===!0?he(i.SAMPLE_ALPHA_TO_COVERAGE):Fe(i.SAMPLE_ALPHA_TO_COVERAGE)}function Be(ee){L!==ee&&(ee?i.frontFace(i.CW):i.frontFace(i.CCW),L=ee)}function nt(ee){ee!==ZA?(he(i.CULL_FACE),ee!==G&&(ee===X_?i.cullFace(i.BACK):ee===$A?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Fe(i.CULL_FACE),G=ee}function Ke(ee){ee!==J&&(ne&&i.lineWidth(ee),J=ee)}function bt(ee,Ye,Te){ee?(he(i.POLYGON_OFFSET_FILL),(Q!==Ye||ce!==Te)&&(i.polygonOffset(Ye,Te),Q=Ye,ce=Te)):Fe(i.POLYGON_OFFSET_FILL)}function tt(ee){ee?he(i.SCISSOR_TEST):Fe(i.SCISSOR_TEST)}function Y(ee){ee===void 0&&(ee=i.TEXTURE0+ge-1),ie!==ee&&(i.activeTexture(ee),ie=ee)}function W(ee,Ye,Te){Te===void 0&&(ie===null?Te=i.TEXTURE0+ge-1:Te=ie);let Ne=te[Te];Ne===void 0&&(Ne={type:void 0,texture:void 0},te[Te]=Ne),(Ne.type!==ee||Ne.texture!==Ye)&&(ie!==Te&&(i.activeTexture(Te),ie=Te),i.bindTexture(ee,Ye||Ue[ee]),Ne.type=ee,Ne.texture=Ye)}function ye(){const ee=te[ie];ee!==void 0&&ee.type!==void 0&&(i.bindTexture(ee.type,null),ee.type=void 0,ee.texture=void 0)}function Re(){try{i.compressedTexImage2D.apply(i,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function ze(){try{i.compressedTexImage3D.apply(i,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function De(){try{i.texSubImage2D.apply(i,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function yt(){try{i.texSubImage3D.apply(i,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Je(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function ct(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Xt(){try{i.texStorage2D.apply(i,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function We(){try{i.texStorage3D.apply(i,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function gt(){try{i.texImage2D.apply(i,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Dt(){try{i.texImage3D.apply(i,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function kt(ee){Pe.equals(ee)===!1&&(i.scissor(ee.x,ee.y,ee.z,ee.w),Pe.copy(ee))}function dt(ee){le.equals(ee)===!1&&(i.viewport(ee.x,ee.y,ee.z,ee.w),le.copy(ee))}function re(ee,Ye){let Te=h.get(Ye);Te===void 0&&(Te=new WeakMap,h.set(Ye,Te));let Ne=Te.get(ee);Ne===void 0&&(Ne=i.getUniformBlockIndex(Ye,ee.name),Te.set(ee,Ne))}function Ie(ee,Ye){const Ne=h.get(Ye).get(ee);d.get(Ye)!==Ne&&(i.uniformBlockBinding(Ye,Ne,ee.__bindingPointIndex),d.set(Ye,Ne))}function rt(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),a.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),m={},ie=null,te={},g={},v=new WeakMap,y=[],M=null,E=!1,w=null,S=null,A=null,C=null,R=null,O=null,U=null,F=new vt(0,0,0),z=0,k=!1,L=null,G=null,J=null,Q=null,ce=null,Pe.set(0,0,i.canvas.width,i.canvas.height),le.set(0,0,i.canvas.width,i.canvas.height),s.reset(),a.reset(),c.reset()}return{buffers:{color:s,depth:a,stencil:c},enable:he,disable:Fe,bindFramebuffer:Xe,drawBuffers:Ge,useProgram:Qe,setBlending:K,setMaterial:ht,setFlipSided:Be,setCullFace:nt,setLineWidth:Ke,setPolygonOffset:bt,setScissorTest:tt,activeTexture:Y,bindTexture:W,unbindTexture:ye,compressedTexImage2D:Re,compressedTexImage3D:ze,texImage2D:gt,texImage3D:Dt,updateUBOMapping:re,uniformBlockBinding:Ie,texStorage2D:Xt,texStorage3D:We,texSubImage2D:De,texSubImage3D:yt,compressedTexSubImage2D:Je,compressedTexSubImage3D:ct,scissor:kt,viewport:dt,reset:rt}}function MG(i,e,t,n,r,s,a){const c=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new ke,m=new WeakMap;let g;const v=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function M(Y,W){return y?new OffscreenCanvas(Y,W):tm("canvas")}function E(Y,W,ye){let Re=1;const ze=tt(Y);if((ze.width>ye||ze.height>ye)&&(Re=ye/Math.max(ze.width,ze.height)),Re<1)if(typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Y instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Y instanceof ImageBitmap||typeof VideoFrame<"u"&&Y instanceof VideoFrame){const De=Math.floor(Re*ze.width),yt=Math.floor(Re*ze.height);g===void 0&&(g=M(De,yt));const Je=W?M(De,yt):g;return Je.width=De,Je.height=yt,Je.getContext("2d").drawImage(Y,0,0,De,yt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ze.width+"x"+ze.height+") to ("+De+"x"+yt+")."),Je}else return"data"in Y&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ze.width+"x"+ze.height+")."),Y;return Y}function w(Y){return Y.generateMipmaps}function S(Y){i.generateMipmap(Y)}function A(Y){return Y.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:Y.isWebGL3DRenderTarget?i.TEXTURE_3D:Y.isWebGLArrayRenderTarget||Y.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function C(Y,W,ye,Re,ze=!1){if(Y!==null){if(i[Y]!==void 0)return i[Y];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Y+"'")}let De=W;if(W===i.RED&&(ye===i.FLOAT&&(De=i.R32F),ye===i.HALF_FLOAT&&(De=i.R16F),ye===i.UNSIGNED_BYTE&&(De=i.R8)),W===i.RED_INTEGER&&(ye===i.UNSIGNED_BYTE&&(De=i.R8UI),ye===i.UNSIGNED_SHORT&&(De=i.R16UI),ye===i.UNSIGNED_INT&&(De=i.R32UI),ye===i.BYTE&&(De=i.R8I),ye===i.SHORT&&(De=i.R16I),ye===i.INT&&(De=i.R32I)),W===i.RG&&(ye===i.FLOAT&&(De=i.RG32F),ye===i.HALF_FLOAT&&(De=i.RG16F),ye===i.UNSIGNED_BYTE&&(De=i.RG8)),W===i.RG_INTEGER&&(ye===i.UNSIGNED_BYTE&&(De=i.RG8UI),ye===i.UNSIGNED_SHORT&&(De=i.RG16UI),ye===i.UNSIGNED_INT&&(De=i.RG32UI),ye===i.BYTE&&(De=i.RG8I),ye===i.SHORT&&(De=i.RG16I),ye===i.INT&&(De=i.RG32I)),W===i.RGB_INTEGER&&(ye===i.UNSIGNED_BYTE&&(De=i.RGB8UI),ye===i.UNSIGNED_SHORT&&(De=i.RGB16UI),ye===i.UNSIGNED_INT&&(De=i.RGB32UI),ye===i.BYTE&&(De=i.RGB8I),ye===i.SHORT&&(De=i.RGB16I),ye===i.INT&&(De=i.RGB32I)),W===i.RGBA_INTEGER&&(ye===i.UNSIGNED_BYTE&&(De=i.RGBA8UI),ye===i.UNSIGNED_SHORT&&(De=i.RGBA16UI),ye===i.UNSIGNED_INT&&(De=i.RGBA32UI),ye===i.BYTE&&(De=i.RGBA8I),ye===i.SHORT&&(De=i.RGBA16I),ye===i.INT&&(De=i.RGBA32I)),W===i.RGB&&ye===i.UNSIGNED_INT_5_9_9_9_REV&&(De=i.RGB9_E5),W===i.RGBA){const yt=ze?Qp:xn.getTransfer(Re);ye===i.FLOAT&&(De=i.RGBA32F),ye===i.HALF_FLOAT&&(De=i.RGBA16F),ye===i.UNSIGNED_BYTE&&(De=yt===In?i.SRGB8_ALPHA8:i.RGBA8),ye===i.UNSIGNED_SHORT_4_4_4_4&&(De=i.RGBA4),ye===i.UNSIGNED_SHORT_5_5_5_1&&(De=i.RGB5_A1)}return(De===i.R16F||De===i.R32F||De===i.RG16F||De===i.RG32F||De===i.RGBA16F||De===i.RGBA32F)&&e.get("EXT_color_buffer_float"),De}function R(Y,W){let ye;return Y?W===null||W===Qa||W===Gu?ye=i.DEPTH24_STENCIL8:W===$r?ye=i.DEPTH32F_STENCIL8:W===$d&&(ye=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):W===null||W===Qa||W===Gu?ye=i.DEPTH_COMPONENT24:W===$r?ye=i.DEPTH_COMPONENT32F:W===$d&&(ye=i.DEPTH_COMPONENT16),ye}function O(Y,W){return w(Y)===!0||Y.isFramebufferTexture&&Y.minFilter!==Ji&&Y.minFilter!==Pi?Math.log2(Math.max(W.width,W.height))+1:Y.mipmaps!==void 0&&Y.mipmaps.length>0?Y.mipmaps.length:Y.isCompressedTexture&&Array.isArray(Y.image)?W.mipmaps.length:1}function U(Y){const W=Y.target;W.removeEventListener("dispose",U),z(W),W.isVideoTexture&&m.delete(W)}function F(Y){const W=Y.target;W.removeEventListener("dispose",F),L(W)}function z(Y){const W=n.get(Y);if(W.__webglInit===void 0)return;const ye=Y.source,Re=v.get(ye);if(Re){const ze=Re[W.__cacheKey];ze.usedTimes--,ze.usedTimes===0&&k(Y),Object.keys(Re).length===0&&v.delete(ye)}n.remove(Y)}function k(Y){const W=n.get(Y);i.deleteTexture(W.__webglTexture);const ye=Y.source,Re=v.get(ye);delete Re[W.__cacheKey],a.memory.textures--}function L(Y){const W=n.get(Y);if(Y.depthTexture&&(Y.depthTexture.dispose(),n.remove(Y.depthTexture)),Y.isWebGLCubeRenderTarget)for(let Re=0;Re<6;Re++){if(Array.isArray(W.__webglFramebuffer[Re]))for(let ze=0;ze<W.__webglFramebuffer[Re].length;ze++)i.deleteFramebuffer(W.__webglFramebuffer[Re][ze]);else i.deleteFramebuffer(W.__webglFramebuffer[Re]);W.__webglDepthbuffer&&i.deleteRenderbuffer(W.__webglDepthbuffer[Re])}else{if(Array.isArray(W.__webglFramebuffer))for(let Re=0;Re<W.__webglFramebuffer.length;Re++)i.deleteFramebuffer(W.__webglFramebuffer[Re]);else i.deleteFramebuffer(W.__webglFramebuffer);if(W.__webglDepthbuffer&&i.deleteRenderbuffer(W.__webglDepthbuffer),W.__webglMultisampledFramebuffer&&i.deleteFramebuffer(W.__webglMultisampledFramebuffer),W.__webglColorRenderbuffer)for(let Re=0;Re<W.__webglColorRenderbuffer.length;Re++)W.__webglColorRenderbuffer[Re]&&i.deleteRenderbuffer(W.__webglColorRenderbuffer[Re]);W.__webglDepthRenderbuffer&&i.deleteRenderbuffer(W.__webglDepthRenderbuffer)}const ye=Y.textures;for(let Re=0,ze=ye.length;Re<ze;Re++){const De=n.get(ye[Re]);De.__webglTexture&&(i.deleteTexture(De.__webglTexture),a.memory.textures--),n.remove(ye[Re])}n.remove(Y)}let G=0;function J(){G=0}function Q(){const Y=G;return Y>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Y+" texture units while this GPU supports only "+r.maxTextures),G+=1,Y}function ce(Y){const W=[];return W.push(Y.wrapS),W.push(Y.wrapT),W.push(Y.wrapR||0),W.push(Y.magFilter),W.push(Y.minFilter),W.push(Y.anisotropy),W.push(Y.internalFormat),W.push(Y.format),W.push(Y.type),W.push(Y.generateMipmaps),W.push(Y.premultiplyAlpha),W.push(Y.flipY),W.push(Y.unpackAlignment),W.push(Y.colorSpace),W.join()}function ge(Y,W){const ye=n.get(Y);if(Y.isVideoTexture&&Ke(Y),Y.isRenderTargetTexture===!1&&Y.version>0&&ye.__version!==Y.version){const Re=Y.image;if(Re===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Re.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{le(ye,Y,W);return}}t.bindTexture(i.TEXTURE_2D,ye.__webglTexture,i.TEXTURE0+W)}function ne(Y,W){const ye=n.get(Y);if(Y.version>0&&ye.__version!==Y.version){le(ye,Y,W);return}t.bindTexture(i.TEXTURE_2D_ARRAY,ye.__webglTexture,i.TEXTURE0+W)}function de(Y,W){const ye=n.get(Y);if(Y.version>0&&ye.__version!==Y.version){le(ye,Y,W);return}t.bindTexture(i.TEXTURE_3D,ye.__webglTexture,i.TEXTURE0+W)}function B(Y,W){const ye=n.get(Y);if(Y.version>0&&ye.__version!==Y.version){Ee(ye,Y,W);return}t.bindTexture(i.TEXTURE_CUBE_MAP,ye.__webglTexture,i.TEXTURE0+W)}const ie={[qp]:i.REPEAT,[Ds]:i.CLAMP_TO_EDGE,[Kp]:i.MIRRORED_REPEAT},te={[Ji]:i.NEAREST,[HS]:i.NEAREST_MIPMAP_NEAREST,[Ld]:i.NEAREST_MIPMAP_LINEAR,[Pi]:i.LINEAR,[Ip]:i.LINEAR_MIPMAP_NEAREST,[Go]:i.LINEAR_MIPMAP_LINEAR},X={[NR]:i.NEVER,[FR]:i.ALWAYS,[LR]:i.LESS,[JS]:i.LEQUAL,[DR]:i.EQUAL,[kR]:i.GEQUAL,[OR]:i.GREATER,[UR]:i.NOTEQUAL};function fe(Y,W){if(W.type===$r&&e.has("OES_texture_float_linear")===!1&&(W.magFilter===Pi||W.magFilter===Ip||W.magFilter===Ld||W.magFilter===Go||W.minFilter===Pi||W.minFilter===Ip||W.minFilter===Ld||W.minFilter===Go)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(Y,i.TEXTURE_WRAP_S,ie[W.wrapS]),i.texParameteri(Y,i.TEXTURE_WRAP_T,ie[W.wrapT]),(Y===i.TEXTURE_3D||Y===i.TEXTURE_2D_ARRAY)&&i.texParameteri(Y,i.TEXTURE_WRAP_R,ie[W.wrapR]),i.texParameteri(Y,i.TEXTURE_MAG_FILTER,te[W.magFilter]),i.texParameteri(Y,i.TEXTURE_MIN_FILTER,te[W.minFilter]),W.compareFunction&&(i.texParameteri(Y,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(Y,i.TEXTURE_COMPARE_FUNC,X[W.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(W.magFilter===Ji||W.minFilter!==Ld&&W.minFilter!==Go||W.type===$r&&e.has("OES_texture_float_linear")===!1)return;if(W.anisotropy>1||n.get(W).__currentAnisotropy){const ye=e.get("EXT_texture_filter_anisotropic");i.texParameterf(Y,ye.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,r.getMaxAnisotropy())),n.get(W).__currentAnisotropy=W.anisotropy}}}function Pe(Y,W){let ye=!1;Y.__webglInit===void 0&&(Y.__webglInit=!0,W.addEventListener("dispose",U));const Re=W.source;let ze=v.get(Re);ze===void 0&&(ze={},v.set(Re,ze));const De=ce(W);if(De!==Y.__cacheKey){ze[De]===void 0&&(ze[De]={texture:i.createTexture(),usedTimes:0},a.memory.textures++,ye=!0),ze[De].usedTimes++;const yt=ze[Y.__cacheKey];yt!==void 0&&(ze[Y.__cacheKey].usedTimes--,yt.usedTimes===0&&k(W)),Y.__cacheKey=De,Y.__webglTexture=ze[De].texture}return ye}function le(Y,W,ye){let Re=i.TEXTURE_2D;(W.isDataArrayTexture||W.isCompressedArrayTexture)&&(Re=i.TEXTURE_2D_ARRAY),W.isData3DTexture&&(Re=i.TEXTURE_3D);const ze=Pe(Y,W),De=W.source;t.bindTexture(Re,Y.__webglTexture,i.TEXTURE0+ye);const yt=n.get(De);if(De.version!==yt.__version||ze===!0){t.activeTexture(i.TEXTURE0+ye);const Je=xn.getPrimaries(xn.workingColorSpace),ct=W.colorSpace===Ga?null:xn.getPrimaries(W.colorSpace),Xt=W.colorSpace===Ga||Je===ct?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,W.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,W.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Xt);let We=E(W.image,!1,r.maxTextureSize);We=bt(W,We);const gt=s.convert(W.format,W.colorSpace),Dt=s.convert(W.type);let kt=C(W.internalFormat,gt,Dt,W.colorSpace,W.isVideoTexture);fe(Re,W);let dt;const re=W.mipmaps,Ie=W.isVideoTexture!==!0,rt=yt.__version===void 0||ze===!0,ee=De.dataReady,Ye=O(W,We);if(W.isDepthTexture)kt=R(W.format===Wu,W.type),rt&&(Ie?t.texStorage2D(i.TEXTURE_2D,1,kt,We.width,We.height):t.texImage2D(i.TEXTURE_2D,0,kt,We.width,We.height,0,gt,Dt,null));else if(W.isDataTexture)if(re.length>0){Ie&&rt&&t.texStorage2D(i.TEXTURE_2D,Ye,kt,re[0].width,re[0].height);for(let Te=0,Ne=re.length;Te<Ne;Te++)dt=re[Te],Ie?ee&&t.texSubImage2D(i.TEXTURE_2D,Te,0,0,dt.width,dt.height,gt,Dt,dt.data):t.texImage2D(i.TEXTURE_2D,Te,kt,dt.width,dt.height,0,gt,Dt,dt.data);W.generateMipmaps=!1}else Ie?(rt&&t.texStorage2D(i.TEXTURE_2D,Ye,kt,We.width,We.height),ee&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,We.width,We.height,gt,Dt,We.data)):t.texImage2D(i.TEXTURE_2D,0,kt,We.width,We.height,0,gt,Dt,We.data);else if(W.isCompressedTexture)if(W.isCompressedArrayTexture){Ie&&rt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Ye,kt,re[0].width,re[0].height,We.depth);for(let Te=0,Ne=re.length;Te<Ne;Te++)if(dt=re[Te],W.format!==fr)if(gt!==null)if(Ie){if(ee)if(W.layerUpdates.size>0){const lt=oS(dt.width,dt.height,W.format,W.type);for(const st of W.layerUpdates){const Lt=dt.data.subarray(st*lt/dt.data.BYTES_PER_ELEMENT,(st+1)*lt/dt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Te,0,0,st,dt.width,dt.height,1,gt,Lt)}W.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Te,0,0,0,dt.width,dt.height,We.depth,gt,dt.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,Te,kt,dt.width,dt.height,We.depth,0,dt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ie?ee&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,Te,0,0,0,dt.width,dt.height,We.depth,gt,Dt,dt.data):t.texImage3D(i.TEXTURE_2D_ARRAY,Te,kt,dt.width,dt.height,We.depth,0,gt,Dt,dt.data)}else{Ie&&rt&&t.texStorage2D(i.TEXTURE_2D,Ye,kt,re[0].width,re[0].height);for(let Te=0,Ne=re.length;Te<Ne;Te++)dt=re[Te],W.format!==fr?gt!==null?Ie?ee&&t.compressedTexSubImage2D(i.TEXTURE_2D,Te,0,0,dt.width,dt.height,gt,dt.data):t.compressedTexImage2D(i.TEXTURE_2D,Te,kt,dt.width,dt.height,0,dt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ie?ee&&t.texSubImage2D(i.TEXTURE_2D,Te,0,0,dt.width,dt.height,gt,Dt,dt.data):t.texImage2D(i.TEXTURE_2D,Te,kt,dt.width,dt.height,0,gt,Dt,dt.data)}else if(W.isDataArrayTexture)if(Ie){if(rt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Ye,kt,We.width,We.height,We.depth),ee)if(W.layerUpdates.size>0){const Te=oS(We.width,We.height,W.format,W.type);for(const Ne of W.layerUpdates){const lt=We.data.subarray(Ne*Te/We.data.BYTES_PER_ELEMENT,(Ne+1)*Te/We.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,Ne,We.width,We.height,1,gt,Dt,lt)}W.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,We.width,We.height,We.depth,gt,Dt,We.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,kt,We.width,We.height,We.depth,0,gt,Dt,We.data);else if(W.isData3DTexture)Ie?(rt&&t.texStorage3D(i.TEXTURE_3D,Ye,kt,We.width,We.height,We.depth),ee&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,We.width,We.height,We.depth,gt,Dt,We.data)):t.texImage3D(i.TEXTURE_3D,0,kt,We.width,We.height,We.depth,0,gt,Dt,We.data);else if(W.isFramebufferTexture){if(rt)if(Ie)t.texStorage2D(i.TEXTURE_2D,Ye,kt,We.width,We.height);else{let Te=We.width,Ne=We.height;for(let lt=0;lt<Ye;lt++)t.texImage2D(i.TEXTURE_2D,lt,kt,Te,Ne,0,gt,Dt,null),Te>>=1,Ne>>=1}}else if(re.length>0){if(Ie&&rt){const Te=tt(re[0]);t.texStorage2D(i.TEXTURE_2D,Ye,kt,Te.width,Te.height)}for(let Te=0,Ne=re.length;Te<Ne;Te++)dt=re[Te],Ie?ee&&t.texSubImage2D(i.TEXTURE_2D,Te,0,0,gt,Dt,dt):t.texImage2D(i.TEXTURE_2D,Te,kt,gt,Dt,dt);W.generateMipmaps=!1}else if(Ie){if(rt){const Te=tt(We);t.texStorage2D(i.TEXTURE_2D,Ye,kt,Te.width,Te.height)}ee&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,gt,Dt,We)}else t.texImage2D(i.TEXTURE_2D,0,kt,gt,Dt,We);w(W)&&S(Re),yt.__version=De.version,W.onUpdate&&W.onUpdate(W)}Y.__version=W.version}function Ee(Y,W,ye){if(W.image.length!==6)return;const Re=Pe(Y,W),ze=W.source;t.bindTexture(i.TEXTURE_CUBE_MAP,Y.__webglTexture,i.TEXTURE0+ye);const De=n.get(ze);if(ze.version!==De.__version||Re===!0){t.activeTexture(i.TEXTURE0+ye);const yt=xn.getPrimaries(xn.workingColorSpace),Je=W.colorSpace===Ga?null:xn.getPrimaries(W.colorSpace),ct=W.colorSpace===Ga||yt===Je?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,W.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,W.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,ct);const Xt=W.isCompressedTexture||W.image[0].isCompressedTexture,We=W.image[0]&&W.image[0].isDataTexture,gt=[];for(let Ne=0;Ne<6;Ne++)!Xt&&!We?gt[Ne]=E(W.image[Ne],!0,r.maxCubemapSize):gt[Ne]=We?W.image[Ne].image:W.image[Ne],gt[Ne]=bt(W,gt[Ne]);const Dt=gt[0],kt=s.convert(W.format,W.colorSpace),dt=s.convert(W.type),re=C(W.internalFormat,kt,dt,W.colorSpace),Ie=W.isVideoTexture!==!0,rt=De.__version===void 0||Re===!0,ee=ze.dataReady;let Ye=O(W,Dt);fe(i.TEXTURE_CUBE_MAP,W);let Te;if(Xt){Ie&&rt&&t.texStorage2D(i.TEXTURE_CUBE_MAP,Ye,re,Dt.width,Dt.height);for(let Ne=0;Ne<6;Ne++){Te=gt[Ne].mipmaps;for(let lt=0;lt<Te.length;lt++){const st=Te[lt];W.format!==fr?kt!==null?Ie?ee&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,lt,0,0,st.width,st.height,kt,st.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,lt,re,st.width,st.height,0,st.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ie?ee&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,lt,0,0,st.width,st.height,kt,dt,st.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,lt,re,st.width,st.height,0,kt,dt,st.data)}}}else{if(Te=W.mipmaps,Ie&&rt){Te.length>0&&Ye++;const Ne=tt(gt[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,Ye,re,Ne.width,Ne.height)}for(let Ne=0;Ne<6;Ne++)if(We){Ie?ee&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,0,0,gt[Ne].width,gt[Ne].height,kt,dt,gt[Ne].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,re,gt[Ne].width,gt[Ne].height,0,kt,dt,gt[Ne].data);for(let lt=0;lt<Te.length;lt++){const Lt=Te[lt].image[Ne].image;Ie?ee&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,lt+1,0,0,Lt.width,Lt.height,kt,dt,Lt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,lt+1,re,Lt.width,Lt.height,0,kt,dt,Lt.data)}}else{Ie?ee&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,0,0,kt,dt,gt[Ne]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,re,kt,dt,gt[Ne]);for(let lt=0;lt<Te.length;lt++){const st=Te[lt];Ie?ee&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,lt+1,0,0,kt,dt,st.image[Ne]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,lt+1,re,kt,dt,st.image[Ne])}}}w(W)&&S(i.TEXTURE_CUBE_MAP),De.__version=ze.version,W.onUpdate&&W.onUpdate(W)}Y.__version=W.version}function Ue(Y,W,ye,Re,ze,De){const yt=s.convert(ye.format,ye.colorSpace),Je=s.convert(ye.type),ct=C(ye.internalFormat,yt,Je,ye.colorSpace),Xt=n.get(W),We=n.get(ye);if(We.__renderTarget=W,!Xt.__hasExternalTextures){const gt=Math.max(1,W.width>>De),Dt=Math.max(1,W.height>>De);ze===i.TEXTURE_3D||ze===i.TEXTURE_2D_ARRAY?t.texImage3D(ze,De,ct,gt,Dt,W.depth,0,yt,Je,null):t.texImage2D(ze,De,ct,gt,Dt,0,yt,Je,null)}t.bindFramebuffer(i.FRAMEBUFFER,Y),nt(W)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Re,ze,We.__webglTexture,0,Be(W)):(ze===i.TEXTURE_2D||ze>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&ze<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Re,ze,We.__webglTexture,De),t.bindFramebuffer(i.FRAMEBUFFER,null)}function he(Y,W,ye){if(i.bindRenderbuffer(i.RENDERBUFFER,Y),W.depthBuffer){const Re=W.depthTexture,ze=Re&&Re.isDepthTexture?Re.type:null,De=R(W.stencilBuffer,ze),yt=W.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Je=Be(W);nt(W)?c.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Je,De,W.width,W.height):ye?i.renderbufferStorageMultisample(i.RENDERBUFFER,Je,De,W.width,W.height):i.renderbufferStorage(i.RENDERBUFFER,De,W.width,W.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,yt,i.RENDERBUFFER,Y)}else{const Re=W.textures;for(let ze=0;ze<Re.length;ze++){const De=Re[ze],yt=s.convert(De.format,De.colorSpace),Je=s.convert(De.type),ct=C(De.internalFormat,yt,Je,De.colorSpace),Xt=Be(W);ye&&nt(W)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Xt,ct,W.width,W.height):nt(W)?c.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Xt,ct,W.width,W.height):i.renderbufferStorage(i.RENDERBUFFER,ct,W.width,W.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function Fe(Y,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,Y),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Re=n.get(W.depthTexture);Re.__renderTarget=W,(!Re.__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),ge(W.depthTexture,0);const ze=Re.__webglTexture,De=Be(W);if(W.depthTexture.format===Lu)nt(W)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,ze,0,De):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,ze,0);else if(W.depthTexture.format===Wu)nt(W)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,ze,0,De):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,ze,0);else throw new Error("Unknown depthTexture format")}function Xe(Y){const W=n.get(Y),ye=Y.isWebGLCubeRenderTarget===!0;if(W.__boundDepthTexture!==Y.depthTexture){const Re=Y.depthTexture;if(W.__depthDisposeCallback&&W.__depthDisposeCallback(),Re){const ze=()=>{delete W.__boundDepthTexture,delete W.__depthDisposeCallback,Re.removeEventListener("dispose",ze)};Re.addEventListener("dispose",ze),W.__depthDisposeCallback=ze}W.__boundDepthTexture=Re}if(Y.depthTexture&&!W.__autoAllocateDepthBuffer){if(ye)throw new Error("target.depthTexture not supported in Cube render targets");Fe(W.__webglFramebuffer,Y)}else if(ye){W.__webglDepthbuffer=[];for(let Re=0;Re<6;Re++)if(t.bindFramebuffer(i.FRAMEBUFFER,W.__webglFramebuffer[Re]),W.__webglDepthbuffer[Re]===void 0)W.__webglDepthbuffer[Re]=i.createRenderbuffer(),he(W.__webglDepthbuffer[Re],Y,!1);else{const ze=Y.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,De=W.__webglDepthbuffer[Re];i.bindRenderbuffer(i.RENDERBUFFER,De),i.framebufferRenderbuffer(i.FRAMEBUFFER,ze,i.RENDERBUFFER,De)}}else if(t.bindFramebuffer(i.FRAMEBUFFER,W.__webglFramebuffer),W.__webglDepthbuffer===void 0)W.__webglDepthbuffer=i.createRenderbuffer(),he(W.__webglDepthbuffer,Y,!1);else{const Re=Y.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ze=W.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,ze),i.framebufferRenderbuffer(i.FRAMEBUFFER,Re,i.RENDERBUFFER,ze)}t.bindFramebuffer(i.FRAMEBUFFER,null)}function Ge(Y,W,ye){const Re=n.get(Y);W!==void 0&&Ue(Re.__webglFramebuffer,Y,Y.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),ye!==void 0&&Xe(Y)}function Qe(Y){const W=Y.texture,ye=n.get(Y),Re=n.get(W);Y.addEventListener("dispose",F);const ze=Y.textures,De=Y.isWebGLCubeRenderTarget===!0,yt=ze.length>1;if(yt||(Re.__webglTexture===void 0&&(Re.__webglTexture=i.createTexture()),Re.__version=W.version,a.memory.textures++),De){ye.__webglFramebuffer=[];for(let Je=0;Je<6;Je++)if(W.mipmaps&&W.mipmaps.length>0){ye.__webglFramebuffer[Je]=[];for(let ct=0;ct<W.mipmaps.length;ct++)ye.__webglFramebuffer[Je][ct]=i.createFramebuffer()}else ye.__webglFramebuffer[Je]=i.createFramebuffer()}else{if(W.mipmaps&&W.mipmaps.length>0){ye.__webglFramebuffer=[];for(let Je=0;Je<W.mipmaps.length;Je++)ye.__webglFramebuffer[Je]=i.createFramebuffer()}else ye.__webglFramebuffer=i.createFramebuffer();if(yt)for(let Je=0,ct=ze.length;Je<ct;Je++){const Xt=n.get(ze[Je]);Xt.__webglTexture===void 0&&(Xt.__webglTexture=i.createTexture(),a.memory.textures++)}if(Y.samples>0&&nt(Y)===!1){ye.__webglMultisampledFramebuffer=i.createFramebuffer(),ye.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,ye.__webglMultisampledFramebuffer);for(let Je=0;Je<ze.length;Je++){const ct=ze[Je];ye.__webglColorRenderbuffer[Je]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,ye.__webglColorRenderbuffer[Je]);const Xt=s.convert(ct.format,ct.colorSpace),We=s.convert(ct.type),gt=C(ct.internalFormat,Xt,We,ct.colorSpace,Y.isXRRenderTarget===!0),Dt=Be(Y);i.renderbufferStorageMultisample(i.RENDERBUFFER,Dt,gt,Y.width,Y.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Je,i.RENDERBUFFER,ye.__webglColorRenderbuffer[Je])}i.bindRenderbuffer(i.RENDERBUFFER,null),Y.depthBuffer&&(ye.__webglDepthRenderbuffer=i.createRenderbuffer(),he(ye.__webglDepthRenderbuffer,Y,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(De){t.bindTexture(i.TEXTURE_CUBE_MAP,Re.__webglTexture),fe(i.TEXTURE_CUBE_MAP,W);for(let Je=0;Je<6;Je++)if(W.mipmaps&&W.mipmaps.length>0)for(let ct=0;ct<W.mipmaps.length;ct++)Ue(ye.__webglFramebuffer[Je][ct],Y,W,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Je,ct);else Ue(ye.__webglFramebuffer[Je],Y,W,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Je,0);w(W)&&S(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(yt){for(let Je=0,ct=ze.length;Je<ct;Je++){const Xt=ze[Je],We=n.get(Xt);t.bindTexture(i.TEXTURE_2D,We.__webglTexture),fe(i.TEXTURE_2D,Xt),Ue(ye.__webglFramebuffer,Y,Xt,i.COLOR_ATTACHMENT0+Je,i.TEXTURE_2D,0),w(Xt)&&S(i.TEXTURE_2D)}t.unbindTexture()}else{let Je=i.TEXTURE_2D;if((Y.isWebGL3DRenderTarget||Y.isWebGLArrayRenderTarget)&&(Je=Y.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(Je,Re.__webglTexture),fe(Je,W),W.mipmaps&&W.mipmaps.length>0)for(let ct=0;ct<W.mipmaps.length;ct++)Ue(ye.__webglFramebuffer[ct],Y,W,i.COLOR_ATTACHMENT0,Je,ct);else Ue(ye.__webglFramebuffer,Y,W,i.COLOR_ATTACHMENT0,Je,0);w(W)&&S(Je),t.unbindTexture()}Y.depthBuffer&&Xe(Y)}function Se(Y){const W=Y.textures;for(let ye=0,Re=W.length;ye<Re;ye++){const ze=W[ye];if(w(ze)){const De=A(Y),yt=n.get(ze).__webglTexture;t.bindTexture(De,yt),S(De),t.unbindTexture()}}}const Le=[],K=[];function ht(Y){if(Y.samples>0){if(nt(Y)===!1){const W=Y.textures,ye=Y.width,Re=Y.height;let ze=i.COLOR_BUFFER_BIT;const De=Y.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,yt=n.get(Y),Je=W.length>1;if(Je)for(let ct=0;ct<W.length;ct++)t.bindFramebuffer(i.FRAMEBUFFER,yt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ct,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,yt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+ct,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,yt.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,yt.__webglFramebuffer);for(let ct=0;ct<W.length;ct++){if(Y.resolveDepthBuffer&&(Y.depthBuffer&&(ze|=i.DEPTH_BUFFER_BIT),Y.stencilBuffer&&Y.resolveStencilBuffer&&(ze|=i.STENCIL_BUFFER_BIT)),Je){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,yt.__webglColorRenderbuffer[ct]);const Xt=n.get(W[ct]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Xt,0)}i.blitFramebuffer(0,0,ye,Re,0,0,ye,Re,ze,i.NEAREST),d===!0&&(Le.length=0,K.length=0,Le.push(i.COLOR_ATTACHMENT0+ct),Y.depthBuffer&&Y.resolveDepthBuffer===!1&&(Le.push(De),K.push(De),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,K)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Le))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Je)for(let ct=0;ct<W.length;ct++){t.bindFramebuffer(i.FRAMEBUFFER,yt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ct,i.RENDERBUFFER,yt.__webglColorRenderbuffer[ct]);const Xt=n.get(W[ct]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,yt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+ct,i.TEXTURE_2D,Xt,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,yt.__webglMultisampledFramebuffer)}else if(Y.depthBuffer&&Y.resolveDepthBuffer===!1&&d){const W=Y.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[W])}}}function Be(Y){return Math.min(r.maxSamples,Y.samples)}function nt(Y){const W=n.get(Y);return Y.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&W.__useRenderToTexture!==!1}function Ke(Y){const W=a.render.frame;m.get(Y)!==W&&(m.set(Y,W),Y.update())}function bt(Y,W){const ye=Y.colorSpace,Re=Y.format,ze=Y.type;return Y.isCompressedTexture===!0||Y.isVideoTexture===!0||ye!==ju&&ye!==Ga&&(xn.getTransfer(ye)===In?(Re!==fr||ze!==go)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ye)),W}function tt(Y){return typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement?(h.width=Y.naturalWidth||Y.width,h.height=Y.naturalHeight||Y.height):typeof VideoFrame<"u"&&Y instanceof VideoFrame?(h.width=Y.displayWidth,h.height=Y.displayHeight):(h.width=Y.width,h.height=Y.height),h}this.allocateTextureUnit=Q,this.resetTextureUnits=J,this.setTexture2D=ge,this.setTexture2DArray=ne,this.setTexture3D=de,this.setTextureCube=B,this.rebindTextures=Ge,this.setupRenderTarget=Qe,this.updateRenderTargetMipmap=Se,this.updateMultisampleRenderTarget=ht,this.setupDepthRenderbuffer=Xe,this.setupFrameBufferTexture=Ue,this.useMultisampledRTT=nt}function qP(i,e){function t(n,r=Ga){let s;const a=xn.getTransfer(r);if(n===go)return i.UNSIGNED_BYTE;if(n===Jy)return i.UNSIGNED_SHORT_4_4_4_4;if(n===e0)return i.UNSIGNED_SHORT_5_5_5_1;if(n===jS)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===GS)return i.BYTE;if(n===WS)return i.SHORT;if(n===$d)return i.UNSIGNED_SHORT;if(n===Qy)return i.INT;if(n===Qa)return i.UNSIGNED_INT;if(n===$r)return i.FLOAT;if(n===fh)return i.HALF_FLOAT;if(n===XS)return i.ALPHA;if(n===YS)return i.RGB;if(n===fr)return i.RGBA;if(n===qS)return i.LUMINANCE;if(n===KS)return i.LUMINANCE_ALPHA;if(n===Lu)return i.DEPTH_COMPONENT;if(n===Wu)return i.DEPTH_STENCIL;if(n===t0)return i.RED;if(n===ym)return i.RED_INTEGER;if(n===ZS)return i.RG;if(n===n0)return i.RG_INTEGER;if(n===i0)return i.RGBA_INTEGER;if(n===Np||n===Lp||n===Dp||n===Op)if(a===In)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===Np)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Lp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Dp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Op)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===Np)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Lp)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Dp)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Op)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===Zv||n===$v||n===Qv||n===Jv)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===Zv)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===$v)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Qv)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Jv)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===ey||n===ty||n===ny)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===ey||n===ty)return a===In?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===ny)return a===In?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===iy||n===ry||n===sy||n===oy||n===ay||n===ly||n===cy||n===uy||n===fy||n===dy||n===hy||n===py||n===my||n===gy)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===iy)return a===In?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===ry)return a===In?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===sy)return a===In?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===oy)return a===In?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===ay)return a===In?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===ly)return a===In?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===cy)return a===In?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===uy)return a===In?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===fy)return a===In?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===dy)return a===In?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===hy)return a===In?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===py)return a===In?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===my)return a===In?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===gy)return a===In?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Up||n===vy||n===yy)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===Up)return a===In?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===vy)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===yy)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===$S||n===xy||n===_y||n===Sy)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===Up)return s.COMPRESSED_RED_RGTC1_EXT;if(n===xy)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===_y)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Sy)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Gu?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const EG={type:"move"};class l_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Od,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Od,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Od,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new q),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,a=null;const c=this._targetRay,d=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){a=!0;for(const E of e.hand.values()){const w=t.getJointPose(E,n),S=this._getHandJoint(h,E);w!==null&&(S.matrix.fromArray(w.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=w.radius),S.visible=w!==null}const m=h.joints["index-finger-tip"],g=h.joints["thumb-tip"],v=m.position.distanceTo(g.position),y=.02,M=.005;h.inputState.pinching&&v>y+M?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&v<=y-M&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else d!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(d.matrix.fromArray(s.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,s.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(s.linearVelocity)):d.hasLinearVelocity=!1,s.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(s.angularVelocity)):d.hasAngularVelocity=!1));c!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&s!==null&&(r=s),r!==null&&(c.matrix.fromArray(r.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,r.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(r.linearVelocity)):c.hasLinearVelocity=!1,r.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(r.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(EG)))}return c!==null&&(c.visible=r!==null),d!==null&&(d.visible=s!==null),h!==null&&(h.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Od;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}const TG=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,bG=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class CG{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const r=new ai,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=n.depthNear||t.depthFar!=n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new yo({vertexShader:TG,fragmentShader:bG,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new _i(new hh(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class AG extends $o{constructor(e,t){super();const n=this;let r=null,s=1,a=null,c="local-floor",d=1,h=null,m=null,g=null,v=null,y=null,M=null;const E=new CG,w=t.getContextAttributes();let S=null,A=null;const C=[],R=[],O=new ke;let U=null;const F=new di;F.viewport=new wn;const z=new di;z.viewport=new wn;const k=[F,z],L=new kP;let G=null,J=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(le){let Ee=C[le];return Ee===void 0&&(Ee=new l_,C[le]=Ee),Ee.getTargetRaySpace()},this.getControllerGrip=function(le){let Ee=C[le];return Ee===void 0&&(Ee=new l_,C[le]=Ee),Ee.getGripSpace()},this.getHand=function(le){let Ee=C[le];return Ee===void 0&&(Ee=new l_,C[le]=Ee),Ee.getHandSpace()};function Q(le){const Ee=R.indexOf(le.inputSource);if(Ee===-1)return;const Ue=C[Ee];Ue!==void 0&&(Ue.update(le.inputSource,le.frame,h||a),Ue.dispatchEvent({type:le.type,data:le.inputSource}))}function ce(){r.removeEventListener("select",Q),r.removeEventListener("selectstart",Q),r.removeEventListener("selectend",Q),r.removeEventListener("squeeze",Q),r.removeEventListener("squeezestart",Q),r.removeEventListener("squeezeend",Q),r.removeEventListener("end",ce),r.removeEventListener("inputsourceschange",ge);for(let le=0;le<C.length;le++){const Ee=R[le];Ee!==null&&(R[le]=null,C[le].disconnect(Ee))}G=null,J=null,E.reset(),e.setRenderTarget(S),y=null,v=null,g=null,r=null,A=null,Pe.stop(),n.isPresenting=!1,e.setPixelRatio(U),e.setSize(O.width,O.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(le){s=le,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(le){c=le,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||a},this.setReferenceSpace=function(le){h=le},this.getBaseLayer=function(){return v!==null?v:y},this.getBinding=function(){return g},this.getFrame=function(){return M},this.getSession=function(){return r},this.setSession=async function(le){if(r=le,r!==null){if(S=e.getRenderTarget(),r.addEventListener("select",Q),r.addEventListener("selectstart",Q),r.addEventListener("selectend",Q),r.addEventListener("squeeze",Q),r.addEventListener("squeezestart",Q),r.addEventListener("squeezeend",Q),r.addEventListener("end",ce),r.addEventListener("inputsourceschange",ge),w.xrCompatible!==!0&&await t.makeXRCompatible(),U=e.getPixelRatio(),e.getSize(O),r.renderState.layers===void 0){const Ee={antialias:w.antialias,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:s};y=new XRWebGLLayer(r,t,Ee),r.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),A=new vo(y.framebufferWidth,y.framebufferHeight,{format:fr,type:go,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil})}else{let Ee=null,Ue=null,he=null;w.depth&&(he=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ee=w.stencil?Wu:Lu,Ue=w.stencil?Gu:Qa);const Fe={colorFormat:t.RGBA8,depthFormat:he,scaleFactor:s};g=new XRWebGLBinding(r,t),v=g.createProjectionLayer(Fe),r.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),A=new vo(v.textureWidth,v.textureHeight,{format:fr,type:go,depthTexture:new lw(v.textureWidth,v.textureHeight,Ue,void 0,void 0,void 0,void 0,void 0,void 0,Ee),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1})}A.isXRRenderTarget=!0,this.setFoveation(d),h=null,a=await r.requestReferenceSpace(c),Pe.setContext(r),Pe.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return E.getDepthTexture()};function ge(le){for(let Ee=0;Ee<le.removed.length;Ee++){const Ue=le.removed[Ee],he=R.indexOf(Ue);he>=0&&(R[he]=null,C[he].disconnect(Ue))}for(let Ee=0;Ee<le.added.length;Ee++){const Ue=le.added[Ee];let he=R.indexOf(Ue);if(he===-1){for(let Xe=0;Xe<C.length;Xe++)if(Xe>=R.length){R.push(Ue),he=Xe;break}else if(R[Xe]===null){R[Xe]=Ue,he=Xe;break}if(he===-1)break}const Fe=C[he];Fe&&Fe.connect(Ue)}}const ne=new q,de=new q;function B(le,Ee,Ue){ne.setFromMatrixPosition(Ee.matrixWorld),de.setFromMatrixPosition(Ue.matrixWorld);const he=ne.distanceTo(de),Fe=Ee.projectionMatrix.elements,Xe=Ue.projectionMatrix.elements,Ge=Fe[14]/(Fe[10]-1),Qe=Fe[14]/(Fe[10]+1),Se=(Fe[9]+1)/Fe[5],Le=(Fe[9]-1)/Fe[5],K=(Fe[8]-1)/Fe[0],ht=(Xe[8]+1)/Xe[0],Be=Ge*K,nt=Ge*ht,Ke=he/(-K+ht),bt=Ke*-K;if(Ee.matrixWorld.decompose(le.position,le.quaternion,le.scale),le.translateX(bt),le.translateZ(Ke),le.matrixWorld.compose(le.position,le.quaternion,le.scale),le.matrixWorldInverse.copy(le.matrixWorld).invert(),Fe[10]===-1)le.projectionMatrix.copy(Ee.projectionMatrix),le.projectionMatrixInverse.copy(Ee.projectionMatrixInverse);else{const tt=Ge+Ke,Y=Qe+Ke,W=Be-bt,ye=nt+(he-bt),Re=Se*Qe/Y*tt,ze=Le*Qe/Y*tt;le.projectionMatrix.makePerspective(W,ye,Re,ze,tt,Y),le.projectionMatrixInverse.copy(le.projectionMatrix).invert()}}function ie(le,Ee){Ee===null?le.matrixWorld.copy(le.matrix):le.matrixWorld.multiplyMatrices(Ee.matrixWorld,le.matrix),le.matrixWorldInverse.copy(le.matrixWorld).invert()}this.updateCamera=function(le){if(r===null)return;let Ee=le.near,Ue=le.far;E.texture!==null&&(E.depthNear>0&&(Ee=E.depthNear),E.depthFar>0&&(Ue=E.depthFar)),L.near=z.near=F.near=Ee,L.far=z.far=F.far=Ue,(G!==L.near||J!==L.far)&&(r.updateRenderState({depthNear:L.near,depthFar:L.far}),G=L.near,J=L.far),F.layers.mask=le.layers.mask|2,z.layers.mask=le.layers.mask|4,L.layers.mask=F.layers.mask|z.layers.mask;const he=le.parent,Fe=L.cameras;ie(L,he);for(let Xe=0;Xe<Fe.length;Xe++)ie(Fe[Xe],he);Fe.length===2?B(L,F,z):L.projectionMatrix.copy(F.projectionMatrix),te(le,L,he)};function te(le,Ee,Ue){Ue===null?le.matrix.copy(Ee.matrixWorld):(le.matrix.copy(Ue.matrixWorld),le.matrix.invert(),le.matrix.multiply(Ee.matrixWorld)),le.matrix.decompose(le.position,le.quaternion,le.scale),le.updateMatrixWorld(!0),le.projectionMatrix.copy(Ee.projectionMatrix),le.projectionMatrixInverse.copy(Ee.projectionMatrixInverse),le.isPerspectiveCamera&&(le.fov=Qd*2*Math.atan(1/le.projectionMatrix.elements[5]),le.zoom=1)}this.getCamera=function(){return L},this.getFoveation=function(){if(!(v===null&&y===null))return d},this.setFoveation=function(le){d=le,v!==null&&(v.fixedFoveation=le),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=le)},this.hasDepthSensing=function(){return E.texture!==null},this.getDepthSensingMesh=function(){return E.getMesh(L)};let X=null;function fe(le,Ee){if(m=Ee.getViewerPose(h||a),M=Ee,m!==null){const Ue=m.views;y!==null&&(e.setRenderTargetFramebuffer(A,y.framebuffer),e.setRenderTarget(A));let he=!1;Ue.length!==L.cameras.length&&(L.cameras.length=0,he=!0);for(let Xe=0;Xe<Ue.length;Xe++){const Ge=Ue[Xe];let Qe=null;if(y!==null)Qe=y.getViewport(Ge);else{const Le=g.getViewSubImage(v,Ge);Qe=Le.viewport,Xe===0&&(e.setRenderTargetTextures(A,Le.colorTexture,v.ignoreDepthValues?void 0:Le.depthStencilTexture),e.setRenderTarget(A))}let Se=k[Xe];Se===void 0&&(Se=new di,Se.layers.enable(Xe),Se.viewport=new wn,k[Xe]=Se),Se.matrix.fromArray(Ge.transform.matrix),Se.matrix.decompose(Se.position,Se.quaternion,Se.scale),Se.projectionMatrix.fromArray(Ge.projectionMatrix),Se.projectionMatrixInverse.copy(Se.projectionMatrix).invert(),Se.viewport.set(Qe.x,Qe.y,Qe.width,Qe.height),Xe===0&&(L.matrix.copy(Se.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale)),he===!0&&L.cameras.push(Se)}const Fe=r.enabledFeatures;if(Fe&&Fe.includes("depth-sensing")){const Xe=g.getDepthInformation(Ue[0]);Xe&&Xe.isValid&&Xe.texture&&E.init(e,Xe,r.renderState)}}for(let Ue=0;Ue<C.length;Ue++){const he=R[Ue],Fe=C[Ue];he!==null&&Fe!==void 0&&Fe.update(he,Ee,h||a)}X&&X(le,Ee),Ee.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Ee}),M=null}const Pe=new GP;Pe.setAnimationLoop(fe),this.setAnimationLoop=function(le){X=le},this.dispose=function(){}}}const du=new gs,RG=new Wt;function PG(i,e){function t(w,S){w.matrixAutoUpdate===!0&&w.updateMatrix(),S.value.copy(w.matrix)}function n(w,S){S.color.getRGB(w.fogColor.value,WR(i)),S.isFog?(w.fogNear.value=S.near,w.fogFar.value=S.far):S.isFogExp2&&(w.fogDensity.value=S.density)}function r(w,S,A,C,R){S.isMeshBasicMaterial||S.isMeshLambertMaterial?s(w,S):S.isMeshToonMaterial?(s(w,S),g(w,S)):S.isMeshPhongMaterial?(s(w,S),m(w,S)):S.isMeshStandardMaterial?(s(w,S),v(w,S),S.isMeshPhysicalMaterial&&y(w,S,R)):S.isMeshMatcapMaterial?(s(w,S),M(w,S)):S.isMeshDepthMaterial?s(w,S):S.isMeshDistanceMaterial?(s(w,S),E(w,S)):S.isMeshNormalMaterial?s(w,S):S.isLineBasicMaterial?(a(w,S),S.isLineDashedMaterial&&c(w,S)):S.isPointsMaterial?d(w,S,A,C):S.isSpriteMaterial?h(w,S):S.isShadowMaterial?(w.color.value.copy(S.color),w.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function s(w,S){w.opacity.value=S.opacity,S.color&&w.diffuse.value.copy(S.color),S.emissive&&w.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(w.map.value=S.map,t(S.map,w.mapTransform)),S.alphaMap&&(w.alphaMap.value=S.alphaMap,t(S.alphaMap,w.alphaMapTransform)),S.bumpMap&&(w.bumpMap.value=S.bumpMap,t(S.bumpMap,w.bumpMapTransform),w.bumpScale.value=S.bumpScale,S.side===Ir&&(w.bumpScale.value*=-1)),S.normalMap&&(w.normalMap.value=S.normalMap,t(S.normalMap,w.normalMapTransform),w.normalScale.value.copy(S.normalScale),S.side===Ir&&w.normalScale.value.negate()),S.displacementMap&&(w.displacementMap.value=S.displacementMap,t(S.displacementMap,w.displacementMapTransform),w.displacementScale.value=S.displacementScale,w.displacementBias.value=S.displacementBias),S.emissiveMap&&(w.emissiveMap.value=S.emissiveMap,t(S.emissiveMap,w.emissiveMapTransform)),S.specularMap&&(w.specularMap.value=S.specularMap,t(S.specularMap,w.specularMapTransform)),S.alphaTest>0&&(w.alphaTest.value=S.alphaTest);const A=e.get(S),C=A.envMap,R=A.envMapRotation;C&&(w.envMap.value=C,du.copy(R),du.x*=-1,du.y*=-1,du.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(du.y*=-1,du.z*=-1),w.envMapRotation.value.setFromMatrix4(RG.makeRotationFromEuler(du)),w.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=S.reflectivity,w.ior.value=S.ior,w.refractionRatio.value=S.refractionRatio),S.lightMap&&(w.lightMap.value=S.lightMap,w.lightMapIntensity.value=S.lightMapIntensity,t(S.lightMap,w.lightMapTransform)),S.aoMap&&(w.aoMap.value=S.aoMap,w.aoMapIntensity.value=S.aoMapIntensity,t(S.aoMap,w.aoMapTransform))}function a(w,S){w.diffuse.value.copy(S.color),w.opacity.value=S.opacity,S.map&&(w.map.value=S.map,t(S.map,w.mapTransform))}function c(w,S){w.dashSize.value=S.dashSize,w.totalSize.value=S.dashSize+S.gapSize,w.scale.value=S.scale}function d(w,S,A,C){w.diffuse.value.copy(S.color),w.opacity.value=S.opacity,w.size.value=S.size*A,w.scale.value=C*.5,S.map&&(w.map.value=S.map,t(S.map,w.uvTransform)),S.alphaMap&&(w.alphaMap.value=S.alphaMap,t(S.alphaMap,w.alphaMapTransform)),S.alphaTest>0&&(w.alphaTest.value=S.alphaTest)}function h(w,S){w.diffuse.value.copy(S.color),w.opacity.value=S.opacity,w.rotation.value=S.rotation,S.map&&(w.map.value=S.map,t(S.map,w.mapTransform)),S.alphaMap&&(w.alphaMap.value=S.alphaMap,t(S.alphaMap,w.alphaMapTransform)),S.alphaTest>0&&(w.alphaTest.value=S.alphaTest)}function m(w,S){w.specular.value.copy(S.specular),w.shininess.value=Math.max(S.shininess,1e-4)}function g(w,S){S.gradientMap&&(w.gradientMap.value=S.gradientMap)}function v(w,S){w.metalness.value=S.metalness,S.metalnessMap&&(w.metalnessMap.value=S.metalnessMap,t(S.metalnessMap,w.metalnessMapTransform)),w.roughness.value=S.roughness,S.roughnessMap&&(w.roughnessMap.value=S.roughnessMap,t(S.roughnessMap,w.roughnessMapTransform)),S.envMap&&(w.envMapIntensity.value=S.envMapIntensity)}function y(w,S,A){w.ior.value=S.ior,S.sheen>0&&(w.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),w.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(w.sheenColorMap.value=S.sheenColorMap,t(S.sheenColorMap,w.sheenColorMapTransform)),S.sheenRoughnessMap&&(w.sheenRoughnessMap.value=S.sheenRoughnessMap,t(S.sheenRoughnessMap,w.sheenRoughnessMapTransform))),S.clearcoat>0&&(w.clearcoat.value=S.clearcoat,w.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(w.clearcoatMap.value=S.clearcoatMap,t(S.clearcoatMap,w.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,t(S.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(w.clearcoatNormalMap.value=S.clearcoatNormalMap,t(S.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===Ir&&w.clearcoatNormalScale.value.negate())),S.dispersion>0&&(w.dispersion.value=S.dispersion),S.iridescence>0&&(w.iridescence.value=S.iridescence,w.iridescenceIOR.value=S.iridescenceIOR,w.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(w.iridescenceMap.value=S.iridescenceMap,t(S.iridescenceMap,w.iridescenceMapTransform)),S.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=S.iridescenceThicknessMap,t(S.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),S.transmission>0&&(w.transmission.value=S.transmission,w.transmissionSamplerMap.value=A.texture,w.transmissionSamplerSize.value.set(A.width,A.height),S.transmissionMap&&(w.transmissionMap.value=S.transmissionMap,t(S.transmissionMap,w.transmissionMapTransform)),w.thickness.value=S.thickness,S.thicknessMap&&(w.thicknessMap.value=S.thicknessMap,t(S.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=S.attenuationDistance,w.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(w.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(w.anisotropyMap.value=S.anisotropyMap,t(S.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=S.specularIntensity,w.specularColor.value.copy(S.specularColor),S.specularColorMap&&(w.specularColorMap.value=S.specularColorMap,t(S.specularColorMap,w.specularColorMapTransform)),S.specularIntensityMap&&(w.specularIntensityMap.value=S.specularIntensityMap,t(S.specularIntensityMap,w.specularIntensityMapTransform))}function M(w,S){S.matcap&&(w.matcap.value=S.matcap)}function E(w,S){const A=e.get(S).light;w.referencePosition.value.setFromMatrixPosition(A.matrixWorld),w.nearDistance.value=A.shadow.camera.near,w.farDistance.value=A.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function IG(i,e,t,n){let r={},s={},a=[];const c=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function d(A,C){const R=C.program;n.uniformBlockBinding(A,R)}function h(A,C){let R=r[A.id];R===void 0&&(M(A),R=m(A),r[A.id]=R,A.addEventListener("dispose",w));const O=C.program;n.updateUBOMapping(A,O);const U=e.render.frame;s[A.id]!==U&&(v(A),s[A.id]=U)}function m(A){const C=g();A.__bindingPointIndex=C;const R=i.createBuffer(),O=A.__size,U=A.usage;return i.bindBuffer(i.UNIFORM_BUFFER,R),i.bufferData(i.UNIFORM_BUFFER,O,U),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,C,R),R}function g(){for(let A=0;A<c;A++)if(a.indexOf(A)===-1)return a.push(A),A;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(A){const C=r[A.id],R=A.uniforms,O=A.__cache;i.bindBuffer(i.UNIFORM_BUFFER,C);for(let U=0,F=R.length;U<F;U++){const z=Array.isArray(R[U])?R[U]:[R[U]];for(let k=0,L=z.length;k<L;k++){const G=z[k];if(y(G,U,k,O)===!0){const J=G.__offset,Q=Array.isArray(G.value)?G.value:[G.value];let ce=0;for(let ge=0;ge<Q.length;ge++){const ne=Q[ge],de=E(ne);typeof ne=="number"||typeof ne=="boolean"?(G.__data[0]=ne,i.bufferSubData(i.UNIFORM_BUFFER,J+ce,G.__data)):ne.isMatrix3?(G.__data[0]=ne.elements[0],G.__data[1]=ne.elements[1],G.__data[2]=ne.elements[2],G.__data[3]=0,G.__data[4]=ne.elements[3],G.__data[5]=ne.elements[4],G.__data[6]=ne.elements[5],G.__data[7]=0,G.__data[8]=ne.elements[6],G.__data[9]=ne.elements[7],G.__data[10]=ne.elements[8],G.__data[11]=0):(ne.toArray(G.__data,ce),ce+=de.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,J,G.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function y(A,C,R,O){const U=A.value,F=C+"_"+R;if(O[F]===void 0)return typeof U=="number"||typeof U=="boolean"?O[F]=U:O[F]=U.clone(),!0;{const z=O[F];if(typeof U=="number"||typeof U=="boolean"){if(z!==U)return O[F]=U,!0}else if(z.equals(U)===!1)return z.copy(U),!0}return!1}function M(A){const C=A.uniforms;let R=0;const O=16;for(let F=0,z=C.length;F<z;F++){const k=Array.isArray(C[F])?C[F]:[C[F]];for(let L=0,G=k.length;L<G;L++){const J=k[L],Q=Array.isArray(J.value)?J.value:[J.value];for(let ce=0,ge=Q.length;ce<ge;ce++){const ne=Q[ce],de=E(ne),B=R%O,ie=B%de.boundary,te=B+ie;R+=ie,te!==0&&O-te<de.storage&&(R+=O-te),J.__data=new Float32Array(de.storage/Float32Array.BYTES_PER_ELEMENT),J.__offset=R,R+=de.storage}}}const U=R%O;return U>0&&(R+=O-U),A.__size=R,A.__cache={},this}function E(A){const C={boundary:0,storage:0};return typeof A=="number"||typeof A=="boolean"?(C.boundary=4,C.storage=4):A.isVector2?(C.boundary=8,C.storage=8):A.isVector3||A.isColor?(C.boundary=16,C.storage=12):A.isVector4?(C.boundary=16,C.storage=16):A.isMatrix3?(C.boundary=48,C.storage=48):A.isMatrix4?(C.boundary=64,C.storage=64):A.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",A),C}function w(A){const C=A.target;C.removeEventListener("dispose",w);const R=a.indexOf(C.__bindingPointIndex);a.splice(R,1),i.deleteBuffer(r[C.id]),delete r[C.id],delete s[C.id]}function S(){for(const A in r)i.deleteBuffer(r[A]);a=[],r={},s={}}return{bind:d,update:h,dispose:S}}class KP{constructor(e={}){const{canvas:t=BR(),context:n=null,depth:r=!0,stencil:s=!1,alpha:a=!1,antialias:c=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:h=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:g=!1,reverseDepthBuffer:v=!1}=e;this.isWebGLRenderer=!0;let y;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");y=n.getContextAttributes().alpha}else y=a;const M=new Uint32Array(4),E=new Int32Array(4);let w=null,S=null;const A=[],C=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Kr,this.toneMapping=Xo,this.toneMappingExposure=1;const R=this;let O=!1,U=0,F=0,z=null,k=-1,L=null;const G=new wn,J=new wn;let Q=null;const ce=new vt(0);let ge=0,ne=t.width,de=t.height,B=1,ie=null,te=null;const X=new wn(0,0,ne,de),fe=new wn(0,0,ne,de);let Pe=!1;const le=new Sm;let Ee=!1,Ue=!1;const he=new Wt,Fe=new Wt,Xe=new q,Ge=new wn,Qe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Se=!1;function Le(){return z===null?B:1}let K=n;function ht(j,pe){return t.getContext(j,pe)}try{const j={alpha:!0,depth:r,stencil:s,antialias:c,premultipliedAlpha:d,preserveDrawingBuffer:h,powerPreference:m,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Ky}`),t.addEventListener("webglcontextlost",Ne,!1),t.addEventListener("webglcontextrestored",lt,!1),t.addEventListener("webglcontextcreationerror",st,!1),K===null){const pe="webgl2";if(K=ht(pe,j),K===null)throw ht(pe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(j){throw console.error("THREE.WebGLRenderer: "+j.message),j}let Be,nt,Ke,bt,tt,Y,W,ye,Re,ze,De,yt,Je,ct,Xt,We,gt,Dt,kt,dt,re,Ie,rt,ee;function Ye(){Be=new HH(K),Be.init(),Ie=new qP(K,Be),nt=new UH(K,Be,e,Ie),Ke=new wG(K,Be),nt.reverseDepthBuffer&&v&&Ke.buffers.depth.setReversed(!0),bt=new jH(K),tt=new cG,Y=new MG(K,Be,Ke,tt,nt,Ie,bt),W=new FH(R),ye=new VH(R),Re=new QB(K),rt=new DH(K,Re),ze=new GH(K,Re,bt,rt),De=new YH(K,ze,Re,bt),kt=new XH(K,nt,Y),We=new kH(tt),yt=new lG(R,W,ye,Be,nt,rt,We),Je=new PG(R,tt),ct=new fG,Xt=new vG(Be),Dt=new LH(R,W,ye,Ke,De,y,d),gt=new _G(R,De,nt),ee=new IG(K,bt,nt,Ke),dt=new OH(K,Be,bt),re=new WH(K,Be,bt),bt.programs=yt.programs,R.capabilities=nt,R.extensions=Be,R.properties=tt,R.renderLists=ct,R.shadowMap=gt,R.state=Ke,R.info=bt}Ye();const Te=new AG(R,K);this.xr=Te,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){const j=Be.get("WEBGL_lose_context");j&&j.loseContext()},this.forceContextRestore=function(){const j=Be.get("WEBGL_lose_context");j&&j.restoreContext()},this.getPixelRatio=function(){return B},this.setPixelRatio=function(j){j!==void 0&&(B=j,this.setSize(ne,de,!1))},this.getSize=function(j){return j.set(ne,de)},this.setSize=function(j,pe,we=!0){if(Te.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ne=j,de=pe,t.width=Math.floor(j*B),t.height=Math.floor(pe*B),we===!0&&(t.style.width=j+"px",t.style.height=pe+"px"),this.setViewport(0,0,j,pe)},this.getDrawingBufferSize=function(j){return j.set(ne*B,de*B).floor()},this.setDrawingBufferSize=function(j,pe,we){ne=j,de=pe,B=we,t.width=Math.floor(j*we),t.height=Math.floor(pe*we),this.setViewport(0,0,j,pe)},this.getCurrentViewport=function(j){return j.copy(G)},this.getViewport=function(j){return j.copy(X)},this.setViewport=function(j,pe,we,be){j.isVector4?X.set(j.x,j.y,j.z,j.w):X.set(j,pe,we,be),Ke.viewport(G.copy(X).multiplyScalar(B).round())},this.getScissor=function(j){return j.copy(fe)},this.setScissor=function(j,pe,we,be){j.isVector4?fe.set(j.x,j.y,j.z,j.w):fe.set(j,pe,we,be),Ke.scissor(J.copy(fe).multiplyScalar(B).round())},this.getScissorTest=function(){return Pe},this.setScissorTest=function(j){Ke.setScissorTest(Pe=j)},this.setOpaqueSort=function(j){ie=j},this.setTransparentSort=function(j){te=j},this.getClearColor=function(j){return j.copy(Dt.getClearColor())},this.setClearColor=function(){Dt.setClearColor.apply(Dt,arguments)},this.getClearAlpha=function(){return Dt.getClearAlpha()},this.setClearAlpha=function(){Dt.setClearAlpha.apply(Dt,arguments)},this.clear=function(j=!0,pe=!0,we=!0){let be=0;if(j){let oe=!1;if(z!==null){const je=z.texture.format;oe=je===i0||je===n0||je===ym}if(oe){const je=z.texture.type,it=je===go||je===Qa||je===$d||je===Gu||je===Jy||je===e0,ft=Dt.getClearColor(),xt=Dt.getClearAlpha(),Vt=ft.r,Ot=ft.g,St=ft.b;it?(M[0]=Vt,M[1]=Ot,M[2]=St,M[3]=xt,K.clearBufferuiv(K.COLOR,0,M)):(E[0]=Vt,E[1]=Ot,E[2]=St,E[3]=xt,K.clearBufferiv(K.COLOR,0,E))}else be|=K.COLOR_BUFFER_BIT}pe&&(be|=K.DEPTH_BUFFER_BIT),we&&(be|=K.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),K.clear(be)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ne,!1),t.removeEventListener("webglcontextrestored",lt,!1),t.removeEventListener("webglcontextcreationerror",st,!1),Dt.dispose(),ct.dispose(),Xt.dispose(),tt.dispose(),W.dispose(),ye.dispose(),De.dispose(),rt.dispose(),ee.dispose(),yt.dispose(),Te.dispose(),Te.removeEventListener("sessionstart",el),Te.removeEventListener("sessionend",wo),vs.stop()};function Ne(j){j.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),O=!0}function lt(){console.log("THREE.WebGLRenderer: Context Restored."),O=!1;const j=bt.autoReset,pe=gt.enabled,we=gt.autoUpdate,be=gt.needsUpdate,oe=gt.type;Ye(),bt.autoReset=j,gt.enabled=pe,gt.autoUpdate=we,gt.needsUpdate=be,gt.type=oe}function st(j){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",j.statusMessage)}function Lt(j){const pe=j.target;pe.removeEventListener("dispose",Lt),pn(pe)}function pn(j){Nn(j),tt.remove(j)}function Nn(j){const pe=tt.get(j).programs;pe!==void 0&&(pe.forEach(function(we){yt.releaseProgram(we)}),j.isShaderMaterial&&yt.releaseShaderCache(j))}this.renderBufferDirect=function(j,pe,we,be,oe,je){pe===null&&(pe=Qe);const it=oe.isMesh&&oe.matrixWorld.determinant()<0,ft=tf(j,pe,we,be,oe);Ke.setMaterial(be,it);let xt=we.index,Vt=1;if(be.wireframe===!0){if(xt=ze.getWireframeAttribute(we),xt===void 0)return;Vt=2}const Ot=we.drawRange,St=we.attributes.position;let pt=Ot.start*Vt,Nt=(Ot.start+Ot.count)*Vt;je!==null&&(pt=Math.max(pt,je.start*Vt),Nt=Math.min(Nt,(je.start+je.count)*Vt)),xt!==null?(pt=Math.max(pt,0),Nt=Math.min(Nt,xt.count)):St!=null&&(pt=Math.max(pt,0),Nt=Math.min(Nt,St.count));const sn=Nt-pt;if(sn<0||sn===1/0)return;rt.setup(oe,be,ft,we,xt);let on,Gt=dt;if(xt!==null&&(on=Re.get(xt),Gt=re,Gt.setIndex(on)),oe.isMesh)be.wireframe===!0?(Ke.setLineWidth(be.wireframeLinewidth*Le()),Gt.setMode(K.LINES)):Gt.setMode(K.TRIANGLES);else if(oe.isLine){let At=be.linewidth;At===void 0&&(At=1),Ke.setLineWidth(At*Le()),oe.isLineSegments?Gt.setMode(K.LINES):oe.isLineLoop?Gt.setMode(K.LINE_LOOP):Gt.setMode(K.LINE_STRIP)}else oe.isPoints?Gt.setMode(K.POINTS):oe.isSprite&&Gt.setMode(K.TRIANGLES);if(oe.isBatchedMesh)if(oe._multiDrawInstances!==null)Gt.renderMultiDrawInstances(oe._multiDrawStarts,oe._multiDrawCounts,oe._multiDrawCount,oe._multiDrawInstances);else if(Be.get("WEBGL_multi_draw"))Gt.renderMultiDraw(oe._multiDrawStarts,oe._multiDrawCounts,oe._multiDrawCount);else{const At=oe._multiDrawStarts,Rn=oe._multiDrawCounts,Ht=oe._multiDrawCount,ti=xt?Re.get(xt).bytesPerElement:1,Dr=tt.get(be).currentProgram.getUniforms();for(let Di=0;Di<Ht;Di++)Dr.setValue(K,"_gl_DrawID",Di),Gt.render(At[Di]/ti,Rn[Di])}else if(oe.isInstancedMesh)Gt.renderInstances(pt,sn,oe.count);else if(we.isInstancedBufferGeometry){const At=we._maxInstanceCount!==void 0?we._maxInstanceCount:1/0,Rn=Math.min(we.instanceCount,At);Gt.renderInstances(pt,sn,Rn)}else Gt.render(pt,sn)};function en(j,pe,we){j.transparent===!0&&j.side===Vo&&j.forceSinglePass===!1?(j.side=Ir,j.needsUpdate=!0,tl(j,pe,we),j.side=Za,j.needsUpdate=!0,tl(j,pe,we),j.side=Vo):tl(j,pe,we)}this.compile=function(j,pe,we=null){we===null&&(we=j),S=Xt.get(we),S.init(pe),C.push(S),we.traverseVisible(function(oe){oe.isLight&&oe.layers.test(pe.layers)&&(S.pushLight(oe),oe.castShadow&&S.pushShadow(oe))}),j!==we&&j.traverseVisible(function(oe){oe.isLight&&oe.layers.test(pe.layers)&&(S.pushLight(oe),oe.castShadow&&S.pushShadow(oe))}),S.setupLights();const be=new Set;return j.traverse(function(oe){if(!(oe.isMesh||oe.isPoints||oe.isLine||oe.isSprite))return;const je=oe.material;if(je)if(Array.isArray(je))for(let it=0;it<je.length;it++){const ft=je[it];en(ft,we,oe),be.add(ft)}else en(je,we,oe),be.add(je)}),C.pop(),S=null,be},this.compileAsync=function(j,pe,we=null){const be=this.compile(j,pe,we);return new Promise(oe=>{function je(){if(be.forEach(function(it){tt.get(it).currentProgram.isReady()&&be.delete(it)}),be.size===0){oe(j);return}setTimeout(je,10)}Be.get("KHR_parallel_shader_compile")!==null?je():setTimeout(je,10)})};let Kn=null;function ei(j){Kn&&Kn(j)}function el(){vs.stop()}function wo(){vs.start()}const vs=new GP;vs.setAnimationLoop(ei),typeof self<"u"&&vs.setContext(self),this.setAnimationLoop=function(j){Kn=j,Te.setAnimationLoop(j),j===null?vs.stop():vs.start()},Te.addEventListener("sessionstart",el),Te.addEventListener("sessionend",wo),this.render=function(j,pe){if(pe!==void 0&&pe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(O===!0)return;if(j.matrixWorldAutoUpdate===!0&&j.updateMatrixWorld(),pe.parent===null&&pe.matrixWorldAutoUpdate===!0&&pe.updateMatrixWorld(),Te.enabled===!0&&Te.isPresenting===!0&&(Te.cameraAutoUpdate===!0&&Te.updateCamera(pe),pe=Te.getCamera()),j.isScene===!0&&j.onBeforeRender(R,j,pe,z),S=Xt.get(j,C.length),S.init(pe),C.push(S),Fe.multiplyMatrices(pe.projectionMatrix,pe.matrixWorldInverse),le.setFromProjectionMatrix(Fe),Ue=this.localClippingEnabled,Ee=We.init(this.clippingPlanes,Ue),w=ct.get(j,A.length),w.init(),A.push(w),Te.enabled===!0&&Te.isPresenting===!0){const je=R.xr.getDepthSensingMesh();je!==null&&Jr(je,pe,-1/0,R.sortObjects)}Jr(j,pe,0,R.sortObjects),w.finish(),R.sortObjects===!0&&w.sort(ie,te),Se=Te.enabled===!1||Te.isPresenting===!1||Te.hasDepthSensing()===!1,Se&&Dt.addToRenderList(w,j),this.info.render.frame++,Ee===!0&&We.beginShadows();const we=S.state.shadowsArray;gt.render(we,j,pe),Ee===!0&&We.endShadows(),this.info.autoReset===!0&&this.info.reset();const be=w.opaque,oe=w.transmissive;if(S.setupLights(),pe.isArrayCamera){const je=pe.cameras;if(oe.length>0)for(let it=0,ft=je.length;it<ft;it++){const xt=je[it];es(be,oe,j,xt)}Se&&Dt.render(j);for(let it=0,ft=je.length;it<ft;it++){const xt=je[it];Jo(w,j,xt,xt.viewport)}}else oe.length>0&&es(be,oe,j,pe),Se&&Dt.render(j),Jo(w,j,pe);z!==null&&(Y.updateMultisampleRenderTarget(z),Y.updateRenderTargetMipmap(z)),j.isScene===!0&&j.onAfterRender(R,j,pe),rt.resetDefaultState(),k=-1,L=null,C.pop(),C.length>0?(S=C[C.length-1],Ee===!0&&We.setGlobalState(R.clippingPlanes,S.state.camera)):S=null,A.pop(),A.length>0?w=A[A.length-1]:w=null};function Jr(j,pe,we,be){if(j.visible===!1)return;if(j.layers.test(pe.layers)){if(j.isGroup)we=j.renderOrder;else if(j.isLOD)j.autoUpdate===!0&&j.update(pe);else if(j.isLight)S.pushLight(j),j.castShadow&&S.pushShadow(j);else if(j.isSprite){if(!j.frustumCulled||le.intersectsSprite(j)){be&&Ge.setFromMatrixPosition(j.matrixWorld).applyMatrix4(Fe);const it=De.update(j),ft=j.material;ft.visible&&w.push(j,it,ft,we,Ge.z,null)}}else if((j.isMesh||j.isLine||j.isPoints)&&(!j.frustumCulled||le.intersectsObject(j))){const it=De.update(j),ft=j.material;if(be&&(j.boundingSphere!==void 0?(j.boundingSphere===null&&j.computeBoundingSphere(),Ge.copy(j.boundingSphere.center)):(it.boundingSphere===null&&it.computeBoundingSphere(),Ge.copy(it.boundingSphere.center)),Ge.applyMatrix4(j.matrixWorld).applyMatrix4(Fe)),Array.isArray(ft)){const xt=it.groups;for(let Vt=0,Ot=xt.length;Vt<Ot;Vt++){const St=xt[Vt],pt=ft[St.materialIndex];pt&&pt.visible&&w.push(j,it,pt,we,Ge.z,St)}}else ft.visible&&w.push(j,it,ft,we,Ge.z,null)}}const je=j.children;for(let it=0,ft=je.length;it<ft;it++)Jr(je[it],pe,we,be)}function Jo(j,pe,we,be){const oe=j.opaque,je=j.transmissive,it=j.transparent;S.setupLightsView(we),Ee===!0&&We.setGlobalState(R.clippingPlanes,we),be&&Ke.viewport(G.copy(be)),oe.length>0&&Mo(oe,pe,we),je.length>0&&Mo(je,pe,we),it.length>0&&Mo(it,pe,we),Ke.buffers.depth.setTest(!0),Ke.buffers.depth.setMask(!0),Ke.buffers.color.setMask(!0),Ke.setPolygonOffset(!1)}function es(j,pe,we,be){if((we.isScene===!0?we.overrideMaterial:null)!==null)return;S.state.transmissionRenderTarget[be.id]===void 0&&(S.state.transmissionRenderTarget[be.id]=new vo(1,1,{generateMipmaps:!0,type:Be.has("EXT_color_buffer_half_float")||Be.has("EXT_color_buffer_float")?fh:go,minFilter:Go,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:xn.workingColorSpace}));const je=S.state.transmissionRenderTarget[be.id],it=be.viewport||G;je.setSize(it.z,it.w);const ft=R.getRenderTarget();R.setRenderTarget(je),R.getClearColor(ce),ge=R.getClearAlpha(),ge<1&&R.setClearColor(16777215,.5),R.clear(),Se&&Dt.render(we);const xt=R.toneMapping;R.toneMapping=Xo;const Vt=be.viewport;if(be.viewport!==void 0&&(be.viewport=void 0),S.setupLightsView(be),Ee===!0&&We.setGlobalState(R.clippingPlanes,be),Mo(j,we,be),Y.updateMultisampleRenderTarget(je),Y.updateRenderTargetMipmap(je),Be.has("WEBGL_multisampled_render_to_texture")===!1){let Ot=!1;for(let St=0,pt=pe.length;St<pt;St++){const Nt=pe[St],sn=Nt.object,on=Nt.geometry,Gt=Nt.material,At=Nt.group;if(Gt.side===Vo&&sn.layers.test(be.layers)){const Rn=Gt.side;Gt.side=Ir,Gt.needsUpdate=!0,Ju(sn,we,be,on,Gt,At),Gt.side=Rn,Gt.needsUpdate=!0,Ot=!0}}Ot===!0&&(Y.updateMultisampleRenderTarget(je),Y.updateRenderTargetMipmap(je))}R.setRenderTarget(ft),R.setClearColor(ce,ge),Vt!==void 0&&(be.viewport=Vt),R.toneMapping=xt}function Mo(j,pe,we){const be=pe.isScene===!0?pe.overrideMaterial:null;for(let oe=0,je=j.length;oe<je;oe++){const it=j[oe],ft=it.object,xt=it.geometry,Vt=be===null?it.material:be,Ot=it.group;ft.layers.test(we.layers)&&Ju(ft,pe,we,xt,Vt,Ot)}}function Ju(j,pe,we,be,oe,je){j.onBeforeRender(R,pe,we,be,oe,je),j.modelViewMatrix.multiplyMatrices(we.matrixWorldInverse,j.matrixWorld),j.normalMatrix.getNormalMatrix(j.modelViewMatrix),oe.onBeforeRender(R,pe,we,be,j,je),oe.transparent===!0&&oe.side===Vo&&oe.forceSinglePass===!1?(oe.side=Ir,oe.needsUpdate=!0,R.renderBufferDirect(we,pe,be,oe,j,je),oe.side=Za,oe.needsUpdate=!0,R.renderBufferDirect(we,pe,be,oe,j,je),oe.side=Vo):R.renderBufferDirect(we,pe,be,oe,j,je),j.onAfterRender(R,pe,we,be,oe,je)}function tl(j,pe,we){pe.isScene!==!0&&(pe=Qe);const be=tt.get(j),oe=S.state.lights,je=S.state.shadowsArray,it=oe.state.version,ft=yt.getParameters(j,oe.state,je,pe,we),xt=yt.getProgramCacheKey(ft);let Vt=be.programs;be.environment=j.isMeshStandardMaterial?pe.environment:null,be.fog=pe.fog,be.envMap=(j.isMeshStandardMaterial?ye:W).get(j.envMap||be.environment),be.envMapRotation=be.environment!==null&&j.envMap===null?pe.environmentRotation:j.envMapRotation,Vt===void 0&&(j.addEventListener("dispose",Lt),Vt=new Map,be.programs=Vt);let Ot=Vt.get(xt);if(Ot!==void 0){if(be.currentProgram===Ot&&be.lightsStateVersion===it)return ys(j,ft),Ot}else ft.uniforms=yt.getUniforms(j),j.onBeforeCompile(ft,R),Ot=yt.acquireProgram(ft,xt),Vt.set(xt,Ot),be.uniforms=ft.uniforms;const St=be.uniforms;return(!j.isShaderMaterial&&!j.isRawShaderMaterial||j.clipping===!0)&&(St.clippingPlanes=We.uniform),ys(j,ft),be.needsLights=rf(j),be.lightsStateVersion=it,be.needsLights&&(St.ambientLightColor.value=oe.state.ambient,St.lightProbe.value=oe.state.probe,St.directionalLights.value=oe.state.directional,St.directionalLightShadows.value=oe.state.directionalShadow,St.spotLights.value=oe.state.spot,St.spotLightShadows.value=oe.state.spotShadow,St.rectAreaLights.value=oe.state.rectArea,St.ltc_1.value=oe.state.rectAreaLTC1,St.ltc_2.value=oe.state.rectAreaLTC2,St.pointLights.value=oe.state.point,St.pointLightShadows.value=oe.state.pointShadow,St.hemisphereLights.value=oe.state.hemi,St.directionalShadowMap.value=oe.state.directionalShadowMap,St.directionalShadowMatrix.value=oe.state.directionalShadowMatrix,St.spotShadowMap.value=oe.state.spotShadowMap,St.spotLightMatrix.value=oe.state.spotLightMatrix,St.spotLightMap.value=oe.state.spotLightMap,St.pointShadowMap.value=oe.state.pointShadowMap,St.pointShadowMatrix.value=oe.state.pointShadowMatrix),be.currentProgram=Ot,be.uniformsList=null,Ot}function ef(j){if(j.uniformsList===null){const pe=j.currentProgram.getUniforms();j.uniformsList=Rv.seqWithValue(pe.seq,j.uniforms)}return j.uniformsList}function ys(j,pe){const we=tt.get(j);we.outputColorSpace=pe.outputColorSpace,we.batching=pe.batching,we.batchingColor=pe.batchingColor,we.instancing=pe.instancing,we.instancingColor=pe.instancingColor,we.instancingMorph=pe.instancingMorph,we.skinning=pe.skinning,we.morphTargets=pe.morphTargets,we.morphNormals=pe.morphNormals,we.morphColors=pe.morphColors,we.morphTargetsCount=pe.morphTargetsCount,we.numClippingPlanes=pe.numClippingPlanes,we.numIntersection=pe.numClipIntersection,we.vertexAlphas=pe.vertexAlphas,we.vertexTangents=pe.vertexTangents,we.toneMapping=pe.toneMapping}function tf(j,pe,we,be,oe){pe.isScene!==!0&&(pe=Qe),Y.resetTextureUnits();const je=pe.fog,it=be.isMeshStandardMaterial?pe.environment:null,ft=z===null?R.outputColorSpace:z.isXRRenderTarget===!0?z.texture.colorSpace:ju,xt=(be.isMeshStandardMaterial?ye:W).get(be.envMap||it),Vt=be.vertexColors===!0&&!!we.attributes.color&&we.attributes.color.itemSize===4,Ot=!!we.attributes.tangent&&(!!be.normalMap||be.anisotropy>0),St=!!we.morphAttributes.position,pt=!!we.morphAttributes.normal,Nt=!!we.morphAttributes.color;let sn=Xo;be.toneMapped&&(z===null||z.isXRRenderTarget===!0)&&(sn=R.toneMapping);const on=we.morphAttributes.position||we.morphAttributes.normal||we.morphAttributes.color,Gt=on!==void 0?on.length:0,At=tt.get(be),Rn=S.state.lights;if(Ee===!0&&(Ue===!0||j!==L)){const Zn=j===L&&be.id===k;We.setState(be,j,Zn)}let Ht=!1;be.version===At.__version?(At.needsLights&&At.lightsStateVersion!==Rn.state.version||At.outputColorSpace!==ft||oe.isBatchedMesh&&At.batching===!1||!oe.isBatchedMesh&&At.batching===!0||oe.isBatchedMesh&&At.batchingColor===!0&&oe.colorTexture===null||oe.isBatchedMesh&&At.batchingColor===!1&&oe.colorTexture!==null||oe.isInstancedMesh&&At.instancing===!1||!oe.isInstancedMesh&&At.instancing===!0||oe.isSkinnedMesh&&At.skinning===!1||!oe.isSkinnedMesh&&At.skinning===!0||oe.isInstancedMesh&&At.instancingColor===!0&&oe.instanceColor===null||oe.isInstancedMesh&&At.instancingColor===!1&&oe.instanceColor!==null||oe.isInstancedMesh&&At.instancingMorph===!0&&oe.morphTexture===null||oe.isInstancedMesh&&At.instancingMorph===!1&&oe.morphTexture!==null||At.envMap!==xt||be.fog===!0&&At.fog!==je||At.numClippingPlanes!==void 0&&(At.numClippingPlanes!==We.numPlanes||At.numIntersection!==We.numIntersection)||At.vertexAlphas!==Vt||At.vertexTangents!==Ot||At.morphTargets!==St||At.morphNormals!==pt||At.morphColors!==Nt||At.toneMapping!==sn||At.morphTargetsCount!==Gt)&&(Ht=!0):(Ht=!0,At.__version=be.version);let ti=At.currentProgram;Ht===!0&&(ti=tl(be,pe,oe));let Dr=!1,Di=!1,xs=!1;const Tn=ti.getUniforms(),Fn=At.uniforms;if(Ke.useProgram(ti.program)&&(Dr=!0,Di=!0,xs=!0),be.id!==k&&(k=be.id,Di=!0),Dr||L!==j){Ke.buffers.depth.getReversed()?(he.copy(j.projectionMatrix),EF(he),TF(he),Tn.setValue(K,"projectionMatrix",he)):Tn.setValue(K,"projectionMatrix",j.projectionMatrix),Tn.setValue(K,"viewMatrix",j.matrixWorldInverse);const Ui=Tn.map.cameraPosition;Ui!==void 0&&Ui.setValue(K,Xe.setFromMatrixPosition(j.matrixWorld)),nt.logarithmicDepthBuffer&&Tn.setValue(K,"logDepthBufFC",2/(Math.log(j.far+1)/Math.LN2)),(be.isMeshPhongMaterial||be.isMeshToonMaterial||be.isMeshLambertMaterial||be.isMeshBasicMaterial||be.isMeshStandardMaterial||be.isShaderMaterial)&&Tn.setValue(K,"isOrthographic",j.isOrthographicCamera===!0),L!==j&&(L=j,Di=!0,xs=!0)}if(oe.isSkinnedMesh){Tn.setOptional(K,oe,"bindMatrix"),Tn.setOptional(K,oe,"bindMatrixInverse");const Zn=oe.skeleton;Zn&&(Zn.boneTexture===null&&Zn.computeBoneTexture(),Tn.setValue(K,"boneTexture",Zn.boneTexture,Y))}oe.isBatchedMesh&&(Tn.setOptional(K,oe,"batchingTexture"),Tn.setValue(K,"batchingTexture",oe._matricesTexture,Y),Tn.setOptional(K,oe,"batchingIdTexture"),Tn.setValue(K,"batchingIdTexture",oe._indirectTexture,Y),Tn.setOptional(K,oe,"batchingColorTexture"),oe._colorsTexture!==null&&Tn.setValue(K,"batchingColorTexture",oe._colorsTexture,Y));const Oi=we.morphAttributes;if((Oi.position!==void 0||Oi.normal!==void 0||Oi.color!==void 0)&&kt.update(oe,we,ti),(Di||At.receiveShadow!==oe.receiveShadow)&&(At.receiveShadow=oe.receiveShadow,Tn.setValue(K,"receiveShadow",oe.receiveShadow)),be.isMeshGouraudMaterial&&be.envMap!==null&&(Fn.envMap.value=xt,Fn.flipEnvMap.value=xt.isCubeTexture&&xt.isRenderTargetTexture===!1?-1:1),be.isMeshStandardMaterial&&be.envMap===null&&pe.environment!==null&&(Fn.envMapIntensity.value=pe.environmentIntensity),Di&&(Tn.setValue(K,"toneMappingExposure",R.toneMappingExposure),At.needsLights&&nf(Fn,xs),je&&be.fog===!0&&Je.refreshFogUniforms(Fn,je),Je.refreshMaterialUniforms(Fn,be,B,de,S.state.transmissionRenderTarget[j.id]),Rv.upload(K,ef(At),Fn,Y)),be.isShaderMaterial&&be.uniformsNeedUpdate===!0&&(Rv.upload(K,ef(At),Fn,Y),be.uniformsNeedUpdate=!1),be.isSpriteMaterial&&Tn.setValue(K,"center",oe.center),Tn.setValue(K,"modelViewMatrix",oe.modelViewMatrix),Tn.setValue(K,"normalMatrix",oe.normalMatrix),Tn.setValue(K,"modelMatrix",oe.matrixWorld),be.isShaderMaterial||be.isRawShaderMaterial){const Zn=be.uniformsGroups;for(let Ui=0,_s=Zn.length;Ui<_s;Ui++){const tn=Zn[Ui];ee.update(tn,ti),ee.bind(tn,ti)}}return ti}function nf(j,pe){j.ambientLightColor.needsUpdate=pe,j.lightProbe.needsUpdate=pe,j.directionalLights.needsUpdate=pe,j.directionalLightShadows.needsUpdate=pe,j.pointLights.needsUpdate=pe,j.pointLightShadows.needsUpdate=pe,j.spotLights.needsUpdate=pe,j.spotLightShadows.needsUpdate=pe,j.rectAreaLights.needsUpdate=pe,j.hemisphereLights.needsUpdate=pe}function rf(j){return j.isMeshLambertMaterial||j.isMeshToonMaterial||j.isMeshPhongMaterial||j.isMeshStandardMaterial||j.isShadowMaterial||j.isShaderMaterial&&j.lights===!0}this.getActiveCubeFace=function(){return U},this.getActiveMipmapLevel=function(){return F},this.getRenderTarget=function(){return z},this.setRenderTargetTextures=function(j,pe,we){tt.get(j.texture).__webglTexture=pe,tt.get(j.depthTexture).__webglTexture=we;const be=tt.get(j);be.__hasExternalTextures=!0,be.__autoAllocateDepthBuffer=we===void 0,be.__autoAllocateDepthBuffer||Be.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),be.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(j,pe){const we=tt.get(j);we.__webglFramebuffer=pe,we.__useDefaultFramebuffer=pe===void 0},this.setRenderTarget=function(j,pe=0,we=0){z=j,U=pe,F=we;let be=!0,oe=null,je=!1,it=!1;if(j){const xt=tt.get(j);if(xt.__useDefaultFramebuffer!==void 0)Ke.bindFramebuffer(K.FRAMEBUFFER,null),be=!1;else if(xt.__webglFramebuffer===void 0)Y.setupRenderTarget(j);else if(xt.__hasExternalTextures)Y.rebindTextures(j,tt.get(j.texture).__webglTexture,tt.get(j.depthTexture).__webglTexture);else if(j.depthBuffer){const St=j.depthTexture;if(xt.__boundDepthTexture!==St){if(St!==null&&tt.has(St)&&(j.width!==St.image.width||j.height!==St.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Y.setupDepthRenderbuffer(j)}}const Vt=j.texture;(Vt.isData3DTexture||Vt.isDataArrayTexture||Vt.isCompressedArrayTexture)&&(it=!0);const Ot=tt.get(j).__webglFramebuffer;j.isWebGLCubeRenderTarget?(Array.isArray(Ot[pe])?oe=Ot[pe][we]:oe=Ot[pe],je=!0):j.samples>0&&Y.useMultisampledRTT(j)===!1?oe=tt.get(j).__webglMultisampledFramebuffer:Array.isArray(Ot)?oe=Ot[we]:oe=Ot,G.copy(j.viewport),J.copy(j.scissor),Q=j.scissorTest}else G.copy(X).multiplyScalar(B).floor(),J.copy(fe).multiplyScalar(B).floor(),Q=Pe;if(Ke.bindFramebuffer(K.FRAMEBUFFER,oe)&&be&&Ke.drawBuffers(j,oe),Ke.viewport(G),Ke.scissor(J),Ke.setScissorTest(Q),je){const xt=tt.get(j.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_CUBE_MAP_POSITIVE_X+pe,xt.__webglTexture,we)}else if(it){const xt=tt.get(j.texture),Vt=pe||0;K.framebufferTextureLayer(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,xt.__webglTexture,we||0,Vt)}k=-1},this.readRenderTargetPixels=function(j,pe,we,be,oe,je,it){if(!(j&&j.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ft=tt.get(j).__webglFramebuffer;if(j.isWebGLCubeRenderTarget&&it!==void 0&&(ft=ft[it]),ft){Ke.bindFramebuffer(K.FRAMEBUFFER,ft);try{const xt=j.texture,Vt=xt.format,Ot=xt.type;if(!nt.textureFormatReadable(Vt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!nt.textureTypeReadable(Ot)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}pe>=0&&pe<=j.width-be&&we>=0&&we<=j.height-oe&&K.readPixels(pe,we,be,oe,Ie.convert(Vt),Ie.convert(Ot),je)}finally{const xt=z!==null?tt.get(z).__webglFramebuffer:null;Ke.bindFramebuffer(K.FRAMEBUFFER,xt)}}},this.readRenderTargetPixelsAsync=async function(j,pe,we,be,oe,je,it){if(!(j&&j.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ft=tt.get(j).__webglFramebuffer;if(j.isWebGLCubeRenderTarget&&it!==void 0&&(ft=ft[it]),ft){const xt=j.texture,Vt=xt.format,Ot=xt.type;if(!nt.textureFormatReadable(Vt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!nt.textureTypeReadable(Ot))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(pe>=0&&pe<=j.width-be&&we>=0&&we<=j.height-oe){Ke.bindFramebuffer(K.FRAMEBUFFER,ft);const St=K.createBuffer();K.bindBuffer(K.PIXEL_PACK_BUFFER,St),K.bufferData(K.PIXEL_PACK_BUFFER,je.byteLength,K.STREAM_READ),K.readPixels(pe,we,be,oe,Ie.convert(Vt),Ie.convert(Ot),0);const pt=z!==null?tt.get(z).__webglFramebuffer:null;Ke.bindFramebuffer(K.FRAMEBUFFER,pt);const Nt=K.fenceSync(K.SYNC_GPU_COMMANDS_COMPLETE,0);return K.flush(),await MF(K,Nt,4),K.bindBuffer(K.PIXEL_PACK_BUFFER,St),K.getBufferSubData(K.PIXEL_PACK_BUFFER,0,je),K.deleteBuffer(St),K.deleteSync(Nt),je}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(j,pe=null,we=0){j.isTexture!==!0&&(Pd("WebGLRenderer: copyFramebufferToTexture function signature has changed."),pe=arguments[0]||null,j=arguments[1]);const be=Math.pow(2,-we),oe=Math.floor(j.image.width*be),je=Math.floor(j.image.height*be),it=pe!==null?pe.x:0,ft=pe!==null?pe.y:0;Y.setTexture2D(j,0),K.copyTexSubImage2D(K.TEXTURE_2D,we,0,0,it,ft,oe,je),Ke.unbindTexture()};const sf=K.createFramebuffer(),of=K.createFramebuffer();this.copyTextureToTexture=function(j,pe,we=null,be=null,oe=0,je=null){j.isTexture!==!0&&(Pd("WebGLRenderer: copyTextureToTexture function signature has changed."),be=arguments[0]||null,j=arguments[1],pe=arguments[2],je=arguments[3]||0,we=null),je===null&&(oe!==0?(Pd("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),je=oe,oe=0):je=0);let it,ft,xt,Vt,Ot,St,pt,Nt,sn;const on=j.isCompressedTexture?j.mipmaps[je]:j.image;if(we!==null)it=we.max.x-we.min.x,ft=we.max.y-we.min.y,xt=we.isBox3?we.max.z-we.min.z:1,Vt=we.min.x,Ot=we.min.y,St=we.isBox3?we.min.z:0;else{const Oi=Math.pow(2,-oe);it=Math.floor(on.width*Oi),ft=Math.floor(on.height*Oi),j.isDataArrayTexture?xt=on.depth:j.isData3DTexture?xt=Math.floor(on.depth*Oi):xt=1,Vt=0,Ot=0,St=0}be!==null?(pt=be.x,Nt=be.y,sn=be.z):(pt=0,Nt=0,sn=0);const Gt=Ie.convert(pe.format),At=Ie.convert(pe.type);let Rn;pe.isData3DTexture?(Y.setTexture3D(pe,0),Rn=K.TEXTURE_3D):pe.isDataArrayTexture||pe.isCompressedArrayTexture?(Y.setTexture2DArray(pe,0),Rn=K.TEXTURE_2D_ARRAY):(Y.setTexture2D(pe,0),Rn=K.TEXTURE_2D),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,pe.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pe.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,pe.unpackAlignment);const Ht=K.getParameter(K.UNPACK_ROW_LENGTH),ti=K.getParameter(K.UNPACK_IMAGE_HEIGHT),Dr=K.getParameter(K.UNPACK_SKIP_PIXELS),Di=K.getParameter(K.UNPACK_SKIP_ROWS),xs=K.getParameter(K.UNPACK_SKIP_IMAGES);K.pixelStorei(K.UNPACK_ROW_LENGTH,on.width),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,on.height),K.pixelStorei(K.UNPACK_SKIP_PIXELS,Vt),K.pixelStorei(K.UNPACK_SKIP_ROWS,Ot),K.pixelStorei(K.UNPACK_SKIP_IMAGES,St);const Tn=j.isDataArrayTexture||j.isData3DTexture,Fn=pe.isDataArrayTexture||pe.isData3DTexture;if(j.isDepthTexture){const Oi=tt.get(j),Zn=tt.get(pe),Ui=tt.get(Oi.__renderTarget),_s=tt.get(Zn.__renderTarget);Ke.bindFramebuffer(K.READ_FRAMEBUFFER,Ui.__webglFramebuffer),Ke.bindFramebuffer(K.DRAW_FRAMEBUFFER,_s.__webglFramebuffer);for(let tn=0;tn<xt;tn++)Tn&&(K.framebufferTextureLayer(K.READ_FRAMEBUFFER,K.COLOR_ATTACHMENT0,tt.get(j).__webglTexture,oe,St+tn),K.framebufferTextureLayer(K.DRAW_FRAMEBUFFER,K.COLOR_ATTACHMENT0,tt.get(pe).__webglTexture,je,sn+tn)),K.blitFramebuffer(Vt,Ot,it,ft,pt,Nt,it,ft,K.DEPTH_BUFFER_BIT,K.NEAREST);Ke.bindFramebuffer(K.READ_FRAMEBUFFER,null),Ke.bindFramebuffer(K.DRAW_FRAMEBUFFER,null)}else if(oe!==0||j.isRenderTargetTexture||tt.has(j)){const Oi=tt.get(j),Zn=tt.get(pe);Ke.bindFramebuffer(K.READ_FRAMEBUFFER,sf),Ke.bindFramebuffer(K.DRAW_FRAMEBUFFER,of);for(let Ui=0;Ui<xt;Ui++)Tn?K.framebufferTextureLayer(K.READ_FRAMEBUFFER,K.COLOR_ATTACHMENT0,Oi.__webglTexture,oe,St+Ui):K.framebufferTexture2D(K.READ_FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,Oi.__webglTexture,oe),Fn?K.framebufferTextureLayer(K.DRAW_FRAMEBUFFER,K.COLOR_ATTACHMENT0,Zn.__webglTexture,je,sn+Ui):K.framebufferTexture2D(K.DRAW_FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,Zn.__webglTexture,je),oe!==0?K.blitFramebuffer(Vt,Ot,it,ft,pt,Nt,it,ft,K.COLOR_BUFFER_BIT,K.NEAREST):Fn?K.copyTexSubImage3D(Rn,je,pt,Nt,sn+Ui,Vt,Ot,it,ft):K.copyTexSubImage2D(Rn,je,pt,Nt,Vt,Ot,it,ft);Ke.bindFramebuffer(K.READ_FRAMEBUFFER,null),Ke.bindFramebuffer(K.DRAW_FRAMEBUFFER,null)}else Fn?j.isDataTexture||j.isData3DTexture?K.texSubImage3D(Rn,je,pt,Nt,sn,it,ft,xt,Gt,At,on.data):pe.isCompressedArrayTexture?K.compressedTexSubImage3D(Rn,je,pt,Nt,sn,it,ft,xt,Gt,on.data):K.texSubImage3D(Rn,je,pt,Nt,sn,it,ft,xt,Gt,At,on):j.isDataTexture?K.texSubImage2D(K.TEXTURE_2D,je,pt,Nt,it,ft,Gt,At,on.data):j.isCompressedTexture?K.compressedTexSubImage2D(K.TEXTURE_2D,je,pt,Nt,on.width,on.height,Gt,on.data):K.texSubImage2D(K.TEXTURE_2D,je,pt,Nt,it,ft,Gt,At,on);K.pixelStorei(K.UNPACK_ROW_LENGTH,Ht),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,ti),K.pixelStorei(K.UNPACK_SKIP_PIXELS,Dr),K.pixelStorei(K.UNPACK_SKIP_ROWS,Di),K.pixelStorei(K.UNPACK_SKIP_IMAGES,xs),je===0&&pe.generateMipmaps&&K.generateMipmap(Rn),Ke.unbindTexture()},this.copyTextureToTexture3D=function(j,pe,we=null,be=null,oe=0){return j.isTexture!==!0&&(Pd("WebGLRenderer: copyTextureToTexture3D function signature has changed."),we=arguments[0]||null,be=arguments[1]||null,j=arguments[2],pe=arguments[3],oe=arguments[4]||0),Pd('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(j,pe,we,be,oe)},this.initRenderTarget=function(j){tt.get(j).__webglFramebuffer===void 0&&Y.setupRenderTarget(j)},this.initTexture=function(j){j.isCubeTexture?Y.setTextureCube(j,0):j.isData3DTexture?Y.setTexture3D(j,0):j.isDataArrayTexture||j.isCompressedArrayTexture?Y.setTexture2DArray(j,0):Y.setTexture2D(j,0),Ke.unbindTexture()},this.resetState=function(){U=0,F=0,z=null,Ke.reset(),rt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Wo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=xn._getDrawingBufferColorSpace(e),t.unpackColorSpace=xn._getUnpackColorSpace()}}const NG=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:VS,AddEquation:jl,AddOperation:yR,AdditiveAnimationBlendMode:QS,AdditiveBlending:Y_,AgXToneMapping:MR,AlphaFormat:XS,AlwaysCompare:FR,AlwaysDepth:Wv,AlwaysStencilFunc:$_,AmbientLight:IP,AnimationAction:BP,AnimationClip:lm,AnimationLoader:Yz,AnimationMixer:wB,AnimationObjectGroup:_B,AnimationUtils:Gz,ArcCurve:nP,ArrayCamera:kP,ArrowHelper:HB,AttachedBindMode:Z_,Audio:FP,AudioAnalyser:uB,AudioContext:Mw,AudioListener:aB,AudioLoader:rB,AxesHelper:GB,BackSide:Ir,BasicDepthPacking:RR,BasicShadowMap:QA,BatchedMesh:JR,Bone:ow,BooleanKeyframeTrack:$u,Box2:AB,Box3:Nr,Box3Helper:BB,BoxGeometry:Zu,BoxHelper:zB,BufferAttribute:Un,BufferGeometry:un,BufferGeometryLoader:UP,ByteType:GS,Cache:ja,Camera:xm,CameraHelper:FB,CanvasTexture:hz,CapsuleGeometry:d0,CatmullRomCurve3:iP,CineonToneMapping:SR,CircleGeometry:h0,ClampToEdgeWrapping:Ds,Clock:Ew,Color:vt,ColorKeyframeTrack:_w,ColorManagement:xn,CompressedArrayTexture:fz,CompressedCubeTexture:dz,CompressedTexture:u0,CompressedTextureLoader:qz,ConeGeometry:p0,ConstantAlphaFactor:mR,ConstantColorFactor:hR,Controls:jB,CubeCamera:XR,CubeReflectionMapping:$a,CubeRefractionMapping:sc,CubeTexture:_m,CubeTextureLoader:Kz,CubeUVReflectionMapping:uh,CubicBezierCurve:uw,CubicBezierCurve3:rP,CubicInterpolant:MP,CullFaceBack:X_,CullFaceFront:$A,CullFaceFrontBack:Tk,CullFaceNone:ZA,Curve:_o,CurvePath:oP,CustomBlending:JA,CustomToneMapping:wR,CylinderGeometry:dh,Cylindrical:CB,Data3DTexture:tw,DataArrayTexture:s0,DataTexture:Yo,DataTextureLoader:Zz,DataUtils:BF,DecrementStencilOp:zk,DecrementWrapStencilOp:Vk,DefaultLoadingManager:bP,DepthFormat:Lu,DepthStencilFormat:Wu,DepthTexture:lw,DetachedBindMode:TR,DirectionalLight:PP,DirectionalLightHelper:kB,DiscreteInterpolant:EP,DodecahedronGeometry:m0,DoubleSide:Vo,DstAlphaFactor:lR,DstColorFactor:uR,DynamicCopyUsage:nF,DynamicDrawUsage:Zk,DynamicReadUsage:Jk,EdgesGeometry:aP,EllipseCurve:f0,EqualCompare:DR,EqualDepth:Xv,EqualStencilFunc:jk,EquirectangularReflectionMapping:Xp,EquirectangularRefractionMapping:Yp,Euler:gs,EventDispatcher:$o,ExtrudeGeometry:v0,FileLoader:Ja,Float16BufferAttribute:XF,Float32BufferAttribute:Pt,FloatType:$r,Fog:a0,FogExp2:o0,FramebufferTexture:uz,FrontSide:Za,Frustum:Sm,GLBufferAttribute:bB,GLSL1:rF,GLSL3:Q_,GreaterCompare:OR,GreaterDepth:qv,GreaterEqualCompare:kR,GreaterEqualDepth:Yv,GreaterEqualStencilFunc:Kk,GreaterStencilFunc:Yk,GridHelper:OB,Group:Od,HalfFloatType:fh,HemisphereLight:CP,HemisphereLightHelper:DB,IcosahedronGeometry:y0,ImageBitmapLoader:iB,ImageLoader:cm,ImageUtils:VR,IncrementStencilOp:Fk,IncrementWrapStencilOp:Bk,InstancedBufferAttribute:eh,InstancedBufferGeometry:OP,InstancedInterleavedBuffer:TB,InstancedMesh:QR,Int16BufferAttribute:WF,Int32BufferAttribute:jF,Int8BufferAttribute:VF,IntType:Qy,InterleavedBuffer:l0,InterleavedBufferAttribute:Xu,Interpolant:Tm,InterpolateDiscrete:Zp,InterpolateLinear:wy,InterpolateSmooth:Av,InvertStencilOp:Hk,KeepStencilOp:yu,KeyframeTrack:So,LOD:ZR,LatheGeometry:wm,Layers:Ou,LessCompare:LR,LessDepth:jv,LessEqualCompare:JS,LessEqualDepth:Hu,LessEqualStencilFunc:Xk,LessStencilFunc:Wk,Light:hc,LightProbe:DP,Line:oc,Line3:RB,LineBasicMaterial:Lr,LineCurve:fw,LineCurve3:sP,LineDashedMaterial:_P,LineLoop:eP,LineSegments:Qo,LinearFilter:Pi,LinearInterpolant:xw,LinearMipMapLinearFilter:Rk,LinearMipMapNearestFilter:Ak,LinearMipmapLinearFilter:Go,LinearMipmapNearestFilter:Ip,LinearSRGBColorSpace:ju,LinearToneMapping:xR,LinearTransfer:Qp,Loader:Qr,LoaderUtils:iS,LoadingManager:Sw,LoopOnce:bR,LoopPingPong:AR,LoopRepeat:CR,LuminanceAlphaFormat:KS,LuminanceFormat:qS,MOUSE:gu,Material:mr,MaterialLoader:T0,MathUtils:SF,Matrix2:Aw,Matrix3:Jt,Matrix4:Wt,MaxEquation:iR,Mesh:_i,MeshBasicMaterial:fc,MeshDepthMaterial:gw,MeshDistanceMaterial:vw,MeshLambertMaterial:yP,MeshMatcapMaterial:xP,MeshNormalMaterial:vP,MeshPhongMaterial:mP,MeshPhysicalMaterial:pP,MeshStandardMaterial:mw,MeshToonMaterial:gP,MinEquation:nR,MirroredRepeatWrapping:Kp,MixOperation:vR,MultiplyBlending:K_,MultiplyOperation:vm,NearestFilter:Ji,NearestMipMapLinearFilter:Ck,NearestMipMapNearestFilter:bk,NearestMipmapLinearFilter:Ld,NearestMipmapNearestFilter:HS,NeutralToneMapping:ER,NeverCompare:NR,NeverDepth:Gv,NeverStencilFunc:Gk,NoBlending:Xa,NoColorSpace:Ga,NoToneMapping:Xo,NormalAnimationBlendMode:r0,NormalBlending:Nu,NotEqualCompare:UR,NotEqualDepth:Kv,NotEqualStencilFunc:qk,NumberKeyframeTrack:om,Object3D:Mn,ObjectLoader:tB,ObjectSpaceNormalMap:IR,OctahedronGeometry:Mm,OneFactor:sR,OneMinusConstantAlphaFactor:gR,OneMinusConstantColorFactor:pR,OneMinusDstAlphaFactor:cR,OneMinusDstColorFactor:fR,OneMinusSrcAlphaFactor:Hv,OneMinusSrcColorFactor:aR,OrthographicCamera:tc,PCFShadowMap:Zy,PCFSoftShadowMap:Pp,PMREMGenerator:aS,Path:nm,PerspectiveCamera:di,Plane:Va,PlaneGeometry:hh,PlaneHelper:VB,PointLight:RP,PointLightHelper:NB,Points:tP,PointsMaterial:aw,PolarGridHelper:UB,PolyhedronGeometry:dc,PositionalAudio:cB,PropertyBinding:Sn,PropertyMixer:zP,QuadraticBezierCurve:dw,QuadraticBezierCurve3:hw,Quaternion:dr,QuaternionKeyframeTrack:bm,QuaternionLinearInterpolant:TP,RED_GREEN_RGTC2_Format:_y,RED_RGTC1_Format:$S,REVISION:Ky,RGBADepthPacking:PR,RGBAFormat:fr,RGBAIntegerFormat:i0,RGBA_ASTC_10x10_Format:py,RGBA_ASTC_10x5_Format:fy,RGBA_ASTC_10x6_Format:dy,RGBA_ASTC_10x8_Format:hy,RGBA_ASTC_12x10_Format:my,RGBA_ASTC_12x12_Format:gy,RGBA_ASTC_4x4_Format:iy,RGBA_ASTC_5x4_Format:ry,RGBA_ASTC_5x5_Format:sy,RGBA_ASTC_6x5_Format:oy,RGBA_ASTC_6x6_Format:ay,RGBA_ASTC_8x5_Format:ly,RGBA_ASTC_8x6_Format:cy,RGBA_ASTC_8x8_Format:uy,RGBA_BPTC_Format:Up,RGBA_ETC2_EAC_Format:ny,RGBA_PVRTC_2BPPV1_Format:Jv,RGBA_PVRTC_4BPPV1_Format:Qv,RGBA_S3TC_DXT1_Format:Lp,RGBA_S3TC_DXT3_Format:Dp,RGBA_S3TC_DXT5_Format:Op,RGBDepthPacking:Dk,RGBFormat:YS,RGBIntegerFormat:Pk,RGB_BPTC_SIGNED_Format:vy,RGB_BPTC_UNSIGNED_Format:yy,RGB_ETC1_Format:ey,RGB_ETC2_Format:ty,RGB_PVRTC_2BPPV1_Format:$v,RGB_PVRTC_4BPPV1_Format:Zv,RGB_S3TC_DXT1_Format:Np,RGDepthPacking:Ok,RGFormat:ZS,RGIntegerFormat:n0,RawShaderMaterial:hP,Ray:Ku,Raycaster:VP,RectAreaLight:NP,RedFormat:t0,RedIntegerFormat:ym,ReinhardToneMapping:_R,RenderTarget:HR,RepeatWrapping:qp,ReplaceStencilOp:kk,ReverseSubtractEquation:tR,RingGeometry:x0,SIGNED_RED_GREEN_RGTC2_Format:Sy,SIGNED_RED_RGTC1_Format:xy,SRGBColorSpace:Kr,SRGBTransfer:In,Scene:rw,ShaderChunk:ln,ShaderLib:ho,ShaderMaterial:yo,ShadowMaterial:dP,Shape:Uu,ShapeGeometry:_0,ShapePath:WB,ShapeUtils:qo,ShortType:WS,Skeleton:c0,SkeletonHelper:IB,SkinnedMesh:$R,Source:Mu,Sphere:hr,SphereGeometry:Em,Spherical:sS,SphericalHarmonics3:LP,SplineCurve:pw,SpotLight:AP,SpotLightHelper:PB,Sprite:KR,SpriteMaterial:sw,SrcAlphaFactor:Vv,SrcAlphaSaturateFactor:dR,SrcColorFactor:oR,StaticCopyUsage:tF,StaticDrawUsage:Jp,StaticReadUsage:Qk,StereoCamera:sB,StreamCopyUsage:iF,StreamDrawUsage:$k,StreamReadUsage:eF,StringKeyframeTrack:Qu,SubtractEquation:eR,SubtractiveBlending:q_,TOUCH:vu,TangentSpaceNormalMap:uc,TetrahedronGeometry:S0,Texture:ai,TextureLoader:$z,TextureUtils:ZB,TorusGeometry:w0,TorusKnotGeometry:M0,Triangle:Zr,TriangleFanDrawMode:Lk,TriangleStripDrawMode:Nk,TrianglesDrawMode:Ik,TubeGeometry:E0,UVMapping:$y,Uint16BufferAttribute:nw,Uint32BufferAttribute:iw,Uint8BufferAttribute:HF,Uint8ClampedBufferAttribute:GF,Uniform:Cw,UniformsGroup:EB,UniformsLib:at,UniformsUtils:jR,UnsignedByteType:go,UnsignedInt248Type:Gu,UnsignedInt5999Type:jS,UnsignedIntType:Qa,UnsignedShort4444Type:Jy,UnsignedShort5551Type:e0,UnsignedShortType:$d,VSMShadowMap:co,Vector2:ke,Vector3:q,Vector4:wn,VectorKeyframeTrack:am,VideoTexture:cz,WebGL3DRenderTarget:PF,WebGLArrayRenderTarget:RF,WebGLCoordinateSystem:Wo,WebGLCubeRenderTarget:YR,WebGLMultipleRenderTargets:$B,WebGLRenderTarget:vo,WebGLRenderer:KP,WebGLUtils:qP,WebGPUCoordinateSystem:em,WireframeGeometry:fP,WrapAroundEnding:$p,ZeroCurvatureEnding:Su,ZeroFactor:rR,ZeroSlopeEnding:wu,ZeroStencilOp:Uk,createCanvasElement:BR},Symbol.toStringTag,{value:"Module"}));var c_={exports:{}},Vl={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $1;function LG(){return $1||($1=1,Vl.ConcurrentRoot=1,Vl.ContinuousEventPriority=4,Vl.DefaultEventPriority=16,Vl.DiscreteEventPriority=1,Vl.IdleEventPriority=536870912,Vl.LegacyRoot=0),Vl}var Q1;function DG(){return Q1||(Q1=1,c_.exports=LG()),c_.exports}var Fd=DG();function OG(i){let e;const t=new Set,n=(h,m)=>{const g=typeof h=="function"?h(e):h;if(g!==e){const v=e;e=m?g:Object.assign({},e,g),t.forEach(y=>y(e,v))}},r=()=>e,s=(h,m=r,g=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let v=m(e);function y(){const M=m(e);if(!g(v,M)){const E=v;h(v=M,E)}}return t.add(y),()=>t.delete(y)},d={setState:n,getState:r,subscribe:(h,m,g)=>m||g?s(h,m,g):(t.add(h),()=>t.delete(h)),destroy:()=>t.clear()};return e=i(n,r,d),d}const UG=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),J1=UG?N.useEffect:N.useLayoutEffect;function kG(i){const e=typeof i=="function"?OG(i):i,t=(n=e.getState,r=Object.is)=>{const[,s]=N.useReducer(w=>w+1,0),a=e.getState(),c=N.useRef(a),d=N.useRef(n),h=N.useRef(r),m=N.useRef(!1),g=N.useRef();g.current===void 0&&(g.current=n(a));let v,y=!1;(c.current!==a||d.current!==n||h.current!==r||m.current)&&(v=n(a),y=!r(g.current,v)),J1(()=>{y&&(g.current=v),c.current=a,d.current=n,h.current=r,m.current=!1});const M=N.useRef(a);J1(()=>{const w=()=>{try{const A=e.getState(),C=d.current(A);h.current(g.current,C)||(c.current=A,g.current=C,s())}catch{m.current=!0,s()}},S=e.subscribe(w);return e.getState()!==M.current&&w(),S},[]);const E=y?v:g.current;return N.useDebugValue(E),E};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const r=n.length<=0;return{value:n.shift(),done:r}}}},t}var u_={exports:{}},f_={exports:{}},d_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eT;function FG(){return eT||(eT=1,(function(i){function e(B,ie){var te=B.length;B.push(ie);e:for(;0<te;){var X=te-1>>>1,fe=B[X];if(0<r(fe,ie))B[X]=ie,B[te]=fe,te=X;else break e}}function t(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var ie=B[0],te=B.pop();if(te!==ie){B[0]=te;e:for(var X=0,fe=B.length,Pe=fe>>>1;X<Pe;){var le=2*(X+1)-1,Ee=B[le],Ue=le+1,he=B[Ue];if(0>r(Ee,te))Ue<fe&&0>r(he,Ee)?(B[X]=he,B[Ue]=te,X=Ue):(B[X]=Ee,B[le]=te,X=le);else if(Ue<fe&&0>r(he,te))B[X]=he,B[Ue]=te,X=Ue;else break e}}return ie}function r(B,ie){var te=B.sortIndex-ie.sortIndex;return te!==0?te:B.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();i.unstable_now=function(){return a.now()-c}}var d=[],h=[],m=1,g=null,v=3,y=!1,M=!1,E=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(B){for(var ie=t(h);ie!==null;){if(ie.callback===null)n(h);else if(ie.startTime<=B)n(h),ie.sortIndex=ie.expirationTime,e(d,ie);else break;ie=t(h)}}function R(B){if(E=!1,C(B),!M)if(t(d)!==null)M=!0,ne(O);else{var ie=t(h);ie!==null&&de(R,ie.startTime-B)}}function O(B,ie){M=!1,E&&(E=!1,S(z),z=-1),y=!0;var te=v;try{for(C(ie),g=t(d);g!==null&&(!(g.expirationTime>ie)||B&&!G());){var X=g.callback;if(typeof X=="function"){g.callback=null,v=g.priorityLevel;var fe=X(g.expirationTime<=ie);ie=i.unstable_now(),typeof fe=="function"?g.callback=fe:g===t(d)&&n(d),C(ie)}else n(d);g=t(d)}if(g!==null)var Pe=!0;else{var le=t(h);le!==null&&de(R,le.startTime-ie),Pe=!1}return Pe}finally{g=null,v=te,y=!1}}var U=!1,F=null,z=-1,k=5,L=-1;function G(){return!(i.unstable_now()-L<k)}function J(){if(F!==null){var B=i.unstable_now();L=B;var ie=!0;try{ie=F(!0,B)}finally{ie?Q():(U=!1,F=null)}}else U=!1}var Q;if(typeof A=="function")Q=function(){A(J)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,ge=ce.port2;ce.port1.onmessage=J,Q=function(){ge.postMessage(null)}}else Q=function(){w(J,0)};function ne(B){F=B,U||(U=!0,Q())}function de(B,ie){z=w(function(){B(i.unstable_now())},ie)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(B){B.callback=null},i.unstable_continueExecution=function(){M||y||(M=!0,ne(O))},i.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<B?Math.floor(1e3/B):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_getFirstCallbackNode=function(){return t(d)},i.unstable_next=function(B){switch(v){case 1:case 2:case 3:var ie=3;break;default:ie=v}var te=v;v=ie;try{return B()}finally{v=te}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(B,ie){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var te=v;v=B;try{return ie()}finally{v=te}},i.unstable_scheduleCallback=function(B,ie,te){var X=i.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?X+te:X):te=X,B){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=te+fe,B={id:m++,callback:ie,priorityLevel:B,startTime:te,expirationTime:fe,sortIndex:-1},te>X?(B.sortIndex=te,e(h,B),t(d)===null&&B===t(h)&&(E?(S(z),z=-1):E=!0,de(R,te-X))):(B.sortIndex=fe,e(d,B),M||y||(M=!0,ne(O))),B},i.unstable_shouldYield=G,i.unstable_wrapCallback=function(B){var ie=v;return function(){var te=v;v=ie;try{return B.apply(this,arguments)}finally{v=te}}}})(d_)),d_}var tT;function ZP(){return tT||(tT=1,f_.exports=FG()),f_.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_,nT;function zG(){return nT||(nT=1,h_=function(e){var t={},n=Cy(),r=ZP(),s=Object.assign;function a(u){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+u,x=1;x<arguments.length;x++)f+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,d=Symbol.for("react.element"),h=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),M=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),O=Symbol.iterator;function U(u){return u===null||typeof u!="object"?null:(u=O&&u[O]||u["@@iterator"],typeof u=="function"?u:null)}function F(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case m:return"Fragment";case h:return"Portal";case v:return"Profiler";case g:return"StrictMode";case w:return"Suspense";case S:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case M:return(u.displayName||"Context")+".Consumer";case y:return(u._context.displayName||"Context")+".Provider";case E:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case A:return f=u.displayName||null,f!==null?f:F(u.type)||"Memo";case C:f=u._payload,u=u._init;try{return F(u(f))}catch{}}return null}function z(u){var f=u.type;switch(u.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=f.render,u=u.displayName||u.name||"",f.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F(f);case 8:return f===g?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function k(u){var f=u,x=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(x=f.return),u=f.return;while(u)}return f.tag===3?x:null}function L(u){if(k(u)!==u)throw Error(a(188))}function G(u){var f=u.alternate;if(!f){if(f=k(u),f===null)throw Error(a(188));return f!==u?null:u}for(var x=u,T=f;;){var P=x.return;if(P===null)break;var D=P.alternate;if(D===null){if(T=P.return,T!==null){x=T;continue}break}if(P.child===D.child){for(D=P.child;D;){if(D===x)return L(P),u;if(D===T)return L(P),f;D=D.sibling}throw Error(a(188))}if(x.return!==T.return)x=P,T=D;else{for(var Z=!1,ue=P.child;ue;){if(ue===x){Z=!0,x=P,T=D;break}if(ue===T){Z=!0,T=P,x=D;break}ue=ue.sibling}if(!Z){for(ue=D.child;ue;){if(ue===x){Z=!0,x=D,T=P;break}if(ue===T){Z=!0,T=D,x=P;break}ue=ue.sibling}if(!Z)throw Error(a(189))}}if(x.alternate!==T)throw Error(a(190))}if(x.tag!==3)throw Error(a(188));return x.stateNode.current===x?u:f}function J(u){return u=G(u),u!==null?Q(u):null}function Q(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var f=Q(u);if(f!==null)return f;u=u.sibling}return null}function ce(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var f=ce(u);if(f!==null)return f}u=u.sibling}return null}var ge=Array.isArray,ne=e.getPublicInstance,de=e.getRootHostContext,B=e.getChildHostContext,ie=e.prepareForCommit,te=e.resetAfterCommit,X=e.createInstance,fe=e.appendInitialChild,Pe=e.finalizeInitialChildren,le=e.prepareUpdate,Ee=e.shouldSetTextContent,Ue=e.createTextInstance,he=e.scheduleTimeout,Fe=e.cancelTimeout,Xe=e.noTimeout,Ge=e.isPrimaryRenderer,Qe=e.supportsMutation,Se=e.supportsPersistence,Le=e.supportsHydration,K=e.getInstanceFromNode,ht=e.preparePortalMount,Be=e.getCurrentEventPriority,nt=e.detachDeletedInstance,Ke=e.supportsMicrotasks,bt=e.scheduleMicrotask,tt=e.supportsTestSelectors,Y=e.findFiberRoot,W=e.getBoundingRect,ye=e.getTextContent,Re=e.isHiddenSubtree,ze=e.matchAccessibilityRole,De=e.setFocusIfFocusable,yt=e.setupIntersectionObserver,Je=e.appendChild,ct=e.appendChildToContainer,Xt=e.commitTextUpdate,We=e.commitMount,gt=e.commitUpdate,Dt=e.insertBefore,kt=e.insertInContainerBefore,dt=e.removeChild,re=e.removeChildFromContainer,Ie=e.resetTextContent,rt=e.hideInstance,ee=e.hideTextInstance,Ye=e.unhideInstance,Te=e.unhideTextInstance,Ne=e.clearContainer,lt=e.cloneInstance,st=e.createContainerChildSet,Lt=e.appendChildToContainerChildSet,pn=e.finalizeContainerChildren,Nn=e.replaceContainerChildren,en=e.cloneHiddenInstance,Kn=e.cloneHiddenTextInstance,ei=e.canHydrateInstance,el=e.canHydrateTextInstance,wo=e.canHydrateSuspenseInstance,vs=e.isSuspenseInstancePending,Jr=e.isSuspenseInstanceFallback,Jo=e.registerSuspenseInstanceRetry,es=e.getNextHydratableSibling,Mo=e.getFirstHydratableChild,Ju=e.getFirstHydratableChildWithinContainer,tl=e.getFirstHydratableChildWithinSuspenseInstance,ef=e.hydrateInstance,ys=e.hydrateTextInstance,tf=e.hydrateSuspenseInstance,nf=e.getNextHydratableInstanceAfterSuspenseInstance,rf=e.commitHydratedContainer,sf=e.commitHydratedSuspenseInstance,of=e.clearSuspenseBoundary,j=e.clearSuspenseBoundaryFromContainer,pe=e.shouldDeleteUnhydratedTailInstances,we=e.didNotMatchHydratedContainerTextInstance,be=e.didNotMatchHydratedTextInstance,oe;function je(u){if(oe===void 0)try{throw Error()}catch(x){var f=x.stack.trim().match(/\n( *(at )?)/);oe=f&&f[1]||""}return`
`+oe+u}var it=!1;function ft(u,f){if(!u||it)return"";it=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Ze){var T=Ze}Reflect.construct(u,[],f)}else{try{f.call()}catch(Ze){T=Ze}u.call(f.prototype)}else{try{throw Error()}catch(Ze){T=Ze}u()}}catch(Ze){if(Ze&&T&&typeof Ze.stack=="string"){for(var P=Ze.stack.split(`
`),D=T.stack.split(`
`),Z=P.length-1,ue=D.length-1;1<=Z&&0<=ue&&P[Z]!==D[ue];)ue--;for(;1<=Z&&0<=ue;Z--,ue--)if(P[Z]!==D[ue]){if(Z!==1||ue!==1)do if(Z--,ue--,0>ue||P[Z]!==D[ue]){var Ae=`
`+P[Z].replace(" at new "," at ");return u.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",u.displayName)),Ae}while(1<=Z&&0<=ue);break}}}finally{it=!1,Error.prepareStackTrace=x}return(u=u?u.displayName||u.name:"")?je(u):""}var xt=Object.prototype.hasOwnProperty,Vt=[],Ot=-1;function St(u){return{current:u}}function pt(u){0>Ot||(u.current=Vt[Ot],Vt[Ot]=null,Ot--)}function Nt(u,f){Ot++,Vt[Ot]=u.current,u.current=f}var sn={},on=St(sn),Gt=St(!1),At=sn;function Rn(u,f){var x=u.type.contextTypes;if(!x)return sn;var T=u.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===f)return T.__reactInternalMemoizedMaskedChildContext;var P={},D;for(D in x)P[D]=f[D];return T&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=f,u.__reactInternalMemoizedMaskedChildContext=P),P}function Ht(u){return u=u.childContextTypes,u!=null}function ti(){pt(Gt),pt(on)}function Dr(u,f,x){if(on.current!==sn)throw Error(a(168));Nt(on,f),Nt(Gt,x)}function Di(u,f,x){var T=u.stateNode;if(f=f.childContextTypes,typeof T.getChildContext!="function")return x;T=T.getChildContext();for(var P in T)if(!(P in f))throw Error(a(108,z(u)||"Unknown",P));return s({},x,T)}function xs(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||sn,At=on.current,Nt(on,u),Nt(Gt,Gt.current),!0}function Tn(u,f,x){var T=u.stateNode;if(!T)throw Error(a(169));x?(u=Di(u,f,At),T.__reactInternalMemoizedMergedChildContext=u,pt(Gt),pt(on),Nt(on,u)):pt(Gt),Nt(Gt,x)}var Fn=Math.clz32?Math.clz32:Ui,Oi=Math.log,Zn=Math.LN2;function Ui(u){return u>>>=0,u===0?32:31-(Oi(u)/Zn|0)|0}var _s=64,tn=4194304;function nl(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function pc(u,f){var x=u.pendingLanes;if(x===0)return 0;var T=0,P=u.suspendedLanes,D=u.pingedLanes,Z=x&268435455;if(Z!==0){var ue=Z&~P;ue!==0?T=nl(ue):(D&=Z,D!==0&&(T=nl(D)))}else Z=x&~P,Z!==0?T=nl(Z):D!==0&&(T=nl(D));if(T===0)return 0;if(f!==0&&f!==T&&(f&P)===0&&(P=T&-T,D=f&-f,P>=D||P===16&&(D&4194240)!==0))return f;if((T&4)!==0&&(T|=x&16),f=u.entangledLanes,f!==0)for(u=u.entanglements,f&=T;0<f;)x=31-Fn(f),P=1<<x,T|=u[x],f&=~P;return T}function mh(u,f){switch(u){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Am(u,f){for(var x=u.suspendedLanes,T=u.pingedLanes,P=u.expirationTimes,D=u.pendingLanes;0<D;){var Z=31-Fn(D),ue=1<<Z,Ae=P[Z];Ae===-1?((ue&x)===0||(ue&T)!==0)&&(P[Z]=mh(ue,f)):Ae<=f&&(u.expiredLanes|=ue),D&=~ue}}function af(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function lf(u){for(var f=[],x=0;31>x;x++)f.push(u);return f}function ea(u,f,x){u.pendingLanes|=f,f!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,f=31-Fn(f),u[f]=x}function cf(u,f){var x=u.pendingLanes&~f;u.pendingLanes=f,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=f,u.mutableReadLanes&=f,u.entangledLanes&=f,f=u.entanglements;var T=u.eventTimes;for(u=u.expirationTimes;0<x;){var P=31-Fn(x),D=1<<P;f[P]=0,T[P]=-1,u[P]=-1,x&=~D}}function Ss(u,f){var x=u.entangledLanes|=f;for(u=u.entanglements;x;){var T=31-Fn(x),P=1<<T;P&f|u[T]&f&&(u[T]|=f),x&=~P}}var an=0;function Os(u){return u&=-u,1<u?4<u?(u&268435455)!==0?16:536870912:4:1}var ta=r.unstable_scheduleCallback,il=r.unstable_cancelCallback,Eo=r.unstable_shouldYield,C0=r.unstable_requestPaint,li=r.unstable_now,na=r.unstable_ImmediatePriority,A0=r.unstable_UserBlockingPriority,uf=r.unstable_NormalPriority,ff=r.unstable_IdlePriority,mc=null,ws=null;function gc(u){if(ws&&typeof ws.onCommitFiberRoot=="function")try{ws.onCommitFiberRoot(mc,u,void 0,(u.current.flags&128)===128)}catch{}}function vc(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var Wi=typeof Object.is=="function"?Object.is:vc,Or=null,df=!1,gh=!1;function hf(u){Or===null?Or=[u]:Or.push(u)}function pf(u){df=!0,hf(u)}function Ur(){if(!gh&&Or!==null){gh=!0;var u=0,f=an;try{var x=Or;for(an=1;u<x.length;u++){var T=x[u];do T=T(!0);while(T!==null)}Or=null,df=!1}catch(P){throw Or!==null&&(Or=Or.slice(u+1)),ta(na,Ur),P}finally{an=f,gh=!1}}return null}var Rm=c.ReactCurrentBatchConfig;function ts(u,f){if(Wi(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var x=Object.keys(u),T=Object.keys(f);if(x.length!==T.length)return!1;for(T=0;T<x.length;T++){var P=x[T];if(!xt.call(f,P)||!Wi(u[P],f[P]))return!1}return!0}function vh(u){switch(u.tag){case 5:return je(u.type);case 16:return je("Lazy");case 13:return je("Suspense");case 19:return je("SuspenseList");case 0:case 2:case 15:return u=ft(u.type,!1),u;case 11:return u=ft(u.type.render,!1),u;case 1:return u=ft(u.type,!0),u;default:return""}}function er(u,f){if(u&&u.defaultProps){f=s({},f),u=u.defaultProps;for(var x in u)f[x]===void 0&&(f[x]=u[x]);return f}return f}var yc=St(null),ia=null,Us=null,mf=null;function ji(){mf=Us=ia=null}function ra(u,f,x){Ge?(Nt(yc,f._currentValue),f._currentValue=x):(Nt(yc,f._currentValue2),f._currentValue2=x)}function xc(u){var f=yc.current;pt(yc),Ge?u._currentValue=f:u._currentValue2=f}function sa(u,f,x){for(;u!==null;){var T=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,T!==null&&(T.childLanes|=f)):T!==null&&(T.childLanes&f)!==f&&(T.childLanes|=f),u===x)break;u=u.return}}function rl(u,f){ia=u,mf=Us=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&f)!==0&&(gi=!0),u.firstContext=null)}function tr(u){var f=Ge?u._currentValue:u._currentValue2;if(mf!==u)if(u={context:u,memoizedValue:f,next:null},Us===null){if(ia===null)throw Error(a(308));Us=u,ia.dependencies={lanes:0,firstContext:u}}else Us=Us.next=u;return f}var kr=null,Fr=!1;function sl(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yh(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function ks(u,f){return{eventTime:u,lane:f,tag:0,payload:null,callback:null,next:null}}function To(u,f){var x=u.updateQueue;x!==null&&(x=x.shared,Qn!==null&&(u.mode&1)!==0&&(Qt&2)===0?(u=x.interleaved,u===null?(f.next=f,kr===null?kr=[x]:kr.push(x)):(f.next=u.next,u.next=f),x.interleaved=f):(u=x.pending,u===null?f.next=f:(f.next=u.next,u.next=f),x.pending=f))}function gf(u,f,x){if(f=f.updateQueue,f!==null&&(f=f.shared,(x&4194240)!==0)){var T=f.lanes;T&=u.pendingLanes,x|=T,f.lanes=x,Ss(u,x)}}function vf(u,f){var x=u.updateQueue,T=u.alternate;if(T!==null&&(T=T.updateQueue,x===T)){var P=null,D=null;if(x=x.firstBaseUpdate,x!==null){do{var Z={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};D===null?P=D=Z:D=D.next=Z,x=x.next}while(x!==null);D===null?P=D=f:D=D.next=f}else P=D=f;x={baseState:T.baseState,firstBaseUpdate:P,lastBaseUpdate:D,shared:T.shared,effects:T.effects},u.updateQueue=x;return}u=x.lastBaseUpdate,u===null?x.firstBaseUpdate=f:u.next=f,x.lastBaseUpdate=f}function yf(u,f,x,T){var P=u.updateQueue;Fr=!1;var D=P.firstBaseUpdate,Z=P.lastBaseUpdate,ue=P.shared.pending;if(ue!==null){P.shared.pending=null;var Ae=ue,Ze=Ae.next;Ae.next=null,Z===null?D=Ze:Z.next=Ze,Z=Ae;var _t=u.alternate;_t!==null&&(_t=_t.updateQueue,ue=_t.lastBaseUpdate,ue!==Z&&(ue===null?_t.firstBaseUpdate=Ze:ue.next=Ze,_t.lastBaseUpdate=Ae))}if(D!==null){var Yt=P.baseState;Z=0,_t=Ze=Ae=null,ue=D;do{var Ut=ue.lane,nn=ue.eventTime;if((T&Ut)===Ut){_t!==null&&(_t=_t.next={eventTime:nn,lane:0,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null});e:{var ut=u,bi=ue;switch(Ut=f,nn=x,bi.tag){case 1:if(ut=bi.payload,typeof ut=="function"){Yt=ut.call(nn,Yt,Ut);break e}Yt=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=bi.payload,Ut=typeof ut=="function"?ut.call(nn,Yt,Ut):ut,Ut==null)break e;Yt=s({},Yt,Ut);break e;case 2:Fr=!0}}ue.callback!==null&&ue.lane!==0&&(u.flags|=64,Ut=P.effects,Ut===null?P.effects=[ue]:Ut.push(ue))}else nn={eventTime:nn,lane:Ut,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},_t===null?(Ze=_t=nn,Ae=Yt):_t=_t.next=nn,Z|=Ut;if(ue=ue.next,ue===null){if(ue=P.shared.pending,ue===null)break;Ut=ue,ue=Ut.next,Ut.next=null,P.lastBaseUpdate=Ut,P.shared.pending=null}}while(!0);if(_t===null&&(Ae=Yt),P.baseState=Ae,P.firstBaseUpdate=Ze,P.lastBaseUpdate=_t,f=P.shared.interleaved,f!==null){P=f;do Z|=P.lane,P=P.next;while(P!==f)}else D===null&&(P.shared.lanes=0);bs|=Z,u.lanes=Z,u.memoizedState=Yt}}function Pm(u,f,x){if(u=f.effects,f.effects=null,u!==null)for(f=0;f<u.length;f++){var T=u[f],P=T.callback;if(P!==null){if(T.callback=null,T=x,typeof P!="function")throw Error(a(191,P));P.call(T)}}}var Im=new n.Component().refs;function xh(u,f,x,T){f=u.memoizedState,x=x(T,f),x=x==null?f:s({},f,x),u.memoizedState=x,u.lanes===0&&(u.updateQueue.baseState=x)}var xf={isMounted:function(u){return(u=u._reactInternals)?k(u)===u:!1},enqueueSetState:function(u,f,x){u=u._reactInternals;var T=yn(),P=ls(u),D=ks(T,P);D.payload=f,x!=null&&(D.callback=x),To(u,D),f=zi(u,P,T),f!==null&&gf(f,u,P)},enqueueReplaceState:function(u,f,x){u=u._reactInternals;var T=yn(),P=ls(u),D=ks(T,P);D.tag=1,D.payload=f,x!=null&&(D.callback=x),To(u,D),f=zi(u,P,T),f!==null&&gf(f,u,P)},enqueueForceUpdate:function(u,f){u=u._reactInternals;var x=yn(),T=ls(u),P=ks(x,T);P.tag=2,f!=null&&(P.callback=f),To(u,P),f=zi(u,T,x),f!==null&&gf(f,u,T)}};function _h(u,f,x,T,P,D,Z){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(T,D,Z):f.prototype&&f.prototype.isPureReactComponent?!ts(x,T)||!ts(P,D):!0}function Nm(u,f,x){var T=!1,P=sn,D=f.contextType;return typeof D=="object"&&D!==null?D=tr(D):(P=Ht(f)?At:on.current,T=f.contextTypes,D=(T=T!=null)?Rn(u,P):sn),f=new f(x,D),u.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=xf,u.stateNode=f,f._reactInternals=u,T&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=P,u.__reactInternalMemoizedMaskedChildContext=D),f}function Lm(u,f,x,T){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(x,T),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(x,T),f.state!==u&&xf.enqueueReplaceState(f,f.state,null)}function Sh(u,f,x,T){var P=u.stateNode;P.props=x,P.state=u.memoizedState,P.refs=Im,sl(u);var D=f.contextType;typeof D=="object"&&D!==null?P.context=tr(D):(D=Ht(f)?At:on.current,P.context=Rn(u,D)),P.state=u.memoizedState,D=f.getDerivedStateFromProps,typeof D=="function"&&(xh(u,f,D,x),P.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(f=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),f!==P.state&&xf.enqueueReplaceState(P,P.state,null),yf(u,x,P,T),P.state=u.memoizedState),typeof P.componentDidMount=="function"&&(u.flags|=4194308)}var ol=[],bo=0,_f=null,Sf=0,zr=[],gr=0,oa=null,Fs=1,zs="";function aa(u,f){ol[bo++]=Sf,ol[bo++]=_f,_f=u,Sf=f}function Dm(u,f,x){zr[gr++]=Fs,zr[gr++]=zs,zr[gr++]=oa,oa=u;var T=Fs;u=zs;var P=32-Fn(T)-1;T&=~(1<<P),x+=1;var D=32-Fn(f)+P;if(30<D){var Z=P-P%5;D=(T&(1<<Z)-1).toString(32),T>>=Z,P-=Z,Fs=1<<32-Fn(f)+P|x<<P|T,zs=D+u}else Fs=1<<D|x<<P|T,zs=u}function wh(u){u.return!==null&&(aa(u,1),Dm(u,1,0))}function Mh(u){for(;u===_f;)_f=ol[--bo],ol[bo]=null,Sf=ol[--bo],ol[bo]=null;for(;u===oa;)oa=zr[--gr],zr[gr]=null,zs=zr[--gr],zr[gr]=null,Fs=zr[--gr],zr[gr]=null}var Xi=null,Si=null,Vn=!1,al=!1,Br=null;function Eh(u,f){var x=Mr(5,null,null,0);x.elementType="DELETED",x.stateNode=f,x.return=u,f=u.deletions,f===null?(u.deletions=[x],u.flags|=16):f.push(x)}function Th(u,f){switch(u.tag){case 5:return f=ei(f,u.type,u.pendingProps),f!==null?(u.stateNode=f,Xi=u,Si=Mo(f),!0):!1;case 6:return f=el(f,u.pendingProps),f!==null?(u.stateNode=f,Xi=u,Si=null,!0):!1;case 13:if(f=wo(f),f!==null){var x=oa!==null?{id:Fs,overflow:zs}:null;return u.memoizedState={dehydrated:f,treeContext:x,retryLane:1073741824},x=Mr(18,null,null,0),x.stateNode=f,x.return=u,u.child=x,Xi=u,Si=null,!0}return!1;default:return!1}}function wf(u){return(u.mode&1)!==0&&(u.flags&128)===0}function Co(u){if(Vn){var f=Si;if(f){var x=f;if(!Th(u,f)){if(wf(u))throw Error(a(418));f=es(x);var T=Xi;f&&Th(u,f)?Eh(T,x):(u.flags=u.flags&-4097|2,Vn=!1,Xi=u)}}else{if(wf(u))throw Error(a(418));u.flags=u.flags&-4097|2,Vn=!1,Xi=u}}}function Om(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Xi=u}function _c(u){if(!Le||u!==Xi)return!1;if(!Vn)return Om(u),Vn=!0,!1;if(u.tag!==3&&(u.tag!==5||pe(u.type)&&!Ee(u.type,u.memoizedProps))){var f=Si;if(f){if(wf(u)){for(u=Si;u;)u=es(u);throw Error(a(418))}for(;f;)Eh(u,f),f=es(f)}}if(Om(u),u.tag===13){if(!Le)throw Error(a(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(a(317));Si=nf(u)}else Si=Xi?es(u.stateNode):null;return!0}function ll(){Le&&(Si=Xi=null,al=Vn=!1)}function Mf(u){Br===null?Br=[u]:Br.push(u)}function cl(u,f,x){if(u=x.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(a(309));var T=x.stateNode}if(!T)throw Error(a(147,u));var P=T,D=""+u;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===D?f.ref:(f=function(Z){var ue=P.refs;ue===Im&&(ue=P.refs={}),Z===null?delete ue[D]:ue[D]=Z},f._stringRef=D,f)}if(typeof u!="string")throw Error(a(284));if(!x._owner)throw Error(a(290,u))}return u}function Ao(u,f){throw u=Object.prototype.toString.call(f),Error(a(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u))}function ul(u){var f=u._init;return f(u._payload)}function Um(u){function f(_e,me){if(u){var Ce=_e.deletions;Ce===null?(_e.deletions=[me],_e.flags|=16):Ce.push(me)}}function x(_e,me){if(!u)return null;for(;me!==null;)f(_e,me),me=me.sibling;return null}function T(_e,me){for(_e=new Map;me!==null;)me.key!==null?_e.set(me.key,me):_e.set(me.index,me),me=me.sibling;return _e}function P(_e,me){return _e=Js(_e,me),_e.index=0,_e.sibling=null,_e}function D(_e,me,Ce){return _e.index=Ce,u?(Ce=_e.alternate,Ce!==null?(Ce=Ce.index,Ce<me?(_e.flags|=2,me):Ce):(_e.flags|=2,me)):(_e.flags|=1048576,me)}function Z(_e){return u&&_e.alternate===null&&(_e.flags|=2),_e}function ue(_e,me,Ce,ot){return me===null||me.tag!==6?(me=Zf(Ce,_e.mode,ot),me.return=_e,me):(me=P(me,Ce),me.return=_e,me)}function Ae(_e,me,Ce,ot){var Rt=Ce.type;return Rt===m?_t(_e,me,Ce.props.children,ot,Ce.key):me!==null&&(me.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===C&&ul(Rt)===me.type)?(ot=P(me,Ce.props),ot.ref=cl(_e,me,Ce),ot.return=_e,ot):(ot=Kf(Ce.type,Ce.key,Ce.props,null,_e.mode,ot),ot.ref=cl(_e,me,Ce),ot.return=_e,ot)}function Ze(_e,me,Ce,ot){return me===null||me.tag!==4||me.stateNode.containerInfo!==Ce.containerInfo||me.stateNode.implementation!==Ce.implementation?(me=$f(Ce,_e.mode,ot),me.return=_e,me):(me=P(me,Ce.children||[]),me.return=_e,me)}function _t(_e,me,Ce,ot,Rt){return me===null||me.tag!==7?(me=Ra(Ce,_e.mode,ot,Rt),me.return=_e,me):(me=P(me,Ce),me.return=_e,me)}function Yt(_e,me,Ce){if(typeof me=="string"&&me!==""||typeof me=="number")return me=Zf(""+me,_e.mode,Ce),me.return=_e,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case d:return Ce=Kf(me.type,me.key,me.props,null,_e.mode,Ce),Ce.ref=cl(_e,null,me),Ce.return=_e,Ce;case h:return me=$f(me,_e.mode,Ce),me.return=_e,me;case C:var ot=me._init;return Yt(_e,ot(me._payload),Ce)}if(ge(me)||U(me))return me=Ra(me,_e.mode,Ce,null),me.return=_e,me;Ao(_e,me)}return null}function Ut(_e,me,Ce,ot){var Rt=me!==null?me.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Rt!==null?null:ue(_e,me,""+Ce,ot);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case d:return Ce.key===Rt?Ae(_e,me,Ce,ot):null;case h:return Ce.key===Rt?Ze(_e,me,Ce,ot):null;case C:return Rt=Ce._init,Ut(_e,me,Rt(Ce._payload),ot)}if(ge(Ce)||U(Ce))return Rt!==null?null:_t(_e,me,Ce,ot,null);Ao(_e,Ce)}return null}function nn(_e,me,Ce,ot,Rt){if(typeof ot=="string"&&ot!==""||typeof ot=="number")return _e=_e.get(Ce)||null,ue(me,_e,""+ot,Rt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case d:return _e=_e.get(ot.key===null?Ce:ot.key)||null,Ae(me,_e,ot,Rt);case h:return _e=_e.get(ot.key===null?Ce:ot.key)||null,Ze(me,_e,ot,Rt);case C:var Zt=ot._init;return nn(_e,me,Ce,Zt(ot._payload),Rt)}if(ge(ot)||U(ot))return _e=_e.get(Ce)||null,_t(me,_e,ot,Rt,null);Ao(me,ot)}return null}function ut(_e,me,Ce,ot){for(var Rt=null,Zt=null,qt=me,gn=me=0,ii=null;qt!==null&&gn<Ce.length;gn++){qt.index>gn?(ii=qt,qt=null):ii=qt.sibling;var mn=Ut(_e,qt,Ce[gn],ot);if(mn===null){qt===null&&(qt=ii);break}u&&qt&&mn.alternate===null&&f(_e,qt),me=D(mn,me,gn),Zt===null?Rt=mn:Zt.sibling=mn,Zt=mn,qt=ii}if(gn===Ce.length)return x(_e,qt),Vn&&aa(_e,gn),Rt;if(qt===null){for(;gn<Ce.length;gn++)qt=Yt(_e,Ce[gn],ot),qt!==null&&(me=D(qt,me,gn),Zt===null?Rt=qt:Zt.sibling=qt,Zt=qt);return Vn&&aa(_e,gn),Rt}for(qt=T(_e,qt);gn<Ce.length;gn++)ii=nn(qt,_e,gn,Ce[gn],ot),ii!==null&&(u&&ii.alternate!==null&&qt.delete(ii.key===null?gn:ii.key),me=D(ii,me,gn),Zt===null?Rt=ii:Zt.sibling=ii,Zt=ii);return u&&qt.forEach(function(eo){return f(_e,eo)}),Vn&&aa(_e,gn),Rt}function bi(_e,me,Ce,ot){var Rt=U(Ce);if(typeof Rt!="function")throw Error(a(150));if(Ce=Rt.call(Ce),Ce==null)throw Error(a(151));for(var Zt=Rt=null,qt=me,gn=me=0,ii=null,mn=Ce.next();qt!==null&&!mn.done;gn++,mn=Ce.next()){qt.index>gn?(ii=qt,qt=null):ii=qt.sibling;var eo=Ut(_e,qt,mn.value,ot);if(eo===null){qt===null&&(qt=ii);break}u&&qt&&eo.alternate===null&&f(_e,qt),me=D(eo,me,gn),Zt===null?Rt=eo:Zt.sibling=eo,Zt=eo,qt=ii}if(mn.done)return x(_e,qt),Vn&&aa(_e,gn),Rt;if(qt===null){for(;!mn.done;gn++,mn=Ce.next())mn=Yt(_e,mn.value,ot),mn!==null&&(me=D(mn,me,gn),Zt===null?Rt=mn:Zt.sibling=mn,Zt=mn);return Vn&&aa(_e,gn),Rt}for(qt=T(_e,qt);!mn.done;gn++,mn=Ce.next())mn=nn(qt,_e,gn,mn.value,ot),mn!==null&&(u&&mn.alternate!==null&&qt.delete(mn.key===null?gn:mn.key),me=D(mn,me,gn),Zt===null?Rt=mn:Zt.sibling=mn,Zt=mn);return u&&qt.forEach(function(np){return f(_e,np)}),Vn&&aa(_e,gn),Rt}function Er(_e,me,Ce,ot){if(typeof Ce=="object"&&Ce!==null&&Ce.type===m&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case d:e:{for(var Rt=Ce.key,Zt=me;Zt!==null;){if(Zt.key===Rt){if(Rt=Ce.type,Rt===m){if(Zt.tag===7){x(_e,Zt.sibling),me=P(Zt,Ce.props.children),me.return=_e,_e=me;break e}}else if(Zt.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===C&&ul(Rt)===Zt.type){x(_e,Zt.sibling),me=P(Zt,Ce.props),me.ref=cl(_e,Zt,Ce),me.return=_e,_e=me;break e}x(_e,Zt);break}else f(_e,Zt);Zt=Zt.sibling}Ce.type===m?(me=Ra(Ce.props.children,_e.mode,ot,Ce.key),me.return=_e,_e=me):(ot=Kf(Ce.type,Ce.key,Ce.props,null,_e.mode,ot),ot.ref=cl(_e,me,Ce),ot.return=_e,_e=ot)}return Z(_e);case h:e:{for(Zt=Ce.key;me!==null;){if(me.key===Zt)if(me.tag===4&&me.stateNode.containerInfo===Ce.containerInfo&&me.stateNode.implementation===Ce.implementation){x(_e,me.sibling),me=P(me,Ce.children||[]),me.return=_e,_e=me;break e}else{x(_e,me);break}else f(_e,me);me=me.sibling}me=$f(Ce,_e.mode,ot),me.return=_e,_e=me}return Z(_e);case C:return Zt=Ce._init,Er(_e,me,Zt(Ce._payload),ot)}if(ge(Ce))return ut(_e,me,Ce,ot);if(U(Ce))return bi(_e,me,Ce,ot);Ao(_e,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"?(Ce=""+Ce,me!==null&&me.tag===6?(x(_e,me.sibling),me=P(me,Ce),me.return=_e,_e=me):(x(_e,me),me=Zf(Ce,_e.mode,ot),me.return=_e,_e=me),Z(_e)):x(_e,me)}return Er}var Bs=Um(!0),km=Um(!1),fl={},nr=St(fl),la=St(fl),ca=St(fl);function ns(u){if(u===fl)throw Error(a(174));return u}function Ef(u,f){Nt(ca,f),Nt(la,u),Nt(nr,fl),u=de(f),pt(nr),Nt(nr,u)}function dl(){pt(nr),pt(la),pt(ca)}function Fm(u){var f=ns(ca.current),x=ns(nr.current);f=B(x,u.type,f),x!==f&&(Nt(la,u),Nt(nr,f))}function bh(u){la.current===u&&(pt(nr),pt(la))}var Gn=St(0);function Tf(u){for(var f=u;f!==null;){if(f.tag===13){var x=f.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||vs(x)||Jr(x)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var vr=[];function ua(){for(var u=0;u<vr.length;u++){var f=vr[u];Ge?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}vr.length=0}var Sc=c.ReactCurrentDispatcher,yr=c.ReactCurrentBatchConfig,fa=0,Wn=null,hi=null,pi=null,bf=!1,Ms=!1,da=0,wc=0;function mi(){throw Error(a(321))}function Cf(u,f){if(f===null)return!1;for(var x=0;x<f.length&&x<u.length;x++)if(!Wi(u[x],f[x]))return!1;return!0}function hl(u,f,x,T,P,D){if(fa=D,Wn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Sc.current=u===null||u.memoizedState===null?Nh:Lh,u=x(T,P),Ms){D=0;do{if(Ms=!1,da=0,25<=D)throw Error(a(301));D+=1,pi=hi=null,f.updateQueue=null,Sc.current=Dh,u=x(T,P)}while(Ms)}if(Sc.current=vl,f=hi!==null&&hi.next!==null,fa=0,pi=hi=Wn=null,bf=!1,f)throw Error(a(300));return u}function Ro(){var u=da!==0;return da=0,u}function is(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pi===null?Wn.memoizedState=pi=u:pi=pi.next=u,pi}function rs(){if(hi===null){var u=Wn.alternate;u=u!==null?u.memoizedState:null}else u=hi.next;var f=pi===null?Wn.memoizedState:pi.next;if(f!==null)pi=f,hi=u;else{if(u===null)throw Error(a(310));hi=u,u={memoizedState:hi.memoizedState,baseState:hi.baseState,baseQueue:hi.baseQueue,queue:hi.queue,next:null},pi===null?Wn.memoizedState=pi=u:pi=pi.next=u}return pi}function Es(u,f){return typeof f=="function"?f(u):f}function Mc(u){var f=rs(),x=f.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=u;var T=hi,P=T.baseQueue,D=x.pending;if(D!==null){if(P!==null){var Z=P.next;P.next=D.next,D.next=Z}T.baseQueue=P=D,x.pending=null}if(P!==null){D=P.next,T=T.baseState;var ue=Z=null,Ae=null,Ze=D;do{var _t=Ze.lane;if((fa&_t)===_t)Ae!==null&&(Ae=Ae.next={lane:0,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null}),T=Ze.hasEagerState?Ze.eagerState:u(T,Ze.action);else{var Yt={lane:_t,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null};Ae===null?(ue=Ae=Yt,Z=T):Ae=Ae.next=Yt,Wn.lanes|=_t,bs|=_t}Ze=Ze.next}while(Ze!==null&&Ze!==D);Ae===null?Z=T:Ae.next=ue,Wi(T,f.memoizedState)||(gi=!0),f.memoizedState=T,f.baseState=Z,f.baseQueue=Ae,x.lastRenderedState=T}if(u=x.interleaved,u!==null){P=u;do D=P.lane,Wn.lanes|=D,bs|=D,P=P.next;while(P!==u)}else P===null&&(x.lanes=0);return[f.memoizedState,x.dispatch]}function Ec(u){var f=rs(),x=f.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=u;var T=x.dispatch,P=x.pending,D=f.memoizedState;if(P!==null){x.pending=null;var Z=P=P.next;do D=u(D,Z.action),Z=Z.next;while(Z!==P);Wi(D,f.memoizedState)||(gi=!0),f.memoizedState=D,f.baseQueue===null&&(f.baseState=D),x.lastRenderedState=D}return[D,T]}function Ch(){}function Ah(u,f){var x=Wn,T=rs(),P=f(),D=!Wi(T.memoizedState,P);if(D&&(T.memoizedState=P,gi=!0),T=T.queue,pl(Vs.bind(null,x,T,u),[u]),T.getSnapshot!==f||D||pi!==null&&pi.memoizedState.tag&1){if(x.flags|=2048,bc(9,Ph.bind(null,x,T,P,f),void 0,null),Qn===null)throw Error(a(349));(fa&30)!==0||Rh(x,f,P)}return P}function Rh(u,f,x){u.flags|=16384,u={getSnapshot:f,value:x},f=Wn.updateQueue,f===null?(f={lastEffect:null,stores:null},Wn.updateQueue=f,f.stores=[u]):(x=f.stores,x===null?f.stores=[u]:x.push(u))}function Ph(u,f,x,T){f.value=x,f.getSnapshot=T,Af(f)&&zi(u,1,-1)}function Vs(u,f,x){return x(function(){Af(f)&&zi(u,1,-1)})}function Af(u){var f=u.getSnapshot;u=u.value;try{var x=f();return!Wi(u,x)}catch{return!0}}function Tc(u){var f=is();return typeof u=="function"&&(u=u()),f.memoizedState=f.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:u},f.queue=u,u=u.dispatch=R0.bind(null,Wn,u),[f.memoizedState,u]}function bc(u,f,x,T){return u={tag:u,create:f,destroy:x,deps:T,next:null},f=Wn.updateQueue,f===null?(f={lastEffect:null,stores:null},Wn.updateQueue=f,f.lastEffect=u.next=u):(x=f.lastEffect,x===null?f.lastEffect=u.next=u:(T=x.next,x.next=u,u.next=T,f.lastEffect=u)),u}function zm(){return rs().memoizedState}function Po(u,f,x,T){var P=is();Wn.flags|=u,P.memoizedState=bc(1|f,x,void 0,T===void 0?null:T)}function Rf(u,f,x,T){var P=rs();T=T===void 0?null:T;var D=void 0;if(hi!==null){var Z=hi.memoizedState;if(D=Z.destroy,T!==null&&Cf(T,Z.deps)){P.memoizedState=bc(f,x,D,T);return}}Wn.flags|=u,P.memoizedState=bc(1|f,x,D,T)}function Pf(u,f){return Po(8390656,8,u,f)}function pl(u,f){return Rf(2048,8,u,f)}function Ln(u,f){return Rf(4,2,u,f)}function If(u,f){return Rf(4,4,u,f)}function Cc(u,f){if(typeof f=="function")return u=u(),f(u),function(){f(null)};if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function ml(u,f,x){return x=x!=null?x.concat([u]):null,Rf(4,4,Cc.bind(null,f,u),x)}function Nf(){}function Lf(u,f){var x=rs();f=f===void 0?null:f;var T=x.memoizedState;return T!==null&&f!==null&&Cf(f,T[1])?T[0]:(x.memoizedState=[u,f],u)}function gl(u,f){var x=rs();f=f===void 0?null:f;var T=x.memoizedState;return T!==null&&f!==null&&Cf(f,T[1])?T[0]:(u=u(),x.memoizedState=[u,f],u)}function Df(u,f){var x=an;an=x!==0&&4>x?x:4,u(!0);var T=yr.transition;yr.transition={};try{u(!1),f()}finally{an=x,yr.transition=T}}function ha(){return rs().memoizedState}function Bm(u,f,x){var T=ls(u);x={lane:T,action:x,hasEagerState:!1,eagerState:null,next:null},Vm(u)?Ih(f,x):(Ac(u,f,x),x=yn(),u=zi(u,T,x),u!==null&&Rc(u,f,T))}function R0(u,f,x){var T=ls(u),P={lane:T,action:x,hasEagerState:!1,eagerState:null,next:null};if(Vm(u))Ih(f,P);else{Ac(u,f,P);var D=u.alternate;if(u.lanes===0&&(D===null||D.lanes===0)&&(D=f.lastRenderedReducer,D!==null))try{var Z=f.lastRenderedState,ue=D(Z,x);if(P.hasEagerState=!0,P.eagerState=ue,Wi(ue,Z))return}catch{}finally{}x=yn(),u=zi(u,T,x),u!==null&&Rc(u,f,T)}}function Vm(u){var f=u.alternate;return u===Wn||f!==null&&f===Wn}function Ih(u,f){Ms=bf=!0;var x=u.pending;x===null?f.next=f:(f.next=x.next,x.next=f),u.pending=f}function Ac(u,f,x){Qn!==null&&(u.mode&1)!==0&&(Qt&2)===0?(u=f.interleaved,u===null?(x.next=x,kr===null?kr=[f]:kr.push(f)):(x.next=u.next,u.next=x),f.interleaved=x):(u=f.pending,u===null?x.next=x:(x.next=u.next,u.next=x),f.pending=x)}function Rc(u,f,x){if((x&4194240)!==0){var T=f.lanes;T&=u.pendingLanes,x|=T,f.lanes=x,Ss(u,x)}}var vl={readContext:tr,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Nh={readContext:tr,useCallback:function(u,f){return is().memoizedState=[u,f===void 0?null:f],u},useContext:tr,useEffect:Pf,useImperativeHandle:function(u,f,x){return x=x!=null?x.concat([u]):null,Po(4194308,4,Cc.bind(null,f,u),x)},useLayoutEffect:function(u,f){return Po(4194308,4,u,f)},useInsertionEffect:function(u,f){return Po(4,2,u,f)},useMemo:function(u,f){var x=is();return f=f===void 0?null:f,u=u(),x.memoizedState=[u,f],u},useReducer:function(u,f,x){var T=is();return f=x!==void 0?x(f):f,T.memoizedState=T.baseState=f,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:f},T.queue=u,u=u.dispatch=Bm.bind(null,Wn,u),[T.memoizedState,u]},useRef:function(u){var f=is();return u={current:u},f.memoizedState=u},useState:Tc,useDebugValue:Nf,useDeferredValue:function(u){var f=Tc(u),x=f[0],T=f[1];return Pf(function(){var P=yr.transition;yr.transition={};try{T(u)}finally{yr.transition=P}},[u]),x},useTransition:function(){var u=Tc(!1),f=u[0];return u=Df.bind(null,u[1]),is().memoizedState=u,[f,u]},useMutableSource:function(){},useSyncExternalStore:function(u,f,x){var T=Wn,P=is();if(Vn){if(x===void 0)throw Error(a(407));x=x()}else{if(x=f(),Qn===null)throw Error(a(349));(fa&30)!==0||Rh(T,f,x)}P.memoizedState=x;var D={value:x,getSnapshot:f};return P.queue=D,Pf(Vs.bind(null,T,D,u),[u]),T.flags|=2048,bc(9,Ph.bind(null,T,D,x,f),void 0,null),x},useId:function(){var u=is(),f=Qn.identifierPrefix;if(Vn){var x=zs,T=Fs;x=(T&~(1<<32-Fn(T)-1)).toString(32)+x,f=":"+f+"R"+x,x=da++,0<x&&(f+="H"+x.toString(32)),f+=":"}else x=wc++,f=":"+f+"r"+x.toString(32)+":";return u.memoizedState=f},unstable_isNewReconciler:!1},Lh={readContext:tr,useCallback:Lf,useContext:tr,useEffect:pl,useImperativeHandle:ml,useInsertionEffect:Ln,useLayoutEffect:If,useMemo:gl,useReducer:Mc,useRef:zm,useState:function(){return Mc(Es)},useDebugValue:Nf,useDeferredValue:function(u){var f=Mc(Es),x=f[0],T=f[1];return pl(function(){var P=yr.transition;yr.transition={};try{T(u)}finally{yr.transition=P}},[u]),x},useTransition:function(){var u=Mc(Es)[0],f=rs().memoizedState;return[u,f]},useMutableSource:Ch,useSyncExternalStore:Ah,useId:ha,unstable_isNewReconciler:!1},Dh={readContext:tr,useCallback:Lf,useContext:tr,useEffect:pl,useImperativeHandle:ml,useInsertionEffect:Ln,useLayoutEffect:If,useMemo:gl,useReducer:Ec,useRef:zm,useState:function(){return Ec(Es)},useDebugValue:Nf,useDeferredValue:function(u){var f=Ec(Es),x=f[0],T=f[1];return pl(function(){var P=yr.transition;yr.transition={};try{T(u)}finally{yr.transition=P}},[u]),x},useTransition:function(){var u=Ec(Es)[0],f=rs().memoizedState;return[u,f]},useMutableSource:Ch,useSyncExternalStore:Ah,useId:ha,unstable_isNewReconciler:!1};function Oh(u,f){try{var x="",T=f;do x+=vh(T),T=T.return;while(T);var P=x}catch(D){P=`
Error generating stack: `+D.message+`
`+D.stack}return{value:u,source:f,stack:P}}function Of(u,f){try{console.error(f.value)}catch(x){setTimeout(function(){throw x})}}var P0=typeof WeakMap=="function"?WeakMap:Map;function Hm(u,f,x){x=ks(-1,x),x.tag=3,x.payload={element:null};var T=f.value;return x.callback=function(){Ml||(Ml=!0,Bn=T),Of(u,f)},x}function Uf(u,f,x){x=ks(-1,x),x.tag=3;var T=u.type.getDerivedStateFromError;if(typeof T=="function"){var P=f.value;x.payload=function(){return T(P)},x.callback=function(){Of(u,f)}}var D=u.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(x.callback=function(){Of(u,f),typeof T!="function"&&(as===null?as=new Set([this]):as.add(this));var Z=f.stack;this.componentDidCatch(f.value,{componentStack:Z!==null?Z:""})}),x}function Hs(u,f,x){var T=u.pingCache;if(T===null){T=u.pingCache=new P0;var P=new Set;T.set(f,P)}else P=T.get(f),P===void 0&&(P=new Set,T.set(f,P));P.has(x)||(P.add(x),u=Jh.bind(null,u,f,x),f.then(u,u))}function Uh(u){do{var f;if((f=u.tag===13)&&(f=u.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return u;u=u.return}while(u!==null);return null}function pa(u,f,x,T,P){return(u.mode&1)===0?(u===f?u.flags|=65536:(u.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(f=ks(-1,1),f.tag=2,To(x,f))),x.lanes|=1),u):(u.flags|=65536,u.lanes=P,u)}function ci(u){u.flags|=4}function yl(u,f){if(u!==null&&u.child===f.child)return!0;if((f.flags&16)!==0)return!1;for(u=f.child;u!==null;){if((u.flags&12854)!==0||(u.subtreeFlags&12854)!==0)return!1;u=u.sibling}return!0}var xr,ma,kf,Ff;if(Qe)xr=function(u,f){for(var x=f.child;x!==null;){if(x.tag===5||x.tag===6)fe(u,x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},ma=function(){},kf=function(u,f,x,T,P){if(u=u.memoizedProps,u!==T){var D=f.stateNode,Z=ns(nr.current);x=le(D,x,u,T,P,Z),(f.updateQueue=x)&&ci(f)}},Ff=function(u,f,x,T){x!==T&&ci(f)};else if(Se){xr=function(u,f,x,T){for(var P=f.child;P!==null;){if(P.tag===5){var D=P.stateNode;x&&T&&(D=en(D,P.type,P.memoizedProps,P)),fe(u,D)}else if(P.tag===6)D=P.stateNode,x&&T&&(D=Kn(D,P.memoizedProps,P)),fe(u,D);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)D=P.child,D!==null&&(D.return=P),xr(u,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===f)break;for(;P.sibling===null;){if(P.return===null||P.return===f)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};var Io=function(u,f,x,T){for(var P=f.child;P!==null;){if(P.tag===5){var D=P.stateNode;x&&T&&(D=en(D,P.type,P.memoizedProps,P)),Lt(u,D)}else if(P.tag===6)D=P.stateNode,x&&T&&(D=Kn(D,P.memoizedProps,P)),Lt(u,D);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)D=P.child,D!==null&&(D.return=P),Io(u,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===f)break;for(;P.sibling===null;){if(P.return===null||P.return===f)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};ma=function(u,f){var x=f.stateNode;if(!yl(u,f)){u=x.containerInfo;var T=st(u);Io(T,f,!1,!1),x.pendingChildren=T,ci(f),pn(u,T)}},kf=function(u,f,x,T,P){var D=u.stateNode,Z=u.memoizedProps;if((u=yl(u,f))&&Z===T)f.stateNode=D;else{var ue=f.stateNode,Ae=ns(nr.current),Ze=null;Z!==T&&(Ze=le(ue,x,Z,T,P,Ae)),u&&Ze===null?f.stateNode=D:(D=lt(D,Ze,x,Z,T,f,u,ue),Pe(D,x,T,P,Ae)&&ci(f),f.stateNode=D,u?ci(f):xr(D,f,!1,!1))}},Ff=function(u,f,x,T){x!==T?(u=ns(ca.current),x=ns(nr.current),f.stateNode=Ue(T,u,x,f),ci(f)):f.stateNode=u.stateNode}}else ma=function(){},kf=function(){},Ff=function(){};function Gs(u,f){if(!Vn)switch(u.tailMode){case"hidden":f=u.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?u.tail=null:x.sibling=null;break;case"collapsed":x=u.tail;for(var T=null;x!==null;)x.alternate!==null&&(T=x),x=x.sibling;T===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:T.sibling=null}}function $n(u){var f=u.alternate!==null&&u.alternate.child===u.child,x=0,T=0;if(f)for(var P=u.child;P!==null;)x|=P.lanes|P.childLanes,T|=P.subtreeFlags&14680064,T|=P.flags&14680064,P.return=u,P=P.sibling;else for(P=u.child;P!==null;)x|=P.lanes|P.childLanes,T|=P.subtreeFlags,T|=P.flags,P.return=u,P=P.sibling;return u.subtreeFlags|=T,u.childLanes=x,f}function zf(u,f,x){var T=f.pendingProps;switch(Mh(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $n(f),null;case 1:return Ht(f.type)&&ti(),$n(f),null;case 3:return T=f.stateNode,dl(),pt(Gt),pt(on),ua(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(u===null||u.child===null)&&(_c(f)?ci(f):u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,Br!==null&&(Hc(Br),Br=null))),ma(u,f),$n(f),null;case 5:bh(f),x=ns(ca.current);var P=f.type;if(u!==null&&f.stateNode!=null)kf(u,f,P,T,x),u.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!T){if(f.stateNode===null)throw Error(a(166));return $n(f),null}if(u=ns(nr.current),_c(f)){if(!Le)throw Error(a(175));u=ef(f.stateNode,f.type,f.memoizedProps,x,u,f,!al),f.updateQueue=u,u!==null&&ci(f)}else{var D=X(P,T,x,u,f);xr(D,f,!1,!1),f.stateNode=D,Pe(D,P,T,x,u)&&ci(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return $n(f),null;case 6:if(u&&f.stateNode!=null)Ff(u,f,u.memoizedProps,T);else{if(typeof T!="string"&&f.stateNode===null)throw Error(a(166));if(u=ns(ca.current),x=ns(nr.current),_c(f)){if(!Le)throw Error(a(176));if(u=f.stateNode,T=f.memoizedProps,(x=ys(u,T,f,!al))&&(P=Xi,P!==null))switch(D=(P.mode&1)!==0,P.tag){case 3:we(P.stateNode.containerInfo,u,T,D);break;case 5:be(P.type,P.memoizedProps,P.stateNode,u,T,D)}x&&ci(f)}else f.stateNode=Ue(T,u,x,f)}return $n(f),null;case 13:if(pt(Gn),T=f.memoizedState,Vn&&Si!==null&&(f.mode&1)!==0&&(f.flags&128)===0){for(u=Si;u;)u=es(u);return ll(),f.flags|=98560,f}if(T!==null&&T.dehydrated!==null){if(T=_c(f),u===null){if(!T)throw Error(a(318));if(!Le)throw Error(a(344));if(u=f.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(a(317));tf(u,f)}else ll(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;return $n(f),null}return Br!==null&&(Hc(Br),Br=null),(f.flags&128)!==0?(f.lanes=x,f):(T=T!==null,x=!1,u===null?_c(f):x=u.memoizedState!==null,T&&!x&&(f.child.flags|=8192,(f.mode&1)!==0&&(u===null||(Gn.current&1)!==0?Yn===0&&(Yn=3):Xf())),f.updateQueue!==null&&(f.flags|=4),$n(f),null);case 4:return dl(),ma(u,f),u===null&&ht(f.stateNode.containerInfo),$n(f),null;case 10:return xc(f.type._context),$n(f),null;case 17:return Ht(f.type)&&ti(),$n(f),null;case 19:if(pt(Gn),P=f.memoizedState,P===null)return $n(f),null;if(T=(f.flags&128)!==0,D=P.rendering,D===null)if(T)Gs(P,!1);else{if(Yn!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if(D=Tf(u),D!==null){for(f.flags|=128,Gs(P,!1),u=D.updateQueue,u!==null&&(f.updateQueue=u,f.flags|=4),f.subtreeFlags=0,u=x,T=f.child;T!==null;)x=T,P=u,x.flags&=14680066,D=x.alternate,D===null?(x.childLanes=0,x.lanes=P,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=D.childLanes,x.lanes=D.lanes,x.child=D.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=D.memoizedProps,x.memoizedState=D.memoizedState,x.updateQueue=D.updateQueue,x.type=D.type,P=D.dependencies,x.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext}),T=T.sibling;return Nt(Gn,Gn.current&1|2),f.child}u=u.sibling}P.tail!==null&&li()>Do&&(f.flags|=128,T=!0,Gs(P,!1),f.lanes=4194304)}else{if(!T)if(u=Tf(D),u!==null){if(f.flags|=128,T=!0,u=u.updateQueue,u!==null&&(f.updateQueue=u,f.flags|=4),Gs(P,!0),P.tail===null&&P.tailMode==="hidden"&&!D.alternate&&!Vn)return $n(f),null}else 2*li()-P.renderingStartTime>Do&&x!==1073741824&&(f.flags|=128,T=!0,Gs(P,!1),f.lanes=4194304);P.isBackwards?(D.sibling=f.child,f.child=D):(u=P.last,u!==null?u.sibling=D:f.child=D,P.last=D)}return P.tail!==null?(f=P.tail,P.rendering=f,P.tail=f.sibling,P.renderingStartTime=li(),f.sibling=null,u=Gn.current,Nt(Gn,T?u&1|2:u&1),f):($n(f),null);case 22:case 23:return Gc(),T=f.memoizedState!==null,u!==null&&u.memoizedState!==null!==T&&(f.flags|=8192),T&&(f.mode&1)!==0?(Fi&1073741824)!==0&&($n(f),Qe&&f.subtreeFlags&6&&(f.flags|=8192)):$n(f),null;case 24:return null;case 25:return null}throw Error(a(156,f.tag))}var kh=c.ReactCurrentOwner,gi=!1;function Xn(u,f,x,T){f.child=u===null?km(f,null,x,T):Bs(f,u.child,x,T)}function Dn(u,f,x,T,P){x=x.render;var D=f.ref;return rl(f,P),T=hl(u,f,x,T,D,P),x=Ro(),u!==null&&!gi?(f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~P,ir(u,f,P)):(Vn&&x&&wh(f),f.flags|=1,Xn(u,f,T,P),f.child)}function Pn(u,f,x,T,P){if(u===null){var D=x.type;return typeof D=="function"&&!qf(D)&&D.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(f.tag=15,f.type=D,Ws(u,f,D,T,P)):(u=Kf(x.type,null,T,f,f.mode,P),u.ref=f.ref,u.return=f,f.child=u)}if(D=u.child,(u.lanes&P)===0){var Z=D.memoizedProps;if(x=x.compare,x=x!==null?x:ts,x(Z,T)&&u.ref===f.ref)return ir(u,f,P)}return f.flags|=1,u=Js(D,T),u.ref=f.ref,u.return=f,f.child=u}function Ws(u,f,x,T,P){if(u!==null&&ts(u.memoizedProps,T)&&u.ref===f.ref)if(gi=!1,(u.lanes&P)!==0)(u.flags&131072)!==0&&(gi=!0);else return f.lanes=u.lanes,ir(u,f,P);return js(u,f,x,T,P)}function wi(u,f,x){var T=f.pendingProps,P=T.children,D=u!==null?u.memoizedState:null;if(T.mode==="hidden")if((f.mode&1)===0)f.memoizedState={baseLanes:0,cachePool:null},Nt(Ea,Fi),Fi|=x;else if((x&1073741824)!==0)f.memoizedState={baseLanes:0,cachePool:null},T=D!==null?D.baseLanes:x,Nt(Ea,Fi),Fi|=T;else return u=D!==null?D.baseLanes|x:x,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:u,cachePool:null},f.updateQueue=null,Nt(Ea,Fi),Fi|=u,null;else D!==null?(T=D.baseLanes|x,f.memoizedState=null):T=x,Nt(Ea,Fi),Fi|=T;return Xn(u,f,P,x),f.child}function Yi(u,f){var x=f.ref;(u===null&&x!==null||u!==null&&u.ref!==x)&&(f.flags|=512,f.flags|=2097152)}function js(u,f,x,T,P){var D=Ht(x)?At:on.current;return D=Rn(f,D),rl(f,P),x=hl(u,f,x,T,D,P),T=Ro(),u!==null&&!gi?(f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~P,ir(u,f,P)):(Vn&&T&&wh(f),f.flags|=1,Xn(u,f,x,P),f.child)}function ga(u,f,x,T,P){if(Ht(x)){var D=!0;xs(f)}else D=!1;if(rl(f,P),f.stateNode===null)u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),Nm(f,x,T),Sh(f,x,T,P),T=!0;else if(u===null){var Z=f.stateNode,ue=f.memoizedProps;Z.props=ue;var Ae=Z.context,Ze=x.contextType;typeof Ze=="object"&&Ze!==null?Ze=tr(Ze):(Ze=Ht(x)?At:on.current,Ze=Rn(f,Ze));var _t=x.getDerivedStateFromProps,Yt=typeof _t=="function"||typeof Z.getSnapshotBeforeUpdate=="function";Yt||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(ue!==T||Ae!==Ze)&&Lm(f,Z,T,Ze),Fr=!1;var Ut=f.memoizedState;Z.state=Ut,yf(f,T,Z,P),Ae=f.memoizedState,ue!==T||Ut!==Ae||Gt.current||Fr?(typeof _t=="function"&&(xh(f,x,_t,T),Ae=f.memoizedState),(ue=Fr||_h(f,x,ue,T,Ut,Ae,Ze))?(Yt||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount()),typeof Z.componentDidMount=="function"&&(f.flags|=4194308)):(typeof Z.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=T,f.memoizedState=Ae),Z.props=T,Z.state=Ae,Z.context=Ze,T=ue):(typeof Z.componentDidMount=="function"&&(f.flags|=4194308),T=!1)}else{Z=f.stateNode,yh(u,f),ue=f.memoizedProps,Ze=f.type===f.elementType?ue:er(f.type,ue),Z.props=Ze,Yt=f.pendingProps,Ut=Z.context,Ae=x.contextType,typeof Ae=="object"&&Ae!==null?Ae=tr(Ae):(Ae=Ht(x)?At:on.current,Ae=Rn(f,Ae));var nn=x.getDerivedStateFromProps;(_t=typeof nn=="function"||typeof Z.getSnapshotBeforeUpdate=="function")||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(ue!==Yt||Ut!==Ae)&&Lm(f,Z,T,Ae),Fr=!1,Ut=f.memoizedState,Z.state=Ut,yf(f,T,Z,P);var ut=f.memoizedState;ue!==Yt||Ut!==ut||Gt.current||Fr?(typeof nn=="function"&&(xh(f,x,nn,T),ut=f.memoizedState),(Ze=Fr||_h(f,x,Ze,T,Ut,ut,Ae)||!1)?(_t||typeof Z.UNSAFE_componentWillUpdate!="function"&&typeof Z.componentWillUpdate!="function"||(typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate(T,ut,Ae),typeof Z.UNSAFE_componentWillUpdate=="function"&&Z.UNSAFE_componentWillUpdate(T,ut,Ae)),typeof Z.componentDidUpdate=="function"&&(f.flags|=4),typeof Z.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof Z.componentDidUpdate!="function"||ue===u.memoizedProps&&Ut===u.memoizedState||(f.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||ue===u.memoizedProps&&Ut===u.memoizedState||(f.flags|=1024),f.memoizedProps=T,f.memoizedState=ut),Z.props=T,Z.state=ut,Z.context=Ae,T=Ze):(typeof Z.componentDidUpdate!="function"||ue===u.memoizedProps&&Ut===u.memoizedState||(f.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||ue===u.memoizedProps&&Ut===u.memoizedState||(f.flags|=1024),T=!1)}return ki(u,f,x,T,D,P)}function ki(u,f,x,T,P,D){Yi(u,f);var Z=(f.flags&128)!==0;if(!T&&!Z)return P&&Tn(f,x,!1),ir(u,f,D);T=f.stateNode,kh.current=f;var ue=Z&&typeof x.getDerivedStateFromError!="function"?null:T.render();return f.flags|=1,u!==null&&Z?(f.child=Bs(f,u.child,null,D),f.child=Bs(f,null,ue,D)):Xn(u,f,ue,D),f.memoizedState=T.state,P&&Tn(f,x,!0),f.child}function Pc(u){var f=u.stateNode;f.pendingContext?Dr(u,f.pendingContext,f.pendingContext!==f.context):f.context&&Dr(u,f.context,!1),Ef(u,f.containerInfo)}function Fh(u,f,x,T,P){return ll(),Mf(P),f.flags|=256,Xn(u,f,x,T),f.child}var Ic={dehydrated:null,treeContext:null,retryLane:0};function va(u){return{baseLanes:u,cachePool:null}}function zh(u,f,x){var T=f.pendingProps,P=Gn.current,D=!1,Z=(f.flags&128)!==0,ue;if((ue=Z)||(ue=u!==null&&u.memoizedState===null?!1:(P&2)!==0),ue?(D=!0,f.flags&=-129):(u===null||u.memoizedState!==null)&&(P|=1),Nt(Gn,P&1),u===null)return Co(f),u=f.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?((f.mode&1)===0?f.lanes=1:Jr(u)?f.lanes=8:f.lanes=1073741824,null):(P=T.children,u=T.fallback,D?(T=f.mode,D=f.child,P={mode:"hidden",children:P},(T&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=P):D=Xc(P,T,0,null),u=Ra(u,T,x,null),D.return=f,u.return=f,D.sibling=u,f.child=D,f.child.memoizedState=va(x),f.memoizedState=Ic,u):ss(f,P));if(P=u.memoizedState,P!==null){if(ue=P.dehydrated,ue!==null){if(Z)return f.flags&256?(f.flags&=-257,Lc(u,f,x,Error(a(422)))):f.memoizedState!==null?(f.child=u.child,f.flags|=128,null):(D=T.fallback,P=f.mode,T=Xc({mode:"visible",children:T.children},P,0,null),D=Ra(D,P,x,null),D.flags|=2,T.return=f,D.return=f,T.sibling=D,f.child=T,(f.mode&1)!==0&&Bs(f,u.child,null,x),f.child.memoizedState=va(x),f.memoizedState=Ic,D);if((f.mode&1)===0)f=Lc(u,f,x,null);else if(Jr(ue))f=Lc(u,f,x,Error(a(419)));else if(T=(x&u.childLanes)!==0,gi||T){if(T=Qn,T!==null){switch(x&-x){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}T=(D&(T.suspendedLanes|x))!==0?0:D,T!==0&&T!==P.retryLane&&(P.retryLane=T,zi(u,T,-1))}Xf(),f=Lc(u,f,x,Error(a(421)))}else vs(ue)?(f.flags|=128,f.child=u.child,f=Ym.bind(null,u),Jo(ue,f),f=null):(x=P.treeContext,Le&&(Si=tl(ue),Xi=f,Vn=!0,Br=null,al=!1,x!==null&&(zr[gr++]=Fs,zr[gr++]=zs,zr[gr++]=oa,Fs=x.id,zs=x.overflow,oa=f)),f=ss(f,f.pendingProps.children),f.flags|=4096);return f}return D?(T=Bf(u,f,T.children,T.fallback,x),D=f.child,P=u.child.memoizedState,D.memoizedState=P===null?va(x):{baseLanes:P.baseLanes|x,cachePool:null},D.childLanes=u.childLanes&~x,f.memoizedState=Ic,T):(x=Nc(u,f,T.children,x),f.memoizedState=null,x)}return D?(T=Bf(u,f,T.children,T.fallback,x),D=f.child,P=u.child.memoizedState,D.memoizedState=P===null?va(x):{baseLanes:P.baseLanes|x,cachePool:null},D.childLanes=u.childLanes&~x,f.memoizedState=Ic,T):(x=Nc(u,f,T.children,x),f.memoizedState=null,x)}function ss(u,f){return f=Xc({mode:"visible",children:f},u.mode,0,null),f.return=u,u.child=f}function Nc(u,f,x,T){var P=u.child;return u=P.sibling,x=Js(P,{mode:"visible",children:x}),(f.mode&1)===0&&(x.lanes=T),x.return=f,x.sibling=null,u!==null&&(T=f.deletions,T===null?(f.deletions=[u],f.flags|=16):T.push(u)),f.child=x}function Bf(u,f,x,T,P){var D=f.mode;u=u.child;var Z=u.sibling,ue={mode:"hidden",children:x};return(D&1)===0&&f.child!==u?(x=f.child,x.childLanes=0,x.pendingProps=ue,f.deletions=null):(x=Js(u,ue),x.subtreeFlags=u.subtreeFlags&14680064),Z!==null?T=Js(Z,T):(T=Ra(T,D,P,null),T.flags|=2),T.return=f,x.return=f,x.sibling=T,f.child=x,T}function Lc(u,f,x,T){return T!==null&&Mf(T),Bs(f,u.child,null,x),u=ss(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function Gm(u,f,x){u.lanes|=f;var T=u.alternate;T!==null&&(T.lanes|=f),sa(u.return,f,x)}function Ts(u,f,x,T,P){var D=u.memoizedState;D===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:T,tail:x,tailMode:P}:(D.isBackwards=f,D.rendering=null,D.renderingStartTime=0,D.last=T,D.tail=x,D.tailMode=P)}function ya(u,f,x){var T=f.pendingProps,P=T.revealOrder,D=T.tail;if(Xn(u,f,T.children,x),T=Gn.current,(T&2)!==0)T=T&1|2,f.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&Gm(u,x,f);else if(u.tag===19)Gm(u,x,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}T&=1}if(Nt(Gn,T),(f.mode&1)===0)f.memoizedState=null;else switch(P){case"forwards":for(x=f.child,P=null;x!==null;)u=x.alternate,u!==null&&Tf(u)===null&&(P=x),x=x.sibling;x=P,x===null?(P=f.child,f.child=null):(P=x.sibling,x.sibling=null),Ts(f,!1,P,x,D);break;case"backwards":for(x=null,P=f.child,f.child=null;P!==null;){if(u=P.alternate,u!==null&&Tf(u)===null){f.child=P;break}u=P.sibling,P.sibling=x,x=P,P=u}Ts(f,!0,x,null,D);break;case"together":Ts(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function ir(u,f,x){if(u!==null&&(f.dependencies=u.dependencies),bs|=f.lanes,(x&f.childLanes)===0)return null;if(u!==null&&f.child!==u.child)throw Error(a(153));if(f.child!==null){for(u=f.child,x=Js(u,u.pendingProps),f.child=x,x.return=f;u.sibling!==null;)u=u.sibling,x=x.sibling=Js(u,u.pendingProps),x.return=f;x.sibling=null}return f.child}function Vf(u,f,x){switch(f.tag){case 3:Pc(f),ll();break;case 5:Fm(f);break;case 1:Ht(f.type)&&xs(f);break;case 4:Ef(f,f.stateNode.containerInfo);break;case 10:ra(f,f.type._context,f.memoizedProps.value);break;case 13:var T=f.memoizedState;if(T!==null)return T.dehydrated!==null?(Nt(Gn,Gn.current&1),f.flags|=128,null):(x&f.child.childLanes)!==0?zh(u,f,x):(Nt(Gn,Gn.current&1),u=ir(u,f,x),u!==null?u.sibling:null);Nt(Gn,Gn.current&1);break;case 19:if(T=(x&f.childLanes)!==0,(u.flags&128)!==0){if(T)return ya(u,f,x);f.flags|=128}var P=f.memoizedState;if(P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),Nt(Gn,Gn.current),T)break;return null;case 22:case 23:return f.lanes=0,wi(u,f,x)}return ir(u,f,x)}function Hf(u,f){switch(Mh(f),f.tag){case 1:return Ht(f.type)&&ti(),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return dl(),pt(Gt),pt(on),ua(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 5:return bh(f),null;case 13:if(pt(Gn),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(a(340));ll()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return pt(Gn),null;case 4:return dl(),null;case 10:return xc(f.type._context),null;case 22:case 23:return Gc(),null;case 24:return null;default:return null}}var qi=!1,vi=!1,xa=typeof WeakSet=="function"?WeakSet:Set,et=null;function Vr(u,f){var x=u.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(T){Zi(u,f,T)}else x.current=null}function Xs(u,f,x){try{x()}catch(T){Zi(u,f,T)}}var Bh=!1;function Vh(u,f){for(ie(u.containerInfo),et=f;et!==null;)if(u=et,f=u.child,(u.subtreeFlags&1028)!==0&&f!==null)f.return=u,et=f;else for(;et!==null;){u=et;try{var x=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var T=x.memoizedProps,P=x.memoizedState,D=u.stateNode,Z=D.getSnapshotBeforeUpdate(u.elementType===u.type?T:er(u.type,T),P);D.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:Qe&&Ne(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(ue){Zi(u,u.return,ue)}if(f=u.sibling,f!==null){f.return=u.return,et=f;break}et=u.return}return x=Bh,Bh=!1,x}function Ys(u,f,x){var T=f.updateQueue;if(T=T!==null?T.lastEffect:null,T!==null){var P=T=T.next;do{if((P.tag&u)===u){var D=P.destroy;P.destroy=void 0,D!==void 0&&Xs(f,x,D)}P=P.next}while(P!==T)}}function Mi(u,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var x=f=f.next;do{if((x.tag&u)===u){var T=x.create;x.destroy=T()}x=x.next}while(x!==f)}}function Ki(u){var f=u.ref;if(f!==null){var x=u.stateNode;switch(u.tag){case 5:u=ne(x);break;default:u=x}typeof f=="function"?f(u):f.current=u}}function zn(u,f,x){if(ws&&typeof ws.onCommitFiberUnmount=="function")try{ws.onCommitFiberUnmount(mc,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(u=f.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var T=u=u.next;do{var P=T,D=P.destroy;P=P.tag,D!==void 0&&((P&2)!==0||(P&4)!==0)&&Xs(f,x,D),T=T.next}while(T!==u)}break;case 1:if(Vr(f,x),u=f.stateNode,typeof u.componentWillUnmount=="function")try{u.props=f.memoizedProps,u.state=f.memoizedState,u.componentWillUnmount()}catch(Z){Zi(f,x,Z)}break;case 5:Vr(f,x);break;case 4:Qe?Wh(u,f,x):Se&&Se&&(f=f.stateNode.containerInfo,x=st(f),Nn(f,x))}}function Hr(u,f,x){for(var T=f;;)if(zn(u,T,x),T.child===null||Qe&&T.tag===4){if(T===f)break;for(;T.sibling===null;){if(T.return===null||T.return===f)return;T=T.return}T.sibling.return=T.return,T=T.sibling}else T.child.return=T,T=T.child}function Hh(u){var f=u.alternate;f!==null&&(u.alternate=null,Hh(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&nt(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function Gh(u){return u.tag===5||u.tag===3||u.tag===4}function Gf(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||Gh(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Wf(u){if(Qe){e:{for(var f=u.return;f!==null;){if(Gh(f))break e;f=f.return}throw Error(a(160))}var x=f;switch(x.tag){case 5:f=x.stateNode,x.flags&32&&(Ie(f),x.flags&=-33),x=Gf(u),xl(u,x,f);break;case 3:case 4:f=x.stateNode.containerInfo,x=Gf(u),jf(u,x,f);break;default:throw Error(a(161))}}}function jf(u,f,x){var T=u.tag;if(T===5||T===6)u=u.stateNode,f?kt(x,u,f):ct(x,u);else if(T!==4&&(u=u.child,u!==null))for(jf(u,f,x),u=u.sibling;u!==null;)jf(u,f,x),u=u.sibling}function xl(u,f,x){var T=u.tag;if(T===5||T===6)u=u.stateNode,f?Dt(x,u,f):Je(x,u);else if(T!==4&&(u=u.child,u!==null))for(xl(u,f,x),u=u.sibling;u!==null;)xl(u,f,x),u=u.sibling}function Wh(u,f,x){for(var T=f,P=!1,D,Z;;){if(!P){P=T.return;e:for(;;){if(P===null)throw Error(a(160));switch(D=P.stateNode,P.tag){case 5:Z=!1;break e;case 3:D=D.containerInfo,Z=!0;break e;case 4:D=D.containerInfo,Z=!0;break e}P=P.return}P=!0}if(T.tag===5||T.tag===6)Hr(u,T,x),Z?re(D,T.stateNode):dt(D,T.stateNode);else if(T.tag===18)Z?j(D,T.stateNode):of(D,T.stateNode);else if(T.tag===4){if(T.child!==null){D=T.stateNode.containerInfo,Z=!0,T.child.return=T,T=T.child;continue}}else if(zn(u,T,x),T.child!==null){T.child.return=T,T=T.child;continue}if(T===f)break;for(;T.sibling===null;){if(T.return===null||T.return===f)return;T=T.return,T.tag===4&&(P=!1)}T.sibling.return=T.return,T=T.sibling}}function No(u,f){if(Qe){switch(f.tag){case 0:case 11:case 14:case 15:Ys(3,f,f.return),Mi(3,f),Ys(5,f,f.return);return;case 1:return;case 5:var x=f.stateNode;if(x!=null){var T=f.memoizedProps;u=u!==null?u.memoizedProps:T;var P=f.type,D=f.updateQueue;f.updateQueue=null,D!==null&&gt(x,D,P,u,T,f)}return;case 6:if(f.stateNode===null)throw Error(a(162));x=f.memoizedProps,Xt(f.stateNode,u!==null?u.memoizedProps:x,x);return;case 3:Le&&u!==null&&u.memoizedState.isDehydrated&&rf(f.stateNode.containerInfo);return;case 12:return;case 13:_l(f);return;case 19:_l(f);return;case 17:return}throw Error(a(163))}switch(f.tag){case 0:case 11:case 14:case 15:Ys(3,f,f.return),Mi(3,f),Ys(5,f,f.return);return;case 12:return;case 13:_l(f);return;case 19:_l(f);return;case 3:Le&&u!==null&&u.memoizedState.isDehydrated&&rf(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(Se){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,Nn(f.containerInfo,f.pendingChildren);break e}throw Error(a(163))}}function _l(u){var f=u.updateQueue;if(f!==null){u.updateQueue=null;var x=u.stateNode;x===null&&(x=u.stateNode=new xa),f.forEach(function(T){var P=qm.bind(null,u,T);x.has(T)||(x.add(T),T.then(P,P))})}}function I0(u,f){for(et=f;et!==null;){f=et;var x=f.deletions;if(x!==null)for(var T=0;T<x.length;T++){var P=x[T];try{var D=u;Qe?Wh(D,P,f):Hr(D,P,f);var Z=P.alternate;Z!==null&&(Z.return=null),P.return=null}catch(Rt){Zi(P,f,Rt)}}if(x=f.child,(f.subtreeFlags&12854)!==0&&x!==null)x.return=f,et=x;else for(;et!==null;){f=et;try{var ue=f.flags;if(ue&32&&Qe&&Ie(f.stateNode),ue&512){var Ae=f.alternate;if(Ae!==null){var Ze=Ae.ref;Ze!==null&&(typeof Ze=="function"?Ze(null):Ze.current=null)}}if(ue&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var _t=f.alternate;(_t===null||_t.memoizedState===null)&&(Bc=li())}break;case 22:var Yt=f.memoizedState!==null,Ut=f.alternate,nn=Ut!==null&&Ut.memoizedState!==null;if(x=f,Qe){e:if(T=x,P=Yt,D=null,Qe)for(var ut=T;;){if(ut.tag===5){if(D===null){D=ut;var bi=ut.stateNode;P?rt(bi):Ye(ut.stateNode,ut.memoizedProps)}}else if(ut.tag===6){if(D===null){var Er=ut.stateNode;P?ee(Er):Te(Er,ut.memoizedProps)}}else if((ut.tag!==22&&ut.tag!==23||ut.memoizedState===null||ut===T)&&ut.child!==null){ut.child.return=ut,ut=ut.child;continue}if(ut===T)break;for(;ut.sibling===null;){if(ut.return===null||ut.return===T)break e;D===ut&&(D=null),ut=ut.return}D===ut&&(D=null),ut.sibling.return=ut.return,ut=ut.sibling}}if(Yt&&!nn&&(x.mode&1)!==0){et=x;for(var _e=x.child;_e!==null;){for(x=et=_e;et!==null;){T=et;var me=T.child;switch(T.tag){case 0:case 11:case 14:case 15:Ys(4,T,T.return);break;case 1:Vr(T,T.return);var Ce=T.stateNode;if(typeof Ce.componentWillUnmount=="function"){var ot=T.return;try{Ce.props=T.memoizedProps,Ce.state=T.memoizedState,Ce.componentWillUnmount()}catch(Rt){Zi(T,ot,Rt)}}break;case 5:Vr(T,T.return);break;case 22:if(T.memoizedState!==null){Xh(x);continue}}me!==null?(me.return=T,et=me):Xh(x)}_e=_e.sibling}}}switch(ue&4102){case 2:Wf(f),f.flags&=-3;break;case 6:Wf(f),f.flags&=-3,No(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,No(f.alternate,f);break;case 4:No(f.alternate,f)}}catch(Rt){Zi(f,f.return,Rt)}if(x=f.sibling,x!==null){x.return=f.return,et=x;break}et=f.return}}}function Dc(u,f,x){et=u,Oc(u)}function Oc(u,f,x){for(var T=(u.mode&1)!==0;et!==null;){var P=et,D=P.child;if(P.tag===22&&T){var Z=P.memoizedState!==null||qi;if(!Z){var ue=P.alternate,Ae=ue!==null&&ue.memoizedState!==null||vi;ue=qi;var Ze=vi;if(qi=Z,(vi=Ae)&&!Ze)for(et=P;et!==null;)Z=et,Ae=Z.child,Z.tag===22&&Z.memoizedState!==null?_a(P):Ae!==null?(Ae.return=Z,et=Ae):_a(P);for(;D!==null;)et=D,Oc(D),D=D.sibling;et=P,qi=ue,vi=Ze}jh(u)}else(P.subtreeFlags&8772)!==0&&D!==null?(D.return=P,et=D):jh(u)}}function jh(u){for(;et!==null;){var f=et;if((f.flags&8772)!==0){var x=f.alternate;try{if((f.flags&8772)!==0)switch(f.tag){case 0:case 11:case 15:vi||Mi(5,f);break;case 1:var T=f.stateNode;if(f.flags&4&&!vi)if(x===null)T.componentDidMount();else{var P=f.elementType===f.type?x.memoizedProps:er(f.type,x.memoizedProps);T.componentDidUpdate(P,x.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var D=f.updateQueue;D!==null&&Pm(f,D,T);break;case 3:var Z=f.updateQueue;if(Z!==null){if(x=null,f.child!==null)switch(f.child.tag){case 5:x=ne(f.child.stateNode);break;case 1:x=f.child.stateNode}Pm(f,Z,x)}break;case 5:var ue=f.stateNode;x===null&&f.flags&4&&We(ue,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(Le&&f.memoizedState===null){var Ae=f.alternate;if(Ae!==null){var Ze=Ae.memoizedState;if(Ze!==null){var _t=Ze.dehydrated;_t!==null&&sf(_t)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}vi||f.flags&512&&Ki(f)}catch(Yt){Zi(f,f.return,Yt)}}if(f===u){et=null;break}if(x=f.sibling,x!==null){x.return=f.return,et=x;break}et=f.return}}function Xh(u){for(;et!==null;){var f=et;if(f===u){et=null;break}var x=f.sibling;if(x!==null){x.return=f.return,et=x;break}et=f.return}}function _a(u){for(;et!==null;){var f=et;try{switch(f.tag){case 0:case 11:case 15:var x=f.return;try{Mi(4,f)}catch(Ae){Zi(f,x,Ae)}break;case 1:var T=f.stateNode;if(typeof T.componentDidMount=="function"){var P=f.return;try{T.componentDidMount()}catch(Ae){Zi(f,P,Ae)}}var D=f.return;try{Ki(f)}catch(Ae){Zi(f,D,Ae)}break;case 5:var Z=f.return;try{Ki(f)}catch(Ae){Zi(f,Z,Ae)}}}catch(Ae){Zi(f,f.return,Ae)}if(f===u){et=null;break}var ue=f.sibling;if(ue!==null){ue.return=f.return,et=ue;break}et=f.return}}var Uc=0,Sa=1,wa=2,qs=3,Sl=4;if(typeof Symbol=="function"&&Symbol.for){var Ma=Symbol.for;Uc=Ma("selector.component"),Sa=Ma("selector.has_pseudo_class"),wa=Ma("selector.role"),qs=Ma("selector.test_id"),Sl=Ma("selector.text")}function kc(u){var f=K(u);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(a(364));return f}if(u=Y(u),u===null)throw Error(a(362));return u.stateNode.current}function Fc(u,f){switch(f.$$typeof){case Uc:if(u.type===f.value)return!0;break;case Sa:e:{f=f.value,u=[u,0];for(var x=0;x<u.length;){var T=u[x++],P=u[x++],D=f[P];if(T.tag!==5||!Re(T)){for(;D!=null&&Fc(T,D);)P++,D=f[P];if(P===f.length){f=!0;break e}else for(T=T.child;T!==null;)u.push(T,P),T=T.sibling}}f=!1}return f;case wa:if(u.tag===5&&ze(u.stateNode,f.value))return!0;break;case Sl:if((u.tag===5||u.tag===6)&&(u=ye(u),u!==null&&0<=u.indexOf(f.value)))return!0;break;case qs:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Lo(u){switch(u.$$typeof){case Uc:return"<"+(F(u.value)||"Unknown")+">";case Sa:return":has("+(Lo(u)||"")+")";case wa:return'[role="'+u.value+'"]';case Sl:return'"'+u.value+'"';case qs:return'[data-testname="'+u.value+'"]';default:throw Error(a(365))}}function _r(u,f){var x=[];u=[u,0];for(var T=0;T<u.length;){var P=u[T++],D=u[T++],Z=f[D];if(P.tag!==5||!Re(P)){for(;Z!=null&&Fc(P,Z);)D++,Z=f[D];if(D===f.length)x.push(P);else for(P=P.child;P!==null;)u.push(P,D),P=P.sibling}}return x}function Ks(u,f){if(!tt)throw Error(a(363));u=kc(u),u=_r(u,f),f=[],u=Array.from(u);for(var x=0;x<u.length;){var T=u[x++];if(T.tag===5)Re(T)||f.push(T.stateNode);else for(T=T.child;T!==null;)u.push(T),T=T.sibling}return f}var Yh=Math.ceil,zc=c.ReactCurrentDispatcher,os=c.ReactCurrentOwner,bn=c.ReactCurrentBatchConfig,Qt=0,Qn=null,Cn=null,Hn=0,Fi=0,Ea=St(0),Yn=0,wl=null,bs=0,Sr=0,Ta=0,Zs=null,ni=null,Bc=0,Do=1/0;function ba(){Do=li()+500}var Ml=!1,Bn=null,as=null,El=!1,Cs=null,Ca=0,Aa=0,$s=null,On=-1,qn=0;function yn(){return(Qt&6)!==0?li():On!==-1?On:On=li()}function ls(u){return(u.mode&1)===0?1:(Qt&2)!==0&&Hn!==0?Hn&-Hn:Rm.transition!==null?(qn===0&&(u=_s,_s<<=1,(_s&4194240)===0&&(_s=64),qn=u),qn):(u=an,u!==0?u:Be())}function zi(u,f,x){if(50<Aa)throw Aa=0,$s=null,Error(a(185));var T=Oo(u,f);return T===null?null:(ea(T,f,x),((Qt&2)===0||T!==Qn)&&(T===Qn&&((Qt&2)===0&&(Sr|=f),Yn===4&&Ti(T,Hn)),rr(T,x),f===1&&Qt===0&&(u.mode&1)===0&&(ba(),df&&Ur())),T)}function Oo(u,f){u.lanes|=f;var x=u.alternate;for(x!==null&&(x.lanes|=f),x=u,u=u.return;u!==null;)u.childLanes|=f,x=u.alternate,x!==null&&(x.childLanes|=f),x=u,u=u.return;return x.tag===3?x.stateNode:null}function rr(u,f){var x=u.callbackNode;Am(u,f);var T=pc(u,u===Qn?Hn:0);if(T===0)x!==null&&il(x),u.callbackNode=null,u.callbackPriority=0;else if(f=T&-T,u.callbackPriority!==f){if(x!=null&&il(x),f===1)u.tag===0?pf(wr.bind(null,u)):hf(wr.bind(null,u)),Ke?bt(function(){Qt===0&&Ur()}):ta(na,Ur),x=null;else{switch(Os(T)){case 1:x=na;break;case 4:x=A0;break;case 16:x=uf;break;case 536870912:x=ff;break;default:x=uf}x=Yf(x,Ei.bind(null,u))}u.callbackPriority=f,u.callbackNode=x}}function Ei(u,f){if(On=-1,qn=0,(Qt&6)!==0)throw Error(a(327));var x=u.callbackNode;if(As()&&u.callbackNode!==x)return null;var T=pc(u,u===Qn?Hn:0);if(T===0)return null;if((T&30)!==0||(T&u.expiredLanes)!==0||f)f=Wc(u,T);else{f=T;var P=Qt;Qt|=2;var D=Zh();(Qn!==u||Hn!==f)&&(ba(),Qs(u,f));do try{jm();break}catch(ue){Kh(u,ue)}while(!0);ji(),zc.current=D,Qt=P,Cn!==null?f=0:(Qn=null,Hn=0,f=Yn)}if(f!==0){if(f===2&&(P=af(u),P!==0&&(T=P,f=Vc(u,P))),f===1)throw x=wl,Qs(u,0),Ti(u,T),rr(u,li()),x;if(f===6)Ti(u,T);else{if(P=u.current.alternate,(T&30)===0&&!qh(P)&&(f=Wc(u,T),f===2&&(D=af(u),D!==0&&(T=D,f=Vc(u,D))),f===1))throw x=wl,Qs(u,0),Ti(u,T),rr(u,li()),x;switch(u.finishedWork=P,u.finishedLanes=T,f){case 0:case 1:throw Error(a(345));case 2:cs(u,ni);break;case 3:if(Ti(u,T),(T&130023424)===T&&(f=Bc+500-li(),10<f)){if(pc(u,0)!==0)break;if(P=u.suspendedLanes,(P&T)!==T){yn(),u.pingedLanes|=u.suspendedLanes&P;break}u.timeoutHandle=he(cs.bind(null,u,ni),f);break}cs(u,ni);break;case 4:if(Ti(u,T),(T&4194240)===T)break;for(f=u.eventTimes,P=-1;0<T;){var Z=31-Fn(T);D=1<<Z,Z=f[Z],Z>P&&(P=Z),T&=~D}if(T=P,T=li()-T,T=(120>T?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*Yh(T/1960))-T,10<T){u.timeoutHandle=he(cs.bind(null,u,ni),T);break}cs(u,ni);break;case 5:cs(u,ni);break;default:throw Error(a(329))}}}return rr(u,li()),u.callbackNode===x?Ei.bind(null,u):null}function Vc(u,f){var x=Zs;return u.current.memoizedState.isDehydrated&&(Qs(u,f).flags|=256),u=Wc(u,f),u!==2&&(f=ni,ni=x,f!==null&&Hc(f)),u}function Hc(u){ni===null?ni=u:ni.push.apply(ni,u)}function qh(u){for(var f=u;;){if(f.flags&16384){var x=f.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var T=0;T<x.length;T++){var P=x[T],D=P.getSnapshot;P=P.value;try{if(!Wi(D(),P))return!1}catch{return!1}}}if(x=f.child,f.subtreeFlags&16384&&x!==null)x.return=f,f=x;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Ti(u,f){for(f&=~Ta,f&=~Sr,u.suspendedLanes|=f,u.pingedLanes&=~f,u=u.expirationTimes;0<f;){var x=31-Fn(f),T=1<<x;u[x]=-1,f&=~T}}function wr(u){if((Qt&6)!==0)throw Error(a(327));As();var f=pc(u,0);if((f&1)===0)return rr(u,li()),null;var x=Wc(u,f);if(u.tag!==0&&x===2){var T=af(u);T!==0&&(f=T,x=Vc(u,T))}if(x===1)throw x=wl,Qs(u,0),Ti(u,f),rr(u,li()),x;if(x===6)throw Error(a(345));return u.finishedWork=u.current.alternate,u.finishedLanes=f,cs(u,ni),rr(u,li()),null}function Tl(u){Cs!==null&&Cs.tag===0&&(Qt&6)===0&&As();var f=Qt;Qt|=1;var x=bn.transition,T=an;try{if(bn.transition=null,an=1,u)return u()}finally{an=T,bn.transition=x,Qt=f,(Qt&6)===0&&Ur()}}function Gc(){Fi=Ea.current,pt(Ea)}function Qs(u,f){u.finishedWork=null,u.finishedLanes=0;var x=u.timeoutHandle;if(x!==Xe&&(u.timeoutHandle=Xe,Fe(x)),Cn!==null)for(x=Cn.return;x!==null;){var T=x;switch(Mh(T),T.tag){case 1:T=T.type.childContextTypes,T!=null&&ti();break;case 3:dl(),pt(Gt),pt(on),ua();break;case 5:bh(T);break;case 4:dl();break;case 13:pt(Gn);break;case 19:pt(Gn);break;case 10:xc(T.type._context);break;case 22:case 23:Gc()}x=x.return}if(Qn=u,Cn=u=Js(u.current,null),Hn=Fi=f,Yn=0,wl=null,Ta=Sr=bs=0,ni=Zs=null,kr!==null){for(f=0;f<kr.length;f++)if(x=kr[f],T=x.interleaved,T!==null){x.interleaved=null;var P=T.next,D=x.pending;if(D!==null){var Z=D.next;D.next=P,T.next=Z}x.pending=T}kr=null}return u}function Kh(u,f){do{var x=Cn;try{if(ji(),Sc.current=vl,bf){for(var T=Wn.memoizedState;T!==null;){var P=T.queue;P!==null&&(P.pending=null),T=T.next}bf=!1}if(fa=0,pi=hi=Wn=null,Ms=!1,da=0,os.current=null,x===null||x.return===null){Yn=1,wl=f,Cn=null;break}e:{var D=u,Z=x.return,ue=x,Ae=f;if(f=Hn,ue.flags|=32768,Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"){var Ze=Ae,_t=ue,Yt=_t.tag;if((_t.mode&1)===0&&(Yt===0||Yt===11||Yt===15)){var Ut=_t.alternate;Ut?(_t.updateQueue=Ut.updateQueue,_t.memoizedState=Ut.memoizedState,_t.lanes=Ut.lanes):(_t.updateQueue=null,_t.memoizedState=null)}var nn=Uh(Z);if(nn!==null){nn.flags&=-257,pa(nn,Z,ue,D,f),nn.mode&1&&Hs(D,Ze,f),f=nn,Ae=Ze;var ut=f.updateQueue;if(ut===null){var bi=new Set;bi.add(Ae),f.updateQueue=bi}else ut.add(Ae);break e}else{if((f&1)===0){Hs(D,Ze,f),Xf();break e}Ae=Error(a(426))}}else if(Vn&&ue.mode&1){var Er=Uh(Z);if(Er!==null){(Er.flags&65536)===0&&(Er.flags|=256),pa(Er,Z,ue,D,f),Mf(Ae);break e}}D=Ae,Yn!==4&&(Yn=2),Zs===null?Zs=[D]:Zs.push(D),Ae=Oh(Ae,ue),ue=Z;do{switch(ue.tag){case 3:ue.flags|=65536,f&=-f,ue.lanes|=f;var _e=Hm(ue,Ae,f);vf(ue,_e);break e;case 1:D=Ae;var me=ue.type,Ce=ue.stateNode;if((ue.flags&128)===0&&(typeof me.getDerivedStateFromError=="function"||Ce!==null&&typeof Ce.componentDidCatch=="function"&&(as===null||!as.has(Ce)))){ue.flags|=65536,f&=-f,ue.lanes|=f;var ot=Uf(ue,D,f);vf(ue,ot);break e}}ue=ue.return}while(ue!==null)}Qh(x)}catch(Rt){f=Rt,Cn===x&&x!==null&&(Cn=x=x.return);continue}break}while(!0)}function Zh(){var u=zc.current;return zc.current=vl,u===null?vl:u}function Xf(){(Yn===0||Yn===3||Yn===2)&&(Yn=4),Qn===null||(bs&268435455)===0&&(Sr&268435455)===0||Ti(Qn,Hn)}function Wc(u,f){var x=Qt;Qt|=2;var T=Zh();Qn===u&&Hn===f||Qs(u,f);do try{Wm();break}catch(P){Kh(u,P)}while(!0);if(ji(),Qt=x,zc.current=T,Cn!==null)throw Error(a(261));return Qn=null,Hn=0,Yn}function Wm(){for(;Cn!==null;)$h(Cn)}function jm(){for(;Cn!==null&&!Eo();)$h(Cn)}function $h(u){var f=tp(u.alternate,u,Fi);u.memoizedProps=u.pendingProps,f===null?Qh(u):Cn=f,os.current=null}function Qh(u){var f=u;do{var x=f.alternate;if(u=f.return,(f.flags&32768)===0){if(x=zf(x,f,Fi),x!==null){Cn=x;return}}else{if(x=Hf(x,f),x!==null){x.flags&=32767,Cn=x;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Yn=6,Cn=null;return}}if(f=f.sibling,f!==null){Cn=f;return}Cn=f=u}while(f!==null);Yn===0&&(Yn=5)}function cs(u,f){var x=an,T=bn.transition;try{bn.transition=null,an=1,Xm(u,f,x)}finally{bn.transition=T,an=x}return null}function Xm(u,f,x){do As();while(Cs!==null);if((Qt&6)!==0)throw Error(a(327));var T=u.finishedWork,P=u.finishedLanes;if(T===null)return null;if(u.finishedWork=null,u.finishedLanes=0,T===u.current)throw Error(a(177));u.callbackNode=null,u.callbackPriority=0;var D=T.lanes|T.childLanes;if(cf(u,D),u===Qn&&(Cn=Qn=null,Hn=0),(T.subtreeFlags&2064)===0&&(T.flags&2064)===0||El||(El=!0,Yf(uf,function(){return As(),null})),D=(T.flags&15990)!==0,(T.subtreeFlags&15990)!==0||D){D=bn.transition,bn.transition=null;var Z=an;an=1;var ue=Qt;Qt|=4,os.current=null,Vh(u,T),I0(u,T),te(u.containerInfo),u.current=T,Dc(T),C0(),Qt=ue,an=Z,bn.transition=D}else u.current=T;if(El&&(El=!1,Cs=u,Ca=P),D=u.pendingLanes,D===0&&(as=null),gc(T.stateNode),rr(u,li()),f!==null)for(x=u.onRecoverableError,T=0;T<f.length;T++)x(f[T]);if(Ml)throw Ml=!1,u=Bn,Bn=null,u;return(Ca&1)!==0&&u.tag!==0&&As(),D=u.pendingLanes,(D&1)!==0?u===$s?Aa++:(Aa=0,$s=u):Aa=0,Ur(),null}function As(){if(Cs!==null){var u=Os(Ca),f=bn.transition,x=an;try{if(bn.transition=null,an=16>u?16:u,Cs===null)var T=!1;else{if(u=Cs,Cs=null,Ca=0,(Qt&6)!==0)throw Error(a(331));var P=Qt;for(Qt|=4,et=u.current;et!==null;){var D=et,Z=D.child;if((et.flags&16)!==0){var ue=D.deletions;if(ue!==null){for(var Ae=0;Ae<ue.length;Ae++){var Ze=ue[Ae];for(et=Ze;et!==null;){var _t=et;switch(_t.tag){case 0:case 11:case 15:Ys(8,_t,D)}var Yt=_t.child;if(Yt!==null)Yt.return=_t,et=Yt;else for(;et!==null;){_t=et;var Ut=_t.sibling,nn=_t.return;if(Hh(_t),_t===Ze){et=null;break}if(Ut!==null){Ut.return=nn,et=Ut;break}et=nn}}}var ut=D.alternate;if(ut!==null){var bi=ut.child;if(bi!==null){ut.child=null;do{var Er=bi.sibling;bi.sibling=null,bi=Er}while(bi!==null)}}et=D}}if((D.subtreeFlags&2064)!==0&&Z!==null)Z.return=D,et=Z;else e:for(;et!==null;){if(D=et,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:Ys(9,D,D.return)}var _e=D.sibling;if(_e!==null){_e.return=D.return,et=_e;break e}et=D.return}}var me=u.current;for(et=me;et!==null;){Z=et;var Ce=Z.child;if((Z.subtreeFlags&2064)!==0&&Ce!==null)Ce.return=Z,et=Ce;else e:for(Z=me;et!==null;){if(ue=et,(ue.flags&2048)!==0)try{switch(ue.tag){case 0:case 11:case 15:Mi(9,ue)}}catch(Rt){Zi(ue,ue.return,Rt)}if(ue===Z){et=null;break e}var ot=ue.sibling;if(ot!==null){ot.return=ue.return,et=ot;break e}et=ue.return}}if(Qt=P,Ur(),ws&&typeof ws.onPostCommitFiberRoot=="function")try{ws.onPostCommitFiberRoot(mc,u)}catch{}T=!0}return T}finally{an=x,bn.transition=f}}return!1}function jc(u,f,x){f=Oh(x,f),f=Hm(u,f,1),To(u,f),f=yn(),u=Oo(u,1),u!==null&&(ea(u,1,f),rr(u,f))}function Zi(u,f,x){if(u.tag===3)jc(u,u,x);else for(;f!==null;){if(f.tag===3){jc(f,u,x);break}else if(f.tag===1){var T=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(as===null||!as.has(T))){u=Oh(x,u),u=Uf(f,u,1),To(f,u),u=yn(),f=Oo(f,1),f!==null&&(ea(f,1,u),rr(f,u));break}}f=f.return}}function Jh(u,f,x){var T=u.pingCache;T!==null&&T.delete(f),f=yn(),u.pingedLanes|=u.suspendedLanes&x,Qn===u&&(Hn&x)===x&&(Yn===4||Yn===3&&(Hn&130023424)===Hn&&500>li()-Bc?Qs(u,0):Ta|=x),rr(u,f)}function ep(u,f){f===0&&((u.mode&1)===0?f=1:(f=tn,tn<<=1,(tn&130023424)===0&&(tn=4194304)));var x=yn();u=Oo(u,f),u!==null&&(ea(u,f,x),rr(u,x))}function Ym(u){var f=u.memoizedState,x=0;f!==null&&(x=f.retryLane),ep(u,x)}function qm(u,f){var x=0;switch(u.tag){case 13:var T=u.stateNode,P=u.memoizedState;P!==null&&(x=P.retryLane);break;case 19:T=u.stateNode;break;default:throw Error(a(314))}T!==null&&T.delete(f),ep(u,x)}var tp;tp=function(u,f,x){if(u!==null)if(u.memoizedProps!==f.pendingProps||Gt.current)gi=!0;else{if((u.lanes&x)===0&&(f.flags&128)===0)return gi=!1,Vf(u,f,x);gi=(u.flags&131072)!==0}else gi=!1,Vn&&(f.flags&1048576)!==0&&Dm(f,Sf,f.index);switch(f.lanes=0,f.tag){case 2:var T=f.type;u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),u=f.pendingProps;var P=Rn(f,on.current);rl(f,x),P=hl(null,f,T,u,P,x);var D=Ro();return f.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,Ht(T)?(D=!0,xs(f)):D=!1,f.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,sl(f),P.updater=xf,f.stateNode=P,P._reactInternals=f,Sh(f,T,u,x),f=ki(null,f,T,!0,D,x)):(f.tag=0,Vn&&D&&wh(f),Xn(null,f,P,x),f=f.child),f;case 16:T=f.elementType;e:{switch(u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),u=f.pendingProps,P=T._init,T=P(T._payload),f.type=T,P=f.tag=N0(T),u=er(T,u),P){case 0:f=js(null,f,T,u,x);break e;case 1:f=ga(null,f,T,u,x);break e;case 11:f=Dn(null,f,T,u,x);break e;case 14:f=Pn(null,f,T,er(T.type,u),x);break e}throw Error(a(306,T,""))}return f;case 0:return T=f.type,P=f.pendingProps,P=f.elementType===T?P:er(T,P),js(u,f,T,P,x);case 1:return T=f.type,P=f.pendingProps,P=f.elementType===T?P:er(T,P),ga(u,f,T,P,x);case 3:e:{if(Pc(f),u===null)throw Error(a(387));T=f.pendingProps,D=f.memoizedState,P=D.element,yh(u,f),yf(f,T,null,x);var Z=f.memoizedState;if(T=Z.element,Le&&D.isDehydrated)if(D={element:T,isDehydrated:!1,cache:Z.cache,transitions:Z.transitions},f.updateQueue.baseState=D,f.memoizedState=D,f.flags&256){P=Error(a(423)),f=Fh(u,f,T,x,P);break e}else if(T!==P){P=Error(a(424)),f=Fh(u,f,T,x,P);break e}else for(Le&&(Si=Ju(f.stateNode.containerInfo),Xi=f,Vn=!0,Br=null,al=!1),x=km(f,null,T,x),f.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(ll(),T===P){f=ir(u,f,x);break e}Xn(u,f,T,x)}f=f.child}return f;case 5:return Fm(f),u===null&&Co(f),T=f.type,P=f.pendingProps,D=u!==null?u.memoizedProps:null,Z=P.children,Ee(T,P)?Z=null:D!==null&&Ee(T,D)&&(f.flags|=32),Yi(u,f),Xn(u,f,Z,x),f.child;case 6:return u===null&&Co(f),null;case 13:return zh(u,f,x);case 4:return Ef(f,f.stateNode.containerInfo),T=f.pendingProps,u===null?f.child=Bs(f,null,T,x):Xn(u,f,T,x),f.child;case 11:return T=f.type,P=f.pendingProps,P=f.elementType===T?P:er(T,P),Dn(u,f,T,P,x);case 7:return Xn(u,f,f.pendingProps,x),f.child;case 8:return Xn(u,f,f.pendingProps.children,x),f.child;case 12:return Xn(u,f,f.pendingProps.children,x),f.child;case 10:e:{if(T=f.type._context,P=f.pendingProps,D=f.memoizedProps,Z=P.value,ra(f,T,Z),D!==null)if(Wi(D.value,Z)){if(D.children===P.children&&!Gt.current){f=ir(u,f,x);break e}}else for(D=f.child,D!==null&&(D.return=f);D!==null;){var ue=D.dependencies;if(ue!==null){Z=D.child;for(var Ae=ue.firstContext;Ae!==null;){if(Ae.context===T){if(D.tag===1){Ae=ks(-1,x&-x),Ae.tag=2;var Ze=D.updateQueue;if(Ze!==null){Ze=Ze.shared;var _t=Ze.pending;_t===null?Ae.next=Ae:(Ae.next=_t.next,_t.next=Ae),Ze.pending=Ae}}D.lanes|=x,Ae=D.alternate,Ae!==null&&(Ae.lanes|=x),sa(D.return,x,f),ue.lanes|=x;break}Ae=Ae.next}}else if(D.tag===10)Z=D.type===f.type?null:D.child;else if(D.tag===18){if(Z=D.return,Z===null)throw Error(a(341));Z.lanes|=x,ue=Z.alternate,ue!==null&&(ue.lanes|=x),sa(Z,x,f),Z=D.sibling}else Z=D.child;if(Z!==null)Z.return=D;else for(Z=D;Z!==null;){if(Z===f){Z=null;break}if(D=Z.sibling,D!==null){D.return=Z.return,Z=D;break}Z=Z.return}D=Z}Xn(u,f,P.children,x),f=f.child}return f;case 9:return P=f.type,T=f.pendingProps.children,rl(f,x),P=tr(P),T=T(P),f.flags|=1,Xn(u,f,T,x),f.child;case 14:return T=f.type,P=er(T,f.pendingProps),P=er(T.type,P),Pn(u,f,T,P,x);case 15:return Ws(u,f,f.type,f.pendingProps,x);case 17:return T=f.type,P=f.pendingProps,P=f.elementType===T?P:er(T,P),u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,Ht(T)?(u=!0,xs(f)):u=!1,rl(f,x),Nm(f,T,P),Sh(f,T,P,x),ki(null,f,T,!0,u,x);case 19:return ya(u,f,x);case 22:return wi(u,f,x)}throw Error(a(156,f.tag))};function Yf(u,f){return ta(u,f)}function Km(u,f,x,T){this.tag=u,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(u,f,x,T){return new Km(u,f,x,T)}function qf(u){return u=u.prototype,!(!u||!u.isReactComponent)}function N0(u){if(typeof u=="function")return qf(u)?1:0;if(u!=null){if(u=u.$$typeof,u===E)return 11;if(u===A)return 14}return 2}function Js(u,f){var x=u.alternate;return x===null?(x=Mr(u.tag,f,u.key,u.mode),x.elementType=u.elementType,x.type=u.type,x.stateNode=u.stateNode,x.alternate=u,u.alternate=x):(x.pendingProps=f,x.type=u.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=u.flags&14680064,x.childLanes=u.childLanes,x.lanes=u.lanes,x.child=u.child,x.memoizedProps=u.memoizedProps,x.memoizedState=u.memoizedState,x.updateQueue=u.updateQueue,f=u.dependencies,x.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},x.sibling=u.sibling,x.index=u.index,x.ref=u.ref,x}function Kf(u,f,x,T,P,D){var Z=2;if(T=u,typeof u=="function")qf(u)&&(Z=1);else if(typeof u=="string")Z=5;else e:switch(u){case m:return Ra(x.children,P,D,f);case g:Z=8,P|=8;break;case v:return u=Mr(12,x,f,P|2),u.elementType=v,u.lanes=D,u;case w:return u=Mr(13,x,f,P),u.elementType=w,u.lanes=D,u;case S:return u=Mr(19,x,f,P),u.elementType=S,u.lanes=D,u;case R:return Xc(x,P,D,f);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case y:Z=10;break e;case M:Z=9;break e;case E:Z=11;break e;case A:Z=14;break e;case C:Z=16,T=null;break e}throw Error(a(130,u==null?u:typeof u,""))}return f=Mr(Z,x,f,P),f.elementType=u,f.type=T,f.lanes=D,f}function Ra(u,f,x,T){return u=Mr(7,u,T,f),u.lanes=x,u}function Xc(u,f,x,T){return u=Mr(22,u,T,f),u.elementType=R,u.lanes=x,u.stateNode={},u}function Zf(u,f,x){return u=Mr(6,u,null,f),u.lanes=x,u}function $f(u,f,x){return f=Mr(4,u.children!==null?u.children:[],u.key,f),f.lanes=x,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}function Qf(u,f,x,T,P){this.tag=f,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Xe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lf(0),this.expirationTimes=lf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lf(0),this.identifierPrefix=T,this.onRecoverableError=P,Le&&(this.mutableSourceEagerHydrationData=null)}function Zm(u,f,x,T,P,D,Z,ue,Ae){return u=new Qf(u,f,x,ue,Ae),f===1?(f=1,D===!0&&(f|=8)):f=0,D=Mr(3,null,null,f),u.current=D,D.stateNode=u,D.memoizedState={element:T,isDehydrated:x,cache:null,transitions:null},sl(D),u}function $m(u){if(!u)return sn;u=u._reactInternals;e:{if(k(u)!==u||u.tag!==1)throw Error(a(170));var f=u;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(Ht(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(a(171))}if(u.tag===1){var x=u.type;if(Ht(x))return Di(u,x,f)}return f}function Qm(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(a(188)):(u=Object.keys(u).join(","),Error(a(268,u)));return u=J(f),u===null?null:u.stateNode}function Gr(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var x=u.retryLane;u.retryLane=x!==0&&x<f?x:f}}function Yc(u,f){Gr(u,f),(u=u.alternate)&&Gr(u,f)}function Jf(u){return u=J(u),u===null?null:u.stateNode}function Jm(){return null}return t.attemptContinuousHydration=function(u){if(u.tag===13){var f=yn();zi(u,134217728,f),Yc(u,134217728)}},t.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var f=yn(),x=ls(u);zi(u,x,f),Yc(u,x)}},t.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var f=u.stateNode;if(f.current.memoizedState.isDehydrated){var x=nl(f.pendingLanes);x!==0&&(Ss(f,x|1),rr(f,li()),(Qt&6)===0&&(ba(),Ur()))}break;case 13:var T=yn();Tl(function(){return zi(u,1,T)}),Yc(u,1)}},t.batchedUpdates=function(u,f){var x=Qt;Qt|=1;try{return u(f)}finally{Qt=x,Qt===0&&(ba(),df&&Ur())}},t.createComponentSelector=function(u){return{$$typeof:Uc,value:u}},t.createContainer=function(u,f,x,T,P,D,Z){return Zm(u,f,!1,null,x,T,P,D,Z)},t.createHasPseudoClassSelector=function(u){return{$$typeof:Sa,value:u}},t.createHydrationContainer=function(u,f,x,T,P,D,Z,ue,Ae){return u=Zm(x,T,!0,u,P,D,Z,ue,Ae),u.context=$m(null),x=u.current,T=yn(),P=ls(x),D=ks(T,P),D.callback=f??null,To(x,D),u.current.lanes=P,ea(u,P,T),rr(u,T),u},t.createPortal=function(u,f,x){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:T==null?null:""+T,children:u,containerInfo:f,implementation:x}},t.createRoleSelector=function(u){return{$$typeof:wa,value:u}},t.createTestNameSelector=function(u){return{$$typeof:qs,value:u}},t.createTextSelector=function(u){return{$$typeof:Sl,value:u}},t.deferredUpdates=function(u){var f=an,x=bn.transition;try{return bn.transition=null,an=16,u()}finally{an=f,bn.transition=x}},t.discreteUpdates=function(u,f,x,T,P){var D=an,Z=bn.transition;try{return bn.transition=null,an=1,u(f,x,T,P)}finally{an=D,bn.transition=Z,Qt===0&&ba()}},t.findAllNodes=Ks,t.findBoundingRects=function(u,f){if(!tt)throw Error(a(363));f=Ks(u,f),u=[];for(var x=0;x<f.length;x++)u.push(W(f[x]));for(f=u.length-1;0<f;f--){x=u[f];for(var T=x.x,P=T+x.width,D=x.y,Z=D+x.height,ue=f-1;0<=ue;ue--)if(f!==ue){var Ae=u[ue],Ze=Ae.x,_t=Ze+Ae.width,Yt=Ae.y,Ut=Yt+Ae.height;if(T>=Ze&&D>=Yt&&P<=_t&&Z<=Ut){u.splice(f,1);break}else if(T!==Ze||x.width!==Ae.width||Ut<D||Yt>Z){if(!(D!==Yt||x.height!==Ae.height||_t<T||Ze>P)){Ze>T&&(Ae.width+=Ze-T,Ae.x=T),_t<P&&(Ae.width=P-Ze),u.splice(f,1);break}}else{Yt>D&&(Ae.height+=Yt-D,Ae.y=D),Ut<Z&&(Ae.height=Z-Yt),u.splice(f,1);break}}}return u},t.findHostInstance=Qm,t.findHostInstanceWithNoPortals=function(u){return u=G(u),u=u!==null?ce(u):null,u===null?null:u.stateNode},t.findHostInstanceWithWarning=function(u){return Qm(u)},t.flushControlled=function(u){var f=Qt;Qt|=1;var x=bn.transition,T=an;try{bn.transition=null,an=1,u()}finally{an=T,bn.transition=x,Qt=f,Qt===0&&(ba(),Ur())}},t.flushPassiveEffects=As,t.flushSync=Tl,t.focusWithin=function(u,f){if(!tt)throw Error(a(363));for(u=kc(u),f=_r(u,f),f=Array.from(f),u=0;u<f.length;){var x=f[u++];if(!Re(x)){if(x.tag===5&&De(x.stateNode))return!0;for(x=x.child;x!==null;)f.push(x),x=x.sibling}}return!1},t.getCurrentUpdatePriority=function(){return an},t.getFindAllNodesFailureDescription=function(u,f){if(!tt)throw Error(a(363));var x=0,T=[];u=[kc(u),0];for(var P=0;P<u.length;){var D=u[P++],Z=u[P++],ue=f[Z];if((D.tag!==5||!Re(D))&&(Fc(D,ue)&&(T.push(Lo(ue)),Z++,Z>x&&(x=Z)),Z<f.length))for(D=D.child;D!==null;)u.push(D,Z),D=D.sibling}if(x<f.length){for(u=[];x<f.length;x++)u.push(Lo(f[x]));return`findAllNodes was able to match part of the selector:
  `+(T.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},t.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return ne(u.child.stateNode);default:return u.child.stateNode}},t.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:c.ReactCurrentDispatcher,findHostInstanceByFiber:Jf,findFiberByHostInstance:u.findFiberByHostInstance||Jm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)u=!0;else{try{mc=f.inject(u),ws=f}catch{}u=!!f.checkDCE}}return u},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(u,f,x,T){if(!tt)throw Error(a(363));u=Ks(u,f);var P=yt(u,x,T).disconnect;return{disconnect:function(){P()}}},t.registerMutableSourceForHydration=function(u,f){var x=f._getVersion;x=x(f._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[f,x]:u.mutableSourceEagerHydrationData.push(f,x)},t.runWithPriority=function(u,f){var x=an;try{return an=u,f()}finally{an=x}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(u,f,x,T){var P=f.current,D=yn(),Z=ls(P);return x=$m(x),f.context===null?f.context=x:f.pendingContext=x,f=ks(D,Z),f.payload={element:u},T=T===void 0?null:T,T!==null&&(f.callback=T),To(P,f),u=zi(P,Z,D),u!==null&&gf(u,P,Z),Z},t}),h_}var iT;function BG(){return iT||(iT=1,u_.exports=zG()),u_.exports}var VG=BG();const HG=hS(VG);var rT=ZP();const Pw={},GG=i=>void Object.assign(Pw,i);function WG(i,e){function t(m,{args:g=[],attach:v,...y},M){let E=`${m[0].toUpperCase()}${m.slice(1)}`,w;if(m==="primitive"){if(y.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const S=y.object;w=Id(S,{type:m,root:M,attach:v,primitive:!0})}else{const S=Pw[E];if(!S)throw new Error(`R3F: ${E} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(g))throw new Error("R3F: The args prop must be an array!");w=Id(new S(...g),{type:m,root:M,attach:v,memoizedProps:{args:g}})}return w.__r3f.attach===void 0&&(w.isBufferGeometry?w.__r3f.attach="geometry":w.isMaterial&&(w.__r3f.attach="material")),E!=="inject"&&g_(w,y),w}function n(m,g){let v=!1;if(g){var y,M;(y=g.__r3f)!=null&&y.attach?m_(m,g,g.__r3f.attach):g.isObject3D&&m.isObject3D&&(m.add(g),v=!0),v||(M=m.__r3f)==null||M.objects.push(g),g.__r3f||Id(g,{}),g.__r3f.parent=m,uS(g),Nd(g)}}function r(m,g,v){let y=!1;if(g){var M,E;if((M=g.__r3f)!=null&&M.attach)m_(m,g,g.__r3f.attach);else if(g.isObject3D&&m.isObject3D){g.parent=m,g.dispatchEvent({type:"added"}),m.dispatchEvent({type:"childadded",child:g});const w=m.children.filter(A=>A!==g),S=w.indexOf(v);m.children=[...w.slice(0,S),g,...w.slice(S)],y=!0}y||(E=m.__r3f)==null||E.objects.push(g),g.__r3f||Id(g,{}),g.__r3f.parent=m,uS(g),Nd(g)}}function s(m,g,v=!1){m&&[...m].forEach(y=>a(g,y,v))}function a(m,g,v){if(g){var y,M,E;if(g.__r3f&&(g.__r3f.parent=null),(y=m.__r3f)!=null&&y.objects&&(m.__r3f.objects=m.__r3f.objects.filter(R=>R!==g)),(M=g.__r3f)!=null&&M.attach)cT(m,g,g.__r3f.attach);else if(g.isObject3D&&m.isObject3D){var w;m.remove(g),(w=g.__r3f)!=null&&w.root&&$G(Pv(g),g)}const A=(E=g.__r3f)==null?void 0:E.primitive,C=!A&&(v===void 0?g.dispose!==null:v);if(!A){var S;s((S=g.__r3f)==null?void 0:S.objects,g,C),s(g.children,g,C)}if(delete g.__r3f,C&&g.dispose&&g.type!=="Scene"){const R=()=>{try{g.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?rT.unstable_scheduleCallback(rT.unstable_IdlePriority,R):R()}Nd(m)}}function c(m,g,v,y){var M;const E=(M=m.__r3f)==null?void 0:M.parent;if(!E)return;const w=t(g,v,m.__r3f.root);if(m.children){for(const S of m.children)S.__r3f&&n(w,S);m.children=m.children.filter(S=>!S.__r3f)}m.__r3f.objects.forEach(S=>n(w,S)),m.__r3f.objects=[],m.__r3f.autoRemovedBeforeAppend||a(E,m),w.parent&&(w.__r3f.autoRemovedBeforeAppend=!0),n(E,w),w.raycast&&w.__r3f.eventCount&&Pv(w).getState().internal.interaction.push(w),[y,y.alternate].forEach(S=>{S!==null&&(S.stateNode=w,S.ref&&(typeof S.ref=="function"?S.ref(w):S.ref.current=w))})}const d=()=>{};return{reconciler:HG({createInstance:t,removeChild:a,appendChild:n,appendInitialChild:n,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(m,g)=>{if(!g)return;const v=m.getState().scene;v.__r3f&&(v.__r3f.root=m,n(v,g))},removeChildFromContainer:(m,g)=>{g&&a(m.getState().scene,g)},insertInContainerBefore:(m,g,v)=>{if(!g||!v)return;const y=m.getState().scene;y.__r3f&&r(y,g,v)},getRootHostContext:()=>null,getChildHostContext:m=>m,finalizeInitialChildren(m){var g;return!!((g=m==null?void 0:m.__r3f)!=null?g:{}).handlers},prepareUpdate(m,g,v,y){var M;if(((M=m==null?void 0:m.__r3f)!=null?M:{}).primitive&&y.object&&y.object!==m)return[!0];{const{args:w=[],children:S,...A}=y,{args:C=[],children:R,...O}=v;if(!Array.isArray(w))throw new Error("R3F: the args prop must be an array!");if(w.some((F,z)=>F!==C[z]))return[!0];const U=iI(m,A,O,!0);return U.changes.length?[!1,U]:null}},commitUpdate(m,[g,v],y,M,E,w){g?c(m,y,E,w):g_(m,v)},commitMount(m,g,v,y){var M;const E=(M=m.__r3f)!=null?M:{};m.raycast&&E.handlers&&E.eventCount&&Pv(m).getState().internal.interaction.push(m)},getPublicInstance:m=>m,prepareForCommit:()=>null,preparePortalMount:m=>Id(m.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(m){var g;const{attach:v,parent:y}=(g=m.__r3f)!=null?g:{};v&&y&&cT(y,m,v),m.isObject3D&&(m.visible=!1),Nd(m)},unhideInstance(m,g){var v;const{attach:y,parent:M}=(v=m.__r3f)!=null?v:{};y&&M&&m_(M,m,y),(m.isObject3D&&g.visible==null||g.visible)&&(m.visible=!0),Nd(m)},createTextInstance:d,hideTextInstance:d,unhideTextInstance:d,getCurrentEventPriority:()=>e?e():Fd.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&jn.fun(performance.now)?performance.now:jn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:jn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:jn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:g_}}var sT,oT;const p_=i=>"colorSpace"in i||"outputColorSpace"in i,$P=()=>{var i;return(i=Pw.ColorManagement)!=null?i:null},QP=i=>i&&i.isOrthographicCamera,jG=i=>i&&i.hasOwnProperty("current"),Cm=typeof window<"u"&&((sT=window.document)!=null&&sT.createElement||((oT=window.navigator)==null?void 0:oT.product)==="ReactNative")?N.useLayoutEffect:N.useEffect;function JP(i){const e=N.useRef(i);return Cm(()=>void(e.current=i),[i]),e}function XG({set:i}){return Cm(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}class eI extends N.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}eI.getDerivedStateFromError=()=>({error:!0});const tI="__default",aT=new Map,YG=i=>i&&!!i.memoized&&!!i.changes;function nI(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}const Mp=i=>{var e;return(e=i.__r3f)==null?void 0:e.root.getState()};function Pv(i){let e=i.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const jn={obj:i=>i===Object(i)&&!jn.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:r=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(jn.str(i)||jn.num(i)||jn.boo(i))return i===e;const s=jn.obj(i);if(s&&n==="reference")return i===e;const a=jn.arr(i);if(a&&t==="reference")return i===e;if((a||s)&&i===e)return!0;let c;for(c in i)if(!(c in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(c in r?e:i)if(!jn.equ(i[c],e[c],{strict:r,objects:"reference"}))return!1}else for(c in r?e:i)if(i[c]!==e[c])return!1;if(jn.und(c)){if(a&&i.length===0&&e.length===0||s&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function qG(i){i.dispose&&i.type!=="Scene"&&i.dispose();for(const e in i)e.dispose==null||e.dispose(),delete i[e]}function Id(i,e){const t=i;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},i}function cS(i,e){let t=i;if(e.includes("-")){const n=e.split("-"),r=n.pop();return t=n.reduce((s,a)=>s[a],i),{target:t,key:r}}else return{target:t,key:e}}const lT=/-\d+$/;function m_(i,e,t){if(jn.str(t)){if(lT.test(t)){const s=t.replace(lT,""),{target:a,key:c}=cS(i,s);Array.isArray(a[c])||(a[c]=[])}const{target:n,key:r}=cS(i,t);e.__r3f.previousAttach=n[r],n[r]=e}else e.__r3f.previousAttach=t(i,e)}function cT(i,e,t){var n,r;if(jn.str(t)){const{target:s,key:a}=cS(i,t),c=e.__r3f.previousAttach;c===void 0?delete s[a]:s[a]=c}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(i,e);(r=e.__r3f)==null||delete r.previousAttach}function iI(i,{children:e,key:t,ref:n,...r},{children:s,key:a,ref:c,...d}={},h=!1){const m=i.__r3f,g=Object.entries(r),v=[];if(h){const M=Object.keys(d);for(let E=0;E<M.length;E++)r.hasOwnProperty(M[E])||g.unshift([M[E],tI+"remove"])}g.forEach(([M,E])=>{var w;if((w=i.__r3f)!=null&&w.primitive&&M==="object"||jn.equ(E,d[M]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(M))return v.push([M,E,!0,[]]);let S=[];M.includes("-")&&(S=M.split("-")),v.push([M,E,!1,S]);for(const A in r){const C=r[A];A.startsWith(`${M}-`)&&v.push([A,C,!1,A.split("-")])}});const y={...r};return m!=null&&m.memoizedProps&&m!=null&&m.memoizedProps.args&&(y.args=m.memoizedProps.args),m!=null&&m.memoizedProps&&m!=null&&m.memoizedProps.attach&&(y.attach=m.memoizedProps.attach),{memoized:y,changes:v}}function g_(i,e){var t;const n=i.__r3f,r=n==null?void 0:n.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:a,changes:c}=YG(e)?e:iI(i,e),d=n==null?void 0:n.eventCount;i.__r3f&&(i.__r3f.memoizedProps=a);for(let v=0;v<c.length;v++){let[y,M,E,w]=c[v];if(p_(i)){const R="srgb",O="srgb-linear";y==="encoding"?(y="colorSpace",M=M===3001?R:O):y==="outputEncoding"&&(y="outputColorSpace",M=M===3001?R:O)}let S=i,A=S[y];if(w.length&&(A=w.reduce((C,R)=>C[R],i),!(A&&A.set))){const[C,...R]=w.reverse();S=R.reverse().reduce((O,U)=>O[U],i),y=C}if(M===tI+"remove")if(S.constructor){let C=aT.get(S.constructor);C||(C=new S.constructor,aT.set(S.constructor,C)),M=C[y]}else M=0;if(E&&n)M?n.handlers[y]=M:delete n.handlers[y],n.eventCount=Object.keys(n.handlers).length;else if(A&&A.set&&(A.copy||A instanceof Ou)){if(Array.isArray(M))A.fromArray?A.fromArray(M):A.set(...M);else if(A.copy&&M&&M.constructor&&A.constructor===M.constructor)A.copy(M);else if(M!==void 0){var h;const C=(h=A)==null?void 0:h.isColor;!C&&A.setScalar?A.setScalar(M):A instanceof Ou&&M instanceof Ou?A.mask=M.mask:A.set(M),!$P()&&s&&!s.linear&&C&&A.convertSRGBToLinear()}}else{var m;if(S[y]=M,(m=S[y])!=null&&m.isTexture&&S[y].format===fr&&S[y].type===go&&s){const C=S[y];p_(C)&&p_(s.gl)?C.colorSpace=s.gl.outputColorSpace:C.encoding=s.gl.outputEncoding}}Nd(i)}if(n&&n.parent&&i.raycast&&d!==n.eventCount){const v=Pv(i).getState().internal,y=v.interaction.indexOf(i);y>-1&&v.interaction.splice(y,1),n.eventCount&&v.interaction.push(i)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(t=i.__r3f)!=null&&t.parent&&uS(i),i}function Nd(i){var e,t;const n=(e=i.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function uS(i){i.onUpdate==null||i.onUpdate(i)}function KG(i,e){i.manual||(QP(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix(),i.updateMatrixWorld())}function wv(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function ZG(){var i;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Fd.DefaultEventPriority;switch((i=e.event)==null?void 0:i.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Fd.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Fd.ContinuousEventPriority;default:return Fd.DefaultEventPriority}}function rI(i,e,t,n){const r=t.get(e);r&&(t.delete(e),t.size===0&&(i.delete(n),r.target.releasePointerCapture(n)))}function $G(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,r)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((n,r)=>{rI(t.capturedMap,e,n,r)})}function QG(i){function e(d){const{internal:h}=i.getState(),m=d.offsetX-h.initialClick[0],g=d.offsetY-h.initialClick[1];return Math.round(Math.sqrt(m*m+g*g))}function t(d){return d.filter(h=>["Move","Over","Enter","Out","Leave"].some(m=>{var g;return(g=h.__r3f)==null?void 0:g.handlers["onPointer"+m]}))}function n(d,h){const m=i.getState(),g=new Set,v=[],y=h?h(m.internal.interaction):m.internal.interaction;for(let S=0;S<y.length;S++){const A=Mp(y[S]);A&&(A.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(d,m);function M(S){const A=Mp(S);if(!A||!A.events.enabled||A.raycaster.camera===null)return[];if(A.raycaster.camera===void 0){var C;A.events.compute==null||A.events.compute(d,A,(C=A.previousRoot)==null?void 0:C.getState()),A.raycaster.camera===void 0&&(A.raycaster.camera=null)}return A.raycaster.camera?A.raycaster.intersectObject(S,!0):[]}let E=y.flatMap(M).sort((S,A)=>{const C=Mp(S.object),R=Mp(A.object);return!C||!R?S.distance-A.distance:R.events.priority-C.events.priority||S.distance-A.distance}).filter(S=>{const A=wv(S);return g.has(A)?!1:(g.add(A),!0)});m.events.filter&&(E=m.events.filter(E,m));for(const S of E){let A=S.object;for(;A;){var w;(w=A.__r3f)!=null&&w.eventCount&&v.push({...S,eventObject:A}),A=A.parent}}if("pointerId"in d&&m.internal.capturedMap.has(d.pointerId))for(let S of m.internal.capturedMap.get(d.pointerId).values())g.has(wv(S.intersection))||v.push(S.intersection);return v}function r(d,h,m,g){const v=i.getState();if(d.length){const y={stopped:!1};for(const M of d){const E=Mp(M.object)||v,{raycaster:w,pointer:S,camera:A,internal:C}=E,R=new q(S.x,S.y,0).unproject(A),O=L=>{var G,J;return(G=(J=C.capturedMap.get(L))==null?void 0:J.has(M.eventObject))!=null?G:!1},U=L=>{const G={intersection:M,target:h.target};C.capturedMap.has(L)?C.capturedMap.get(L).set(M.eventObject,G):C.capturedMap.set(L,new Map([[M.eventObject,G]])),h.target.setPointerCapture(L)},F=L=>{const G=C.capturedMap.get(L);G&&rI(C.capturedMap,M.eventObject,G,L)};let z={};for(let L in h){let G=h[L];typeof G!="function"&&(z[L]=G)}let k={...M,...z,pointer:S,intersections:d,stopped:y.stopped,delta:m,unprojectedPoint:R,ray:w.ray,camera:A,stopPropagation(){const L="pointerId"in h&&C.capturedMap.get(h.pointerId);if((!L||L.has(M.eventObject))&&(k.stopped=y.stopped=!0,C.hovered.size&&Array.from(C.hovered.values()).find(G=>G.eventObject===M.eventObject))){const G=d.slice(0,d.indexOf(M));s([...G,M])}},target:{hasPointerCapture:O,setPointerCapture:U,releasePointerCapture:F},currentTarget:{hasPointerCapture:O,setPointerCapture:U,releasePointerCapture:F},nativeEvent:h};if(g(k),y.stopped===!0)break}}return d}function s(d){const{internal:h}=i.getState();for(const m of h.hovered.values())if(!d.length||!d.find(g=>g.object===m.object&&g.index===m.index&&g.instanceId===m.instanceId)){const v=m.eventObject.__r3f,y=v==null?void 0:v.handlers;if(h.hovered.delete(wv(m)),v!=null&&v.eventCount){const M={...m,intersections:d};y.onPointerOut==null||y.onPointerOut(M),y.onPointerLeave==null||y.onPointerLeave(M)}}}function a(d,h){for(let m=0;m<h.length;m++){const g=h[m].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(d)}}function c(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return h=>{const{internal:m}=i.getState();"pointerId"in h&&m.capturedMap.has(h.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(h.pointerId)&&(m.capturedMap.delete(h.pointerId),s([]))})}}return function(m){const{onPointerMissed:g,internal:v}=i.getState();v.lastEvent.current=m;const y=d==="onPointerMove",M=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",w=n(m,y?t:void 0),S=M?e(m):0;d==="onPointerDown"&&(v.initialClick=[m.offsetX,m.offsetY],v.initialHits=w.map(C=>C.eventObject)),M&&!w.length&&S<=2&&(a(m,v.interaction),g&&g(m)),y&&s(w);function A(C){const R=C.eventObject,O=R.__r3f,U=O==null?void 0:O.handlers;if(O!=null&&O.eventCount)if(y){if(U.onPointerOver||U.onPointerEnter||U.onPointerOut||U.onPointerLeave){const F=wv(C),z=v.hovered.get(F);z?z.stopped&&C.stopPropagation():(v.hovered.set(F,C),U.onPointerOver==null||U.onPointerOver(C),U.onPointerEnter==null||U.onPointerEnter(C))}U.onPointerMove==null||U.onPointerMove(C)}else{const F=U[d];F?(!M||v.initialHits.includes(R))&&(a(m,v.interaction.filter(z=>!v.initialHits.includes(z))),F(C)):M&&v.initialHits.includes(R)&&a(m,v.interaction.filter(z=>!v.initialHits.includes(z)))}}r(w,m,S,A)}}return{handlePointer:c}}const sI=i=>!!(i!=null&&i.render),oI=N.createContext(null),JG=(i,e)=>{const t=kG((c,d)=>{const h=new q,m=new q,g=new q;function v(S=d().camera,A=m,C=d().size){const{width:R,height:O,top:U,left:F}=C,z=R/O;A.isVector3?g.copy(A):g.set(...A);const k=S.getWorldPosition(h).distanceTo(g);if(QP(S))return{width:R/S.zoom,height:O/S.zoom,top:U,left:F,factor:1,distance:k,aspect:z};{const L=S.fov*Math.PI/180,G=2*Math.tan(L/2)*k,J=G*(R/O);return{width:J,height:G,top:U,left:F,factor:R/J,distance:k,aspect:z}}}let y;const M=S=>c(A=>({performance:{...A.performance,current:S}})),E=new ke;return{set:c,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(S=1)=>i(d(),S),advance:(S,A)=>e(S,A,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Ew,pointer:E,mouse:E,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const S=d();y&&clearTimeout(y),S.performance.current!==S.performance.min&&M(S.performance.min),y=setTimeout(()=>M(d().performance.max),S.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:S=>c(A=>({...A,events:{...A.events,...S}})),setSize:(S,A,C,R,O)=>{const U=d().camera,F={width:S,height:A,top:R||0,left:O||0,updateStyle:C};c(z=>({size:F,viewport:{...z.viewport,...v(U,m,F)}}))},setDpr:S=>c(A=>{const C=nI(S);return{viewport:{...A.viewport,dpr:C,initialDpr:A.viewport.initialDpr||C}}}),setFrameloop:(S="always")=>{const A=d().clock;A.stop(),A.elapsedTime=0,S!=="never"&&(A.start(),A.elapsedTime=0),c(()=>({frameloop:S}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:N.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(S,A,C)=>{const R=d().internal;return R.priority=R.priority+(A>0?1:0),R.subscribers.push({ref:S,priority:A,store:C}),R.subscribers=R.subscribers.sort((O,U)=>O.priority-U.priority),()=>{const O=d().internal;O!=null&&O.subscribers&&(O.priority=O.priority-(A>0?1:0),O.subscribers=O.subscribers.filter(U=>U.ref!==S))}}}}}),n=t.getState();let r=n.size,s=n.viewport.dpr,a=n.camera;return t.subscribe(()=>{const{camera:c,size:d,viewport:h,gl:m,set:g}=t.getState();if(d.width!==r.width||d.height!==r.height||h.dpr!==s){var v;r=d,s=h.dpr,KG(c,d),m.setPixelRatio(h.dpr);const y=(v=d.updateStyle)!=null?v:typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(d.width,d.height,y)}c!==a&&(a=c,g(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(c)}})))}),t.subscribe(c=>i(c)),t};let Mv,eW=new Set,tW=new Set,nW=new Set;function v_(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function Ep(i,e){switch(i){case"before":return v_(eW,e);case"after":return v_(tW,e);case"tail":return v_(nW,e)}}let y_,x_;function __(i,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),y_=e.internal.subscribers,Mv=0;Mv<y_.length;Mv++)x_=y_[Mv],x_.ref.current(x_.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function iW(i){let e=!1,t=!1,n,r,s;function a(h){r=requestAnimationFrame(a),e=!0,n=0,Ep("before",h),t=!0;for(const g of i.values()){var m;s=g.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((m=s.gl.xr)!=null&&m.isPresenting)&&(n+=__(h,s))}if(t=!1,Ep("after",h),n===0)return Ep("tail",h),e=!1,cancelAnimationFrame(r)}function c(h,m=1){var g;if(!h)return i.forEach(v=>c(v.store.getState(),m));(g=h.gl.xr)!=null&&g.isPresenting||!h.internal.active||h.frameloop==="never"||(m>1?h.internal.frames=Math.min(60,h.internal.frames+m):t?h.internal.frames=2:h.internal.frames=1,e||(e=!0,requestAnimationFrame(a)))}function d(h,m=!0,g,v){if(m&&Ep("before",h),g)__(h,g,v);else for(const y of i.values())__(h,y.store.getState());m&&Ep("after",h)}return{loop:a,invalidate:c,advance:d}}function aI(){const i=N.useContext(oI);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function Hl(i=t=>t,e){return aI()(i,e)}function lI(i,e=0){const t=aI(),n=t.getState().internal.subscribe,r=JP(i);return Cm(()=>n(r,e,t),[e,n,t]),null}const th=new Map,{invalidate:uT,advance:fT}=iW(th),{reconciler:by,applyProps:bd}=WG(th,ZG),Cd={objects:"shallow",strict:!1},rW=(i,e)=>{const t=typeof i=="function"?i(e):i;return sI(t)?t:new KP({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...i})};function sW(i,e){const t=typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement;if(e){const{width:n,height:r,top:s,left:a,updateStyle:c=t}=e;return{width:n,height:r,top:s,left:a,updateStyle:c}}else if(typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:n,height:r,top:s,left:a}=i.parentElement.getBoundingClientRect();return{width:n,height:r,top:s,left:a,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function oW(i){const e=th.get(i),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=n||JG(uT,fT),a=t||by.createContainer(s,Fd.ConcurrentRoot,null,!1,null,"",r,null);e||th.set(i,{fiber:a,store:s});let c,d=!1,h;return{configure(m={}){let{gl:g,size:v,scene:y,events:M,onCreated:E,shadows:w=!1,linear:S=!1,flat:A=!1,legacy:C=!1,orthographic:R=!1,frameloop:O="always",dpr:U=[1,2],performance:F,raycaster:z,camera:k,onPointerMissed:L}=m,G=s.getState(),J=G.gl;G.gl||G.set({gl:J=rW(g,i)});let Q=G.raycaster;Q||G.set({raycaster:Q=new VP});const{params:ce,...ge}=z||{};if(jn.equ(ge,Q,Cd)||bd(Q,{...ge}),jn.equ(ce,Q.params,Cd)||bd(Q,{params:{...Q.params,...ce}}),!G.camera||G.camera===h&&!jn.equ(h,k,Cd)){h=k;const te=k instanceof xm,X=te?k:R?new tc(0,0,0,0,.1,1e3):new di(75,0,.1,1e3);te||(X.position.z=5,k&&(bd(X,k),("aspect"in k||"left"in k||"right"in k||"bottom"in k||"top"in k)&&(X.manual=!0,X.updateProjectionMatrix())),!G.camera&&!(k!=null&&k.rotation)&&X.lookAt(0,0,0)),G.set({camera:X}),Q.camera=X}if(!G.scene){let te;y!=null&&y.isScene?te=y:(te=new rw,y&&bd(te,y)),G.set({scene:Id(te)})}if(!G.xr){var ne;const te=(Pe,le)=>{const Ee=s.getState();Ee.frameloop!=="never"&&fT(Pe,!0,Ee,le)},X=()=>{const Pe=s.getState();Pe.gl.xr.enabled=Pe.gl.xr.isPresenting,Pe.gl.xr.setAnimationLoop(Pe.gl.xr.isPresenting?te:null),Pe.gl.xr.isPresenting||uT(Pe)},fe={connect(){const Pe=s.getState().gl;Pe.xr.addEventListener("sessionstart",X),Pe.xr.addEventListener("sessionend",X)},disconnect(){const Pe=s.getState().gl;Pe.xr.removeEventListener("sessionstart",X),Pe.xr.removeEventListener("sessionend",X)}};typeof((ne=J.xr)==null?void 0:ne.addEventListener)=="function"&&fe.connect(),G.set({xr:fe})}if(J.shadowMap){const te=J.shadowMap.enabled,X=J.shadowMap.type;if(J.shadowMap.enabled=!!w,jn.boo(w))J.shadowMap.type=Pp;else if(jn.str(w)){var de;const fe={basic:QA,percentage:Zy,soft:Pp,variance:co};J.shadowMap.type=(de=fe[w])!=null?de:Pp}else jn.obj(w)&&Object.assign(J.shadowMap,w);(te!==J.shadowMap.enabled||X!==J.shadowMap.type)&&(J.shadowMap.needsUpdate=!0)}const B=$P();B&&("enabled"in B?B.enabled=!C:"legacyMode"in B&&(B.legacyMode=C)),d||bd(J,{outputEncoding:S?3e3:3001,toneMapping:A?Xo:VS}),G.legacy!==C&&G.set(()=>({legacy:C})),G.linear!==S&&G.set(()=>({linear:S})),G.flat!==A&&G.set(()=>({flat:A})),g&&!jn.fun(g)&&!sI(g)&&!jn.equ(g,J,Cd)&&bd(J,g),M&&!G.events.handlers&&G.set({events:M(s)});const ie=sW(i,v);return jn.equ(ie,G.size,Cd)||G.setSize(ie.width,ie.height,ie.updateStyle,ie.top,ie.left),U&&G.viewport.dpr!==nI(U)&&G.setDpr(U),G.frameloop!==O&&G.setFrameloop(O),G.onPointerMissed||G.set({onPointerMissed:L}),F&&!jn.equ(F,G.performance,Cd)&&G.set(te=>({performance:{...te.performance,...F}})),c=E,d=!0,this},render(m){return d||this.configure(),by.updateContainer(H.jsx(aW,{store:s,children:m,onCreated:c,rootElement:i}),a,null,()=>{}),s},unmount(){cI(i)}}}function aW({store:i,children:e,onCreated:t,rootElement:n}){return Cm(()=>{const r=i.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),i.getState().events.connected||r.events.connect==null||r.events.connect(n)},[]),H.jsx(oI.Provider,{value:i,children:e})}function cI(i,e){const t=th.get(i),n=t==null?void 0:t.fiber;if(n){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),by.updateContainer(null,n,null,()=>{r&&setTimeout(()=>{try{var s,a,c,d;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(c=r.gl)==null||c.forceContextLoss==null||c.forceContextLoss(),(d=r.gl)!=null&&d.xr&&r.xr.disconnect(),qG(r),th.delete(i)}catch{}},500)})}}by.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:N.version});const S_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function lW(i){const{handlePointer:e}=QG(i);return{priority:1,enabled:!0,compute(t,n,r){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(S_).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:r}=i.getState();(t=r.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var n;const{set:r,events:s}=i.getState();s.disconnect==null||s.disconnect(),r(a=>({events:{...a.events,connected:t}})),Object.entries((n=s.handlers)!=null?n:[]).forEach(([a,c])=>{const[d,h]=S_[a];t.addEventListener(d,c,{passive:h})})},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){var r;Object.entries((r=n.handlers)!=null?r:[]).forEach(([s,a])=>{if(n&&n.connected instanceof HTMLElement){const[c]=S_[s];n.connected.removeEventListener(c,a)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function dT(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function cW({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=N.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=N.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),d=i?typeof i=="number"?i:i.scroll:null,h=i?typeof i=="number"?i:i.resize:null,m=N.useRef(!1);N.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[g,v,y]=N.useMemo(()=>{const S=()=>{if(!c.current.element)return;const{left:A,top:C,width:R,height:O,bottom:U,right:F,x:z,y:k}=c.current.element.getBoundingClientRect(),L={left:A,top:C,width:R,height:O,bottom:U,right:F,x:z,y:k};c.current.element instanceof HTMLElement&&n&&(L.height=c.current.element.offsetHeight,L.width=c.current.element.offsetWidth),Object.freeze(L),m.current&&!hW(c.current.lastBounds,L)&&a(c.current.lastBounds=L)};return[S,h?dT(S,h):S,d?dT(S,d):S]},[a,n,d,h]);function M(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",y,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null),c.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",c.current.orientationHandler))}function E(){c.current.element&&(c.current.resizeObserver=new r(y),c.current.resizeObserver.observe(c.current.element),e&&c.current.scrollContainers&&c.current.scrollContainers.forEach(S=>S.addEventListener("scroll",y,{capture:!0,passive:!0})),c.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",c.current.orientationHandler))}const w=S=>{!S||S===c.current.element||(M(),c.current.element=S,c.current.scrollContainers=uI(S),E())};return fW(y,!!e),uW(v),N.useEffect(()=>{M(),E()},[e,y,v]),N.useEffect(()=>M,[]),[w,s,g]}function uW(i){N.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function fW(i,e){N.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function uI(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:r}=window.getComputedStyle(i);return[t,n,r].some(s=>s==="auto"||s==="scroll")&&e.push(i),[...e,...uI(i.parentElement)]}const dW=["x","y","top","bottom","left","right","width","height"],hW=(i,e)=>dW.every(t=>i[t]===e[t]);var pW=Object.defineProperty,mW=Object.defineProperties,gW=Object.getOwnPropertyDescriptors,hT=Object.getOwnPropertySymbols,vW=Object.prototype.hasOwnProperty,yW=Object.prototype.propertyIsEnumerable,pT=(i,e,t)=>e in i?pW(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,mT=(i,e)=>{for(var t in e||(e={}))vW.call(e,t)&&pT(i,t,e[t]);if(hT)for(var t of hT(e))yW.call(e,t)&&pT(i,t,e[t]);return i},xW=(i,e)=>mW(i,gW(e)),gT,vT;typeof window<"u"&&((gT=window.document)!=null&&gT.createElement||((vT=window.navigator)==null?void 0:vT.product)==="ReactNative")?N.useLayoutEffect:N.useEffect;function fI(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=i.child;for(;n;){const r=fI(n,e,t);if(r)return r;n=n.sibling}}function dI(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const yT=console.error;console.error=function(){const i=[...arguments].join("");if(i!=null&&i.startsWith("Warning:")&&i.includes("useContext")){console.error=yT;return}return yT.apply(this,arguments)};const Iw=dI(N.createContext(null));class hI extends N.Component{render(){return N.createElement(Iw.Provider,{value:this._reactInternals},this.props.children)}}function _W(){const i=N.useContext(Iw);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=N.useId();return N.useMemo(()=>{for(const n of[i,i==null?void 0:i.alternate]){if(!n)continue;const r=fI(n,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(r)return r}},[i,e])}function SW(){const i=_W(),[e]=N.useState(()=>new Map);e.clear();let t=i;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==Iw&&!e.has(r)&&e.set(r,N.useContext(dI(r)))}t=t.return}return e}function wW(){const i=SW();return N.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>N.createElement(e,null,N.createElement(t.Provider,xW(mT({},n),{value:i.get(t)}))),e=>N.createElement(hI,mT({},e))),[i])}const MW=N.forwardRef(function({children:e,fallback:t,resize:n,style:r,gl:s,events:a=lW,eventSource:c,eventPrefix:d,shadows:h,linear:m,flat:g,legacy:v,orthographic:y,frameloop:M,dpr:E,performance:w,raycaster:S,camera:A,scene:C,onPointerMissed:R,onCreated:O,...U},F){N.useMemo(()=>GG(NG),[]);const z=wW(),[k,L]=cW({scroll:!0,debounce:{scroll:50,resize:0},...n}),G=N.useRef(null),J=N.useRef(null);N.useImperativeHandle(F,()=>G.current);const Q=JP(R),[ce,ge]=N.useState(!1),[ne,de]=N.useState(!1);if(ce)throw ce;if(ne)throw ne;const B=N.useRef(null);Cm(()=>{const te=G.current;L.width>0&&L.height>0&&te&&(B.current||(B.current=oW(te)),B.current.configure({gl:s,events:a,shadows:h,linear:m,flat:g,legacy:v,orthographic:y,frameloop:M,dpr:E,performance:w,raycaster:S,camera:A,scene:C,size:L,onPointerMissed:(...X)=>Q.current==null?void 0:Q.current(...X),onCreated:X=>{X.events.connect==null||X.events.connect(c?jG(c)?c.current:c:J.current),d&&X.setEvents({compute:(fe,Pe)=>{const le=fe[d+"X"],Ee=fe[d+"Y"];Pe.pointer.set(le/Pe.size.width*2-1,-(Ee/Pe.size.height)*2+1),Pe.raycaster.setFromCamera(Pe.pointer,Pe.camera)}}),O==null||O(X)}}),B.current.render(H.jsx(z,{children:H.jsx(eI,{set:de,children:H.jsx(N.Suspense,{fallback:H.jsx(XG,{set:ge}),children:e??null})})})))}),N.useEffect(()=>{const te=G.current;if(te)return()=>cI(te)},[]);const ie=c?"none":"auto";return H.jsx("div",{ref:J,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ie,...r},...U,children:H.jsx("div",{ref:k,style:{width:"100%",height:"100%"},children:H.jsx("canvas",{ref:G,style:{display:"block"},children:t})})})}),EW=N.forwardRef(function(e,t){return H.jsx(hI,{children:H.jsx(MW,{...e,ref:t})})});function fS(){return fS=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},fS.apply(null,arguments)}var TW=Object.defineProperty,bW=(i,e,t)=>e in i?TW(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,CW=(i,e,t)=>(bW(i,e+"",t),t);class AW{constructor(){CW(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}var RW=Object.defineProperty,PW=(i,e,t)=>e in i?RW(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Bt=(i,e,t)=>(PW(i,typeof e!="symbol"?e+"":e,t),t);const Ev=new Ku,xT=new Va,IW=Math.cos(70*(Math.PI/180)),_T=(i,e)=>(i%e+e)%e;let NW=class extends AW{constructor(e,t){super(),Bt(this,"object"),Bt(this,"domElement"),Bt(this,"enabled",!0),Bt(this,"target",new q),Bt(this,"minDistance",0),Bt(this,"maxDistance",1/0),Bt(this,"minZoom",0),Bt(this,"maxZoom",1/0),Bt(this,"minPolarAngle",0),Bt(this,"maxPolarAngle",Math.PI),Bt(this,"minAzimuthAngle",-1/0),Bt(this,"maxAzimuthAngle",1/0),Bt(this,"enableDamping",!1),Bt(this,"dampingFactor",.05),Bt(this,"enableZoom",!0),Bt(this,"zoomSpeed",1),Bt(this,"enableRotate",!0),Bt(this,"rotateSpeed",1),Bt(this,"enablePan",!0),Bt(this,"panSpeed",1),Bt(this,"screenSpacePanning",!0),Bt(this,"keyPanSpeed",7),Bt(this,"zoomToCursor",!1),Bt(this,"autoRotate",!1),Bt(this,"autoRotateSpeed",2),Bt(this,"reverseOrbit",!1),Bt(this,"reverseHorizontalOrbit",!1),Bt(this,"reverseVerticalOrbit",!1),Bt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Bt(this,"mouseButtons",{LEFT:gu.ROTATE,MIDDLE:gu.DOLLY,RIGHT:gu.PAN}),Bt(this,"touches",{ONE:vu.ROTATE,TWO:vu.DOLLY_PAN}),Bt(this,"target0"),Bt(this,"position0"),Bt(this,"zoom0"),Bt(this,"_domElementKeyEvents",null),Bt(this,"getPolarAngle"),Bt(this,"getAzimuthalAngle"),Bt(this,"setPolarAngle"),Bt(this,"setAzimuthalAngle"),Bt(this,"getDistance"),Bt(this,"getZoomScale"),Bt(this,"listenToKeyEvents"),Bt(this,"stopListenToKeyEvents"),Bt(this,"saveState"),Bt(this,"reset"),Bt(this,"update"),Bt(this,"connect"),Bt(this,"dispose"),Bt(this,"dollyIn"),Bt(this,"dollyOut"),Bt(this,"getScale"),Bt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>m.phi,this.getAzimuthalAngle=()=>m.theta,this.setPolarAngle=re=>{let Ie=_T(re,2*Math.PI),rt=m.phi;rt<0&&(rt+=2*Math.PI),Ie<0&&(Ie+=2*Math.PI);let ee=Math.abs(Ie-rt);2*Math.PI-ee<ee&&(Ie<rt?Ie+=2*Math.PI:rt+=2*Math.PI),g.phi=Ie-rt,n.update()},this.setAzimuthalAngle=re=>{let Ie=_T(re,2*Math.PI),rt=m.theta;rt<0&&(rt+=2*Math.PI),Ie<0&&(Ie+=2*Math.PI);let ee=Math.abs(Ie-rt);2*Math.PI-ee<ee&&(Ie<rt?Ie+=2*Math.PI:rt+=2*Math.PI),g.theta=Ie-rt,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=re=>{re.addEventListener("keydown",Je),this._domElementKeyEvents=re},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Je),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),d=c.NONE},this.update=(()=>{const re=new q,Ie=new q(0,1,0),rt=new dr().setFromUnitVectors(e.up,Ie),ee=rt.clone().invert(),Ye=new q,Te=new dr,Ne=2*Math.PI;return function(){const st=n.object.position;rt.setFromUnitVectors(e.up,Ie),ee.copy(rt).invert(),re.copy(st).sub(n.target),re.applyQuaternion(rt),m.setFromVector3(re),n.autoRotate&&d===c.NONE&&ce(J()),n.enableDamping?(m.theta+=g.theta*n.dampingFactor,m.phi+=g.phi*n.dampingFactor):(m.theta+=g.theta,m.phi+=g.phi);let Lt=n.minAzimuthAngle,pn=n.maxAzimuthAngle;isFinite(Lt)&&isFinite(pn)&&(Lt<-Math.PI?Lt+=Ne:Lt>Math.PI&&(Lt-=Ne),pn<-Math.PI?pn+=Ne:pn>Math.PI&&(pn-=Ne),Lt<=pn?m.theta=Math.max(Lt,Math.min(pn,m.theta)):m.theta=m.theta>(Lt+pn)/2?Math.max(Lt,m.theta):Math.min(pn,m.theta)),m.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,m.phi)),m.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(y,n.dampingFactor):n.target.add(y),n.zoomToCursor&&k||n.object.isOrthographicCamera?m.radius=Pe(m.radius):m.radius=Pe(m.radius*v),re.setFromSpherical(m),re.applyQuaternion(ee),st.copy(n.target).add(re),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(g.theta*=1-n.dampingFactor,g.phi*=1-n.dampingFactor,y.multiplyScalar(1-n.dampingFactor)):(g.set(0,0,0),y.set(0,0,0));let Nn=!1;if(n.zoomToCursor&&k){let en=null;if(n.object instanceof di&&n.object.isPerspectiveCamera){const Kn=re.length();en=Pe(Kn*v);const ei=Kn-en;n.object.position.addScaledVector(F,ei),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Kn=new q(z.x,z.y,0);Kn.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix(),Nn=!0;const ei=new q(z.x,z.y,0);ei.unproject(n.object),n.object.position.sub(ei).add(Kn),n.object.updateMatrixWorld(),en=re.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;en!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(en).add(n.object.position):(Ev.origin.copy(n.object.position),Ev.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Ev.direction))<IW?e.lookAt(n.target):(xT.setFromNormalAndCoplanarPoint(n.object.up,n.target),Ev.intersectPlane(xT,n.target))))}else n.object instanceof tc&&n.object.isOrthographicCamera&&(Nn=v!==1,Nn&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix()));return v=1,k=!1,Nn||Ye.distanceToSquared(n.object.position)>h||8*(1-Te.dot(n.object.quaternion))>h?(n.dispatchEvent(r),Ye.copy(n.object.position),Te.copy(n.object.quaternion),Nn=!1,!0):!1}})(),this.connect=re=>{n.domElement=re,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",We),n.domElement.addEventListener("pointerdown",W),n.domElement.addEventListener("pointercancel",Re),n.domElement.addEventListener("wheel",yt)},this.dispose=()=>{var re,Ie,rt,ee,Ye,Te;n.domElement&&(n.domElement.style.touchAction="auto"),(re=n.domElement)==null||re.removeEventListener("contextmenu",We),(Ie=n.domElement)==null||Ie.removeEventListener("pointerdown",W),(rt=n.domElement)==null||rt.removeEventListener("pointercancel",Re),(ee=n.domElement)==null||ee.removeEventListener("wheel",yt),(Ye=n.domElement)==null||Ye.ownerDocument.removeEventListener("pointermove",ye),(Te=n.domElement)==null||Te.ownerDocument.removeEventListener("pointerup",Re),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Je)};const n=this,r={type:"change"},s={type:"start"},a={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let d=c.NONE;const h=1e-6,m=new sS,g=new sS;let v=1;const y=new q,M=new ke,E=new ke,w=new ke,S=new ke,A=new ke,C=new ke,R=new ke,O=new ke,U=new ke,F=new q,z=new ke;let k=!1;const L=[],G={};function J(){return 2*Math.PI/60/60*n.autoRotateSpeed}function Q(){return Math.pow(.95,n.zoomSpeed)}function ce(re){n.reverseOrbit||n.reverseHorizontalOrbit?g.theta+=re:g.theta-=re}function ge(re){n.reverseOrbit||n.reverseVerticalOrbit?g.phi+=re:g.phi-=re}const ne=(()=>{const re=new q;return function(rt,ee){re.setFromMatrixColumn(ee,0),re.multiplyScalar(-rt),y.add(re)}})(),de=(()=>{const re=new q;return function(rt,ee){n.screenSpacePanning===!0?re.setFromMatrixColumn(ee,1):(re.setFromMatrixColumn(ee,0),re.crossVectors(n.object.up,re)),re.multiplyScalar(rt),y.add(re)}})(),B=(()=>{const re=new q;return function(rt,ee){const Ye=n.domElement;if(Ye&&n.object instanceof di&&n.object.isPerspectiveCamera){const Te=n.object.position;re.copy(Te).sub(n.target);let Ne=re.length();Ne*=Math.tan(n.object.fov/2*Math.PI/180),ne(2*rt*Ne/Ye.clientHeight,n.object.matrix),de(2*ee*Ne/Ye.clientHeight,n.object.matrix)}else Ye&&n.object instanceof tc&&n.object.isOrthographicCamera?(ne(rt*(n.object.right-n.object.left)/n.object.zoom/Ye.clientWidth,n.object.matrix),de(ee*(n.object.top-n.object.bottom)/n.object.zoom/Ye.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function ie(re){n.object instanceof di&&n.object.isPerspectiveCamera||n.object instanceof tc&&n.object.isOrthographicCamera?v=re:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function te(re){ie(v/re)}function X(re){ie(v*re)}function fe(re){if(!n.zoomToCursor||!n.domElement)return;k=!0;const Ie=n.domElement.getBoundingClientRect(),rt=re.clientX-Ie.left,ee=re.clientY-Ie.top,Ye=Ie.width,Te=Ie.height;z.x=rt/Ye*2-1,z.y=-(ee/Te)*2+1,F.set(z.x,z.y,1).unproject(n.object).sub(n.object.position).normalize()}function Pe(re){return Math.max(n.minDistance,Math.min(n.maxDistance,re))}function le(re){M.set(re.clientX,re.clientY)}function Ee(re){fe(re),R.set(re.clientX,re.clientY)}function Ue(re){S.set(re.clientX,re.clientY)}function he(re){E.set(re.clientX,re.clientY),w.subVectors(E,M).multiplyScalar(n.rotateSpeed);const Ie=n.domElement;Ie&&(ce(2*Math.PI*w.x/Ie.clientHeight),ge(2*Math.PI*w.y/Ie.clientHeight)),M.copy(E),n.update()}function Fe(re){O.set(re.clientX,re.clientY),U.subVectors(O,R),U.y>0?te(Q()):U.y<0&&X(Q()),R.copy(O),n.update()}function Xe(re){A.set(re.clientX,re.clientY),C.subVectors(A,S).multiplyScalar(n.panSpeed),B(C.x,C.y),S.copy(A),n.update()}function Ge(re){fe(re),re.deltaY<0?X(Q()):re.deltaY>0&&te(Q()),n.update()}function Qe(re){let Ie=!1;switch(re.code){case n.keys.UP:B(0,n.keyPanSpeed),Ie=!0;break;case n.keys.BOTTOM:B(0,-n.keyPanSpeed),Ie=!0;break;case n.keys.LEFT:B(n.keyPanSpeed,0),Ie=!0;break;case n.keys.RIGHT:B(-n.keyPanSpeed,0),Ie=!0;break}Ie&&(re.preventDefault(),n.update())}function Se(){if(L.length==1)M.set(L[0].pageX,L[0].pageY);else{const re=.5*(L[0].pageX+L[1].pageX),Ie=.5*(L[0].pageY+L[1].pageY);M.set(re,Ie)}}function Le(){if(L.length==1)S.set(L[0].pageX,L[0].pageY);else{const re=.5*(L[0].pageX+L[1].pageX),Ie=.5*(L[0].pageY+L[1].pageY);S.set(re,Ie)}}function K(){const re=L[0].pageX-L[1].pageX,Ie=L[0].pageY-L[1].pageY,rt=Math.sqrt(re*re+Ie*Ie);R.set(0,rt)}function ht(){n.enableZoom&&K(),n.enablePan&&Le()}function Be(){n.enableZoom&&K(),n.enableRotate&&Se()}function nt(re){if(L.length==1)E.set(re.pageX,re.pageY);else{const rt=dt(re),ee=.5*(re.pageX+rt.x),Ye=.5*(re.pageY+rt.y);E.set(ee,Ye)}w.subVectors(E,M).multiplyScalar(n.rotateSpeed);const Ie=n.domElement;Ie&&(ce(2*Math.PI*w.x/Ie.clientHeight),ge(2*Math.PI*w.y/Ie.clientHeight)),M.copy(E)}function Ke(re){if(L.length==1)A.set(re.pageX,re.pageY);else{const Ie=dt(re),rt=.5*(re.pageX+Ie.x),ee=.5*(re.pageY+Ie.y);A.set(rt,ee)}C.subVectors(A,S).multiplyScalar(n.panSpeed),B(C.x,C.y),S.copy(A)}function bt(re){const Ie=dt(re),rt=re.pageX-Ie.x,ee=re.pageY-Ie.y,Ye=Math.sqrt(rt*rt+ee*ee);O.set(0,Ye),U.set(0,Math.pow(O.y/R.y,n.zoomSpeed)),te(U.y),R.copy(O)}function tt(re){n.enableZoom&&bt(re),n.enablePan&&Ke(re)}function Y(re){n.enableZoom&&bt(re),n.enableRotate&&nt(re)}function W(re){var Ie,rt;n.enabled!==!1&&(L.length===0&&((Ie=n.domElement)==null||Ie.ownerDocument.addEventListener("pointermove",ye),(rt=n.domElement)==null||rt.ownerDocument.addEventListener("pointerup",Re)),gt(re),re.pointerType==="touch"?ct(re):ze(re))}function ye(re){n.enabled!==!1&&(re.pointerType==="touch"?Xt(re):De(re))}function Re(re){var Ie,rt,ee;Dt(re),L.length===0&&((Ie=n.domElement)==null||Ie.releasePointerCapture(re.pointerId),(rt=n.domElement)==null||rt.ownerDocument.removeEventListener("pointermove",ye),(ee=n.domElement)==null||ee.ownerDocument.removeEventListener("pointerup",Re)),n.dispatchEvent(a),d=c.NONE}function ze(re){let Ie;switch(re.button){case 0:Ie=n.mouseButtons.LEFT;break;case 1:Ie=n.mouseButtons.MIDDLE;break;case 2:Ie=n.mouseButtons.RIGHT;break;default:Ie=-1}switch(Ie){case gu.DOLLY:if(n.enableZoom===!1)return;Ee(re),d=c.DOLLY;break;case gu.ROTATE:if(re.ctrlKey||re.metaKey||re.shiftKey){if(n.enablePan===!1)return;Ue(re),d=c.PAN}else{if(n.enableRotate===!1)return;le(re),d=c.ROTATE}break;case gu.PAN:if(re.ctrlKey||re.metaKey||re.shiftKey){if(n.enableRotate===!1)return;le(re),d=c.ROTATE}else{if(n.enablePan===!1)return;Ue(re),d=c.PAN}break;default:d=c.NONE}d!==c.NONE&&n.dispatchEvent(s)}function De(re){if(n.enabled!==!1)switch(d){case c.ROTATE:if(n.enableRotate===!1)return;he(re);break;case c.DOLLY:if(n.enableZoom===!1)return;Fe(re);break;case c.PAN:if(n.enablePan===!1)return;Xe(re);break}}function yt(re){n.enabled===!1||n.enableZoom===!1||d!==c.NONE&&d!==c.ROTATE||(re.preventDefault(),n.dispatchEvent(s),Ge(re),n.dispatchEvent(a))}function Je(re){n.enabled===!1||n.enablePan===!1||Qe(re)}function ct(re){switch(kt(re),L.length){case 1:switch(n.touches.ONE){case vu.ROTATE:if(n.enableRotate===!1)return;Se(),d=c.TOUCH_ROTATE;break;case vu.PAN:if(n.enablePan===!1)return;Le(),d=c.TOUCH_PAN;break;default:d=c.NONE}break;case 2:switch(n.touches.TWO){case vu.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;ht(),d=c.TOUCH_DOLLY_PAN;break;case vu.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Be(),d=c.TOUCH_DOLLY_ROTATE;break;default:d=c.NONE}break;default:d=c.NONE}d!==c.NONE&&n.dispatchEvent(s)}function Xt(re){switch(kt(re),d){case c.TOUCH_ROTATE:if(n.enableRotate===!1)return;nt(re),n.update();break;case c.TOUCH_PAN:if(n.enablePan===!1)return;Ke(re),n.update();break;case c.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;tt(re),n.update();break;case c.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Y(re),n.update();break;default:d=c.NONE}}function We(re){n.enabled!==!1&&re.preventDefault()}function gt(re){L.push(re)}function Dt(re){delete G[re.pointerId];for(let Ie=0;Ie<L.length;Ie++)if(L[Ie].pointerId==re.pointerId){L.splice(Ie,1);return}}function kt(re){let Ie=G[re.pointerId];Ie===void 0&&(Ie=new ke,G[re.pointerId]=Ie),Ie.set(re.pageX,re.pageY)}function dt(re){const Ie=re.pointerId===L[0].pointerId?L[1]:L[0];return G[Ie.pointerId]}this.dollyIn=(re=Q())=>{X(re),n.update()},this.dollyOut=(re=Q())=>{te(re),n.update()},this.getScale=()=>v,this.setScale=re=>{ie(re),n.update()},this.getZoomScale=()=>Q(),t!==void 0&&this.connect(t),this.update()}};const LW=N.forwardRef(({makeDefault:i,camera:e,regress:t,domElement:n,enableDamping:r=!0,keyEvents:s=!1,onChange:a,onStart:c,onEnd:d,...h},m)=>{const g=Hl(U=>U.invalidate),v=Hl(U=>U.camera),y=Hl(U=>U.gl),M=Hl(U=>U.events),E=Hl(U=>U.setEvents),w=Hl(U=>U.set),S=Hl(U=>U.get),A=Hl(U=>U.performance),C=e||v,R=n||M.connected||y.domElement,O=N.useMemo(()=>new NW(C),[C]);return lI(()=>{O.enabled&&O.update()},-1),N.useEffect(()=>(s&&O.connect(s===!0?R:s),O.connect(R),()=>void O.dispose()),[s,R,t,O,g]),N.useEffect(()=>{const U=k=>{g(),t&&A.regress(),a&&a(k)},F=k=>{c&&c(k)},z=k=>{d&&d(k)};return O.addEventListener("change",U),O.addEventListener("start",F),O.addEventListener("end",z),()=>{O.removeEventListener("start",F),O.removeEventListener("end",z),O.removeEventListener("change",U)}},[a,c,d,O,g,E]),N.useEffect(()=>{if(i){const U=S().controls;return w({controls:O}),()=>w({controls:U})}},[i,O]),N.createElement("primitive",fS({ref:m,object:O,enableDamping:r},h))});function DW({color:i,paused:e}){const t=N.useRef(null);return lI((n,r)=>{e||(t.current.rotation.x+=r,t.current.rotation.y+=r*.5)}),H.jsxs("mesh",{ref:t,children:[H.jsx("boxGeometry",{args:[2,2,2]}),H.jsx("meshStandardMaterial",{color:i})]})}function OW({color:i,paused:e=!1}){return H.jsxs(EW,{camera:{position:[0,2,5],fov:50},children:[H.jsx("ambientLight",{intensity:.5}),H.jsx("pointLight",{position:[10,10,10]}),H.jsx(DW,{color:i,paused:e}),H.jsx(LW,{enableRotate:!e}),H.jsx("gridHelper",{args:[10,10]})]})}function UW({onResume:i,onQuit:e,settingsOpen:t,onSettingsOpenChange:n}){return N.useEffect(()=>{const r=s=>{s.key==="Escape"&&!t&&i()};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[i,t]),H.jsxs(H.Fragment,{children:[H.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:H.jsxs("div",{className:"bg-slate-900/90 backdrop-blur-md border border-white/20 rounded-2xl p-8 shadow-2xl min-w-[400px]",children:[H.jsx("h2",{className:"text-4xl font-bold text-white mb-2 text-center",children:"PAUSED"}),H.jsx("p",{className:"text-slate-400 text-center mb-8",children:"Game is paused"}),H.jsxs("div",{className:"flex flex-col gap-4",children:[H.jsx(Jl,{size:"lg",className:"text-xl py-6 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700",onClick:i,children:" Resume Game"}),H.jsx(Jl,{size:"lg",variant:"outline",className:"text-xl py-6",onClick:()=>n(!0),children:" Settings"}),H.jsx(Jl,{size:"lg",variant:"destructive",className:"text-xl py-6",onClick:e,children:" Quit to Menu"})]}),H.jsx("p",{className:"text-slate-500 text-sm text-center mt-6",children:"Press ESC to resume"})]})}),H.jsx(KA,{open:t,onOpenChange:n})]})}function hu(){const i=vS(),e=WT(),[t,n]=N.useState(!1),[r,s]=N.useState(!1),{updateSetting:a}=yS(),c=i.pathname.substring(1);N.useEffect(()=>{c&&c!==""&&a("gameMode",c)},[c,a]),N.useEffect(()=>{const m=g=>{g.key==="Escape"&&!r&&n(v=>!v)};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[r]);const d=()=>n(!1),h=()=>e("/");return H.jsxs("div",{className:"relative w-full h-full bg-black",children:[H.jsx(OW,{color:"#ff6600",paused:t}),!t&&H.jsx("div",{className:"absolute top-4 left-4 pointer-events-auto",children:H.jsxs("div",{className:"bg-black/80 backdrop-blur-sm border border-white/20 rounded-lg p-4 text-white",children:[H.jsxs("h2",{className:"text-xl font-bold mb-2",children:["Game Mode: ",c==null?void 0:c.toUpperCase()]}),H.jsx("p",{className:"text-sm text-gray-300",children:"Game is running..."}),H.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Press ESC to pause"})]})}),t&&H.jsx(UW,{onResume:d,onQuit:h,settingsOpen:r,onSettingsOpenChange:s})]})}function kW(){return H.jsx(vN,{children:H.jsxs(pN,{children:[H.jsx(Ba,{path:"/",element:H.jsx(Ek,{})}),H.jsx(Ba,{path:"/arcade",element:H.jsx(hu,{})}),H.jsx(Ba,{path:"/survival",element:H.jsx(hu,{})}),H.jsx(Ba,{path:"/arena",element:H.jsx(hu,{})}),H.jsx(Ba,{path:"/matrix",element:H.jsx(hu,{})}),H.jsx(Ba,{path:"/multiplayer",element:H.jsx(hu,{})}),H.jsx(Ba,{path:"/studio",element:H.jsx(hu,{})}),H.jsx(Ba,{path:"/matrix-ai",element:H.jsx(hu,{})})]})})}const FW=new y2;XI.createRoot(document.getElementById("root")).render(H.jsx(N.StrictMode,{children:H.jsx(_2,{client:FW,children:H.jsx(kW,{})})}));
