const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/spiderElement-Du5wmdeG.js","assets/slendermanElement-C-gf9PPq.js"])))=>i.map(i=>d[i]);
import{e as x,M as m,a as i,c,i as ge,j as J,S as Q,I as fe,C as te,J as Ee,U as be,W as xe,Y as ve,O as Me,Q as Pe,P as Se,G as Be,Z as Ie,_ as je,$ as Ce,a0 as ke,l as le,V as Y,X as Le}from"./slendermanElement-C-gf9PPq.js";import{t as _e,l as Fe,r as Ae,s as Te,m as Oe,n as ze,v as He,_ as T}from"./spiderElement-Du5wmdeG.js";import{O as Ge}from"./OrbitControls-Bnl08Rmj.js";function Ze(e=1,o=12436423,t=8359053){const n=new x,s=new m({color:o,roughness:.9}),a=new m({color:t,roughness:.7,metalness:.1});[{x:0,y:2,z:-3,w:6,h:4,d:.4},{x:0,y:2,z:3,w:6,h:4,d:.4},{x:-3,y:2,z:0,w:.4,h:4,d:6},{x:3,y:2,z:0,w:.4,h:4,d:6}].forEach(w=>{const P=new i(new c(w.w,w.h,w.d),s);P.position.set(w.x,w.y,w.z),P.castShadow=!0,P.receiveShadow=!0,n.add(P)});const l=new i(new ge(5,2,4),a);l.position.y=5,l.rotation.y=Math.PI/4,l.castShadow=!0,n.add(l);const d=new m({color:5057307}),h=new i(new c(1,2.2,.1),d);h.position.set(0,1.1,3.26),n.add(h);const p=new m({color:8962303,metalness:.1,roughness:.2,transparent:!0,opacity:.8}),E=new i(new c(1,1,.05),p);E.position.set(-2,2.2,-3.26);const f=E.clone();return f.position.set(2,2.2,-3.26),n.add(E),n.add(f),n.scale.setScalar(e),n}const Re=Object.freeze(Object.defineProperty({__proto__:null,createHouseElement:Ze},Symbol.toStringTag,{value:"Module"}));function We(){const e=new x;e.rotation.y=Math.random()*Math.PI*2;const o=new m({color:8359053}),t=new m({color:12436423}),n=8,s=8,a=6,r=.35,l=2.2,d=n/2,h=s/2,p=new i(new c(n,a,r),o);p.position.set(0,a/2,-h);const E=new i(new c(r,a,s),o);E.position.set(-d,a/2,0);const f=E.clone();f.position.x=d;const w=new i(new c((n-l)/2,a,r),o);w.position.set(-2.55,a/2,h);const P=w.clone();P.position.x=l/2+(n-l)/4,[p,E,f,w,P].forEach(F=>{F.castShadow=!0,F.receiveShadow=!0,e.add(F)});const I=new i(new c(n-.4,.3,s-.4),t);I.position.y=.15,I.receiveShadow=!0,e.add(I);const C=new i(new c(n-.4,.3,s-.4),t);C.position.y=3.4,C.receiveShadow=!0,e.add(C);const k=C.position.y,O=10,L=new c(3,k,O),_=new i(L,t);_.position.set(0,k/2,h+O/2),_.rotation.x=-Math.atan(k/O),_.castShadow=!0,_.receiveShadow=!0,e.add(_);const j=new i(new c(n+.4,.4,s+.4),new m({color:9807270}));return j.position.y=a+.2,j.castShadow=!0,e.add(j),e}const Ve=Object.freeze(Object.defineProperty({__proto__:null,createSmallBuildingElement:We},Symbol.toStringTag,{value:"Module"}));function Ne(e=10,o=8){const t=new x,n=new m({color:8355711,roughness:1}),s=new i(new J(e,e*1.05,o,16,1),n);s.position.set(0,o/2,0),s.castShadow=!0,s.receiveShadow=!0,t.add(s);const a=e*1.4,r=o,l=e*.8,d=new c(l,r,a),h=new i(d,new m({color:9342606,roughness:1}));h.castShadow=!0,h.receiveShadow=!0;const p=Math.atan(r/a);h.rotation.x=-p,h.position.set(0,r/2,e),h.userData={type:"house"},t.add(h);const E=new c(l,.2,a),f=new i(E,new m({color:7105644}));return f.position.set(0,r,e),f.rotation.x=h.rotation.x,f.castShadow=!0,t.add(f),t}const $e=Object.freeze(Object.defineProperty({__proto__:null,createPlateauElement:Ne},Symbol.toStringTag,{value:"Module"})),$={characters:[{id:"player",name:"Player Character (Male)",module:"./src/objects/playerElement.js",createFn:"createPlayer",animated:!0},{id:"femalePlayer",name:"Player Character (Female)",module:"./src/objects/femalePlayerElement.js",createFn:"createFemalePlayer",animated:!0}],vehicles:[{id:"car",name:"Car",module:"./src/objects/vehicleElement.js",createFn:"createVehicleElement",args:["car"]},{id:"truck",name:"Truck",module:"./src/objects/vehicleElement.js",createFn:"createVehicleElement",args:["truck"]},{id:"bus",name:"Bus",module:"./src/objects/busElement.js",createFn:"createBus"},{id:"motorcycle",name:"Motorcycle",module:"./src/objects/motorcycleElement.js",createFn:"createMotorcycle"}],enemies:[{id:"normal",name:"Normal Zombie",module:"./src/objects/normalZombieElement.js",createFn:"createNormalZombie",animated:!0},{id:"fat",name:"Fat Zombie",module:"./src/objects/fatZombieElement.js",createFn:"createFatZombie",animated:!0},{id:"big",name:"Big Zombie",module:"./src/objects/bigZombieElement.js",createFn:"createBigZombie",animated:!0},{id:"slender",name:"Slenderman",module:"./src/objects/slendermanElement.js",createFn:"createSlenderman",animated:!0},{id:"spider",name:"Spider",module:"./src/objects/spiderElement.js",createFn:"createSpider",animated:!0}],buildings:[{id:"house",name:"House",module:"./src/objects/houseElement.js",createFn:"createHouseElement",args:[1]},{id:"mansion",name:"Mansion",module:"./src/objects/houseElement.js",createFn:"createHouseElement",args:[1.6]},{id:"cabin",name:"Cabin",module:"./src/objects/houseElement.js",createFn:"createHouseElement",args:[.85]},{id:"smallBuilding",name:"Small Building",module:"./src/objects/smallBuildingElement.js",createFn:"createSmallBuildingElement"},{id:"plateau",name:"Plateau",module:"./src/objects/plateauElement.js",createFn:"createPlateauElement"}],rocks:[{id:"rock",name:"Rock",module:"./src/objects/rockElement.js",createFn:"createRockElement"},{id:"rockPillar",name:"Rock Pillar",module:"./src/objects/rockElement.js",createFn:"createRockPillarElement"},{id:"flatBoulder",name:"Flat Boulder",module:"./src/objects/rockElement.js",createFn:"createFlatBoulderElement"},{id:"crystalShard",name:"Crystal Shard",module:"./src/objects/rockElement.js",createFn:"createCrystalShardElement"}],trees:[{id:"oak",name:"Oak Tree",module:"./src/objects/treeOakElement.js",createFn:"createOakTree"},{id:"alpine",name:"Alpine/Pine Tree",module:"./src/objects/treeAlpineElement.js",createFn:"createAlpineTree"}],vegetation:[{id:"bush",name:"Bush",module:"./src/objects/bushElement.js",createFn:"createBush"}]};function qe(e={}){const{shirtColor:o=3447003,mouthStyle:t="serious",showHat:n=!0,showGlasses:s=!1,weapon:a="none"}=e,r=new x,l=new m({color:o}),d=new m({color:16764074}),h=new m({color:2899536}),p=new i(new c(.5,.5,.5),d);if(p.position.y=1.75,r.add(p),n){const v=new m({color:15158332}),Z=new i(new c(.52,.1,.52),v);Z.position.set(0,.3,0),p.add(Z);const A=new i(new c(.52,.02,.35),v);A.position.set(0,.22,.35),p.add(A)}if(s){const v=new m({color:0}),Z=new m({color:1710618,transparent:!0,opacity:.7,metalness:.8,roughness:.2}),A=new i(new c(.18,.12,.02),Z);A.position.set(-.12,.05,.26),p.add(A);const U=new i(new c(.18,.12,.02),Z);U.position.set(.12,.05,.26),p.add(U);const S=new i(new c(.08,.02,.02),v);S.position.set(0,.05,.26),p.add(S);const H=new i(new c(.02,.02,.3),v);H.position.set(-.21,.05,.1),p.add(H);const G=new i(new c(.02,.02,.3),v);G.position.set(.21,.05,.1),p.add(G)}const E=new m({color:0}),f=new i(new c(.06,.06,.02),E);f.position.set(-.1,.08,.26),p.add(f);const w=new i(new c(.06,.06,.02),E);w.position.set(.1,.08,.26),p.add(w);const P=Ye(t);P&&p.add(P);const I=new i(new c(.6,.8,.3),l);I.position.y=1.1,r.add(I);const C=new c(.2,.8,.2);C.translate(0,-.3,0);const k=new x;k.position.set(-.45,1.4,0),r.add(k);const O=new i(C,d);k.add(O);const L=new x;L.position.set(.45,1.4,0),r.add(L);const _=new i(C,d);L.add(_);const j=new c(.25,.8,.25);j.translate(0,-.4,0);const F=new x;F.position.set(-.15,.7,0),r.add(F);const z=new i(j,h);F.add(z);const V=new x;V.position.set(.15,.7,0),r.add(V);const N=new i(j,h);if(V.add(N),a&&a!=="none"){const v=Je(a);v&&(L.add(v),L.rotation.x=-Math.PI/2)}return r.traverse(v=>{v.isMesh&&(v.castShadow=!0,v.receiveShadow=!0)}),{mesh:r,leftArmPivot:k,rightArmPivot:L,leftLegPivot:F,rightLegPivot:V}}function Ye(e){const o=(e||"serious").toLowerCase(),t=new m({color:2824976,roughness:.6,metalness:0});let n=null;if(o==="smile"){const s=new x,a=t.clone(),r=new i(new c(.08,.04,.02),a),l=r.clone(),d=r.clone();r.position.set(-.1,-.15,.26),r.rotation.z=-.2,l.position.set(0,-.16,.26),d.position.set(.1,-.15,.26),d.rotation.z=.2,s.add(r,l,d),n=s}else if(o==="angry"){const s=new m({color:5901324,roughness:.4});n=new i(new c(.26,.05,.02),s),n.position.set(0,-.16,.26),n.rotation.z=-.18}else if(o==="surprised")n=new i(new J(.06,.06,.02,20),t),n.position.set(0,-.14,.26),n.rotation.x=Math.PI/2;else{if(o==="none")return null;n=new i(new c(.22,.06,.02),t),n.position.set(0,-.16,.26)}return n}function Je(e){const o=e.toLowerCase();if(o==="pistol"){const t=new x,n=new i(new c(.12,.12,.35),new m({color:1710618,metalness:.8,roughness:.3}));n.position.set(0,-.28,.2);const s=new i(new c(.06,.06,.15),new m({color:657930,metalness:.9,roughness:.2}));s.position.set(0,-.28,.4);const a=new i(new c(.1,.25,.12),new m({color:2894892}));a.position.set(0,-.42,.15);const r=new i(new c(.03,.05,.03),new m({color:1710618}));return r.position.set(0,-.35,.18),t.add(n,s,a,r),t}if(o==="rifle"||o==="smg"||o==="shotgun"||o==="dmr"){const t=new x,n=new i(new c(.08,.08,.9),new m({color:1710618,metalness:.8,roughness:.3}));n.position.set(0,-.28,.45);const s=new i(new c(.12,.14,.4),new m({color:2894892}));s.position.set(0,-.3,.2);const a=new i(new c(.1,.22,.12),new m({color:2894892}));a.position.set(0,-.44,.15);const r=new i(new c(.1,.12,.25),new m({color:3815994}));r.position.set(0,-.28,-.1);const l=new i(new c(.08,.25,.1),new m({color:1710618}));return l.position.set(0,-.5,.2),t.add(n,s,a,r,l),o==="smg"?(t.scale.set(.8,.8,.8),s.material.color.setHex(5598095)):o==="shotgun"?(t.scale.set(1.1,1,.8),s.material.color.setHex(9132587)):o==="dmr"&&(t.scale.set(.95,.95,1),s.material.color.setHex(3050327)),t}if(o==="sniper"){const t=new x,n=new i(new c(.08,.08,1.3),new m({color:1727514,metalness:.6,roughness:.4}));n.position.set(0,-.28,.65);const s=new i(new c(.14,.16,.5),new m({color:2969622}));s.position.set(0,-.3,.25);const a=new i(new J(.06,.06,.35,8),new m({color:657930,metalness:.9,roughness:.1}));a.rotation.z=Math.PI/2,a.position.set(0,-.18,.4);const r=new i(new c(.12,.14,.3),new m({color:3811866}));return r.position.set(0,-.28,-.05),t.add(n,s,a,r),t}return null}const de=Object.freeze(Object.defineProperty({__proto__:null,createPlayer:qe},Symbol.toStringTag,{value:"Module"}));function Ue(e={}){const{shirtColor:o=15277667,hairColor:t=9127187,hairStyle:n="long",mouthStyle:s="smile",showEarrings:a=!0,showGlasses:r=!1,weapon:l="none"}=e,d=new x,h=new m({color:o}),p=new m({color:16764074}),E=new m({color:4854924}),f=new m({color:t}),w=new i(new c(.45,.45,.45),p);if(w.position.y=1.75,d.add(w),Qe(w,n,f),a){const S=new m({color:16766720,metalness:.9,roughness:.1}),H=new i(new Q(.04,8,8),S);H.position.set(-.25,.05,0),w.add(H);const G=new i(new Q(.04,8,8),S);G.position.set(.25,.05,0),w.add(G)}if(r){const S=new m({color:0}),H=new m({color:1710618,transparent:!0,opacity:.7,metalness:.8,roughness:.2}),G=new i(new c(.16,.11,.02),H);G.position.set(-.11,.05,.24),w.add(G);const ae=new i(new c(.16,.11,.02),H);ae.position.set(.11,.05,.24),w.add(ae);const ie=new i(new c(.06,.02,.02),S);ie.position.set(0,.05,.24),w.add(ie);const re=new i(new c(.02,.02,.28),S);re.position.set(-.19,.05,.08),w.add(re);const ce=new i(new c(.02,.02,.28),S);ce.position.set(.19,.05,.08),w.add(ce)}const P=new m({color:0}),I=new i(new c(.06,.06,.02),P);I.position.set(-.1,.08,.23),w.add(I);const C=new i(new c(.06,.06,.02),P);C.position.set(.1,.08,.23),w.add(C);const k=Xe(s);k&&w.add(k);const O=new i(new c(.5,.5,.28),h);O.position.y=1.25,d.add(O);const L=new i(new c(.45,.3,.26),h);L.position.y=.95,d.add(L);const _=new c(.18,.75,.18);_.translate(0,-.28,0);const j=new x;j.position.set(-.38,1.4,0),d.add(j);const F=new i(_,p);j.add(F);const z=new x;z.position.set(.38,1.4,0),d.add(z);const V=new i(_,p);z.add(V);const N=new c(.22,.75,.22);N.translate(0,-.38,0);const v=new x;v.position.set(-.13,.75,0),d.add(v);const Z=new i(N,E);v.add(Z);const A=new x;A.position.set(.13,.75,0),d.add(A);const U=new i(N,E);if(A.add(U),l&&l!=="none"){const S=Ke(l);S&&(z.add(S),z.rotation.x=-Math.PI/2)}return d.traverse(S=>{S.isMesh&&(S.castShadow=!0,S.receiveShadow=!0)}),{mesh:d,leftArmPivot:j,rightArmPivot:z,leftLegPivot:v,rightLegPivot:A}}function Qe(e,o,t){const n=(o||"long").toLowerCase();if(n==="long"){const s=new i(new c(.48,.12,.48),t);s.position.set(0,.28,0),e.add(s);const a=new i(new c(.48,.6,.12),t);a.position.set(0,-.05,-.28),e.add(a);const r=new i(new c(.12,.5,.35),t);r.position.set(-.28,-.02,0),e.add(r);const l=new i(new c(.12,.5,.35),t);l.position.set(.28,-.02,0),e.add(l)}else if(n==="ponytail"){const s=new i(new c(.48,.12,.48),t);s.position.set(0,.28,0),e.add(s);const a=new i(new c(.2,.15,.2),t);a.position.set(0,.15,-.28),e.add(a);const r=new i(new c(.15,.5,.15),t);r.position.set(0,-.15,-.35),r.rotation.x=.3,e.add(r)}else if(n==="bun"){const s=new i(new c(.48,.12,.48),t);s.position.set(0,.28,0),e.add(s);const a=new i(new Q(.15,8,8),t);a.position.set(0,.32,-.15),e.add(a);const r=new i(new c(.12,.3,.35),t);r.position.set(-.28,.05,0),e.add(r);const l=new i(new c(.12,.3,.35),t);l.position.set(.28,.05,0),e.add(l)}else if(n==="short"){const s=new i(new c(.48,.12,.48),t);s.position.set(0,.28,0),e.add(s);const a=new i(new c(.48,.25,.12),t);a.position.set(0,.1,-.28),e.add(a);const r=new i(new c(.12,.25,.35),t);r.position.set(-.28,.1,0),e.add(r);const l=new i(new c(.12,.25,.35),t);l.position.set(.28,.1,0),e.add(l)}}function Xe(e){const o=(e||"smile").toLowerCase(),t=new m({color:15277667,roughness:.4,metalness:0});let n=null;if(o==="smile"){const s=new x,a=t.clone(),r=new i(new c(.07,.04,.02),a),l=r.clone(),d=r.clone();r.position.set(-.09,-.14,.23),r.rotation.z=-.25,l.position.set(0,-.15,.23),d.position.set(.09,-.14,.23),d.rotation.z=.25,s.add(r,l,d),n=s}else if(o==="angry"){const s=new m({color:12720219,roughness:.4});n=new i(new c(.22,.04,.02),s),n.position.set(0,-.15,.23),n.rotation.z=-.15}else if(o==="surprised")n=new i(new J(.05,.05,.02,16),t),n.position.set(0,-.13,.23),n.rotation.x=Math.PI/2;else{if(o==="none")return null;n=new i(new c(.18,.05,.02),t),n.position.set(0,-.15,.23)}return n}function Ke(e){const o=e.toLowerCase();if(o==="pistol"){const t=new x,n=new i(new c(.12,.12,.35),new m({color:1710618,metalness:.8,roughness:.3}));n.position.set(0,-.28,.2);const s=new i(new c(.06,.06,.15),new m({color:657930,metalness:.9,roughness:.2}));s.position.set(0,-.28,.4);const a=new i(new c(.1,.25,.12),new m({color:2894892}));a.position.set(0,-.42,.15);const r=new i(new c(.03,.05,.03),new m({color:1710618}));return r.position.set(0,-.35,.18),t.add(n,s,a,r),t}if(o==="rifle"||o==="smg"||o==="shotgun"||o==="dmr"){const t=new x,n=new i(new c(.08,.08,.9),new m({color:1710618,metalness:.8,roughness:.3}));n.position.set(0,-.28,.45);const s=new i(new c(.12,.14,.4),new m({color:2894892}));s.position.set(0,-.3,.2);const a=new i(new c(.1,.22,.12),new m({color:2894892}));a.position.set(0,-.44,.15);const r=new i(new c(.1,.12,.25),new m({color:3815994}));r.position.set(0,-.28,-.1);const l=new i(new c(.08,.25,.1),new m({color:1710618}));return l.position.set(0,-.5,.2),t.add(n,s,a,r,l),o==="smg"?(t.scale.set(.8,.8,.8),s.material.color.setHex(5598095)):o==="shotgun"?(t.scale.set(1.1,1,.8),s.material.color.setHex(9132587)):o==="dmr"&&(t.scale.set(.95,.95,1),s.material.color.setHex(3050327)),t}if(o==="sniper"){const t=new x,n=new i(new c(.08,.08,1.3),new m({color:1727514,metalness:.6,roughness:.4}));n.position.set(0,-.28,.65);const s=new i(new c(.14,.16,.5),new m({color:2969622}));s.position.set(0,-.3,.25);const a=new i(new J(.06,.06,.35,8),new m({color:657930,metalness:.9,roughness:.1}));a.rotation.z=Math.PI/2,a.position.set(0,-.18,.4);const r=new i(new c(.12,.14,.3),new m({color:3811866}));return r.position.set(0,-.28,-.05),t.add(n,s,a,r),t}return null}const me=Object.freeze(Object.defineProperty({__proto__:null,createFemalePlayer:Ue},Symbol.toStringTag,{value:"Module"}));function De(e=1){const o=new x,t=new m({color:2924588,roughness:1}),n=2+Math.floor(Math.random()*3);for(let s=0;s<n;s++){const a=(1.2+Math.random()*1)*e,r=new i(new Q(a,6,6),t);r.position.set((Math.random()-.5)*1.2*e,a*.65,(Math.random()-.5)*1.2*e),r.castShadow=!0,o.add(r)}return o}const ue=Object.freeze(Object.defineProperty({__proto__:null,createBush:De},Symbol.toStringTag,{value:"Module"})),et={"./src/objects/playerElement.js":de,"./src/objects/femalePlayerElement.js":me,"./src/objects/vehicleElement.js":He,"./src/objects/busElement.js":ze,"./src/objects/motorcycleElement.js":Oe,"./src/objects/normalZombieElement.js":ke,"./src/objects/fatZombieElement.js":Ce,"./src/objects/bigZombieElement.js":je,"./src/objects/slendermanElement.js":Ie,"./src/objects/spiderElement.js":Te,"./src/objects/houseElement.js":Re,"./src/objects/smallBuildingElement.js":Ve,"./src/objects/plateauElement.js":$e,"./src/objects/rockElement.js":Ae,"./src/objects/treeOakElement.js":Fe,"./src/objects/treeAlpineElement.js":_e,"./src/objects/bushElement.js":ue},y=new fe;y.background=new te(2962486);y.fog=new Ee(2962486,10,60);const M=new be(75,window.innerWidth/window.innerHeight,.1,1e3);M.position.set(5,4,5);const W=new xe({antialias:!0});W.setSize(window.innerWidth,window.innerHeight);W.shadowMap.enabled=!0;W.shadowMap.type=ve;document.getElementById("canvas-container").appendChild(W.domElement);const B=new Ge(M,W.domElement);B.enableDamping=!0;B.dampingFactor=.05;B.target.set(0,1,0);const oe=new Me(16777215,.6);y.add(oe);const R=new Pe(16777215,1);R.position.set(10,20,10);R.castShadow=!0;R.shadow.mapSize.width=2048;R.shadow.mapSize.height=2048;y.add(R);const tt=new Se(60,60),ot=new m({color:4020864,roughness:.8,metalness:.2}),X=new i(tt,ot);X.rotation.x=-Math.PI/2;X.receiveShadow=!0;X.position.y=-.01;y.add(X);const nt=new Be(60,60,6610911,2699841);y.add(nt);let u=null,b=null,g=null,ne="idle",q=1,D=!1,ee=!1;class K{constructor(o,t){this.mesh=o.mesh,this.type=t,this.baseY=this.mesh.position.y,this.animTime=0,this.leftArmPivot=o.leftArmPivot,this.rightArmPivot=o.rightArmPivot,this.leftLegPivot=o.leftLegPivot,this.rightLegPivot=o.rightLegPivot,this.legs=o.legs,this.abdomen=o.abdomen,this.head=o.head}update(o,t){this.animTime+=o*10,this.type==="spider"?this.animateSpider(t):t==="idle"?this.animateIdle():t==="walk"?this.animateWalk():t==="attack"?this.animateAttack():t==="jump"&&this.animateJump(o)}animateSpider(o){if(this.legs){if(o==="idle")this.legs.forEach(t=>{if(t.index===0){const n=t.side===0?1.5:1.2,s=t.side===0?0:1,a=Math.sin(this.animTime*n+s)*.2;t.upper.rotation.x=-Math.PI/4+a,t.lower.rotation.x=Math.PI/1.2-a*.5}else{const n=Math.sin(this.animTime*.5+t.index)*.05;t.upper.rotation.x=-Math.PI/4+n,t.lower.rotation.x=Math.PI/1.2}}),this.mesh.position.y=this.baseY+Math.sin(this.animTime)*.02;else if(o==="walk")this.legs.forEach(t=>{const s=(t.side+t.index)%2===0?0:Math.PI,a=Math.sin(this.animTime*2+s);t.upper.rotation.x=-Math.PI/4+a*.15,t.lower.rotation.x=Math.PI/1.2+a*.1,t.upper.parent&&(t.upper.parent.rotation.z=a*.2)}),this.mesh.position.y=this.baseY+Math.abs(Math.sin(this.animTime*2))*.04;else if(o==="attack")this.legs.forEach(t=>{if(t.index===0){const n=(Math.sin(this.animTime*3)+1)/2;t.upper.rotation.x=-Math.PI/4-n*.6,t.lower.rotation.x=Math.PI/1.2-n*.4,t.upper.parent&&(t.upper.parent.rotation.z=-n*1.2)}}),this.head&&(this.head.rotation.x=Math.sin(this.animTime*3)*.3);else if(o==="jump"){const t=Math.abs(Math.sin(this.animTime*1));this.mesh.position.y=this.baseY+t*2,this.legs.forEach(n=>{const s=Math.sin(this.animTime*1);n.upper.rotation.x=-Math.PI/4+s*.3,n.lower.rotation.x=Math.PI/1.2-s*.3})}}}animateIdle(){this.leftArmPivot&&(this.leftArmPivot.rotation.x=Math.sin(this.animTime)*.1),this.rightArmPivot&&(this.rightArmPivot.rotation.x=-Math.sin(this.animTime)*.1),this.leftLegPivot&&(this.leftLegPivot.rotation.x=0),this.rightLegPivot&&(this.rightLegPivot.rotation.x=0),this.mesh.position.y=this.baseY+Math.sin(this.animTime*2)*.02}animateWalk(){const o=Math.sin(this.animTime)*.5;this.leftLegPivot&&(this.leftLegPivot.rotation.x=o),this.rightLegPivot&&(this.rightLegPivot.rotation.x=-o),this.leftArmPivot&&(this.leftArmPivot.rotation.x=-o*.8),this.rightArmPivot&&(this.rightArmPivot.rotation.x=o*.8),this.mesh.position.y=this.baseY+Math.abs(Math.sin(this.animTime))*.05}animateAttack(){const o=(Math.sin(this.animTime*3)+1)/2,t=-Math.PI/2*o;this.leftArmPivot&&(this.leftArmPivot.rotation.x=t),this.rightArmPivot&&(this.rightArmPivot.rotation.x=t)}animateJump(o){this.mesh.position.y=this.baseY+Math.abs(Math.sin(this.animTime*2))*.5}}const st=document.getElementById("categories");Object.keys($).forEach(e=>{const o=document.createElement("div");o.className="category-group";const t=document.createElement("div");t.className="category-title",t.innerHTML=`<span>${e}</span> <span>${$[e].length}</span>`;const n=document.createElement("div");if(n.className="object-list",e==="enemies"&&n.classList.add("active"),t.onclick=()=>{document.querySelectorAll(".object-list").forEach(s=>s.classList.remove("active")),n.classList.add("active")},e==="enemies"){const s=document.createElement("div");s.className="object-item",s.style.background="rgba(100, 223, 223, 0.2)",s.style.fontWeight="bold",s.innerHTML='<span class="icon">ðŸ‘¥</span> View All Enemies',s.onclick=()=>at(),n.appendChild(s)}$[e].forEach(s=>{const a=document.createElement("div");a.className="object-item",a.innerHTML=`<span class="icon">ðŸ“¦</span> ${s.name}`,a.onclick=()=>we(s),n.appendChild(a)}),o.appendChild(t),o.appendChild(n),st.appendChild(o)});function he(){u&&(y.remove(u),u=null),Array.isArray(b)?(b.forEach(e=>{e.mesh&&y.remove(e.mesh)}),b=null):b&&(b.mesh&&y.remove(b.mesh),b=null),document.querySelectorAll(".enemy-label").forEach(e=>e.remove())}async function we(e){const o=document.getElementById("loading");if(o&&o.classList.remove("hidden"),document.querySelectorAll(".object-item").forEach(t=>t.classList.remove("active")),typeof event<"u"&&event&&typeof event.target<"u"&&event.target){const t=event.target.closest(".object-item");t&&t.classList.add("active")}document.getElementById("object-name").textContent=e.name,document.getElementById("object-type").textContent=e.id,he();try{const t=et[e.module];if(!t)throw new Error(`Module not found in map: ${e.module}`);const n=t[e.createFn];if(!n)throw new Error(`Function ${e.createFn} not found in module`);const s=e.args||[];let a;if(e.id==="car"||e.id==="truck"?a=n(...s):e.id==="bus"||e.id==="motorcycle"?a=n():e.id==="player"?a=n({shirtColor:3447003,mouthStyle:"serious",showHat:!0,showGlasses:!1,weapon:"none"}):e.id==="femalePlayer"?a=n({shirtColor:15277667,hairColor:9127187,hairStyle:"long",mouthStyle:"smile",showEarrings:!0,showGlasses:!1,weapon:"none"}):e.module.includes("rockElement")?a=n(0,0,0):e.module.includes("houseElement")||e.module.includes("smallBuildingElement")||e.module.includes("plateauElement")?a=n(...s):e.module.includes("treeOakElement")||e.module.includes("treeAlpineElement")||e.module.includes("bushElement")?a=n():a=n(y,0,0,0,...s),a.isObject3D)u=a;else if(a.mesh)u=a.mesh,e.animated&&(b=new K(a,e.id));else throw console.error("Unknown object format:",a),new Error("Object format not recognized (must be Object3D or have .mesh property)");y.add(u);const r=document.getElementById("anim-controls"),l=document.getElementById("anim-speed-control");r&&l&&(e.animated?(r.style.display="block",l.style.display="block"):(r.style.display="none",l.style.display="none"));const d={vehicle:document.getElementById("vehicle-color-control"),house:document.getElementById("house-color-control"),bush:document.getElementById("bush-scale-control"),bus:document.getElementById("bus-scale-control"),player:document.getElementById("player-controls"),femalePlayer:document.getElementById("female-player-controls")};Object.values(d).forEach(p=>{p&&(p.style.display="none")}),e.id==="car"||e.id==="truck"?d.vehicle&&(d.vehicle.style.display="block"):e.id==="house"?d.house&&(d.house.style.display="block"):e.id==="bush"?d.bush&&(d.bush.style.display="block"):e.id==="bus"?d.bus&&(d.bus.style.display="block"):e.id==="player"?d.player&&(d.player.style.display="block"):e.id==="femalePlayer"&&d.femalePlayer&&(d.femalePlayer.style.display="block"),g=e,se(u);const h={plateau:27,mansion:35,smallBuilding:21};if(h[e.id]){const E=new le().setFromObject(u).getCenter(new Y),f=h[e.id],w=new Y().subVectors(M.position,E).normalize();M.position.copy(E).add(w.multiplyScalar(f)),M.lookAt(E),d.target.copy(E),d.update();const P=document.getElementById("zoom-slider"),I=document.getElementById("zoom-value");P&&I&&(P.value=f,I.textContent=f.toFixed(1))}}catch(t){console.error("Error loading object:",t),alert("Failed to load object: "+t.message)}finally{o&&o.classList.add("hidden")}}function se(e){const o=new le().setFromObject(e),t=o.getCenter(new Y),n=o.getSize(new Y),s=Math.max(n.x,n.y,n.z),a=M.fov*(Math.PI/180);let r=Math.abs(s/2*Math.tan(a*2));r=Math.max(r,s*1.5),s>20&&(r*=1.2);const l=r;M.position.set(t.x+l,t.y+l*.5,t.z+l),M.lookAt(t),B.target.copy(t),B.update();const d=M.position.distanceTo(t),h=document.getElementById("zoom-slider"),p=document.getElementById("zoom-value");h&&p&&(h.value=d,p.textContent=d.toFixed(1))}window.resetCamera=()=>{u?se(u):(M.position.set(5,4,5),B.target.set(0,1,0))};window.toggleRotation=()=>{D=!D,B.autoRotate=D};window.toggleDayNight=()=>{ee=!ee,ee?(y.background=new te(657930),y.fog.color.set(657930),oe.intensity=.1,R.intensity=.2):(y.background=new te(2962486),y.fog.color.set(2962486),oe.intensity=.6,R.intensity=1)};window.applyVehicleColor=async()=>{if(!g||g.id!=="car"&&g.id!=="truck")return;const o=document.getElementById("vehicle-color").value,t=parseInt(o.slice(1),16),n={...g,customColor:t};await pe(n)};window.randomVehicleColor=async()=>{if(!g||g.id!=="car"&&g.id!=="truck")return;const e=[1668818,15921906,1118481,9116186,15022389,15844367,48340,16733986,5025616],o=e[Math.floor(Math.random()*e.length)];document.getElementById("vehicle-color").value="#"+o.toString(16).padStart(6,"0"),await applyVehicleColor()};document.getElementById("bush-scale").addEventListener("input",e=>{document.getElementById("bush-scale-value").textContent=parseFloat(e.target.value).toFixed(1)});window.applyBushScale=async()=>{if(!g||g.id!=="bush")return;const e=document.getElementById("bush-scale"),o=parseFloat(e.value);u&&(y.remove(u),u=null),b=null;try{const n=(await T(()=>Promise.resolve().then(()=>ue),void 0)).createBush;u=n(o),y.add(u)}catch(t){console.error("Error reloading bush with scale:",t)}};document.getElementById("bus-scale").addEventListener("input",e=>{document.getElementById("bus-scale-value").textContent=parseFloat(e.target.value).toFixed(1)});window.applyBusScale=async()=>{if(!g||g.id!=="bus")return;const e=document.getElementById("bus-scale"),o=parseFloat(e.value);u&&(y.remove(u),u=null),b=null;try{const n=(await T(()=>import("./spiderElement-Du5wmdeG.js").then(a=>a.n),__vite__mapDeps([0,1]))).createBus;u=n(o),y.add(u)}catch(t){console.error("Error reloading bus with scale:",t)}};window.applyPlayerSettings=async()=>{if(!g||g.id!=="player")return;const e=document.getElementById("player-shirt-color").value,o=document.getElementById("player-mouth").value,t=document.getElementById("player-hat").checked,n=document.getElementById("player-glasses").checked,s=document.getElementById("player-weapon").value;u&&(y.remove(u),u=null),b=null;try{const r=(await T(()=>Promise.resolve().then(()=>de),void 0)).createPlayer,l=r({shirtColor:parseInt(e.replace("#","0x")),mouthStyle:o,showHat:t,showGlasses:n,weapon:s});l.mesh?(u=l.mesh,g.animated&&(b=new K(l,g.id))):u=l,y.add(u)}catch(a){console.error("Error reloading player with settings:",a)}};window.applyFemalePlayerSettings=async()=>{if(!g||g.id!=="femalePlayer")return;const e=document.getElementById("female-shirt-color").value,o=document.getElementById("female-hair-color").value,t=document.getElementById("female-hair-style").value,n=document.getElementById("female-mouth").value,s=document.getElementById("female-earrings").checked,a=document.getElementById("female-glasses").checked,r=document.getElementById("female-weapon").value;u&&(y.remove(u),u=null),b=null;try{const d=(await T(()=>Promise.resolve().then(()=>me),void 0)).createFemalePlayer,h=d({shirtColor:parseInt(e.replace("#","0x")),hairColor:parseInt(o.replace("#","0x")),hairStyle:t,mouthStyle:n,showEarrings:s,showGlasses:a,weapon:r});h.mesh?(u=h.mesh,g.animated&&(b=new K(h,g.id))):u=h,y.add(u)}catch(l){console.error("Error reloading female player with settings:",l)}};window.applyHouseColors=async()=>{if(!g||!["house","mansion","cabin"].includes(g.id))return;const e=document.getElementById("wall-color"),o=document.getElementById("roof-color"),t=parseInt(e.value.slice(1),16),n=parseInt(o.value.slice(1),16),s={...g,customWallColor:t,customRoofColor:n};await pe(s)};async function pe(e){u&&(y.remove(u),u=null),b=null;try{const t=(await import(e.module))[e.createFn],n=e.args||[];let s;if(e.id==="car"||e.id==="truck")s=t(n[0]||e.id,e.customColor||null);else if(["house","mansion","cabin"].includes(e.id))s=t(n[0]||1,e.customWallColor,e.customRoofColor);else return;if(s.isObject3D)u=s;else if(s.mesh)u=s.mesh;else{console.error("Unknown object format:",s);return}y.add(u),se(u)}catch(o){console.error("Error reloading object with color:",o)}}async function at(){document.querySelectorAll(".object-item").forEach(e=>e.classList.remove("active")),event.target.closest(".object-item").classList.add("active"),document.getElementById("object-name").textContent="All Enemies",document.getElementById("object-type").textContent="Group View",he(),document.getElementById("anim-controls").style.display="block",document.getElementById("anim-speed-control").style.display="block",document.getElementById("vehicle-color-control").style.display="none",document.getElementById("house-color-control").style.display="none";try{const{createNormalZombie:e}=await T(async()=>{const{createNormalZombie:l}=await import("./slendermanElement-C-gf9PPq.js").then(d=>d.a0);return{createNormalZombie:l}},[]),{createFatZombie:o}=await T(async()=>{const{createFatZombie:l}=await import("./slendermanElement-C-gf9PPq.js").then(d=>d.$);return{createFatZombie:l}},[]),{createBigZombie:t}=await T(async()=>{const{createBigZombie:l}=await import("./slendermanElement-C-gf9PPq.js").then(d=>d._);return{createBigZombie:l}},[]),{createSlenderman:n}=await T(async()=>{const{createSlenderman:l}=await import("./slendermanElement-C-gf9PPq.js").then(d=>d.Z);return{createSlenderman:l}},[]),{createSpider:s}=await T(async()=>{const{createSpider:l}=await import("./spiderElement-Du5wmdeG.js").then(d=>d.s);return{createSpider:l}},__vite__mapDeps([0,1])),a=[],r=[{type:"normal",x:-8,name:"Normal Zombie",createFn:e},{type:"fat",x:-4,name:"Fat Zombie",createFn:o},{type:"big",x:0,name:"Big Zombie",createFn:t},{type:"slender",x:4,name:"Slenderman",createFn:n},{type:"spider",x:8,name:"Spider",createFn:s}];document.querySelectorAll(".enemy-label").forEach(l=>l.remove()),r.forEach(({type:l,x:d,name:h,createFn:p})=>{const E=p(y,d,0,0),f=new K(E,l);f.enemyType=l,f.enemyName=h,a.push(f);const w=document.createElement("div");w.className="enemy-label",w.textContent=h,w.id=`enemy-label-${l}`,document.body.appendChild(w)}),b=a,g=null,M.position.set(0,4,15),B.target.set(0,2,0),B.update()}catch(e){console.error("Error loading all enemies:",e),alert("Failed to load all enemies: "+e.message)}}function it(){Array.isArray(b)&&b.forEach(e=>{if(!e.enemyType||!e.mesh)return;const o=e.mesh.position.clone(),t=e.enemyType==="slender"?3.5:e.enemyType==="big"?5:e.enemyType==="spider"?1.5:2.5;o.y+=t,o.project(M);const n=(o.x*.5+.5)*window.innerWidth,s=(-(o.y*.5)+.5)*window.innerHeight,a=document.getElementById(`enemy-label-${e.enemyType}`);a&&(a.style.left=n+"px",a.style.top=s+"px")})}document.querySelectorAll("[data-anim]").forEach(e=>{e.addEventListener("click",o=>{document.querySelectorAll("[data-anim]").forEach(t=>t.classList.remove("active")),o.target.classList.add("active"),ne=o.target.dataset.anim})});document.getElementById("anim-speed").addEventListener("input",e=>{q=parseFloat(e.target.value),document.getElementById("speed-value").textContent=q.toFixed(1)});document.getElementById("zoom-slider").addEventListener("input",e=>{const o=parseFloat(e.target.value);document.getElementById("zoom-value").textContent=o.toFixed(1);const t=new Y().subVectors(M.position,B.target).normalize();M.position.copy(B.target).add(t.multiplyScalar(o)),B.update()});B.addEventListener("change",()=>{const e=M.position.distanceTo(B.target),o=document.getElementById("zoom-slider"),t=document.getElementById("zoom-value");o&&t&&document.activeElement!==o&&(o.value=e,t.textContent=e.toFixed(1))});window.addEventListener("resize",()=>{M.aspect=window.innerWidth/window.innerHeight,M.updateProjectionMatrix(),W.setSize(window.innerWidth,window.innerHeight)});const rt=new Le;function ye(){requestAnimationFrame(ye);const e=rt.getDelta();b&&q>0&&(Array.isArray(b)?(b.forEach(o=>{o.update(e*q,ne)}),it()):b.update(e*q,ne)),B.update(),W.render(y,M)}ye();(async()=>{const e=document.getElementById("loading");try{if($.characters){const o=$.characters.find(t=>t.id==="player");o&&(console.log("Loading default object:",o),await we(o))}}catch(o){console.error("Error loading default object:",o)}e&&e.classList.add("hidden")})();
