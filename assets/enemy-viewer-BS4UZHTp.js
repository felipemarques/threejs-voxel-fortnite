import{I as P,C as x,J as b,U as L,W as A,Y as y,O as M,Q as E,p as S,P as I,M as k,a as C,G as F,z as T,y as W,x as j,w as z,X as B}from"./slendermanElement-5duizSjO.js";import{O as H}from"./OrbitControls-CBHEahkU.js";const o=new P;o.background=new x(2962486);o.fog=new b(2962486,10,50);const n=new L(75,window.innerWidth/window.innerHeight,.1,1e3);n.position.set(0,3,12);const s=new A({antialias:!0});s.setSize(window.innerWidth,window.innerHeight);s.shadowMap.enabled=!0;s.shadowMap.type=y;document.getElementById("canvas-container").appendChild(s.domElement);const a=new H(n,s.domElement);a.enableDamping=!0;a.dampingFactor=.05;a.target.set(0,2,0);const J=new M(16777215,.6);o.add(J);const m=new E(16777215,.8);m.position.set(5,10,5);m.castShadow=!0;m.shadow.mapSize.width=2048;m.shadow.mapSize.height=2048;o.add(m);const v=new S(16739179,.5);v.position.set(-5,5,-5);o.add(v);const Y=new I(30,30),Z=new k({color:4020864,roughness:.8,metalness:.2}),f=new C(Y,Z);f.rotation.x=-Math.PI/2;f.receiveShadow=!0;o.add(f);const G=new F(30,30,6610911,2699841);o.add(G);class R{constructor(t,i){this.mesh=t.mesh,this.leftArmPivot=t.leftArmPivot,this.rightArmPivot=t.rightArmPivot,this.leftLegPivot=t.leftLegPivot,this.rightLegPivot=t.rightLegPivot,this.zombieType=i,this.baseY=t.mesh.position.y,this.animTime=0,this.jumpVelocity=0,this.isJumping=!1}updateAnimation(t,i){i==="idle"?this.animateIdle(t):i==="walk"?this.animateWalk(t):i==="attack"?this.animateAttack(t):i==="jump"&&this.animateJump(t)}animateIdle(t){this.leftArmPivot&&(this.leftArmPivot.rotation.x=Math.sin(this.animTime)*.1),this.rightArmPivot&&(this.rightArmPivot.rotation.x=-Math.sin(this.animTime)*.1),this.leftLegPivot&&(this.leftLegPivot.rotation.x=0),this.rightLegPivot&&(this.rightLegPivot.rotation.x=0),this.mesh.position.y=this.baseY+Math.sin(this.animTime*2)*.05}animateWalk(t){const i=Math.sin(this.animTime)*.5;this.leftLegPivot&&(this.leftLegPivot.rotation.x=i),this.rightLegPivot&&(this.rightLegPivot.rotation.x=-i),this.leftArmPivot&&(this.leftArmPivot.rotation.x=-i*.8),this.rightArmPivot&&(this.rightArmPivot.rotation.x=i*.8),this.mesh.position.y=this.baseY+Math.abs(Math.sin(this.animTime))*.1}animateAttack(t){const i=(Math.sin(this.animTime*3)+1)/2,r=-Math.PI/2.2*i;this.leftArmPivot&&(this.leftArmPivot.rotation.x=r),this.rightArmPivot&&(this.rightArmPivot.rotation.x=r),this.leftLegPivot&&(this.leftLegPivot.rotation.x=0),this.rightLegPivot&&(this.rightLegPivot.rotation.x=0)}animateJump(t){this.isJumping||(this.jumpVelocity=5,this.isJumping=!0),this.jumpVelocity-=9.8*t,this.mesh.position.y+=this.jumpVelocity*t,this.mesh.position.y<=this.baseY&&(this.mesh.position.y=this.baseY,this.jumpVelocity=0,this.isJumping=!1);const i=-Math.PI/4;this.leftArmPivot&&(this.leftArmPivot.rotation.x=i),this.rightArmPivot&&(this.rightArmPivot.rotation.x=i),this.leftLegPivot&&(this.leftLegPivot.rotation.x=Math.PI/6),this.rightLegPivot&&(this.rightLegPivot.rotation.x=Math.PI/6)}}const p=[],V=[{type:"normal",x:-6,label:"Normal Zombie",createFn:T},{type:"fat",x:-2,label:"Fat Zombie",createFn:W},{type:"big",x:2,label:"Big Zombie",createFn:j},{type:"slender",x:6,label:"Slenderman",createFn:z}];V.forEach(({type:e,x:t,label:i,createFn:r})=>{const d=r(o,t,0,0),h=new R(d,e);p.push(h);const l=document.createElement("div");l.className="zombie-label",l.textContent=i,l.id=`label-${e}`,document.getElementById("canvas-container").appendChild(l)});let w="walk",g=1,c=!1;document.querySelectorAll("[data-anim]").forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll("[data-anim]").forEach(t=>t.classList.remove("active")),e.classList.add("active"),w=e.dataset.anim})});document.getElementById("anim-speed").addEventListener("input",e=>{g=parseFloat(e.target.value),document.getElementById("speed-value").textContent=g.toFixed(1)});window.resetCamera=()=>{n.position.set(0,3,12),a.target.set(0,2,0)};window.toggleRotation=()=>{c=!c,a.autoRotate=c,a.autoRotateSpeed=2};function O(){p.forEach(e=>{const t=e.mesh.position.clone(),i=e.zombieType==="slender"?3.5:e.zombieType==="big"?5:2.5;t.y+=i,t.project(n);const r=(t.x*.5+.5)*window.innerWidth,d=(-(t.y*.5)+.5)*window.innerHeight,h=document.getElementById(`label-${e.zombieType}`);h&&(h.style.left=r+"px",h.style.top=d+"px")})}const q=new B;function u(){requestAnimationFrame(u);const e=q.getDelta()*g;p.forEach(t=>{t.animTime+=e*10,t.updateAnimation(e,w)}),a.update(),O(),s.render(o,n)}window.addEventListener("resize",()=>{n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),s.setSize(window.innerWidth,window.innerHeight)});u();
