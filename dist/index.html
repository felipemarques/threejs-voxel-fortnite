<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voxel Firecraft Prototype</title>
    <link rel="icon" type="image/png" href="/threejs-voxel-firecraft/dist/assets/favicon-BAg40dZS.png">
  <script type="module" crossorigin src="/threejs-voxel-firecraft/dist/assets/index-DBT8-GVJ.js"></script>
  <link rel="stylesheet" crossorigin href="/threejs-voxel-firecraft/dist/assets/index-DrV3BYYk.css">
</head>
<body>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6TFT1HY31X"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-6TFT1HY31X');
    </script>

    <div id="game-container"></div>

    <div id="ui-layer">
        <!-- Crosshair -->
        <div id="crosshair"></div>
        <!-- Sniper Scope Overlay -->
        <div id="scope-overlay" class="hidden"></div>
        <button id="float-btn" class="hidden">FLOAT</button>
        <!-- Hover info above crosshair -->
        <div id="hover-info" style="position:absolute; top:48%; left:50%; transform:translate(-50%, -100%); color:#fff; pointer-events:none; font-family:Arial; font-size:14px; text-shadow:0 0 6px rgba(0,0,0,0.8);"></div>
        <!-- Click selection info -->
        <div id="selection-info" class="hidden" aria-live="polite"></div>
        <!-- Vehicle HUD -->
        <div id="vehicle-hud" class="hidden" aria-label="Vehicle HUD">
            <div class="vh-row">
                <span>Speed</span><span id="vehicle-speed">0</span><span>km/h</span>
            </div>
            <div class="vh-row fuel-row">
                <span>Fuel</span>
                <div id="vehicle-fuel-bar"><div id="vehicle-fuel-fill"></div></div>
                <span id="vehicle-fuel-text">100%</span>
            </div>
            <div class="vh-row">
                <span>Distance</span><span id="vehicle-distance">0.00</span><span>km</span>
            </div>
            <div class="vh-row">
                <span>Efficiency</span><span id="vehicle-efficiency">0.00</span><span>km/L</span>
            </div>
            <div class="vh-row">
                <span>Range</span><span id="vehicle-range">0.0</span><span>km</span>
            </div>
        </div>
        <!-- Studio palette -->
        <div id="studio-palette" class="hidden" aria-label="Studio Palette">
            <div class="palette-title">STUDIO TOOLS</div>
            <div class="palette-grid">
                <button id="studio-resume-btn" data-action="resume">Resume & Lock</button>
                <button data-prefab="house">House</button>
                <button data-prefab="mansion">Mansion</button>
                <button data-prefab="cabin">Cabin</button>
                <button data-prefab="smallBuilding">Small Building</button>
                <button data-prefab="plateau">Plateau</button>
                <button data-prefab="rock">Rock</button>
                <div class="palette-submenu">
                    <button data-prefab="tree" data-submenu="tree-menu">Tree ▾</button>
                    <div id="tree-menu" class="submenu hidden">
                        <button data-prefab="tree" data-tree-type="Oak">Oak</button>
                        <button data-prefab="tree" data-tree-type="Pine">Pine</button>
                    </div>
                </div>
                <div class="palette-submenu">
                    <button data-prefab="vehicle" data-submenu="vehicle-menu">Vehicle ▾</button>
                    <div id="vehicle-menu" class="submenu hidden">
                        <button data-prefab="vehicle" data-vehicle-type="car">Car</button>
                        <button data-prefab="vehicle" data-vehicle-type="truck">Truck</button>
                    </div>
                </div>
                <button data-prefab="crate">Crate</button>
            </div>
        </div>

        <!-- Storm Timer -->
        <div id="storm-timer">Storm closes in: <span id="timer-value">00:30</span></div>
        <!-- Minimap -->
        <div id="minimap" aria-label="Minimap">
            <canvas id="minimap-canvas" width="180" height="180"></canvas>
            <div id="minimap-label">MAP</div>
        </div>

        <!-- Camera Mode Hint -->
        <div id="camera-hint" style="position: absolute; top: 60px; left: 50%; transform: translateX(-50%); color: rgba(255,255,255,0.6); font-size: 12px; font-family: Arial;">Press V to toggle camera</div>
        <div id="hotkey-hint" class="hidden" style="position: absolute; top: 80px; left: 50%; transform: translateX(-50%); color: rgba(255,255,255,0.75); font-size: 12px; font-family: Arial; cursor: pointer; text-decoration: underline;">Press H for shortcuts</div>

        <!-- Interaction Prompt -->
        <div id="interaction-prompt" class="hidden">Press E to interact</div>

    <!-- Dashboard -->
        <div id="dashboard" style="position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.5); color: white; padding: 10px; border-radius: 5px; font-family: monospace; font-size: 12px;">
            <div>FPS: <span id="fps-counter">0</span></div>
            <div>Enemies: <span id="enemy-count">0</span></div>
            <div>Killed: <span id="kill-count">0</span></div>
            <div>Drops: <span id="drop-count">0</span></div>
            <div>Distance: <span id="distance-traveled">0.00</span> km</div>
            <div>Speed: <span id="player-speed">0.0</span> km/h</div>
            <div>Memory: <span id="memory-usage">0</span> MB</div>
            <div id="target-inspect">Target: ---</div>
            <div id="debug-info" style="display: none; color: #f1c40f; margin-top: 10px; border-top: 1px solid #555; padding-top: 5px;">
                <div>Target: <span id="debug-target-name">None</span></div>
                <div>ID: <span id="debug-target-id">---</span></div>
        </div>
    </div>
        <div id="debug-container" style="position:absolute; top:0; left:0; pointer-events:none;"></div>

    <!-- HUD -->
    <div id="hud">
        <!-- Health & Shield -->
        <div id="status-bars">
            <div class="bar-container">
                <div class="bar-label">SHIELD</div>
                <div class="bar-bg">
                    <div id="shield-bar" class="bar-fill shield-fill" style="width: 100%;"></div>
                </div>
                <span id="shield-text">100</span>
            </div>
            <div class="bar-container">
                <div class="bar-label">HP</div>
                <div class="bar-bg">
                    <div id="health-bar" class="bar-fill health-fill" style="width: 100%;"></div>
                </div>
                <span id="health-text">100</span>
            </div>
            <div class="bar-container">
                <div class="bar-label">STAMINA</div>
                <div class="bar-bg">
                    <div id="stamina-bar" class="bar-fill stamina-fill" style="width: 100%;"></div>
                </div>
                <span id="stamina-text">100</span>
            </div>
        </div>

        <!-- Weapon Info (Bottom Right) -->
        <div id="weapon-info">
            <span id="weapon-name">Pistol</span>
            <span id="ammo-count">12 / 60</span>
        </div>

        <!-- Hotbar (Bottom Center) -->
        <div id="hotbar">
            <div class="slot active" data-slot="1">1</div>
            <div class="slot" data-slot="2">2</div>
            <div class="slot" data-slot="3">3</div>
            <div class="slot" data-slot="4">4</div>
            <div class="slot" data-slot="5">5</div>
            <div class="slot" data-slot="6">6</div>
        </div>

        <!-- Game Over / Victory Screen -->
        <div id="game-over-screen" class="hidden">
            <h1 id="game-over-title">VICTORY ROYALE!</h1>
            <button id="restart-btn">Play Again</button>
        </div>
    </div>
    </div>

    <!-- Main Menu (also used for pause) -->
    <div id="main-menu">
        <h1 class="game-title">VOXEL FIRECRAFT</h1>
        
        <div class="menu-container">
            <div class="menu-group">
                <label>Difficulty</label>
                <select id="setting-difficulty">
                    <option value="easy">Easy</option>
                    <option value="medium" selected>Medium</option>
                    <option value="hard">Hard</option>
                </select>
            </div>

            <div class="menu-group">
                <label>Game Mode</label>
                <select id="setting-game-mode">
                    <option value="survival" selected>Survival / Arcade</option>
                    <option value="arena">Arena (Krunker-like)</option>
                    <option value="matrix">Matrix (Player Only)</option>
                    <option value="studio">Studio (Build Blocks)</option>
                </select>
            </div>

            <div class="menu-group">
                <label>Enemies: <span id="enemy-count-val">15</span></label>
                <input type="range" id="setting-enemies" min="5" max="500" step="5" value="15">
            </div>

            <div class="menu-group">
                <label>Storm Time (s): <span id="storm-time-val">180</span></label>
                <input type="range" id="setting-storm" min="60" max="1800" step="30" value="180">
            </div>

            <div class="menu-group">
                <label>Map Size: <span id="map-size-val">400</span></label>
                <input type="range" id="setting-map-size" min="150" max="800" step="10" value="400">
            </div>

            <div class="menu-group">
                <label>Camera Mode</label>
                <select id="setting-camera">
                    <option value="TPS" selected>Third Person</option>
                    <option value="FPS">First Person</option>
                </select>
            </div>

            <div class="menu-group" style="flex-direction: row; align-items: center; gap: 10px;">
                <div style="display:flex; flex-direction:column; gap:8px;">
                    <label style="margin:0; color:white; font-weight:bold;">Debug Options</label>
                    <div style="display:flex; align-items:center; gap:8px;">
                        <input type="checkbox" id="setting-debug" style="width: 20px; height: 20px;">
                        <label for="setting-debug" style="margin: 0; color:white;">Debug Mode</label>
                    </div>
                    <div style="display:flex; align-items:center; gap:8px;">
                        <input type="checkbox" id="setting-minimap" style="width: 20px; height: 20px;" checked>
                        <label for="setting-minimap" style="margin: 0; color:white;">Show Minimap</label>
                    </div>
                    <div style="display:flex; align-items:center; gap:8px; margin-top:8px;">
                        <input type="checkbox" id="setting-touch-controls" style="width:20px; height:20px;">
                        <label for="setting-touch-controls" style="margin:0; color:white;">Enable Touch Controls (Mobile)</label>
                    </div>
                </div>
            </div>
            
            <div class="menu-group">
                <label>Background Music</label>
                <div style="display:flex; align-items:center; gap:8px; margin-bottom:10px;">
                    <input type="checkbox" id="setting-music-enabled" checked style="width:20px; height:20px;">
                    <label for="setting-music-enabled" style="margin:0; color:white;">Enable Background Music</label>
                </div>
                <div style="display:flex; align-items:center; gap:10px;">
                    <label style="margin:0; min-width:60px;">Volume:</label>
                    <input type="range" id="setting-music-volume" min="0" max="100" value="50" style="flex:1;">
                    <span id="setting-music-volume-val" style="color:white; font-weight:bold; min-width:35px;">50</span>
                </div>
            </div>

            <button id="play-btn">PLAY GAME</button>
            <button id="quit-btn">QUIT GAME</button>
        </div>
    </div>

    <!-- Touch controls container (populated/shown by JS when enabled) -->
    <div id="touch-controls" class="hidden" aria-hidden="true"></div>

    <!-- Shortcuts Modal -->
    <div id="hotkey-modal" class="hidden" aria-hidden="true" style="position: fixed; inset: 0; background: rgba(0,0,0,0.65); display: flex; align-items: center; justify-content: center; z-index: 9999;">
        <div style="background: rgba(20,20,20,0.9); color: #f8f8f8; padding: 18px 22px; border-radius: 10px; min-width: 300px; box-shadow: 0 12px 32px rgba(0,0,0,0.55); font-family: Arial; position: relative;">
            <button id="hotkey-modal-close" style="position: absolute; top: 8px; right: 10px; background: transparent; border: none; color: #fff; font-size: 18px; cursor: pointer;">×</button>
            <h3 style="margin-top: 0; margin-bottom: 10px;">Shortcuts (Studio)</h3>
            <ul style="list-style: none; padding-left: 0; margin: 0;">
                <li><strong>H</strong> — abrir/fechar esta ajuda</li>
                <li><strong>L</strong> — fazer cair loots/drops do céu perto do jogador</li>
                <li><strong>ESC</strong> — mostrar menu/paleta de construção</li>
                <li><strong>V</strong> — alternar câmera</li>
            </ul>
        </div>
    </div>
</body>
</html>
